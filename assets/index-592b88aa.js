var _S=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var aK=_S((zt,Ht)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ss={},CS={get exports(){return Ss},set exports(n){Ss=n}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),kS=Symbol.for("react.portal"),xS=Symbol.for("react.fragment"),TS=Symbol.for("react.strict_mode"),ES=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),AS=Symbol.for("react.context"),IS=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),RS=Symbol.for("react.memo"),VS=Symbol.for("react.lazy"),ww=Symbol.iterator;function LS(n){return n===null||typeof n!="object"?null:(n=ww&&n[ww]||n["@@iterator"],typeof n=="function"?n:null)}var a_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l_=Object.assign,c_={};function er(n,e,t){this.props=n,this.context=e,this.refs=c_,this.updater=t||a_}er.prototype.isReactComponent={};er.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};er.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function u_(){}u_.prototype=er.prototype;function Sm(n,e,t){this.props=n,this.context=e,this.refs=c_,this.updater=t||a_}var Am=Sm.prototype=new u_;Am.constructor=Sm;l_(Am,er.prototype);Am.isPureReactComponent=!0;var bw=Array.isArray,d_=Object.prototype.hasOwnProperty,Im={current:null},h_={key:!0,ref:!0,__self:!0,__source:!0};function f_(n,e,t){var i,s={},o=null,r=null;if(e!=null)for(i in e.ref!==void 0&&(r=e.ref),e.key!==void 0&&(o=""+e.key),e)d_.call(e,i)&&!h_.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Ba,type:n,key:o,ref:r,props:s,_owner:Im.current}}function OS(n,e){return{$$typeof:Ba,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Pm(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ba}function MS(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vw=/\/+/g;function fd(n,e){return typeof n=="object"&&n!==null&&n.key!=null?MS(""+n.key):e.toString(36)}function $l(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var r=!1;if(n===null)r=!0;else switch(o){case"string":case"number":r=!0;break;case"object":switch(n.$$typeof){case Ba:case kS:r=!0}}if(r)return r=n,s=s(r),n=i===""?"."+fd(r,0):i,bw(s)?(t="",n!=null&&(t=n.replace(vw,"$&/")+"/"),$l(s,e,t,"",function(c){return c})):s!=null&&(Pm(s)&&(s=OS(s,t+(!s.key||r&&r.key===s.key?"":(""+s.key).replace(vw,"$&/")+"/")+n)),e.push(s)),1;if(r=0,i=i===""?".":i+":",bw(n))for(var a=0;a<n.length;a++){o=n[a];var l=i+fd(o,a);r+=$l(o,e,t,l,s)}else if(l=LS(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=i+fd(o,a++),r+=$l(o,e,t,l,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return r}function sl(n,e,t){if(n==null)return n;var i=[],s=0;return $l(n,i,"","",function(o){return e.call(t,o,s++)}),i}function NS(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var vt={current:null},Wl={transition:null},BS={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:Im};ee.Children={map:sl,forEach:function(n,e,t){sl(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return sl(n,function(){e++}),e},toArray:function(n){return sl(n,function(e){return e})||[]},only:function(n){if(!Pm(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ee.Component=er;ee.Fragment=xS;ee.Profiler=ES;ee.PureComponent=Sm;ee.StrictMode=TS;ee.Suspense=PS;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BS;ee.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=l_({},n.props),s=n.key,o=n.ref,r=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,r=Im.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)d_.call(e,l)&&!h_.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ba,type:n.type,key:s,ref:o,props:i,_owner:r}};ee.createContext=function(n){return n={$$typeof:AS,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:SS,_context:n},n.Consumer=n};ee.createElement=f_;ee.createFactory=function(n){var e=f_.bind(null,n);return e.type=n,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(n){return{$$typeof:IS,render:n}};ee.isValidElement=Pm;ee.lazy=function(n){return{$$typeof:VS,_payload:{_status:-1,_result:n},_init:NS}};ee.memo=function(n,e){return{$$typeof:RS,type:n,compare:e===void 0?null:e}};ee.startTransition=function(n){var e=Wl.transition;Wl.transition={};try{n()}finally{Wl.transition=e}};ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ee.useCallback=function(n,e){return vt.current.useCallback(n,e)};ee.useContext=function(n){return vt.current.useContext(n)};ee.useDebugValue=function(){};ee.useDeferredValue=function(n){return vt.current.useDeferredValue(n)};ee.useEffect=function(n,e){return vt.current.useEffect(n,e)};ee.useId=function(){return vt.current.useId()};ee.useImperativeHandle=function(n,e,t){return vt.current.useImperativeHandle(n,e,t)};ee.useInsertionEffect=function(n,e){return vt.current.useInsertionEffect(n,e)};ee.useLayoutEffect=function(n,e){return vt.current.useLayoutEffect(n,e)};ee.useMemo=function(n,e){return vt.current.useMemo(n,e)};ee.useReducer=function(n,e,t){return vt.current.useReducer(n,e,t)};ee.useRef=function(n){return vt.current.useRef(n)};ee.useState=function(n){return vt.current.useState(n)};ee.useSyncExternalStore=function(n,e,t){return vt.current.useSyncExternalStore(n,e,t)};ee.useTransition=function(){return vt.current.useTransition()};ee.version="18.2.0";(function(n){n.exports=ee})(CS);const FS=yS(Ss);var Ah={},Ih={},DS={get exports(){return Ih},set exports(n){Ih=n}},qt={},Ph={},zS={get exports(){return Ph},set exports(n){Ph=n}},m_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(M,G){var J=M.length;M.push(G);e:for(;0<J;){var Ae=J-1>>>1,$e=M[Ae];if(0<s($e,G))M[Ae]=G,M[J]=$e,J=Ae;else break e}}function t(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var G=M[0],J=M.pop();if(J!==G){M[0]=J;e:for(var Ae=0,$e=M.length,Ys=$e>>>1;Ae<Ys;){var jn=2*(Ae+1)-1,hr=M[jn],En=jn+1,qn=M[En];if(0>s(hr,J))En<$e&&0>s(qn,hr)?(M[Ae]=qn,M[En]=J,Ae=En):(M[Ae]=hr,M[jn]=J,Ae=jn);else if(En<$e&&0>s(qn,J))M[Ae]=qn,M[En]=J,Ae=En;else break e}}return G}function s(M,G){var J=M.sortIndex-G.sortIndex;return J!==0?J:M.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();n.unstable_now=function(){return r.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(M){for(var G=t(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=M)i(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function E(M){if(b=!1,C(M),!p)if(t(l)!==null)p=!0,ur(V);else{var G=t(c);G!==null&&dr(E,G.startTime-M)}}function V(M,G){p=!1,b&&(b=!1,v(I),I=-1),f=!0;var J=h;try{for(C(G),d=t(l);d!==null&&(!(d.expirationTime>G)||M&&!ot());){var Ae=d.callback;if(typeof Ae=="function"){d.callback=null,h=d.priorityLevel;var $e=Ae(d.expirationTime<=G);G=n.unstable_now(),typeof $e=="function"?d.callback=$e:d===t(l)&&i(l),C(G)}else i(l);d=t(l)}if(d!==null)var Ys=!0;else{var jn=t(c);jn!==null&&dr(E,jn.startTime-G),Ys=!1}return Ys}finally{d=null,h=J,f=!1}}var A=!1,P=null,I=-1,$=5,j=-1;function ot(){return!(n.unstable_now()-j<$)}function vi(){if(P!==null){var M=n.unstable_now();j=M;var G=!0;try{G=P(!0,M)}finally{G?Vt():(A=!1,P=null)}}else A=!1}var Vt;if(typeof w=="function")Vt=function(){w(vi)};else if(typeof MessageChannel<"u"){var dn=new MessageChannel,Gu=dn.port2;dn.port1.onmessage=vi,Vt=function(){Gu.postMessage(null)}}else Vt=function(){x(vi,0)};function ur(M){P=M,A||(A=!0,Vt())}function dr(M,G){I=x(function(){M(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(M){M.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,ur(V))},n.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<M?Math.floor(1e3/M):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(M){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var J=h;h=G;try{return M()}finally{h=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(M,G){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var J=h;h=M;try{return G()}finally{h=J}},n.unstable_scheduleCallback=function(M,G,J){var Ae=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Ae+J:Ae):J=Ae,M){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=J+$e,M={id:u++,callback:G,priorityLevel:M,startTime:J,expirationTime:$e,sortIndex:-1},J>Ae?(M.sortIndex=J,e(c,M),t(l)===null&&M===t(c)&&(b?(v(I),I=-1):b=!0,dr(E,J-Ae))):(M.sortIndex=$e,e(l,M),p||f||(p=!0,ur(V))),M},n.unstable_shouldYield=ot,n.unstable_wrapCallback=function(M){var G=h;return function(){var J=h;h=G;try{return M.apply(this,arguments)}finally{h=J}}}})(m_);(function(n){n.exports=m_})(zS);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_=Ss,$t=Ph;function L(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p_=new Set,aa={};function Ns(n,e){Do(n,e),Do(n+"Capture",e)}function Do(n,e){for(aa[n]=e,n=0;n<e.length;n++)p_.add(e[n])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rh=Object.prototype.hasOwnProperty,HS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_w={},yw={};function US(n){return Rh.call(yw,n)?!0:Rh.call(_w,n)?!1:HS.test(n)?yw[n]=!0:(_w[n]=!0,!1)}function $S(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function WS(n,e,t,i){if(e===null||typeof e>"u"||$S(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _t(n,e,t,i,s,o,r){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=r}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){st[n]=new _t(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];st[e]=new _t(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){st[n]=new _t(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){st[n]=new _t(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){st[n]=new _t(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){st[n]=new _t(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){st[n]=new _t(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){st[n]=new _t(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){st[n]=new _t(n,5,!1,n.toLowerCase(),null,!1,!1)});var Rm=/[\-:]([a-z])/g;function Vm(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Rm,Vm);st[e]=new _t(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Rm,Vm);st[e]=new _t(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Rm,Vm);st[e]=new _t(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){st[n]=new _t(n,1,!1,n.toLowerCase(),null,!1,!1)});st.xlinkHref=new _t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){st[n]=new _t(n,1,!1,n.toLowerCase(),null,!0,!0)});function Lm(n,e,t,i){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WS(e,t,s,i)&&(t=null),i||s===null?US(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var hi=g_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),bo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),Om=Symbol.for("react.strict_mode"),Vh=Symbol.for("react.profiler"),w_=Symbol.for("react.provider"),b_=Symbol.for("react.context"),Mm=Symbol.for("react.forward_ref"),Lh=Symbol.for("react.suspense"),Oh=Symbol.for("react.suspense_list"),Nm=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),v_=Symbol.for("react.offscreen"),Cw=Symbol.iterator;function br(n){return n===null||typeof n!="object"?null:(n=Cw&&n[Cw]||n["@@iterator"],typeof n=="function"?n:null)}var Ve=Object.assign,md;function Nr(n){if(md===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);md=e&&e[1]||""}return`
`+md+n}var gd=!1;function pd(n,e){if(!n||gd)return"";gd=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),r=s.length-1,a=o.length-1;1<=r&&0<=a&&s[r]!==o[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==o[a]){if(r!==1||a!==1)do if(r--,a--,0>a||s[r]!==o[a]){var l=`
`+s[r].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=r&&0<=a);break}}}finally{gd=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Nr(n):""}function jS(n){switch(n.tag){case 5:return Nr(n.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 2:case 15:return n=pd(n.type,!1),n;case 11:return n=pd(n.type.render,!1),n;case 1:return n=pd(n.type,!0),n;default:return""}}function Mh(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case vo:return"Fragment";case bo:return"Portal";case Vh:return"Profiler";case Om:return"StrictMode";case Lh:return"Suspense";case Oh:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b_:return(n.displayName||"Context")+".Consumer";case w_:return(n._context.displayName||"Context")+".Provider";case Mm:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Nm:return e=n.displayName||null,e!==null?e:Mh(n.type)||"Memo";case xi:e=n._payload,n=n._init;try{return Mh(n(e))}catch{}}return null}function qS(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mh(e);case 8:return e===Om?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zi(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function __(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GS(n){var e=__(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,o.call(this,r)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function rl(n){n._valueTracker||(n._valueTracker=GS(n))}function y_(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=__(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function hc(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Nh(n,e){var t=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function kw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=zi(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function C_(n,e){e=e.checked,e!=null&&Lm(n,"checked",e,!1)}function Bh(n,e){C_(n,e);var t=zi(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Fh(n,e.type,t):e.hasOwnProperty("defaultValue")&&Fh(n,e.type,zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function xw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Fh(n,e,t){(e!=="number"||hc(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Br=Array.isArray;function Vo(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+zi(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Dh(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Tw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(L(92));if(Br(t)){if(1<t.length)throw Error(L(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:zi(t)}}function k_(n,e){var t=zi(e.value),i=zi(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Ew(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function x_(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zh(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?x_(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var al,T_=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=al.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function la(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var $r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KS=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(n){KS.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),$r[e]=$r[n]})});function E_(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||$r.hasOwnProperty(n)&&$r[n]?(""+e).trim():e+"px"}function S_(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=E_(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var QS=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hh(n,e){if(e){if(QS[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function Uh(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=null;function Bm(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wh=null,Lo=null,Oo=null;function Sw(n){if(n=za(n)){if(typeof Wh!="function")throw Error(L(280));var e=n.stateNode;e&&(e=cu(e),Wh(n.stateNode,n.type,e))}}function A_(n){Lo?Oo?Oo.push(n):Oo=[n]:Lo=n}function I_(){if(Lo){var n=Lo,e=Oo;if(Oo=Lo=null,Sw(n),e)for(n=0;n<e.length;n++)Sw(e[n])}}function P_(n,e){return n(e)}function R_(){}var wd=!1;function V_(n,e,t){if(wd)return n(e,t);wd=!0;try{return P_(n,e,t)}finally{wd=!1,(Lo!==null||Oo!==null)&&(R_(),I_())}}function ca(n,e){var t=n.stateNode;if(t===null)return null;var i=cu(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(L(231,e,typeof t));return t}var jh=!1;if(ri)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){jh=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{jh=!1}function JS(n,e,t,i,s,o,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Wr=!1,fc=null,mc=!1,qh=null,YS={onError:function(n){Wr=!0,fc=n}};function XS(n,e,t,i,s,o,r,a,l){Wr=!1,fc=null,JS.apply(YS,arguments)}function ZS(n,e,t,i,s,o,r,a,l){if(XS.apply(this,arguments),Wr){if(Wr){var c=fc;Wr=!1,fc=null}else throw Error(L(198));mc||(mc=!0,qh=c)}}function Bs(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function L_(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Aw(n){if(Bs(n)!==n)throw Error(L(188))}function eA(n){var e=n.alternate;if(!e){if(e=Bs(n),e===null)throw Error(L(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return Aw(s),n;if(o===i)return Aw(s),e;o=o.sibling}throw Error(L(188))}if(t.return!==i.return)t=s,i=o;else{for(var r=!1,a=s.child;a;){if(a===t){r=!0,t=s,i=o;break}if(a===i){r=!0,i=s,t=o;break}a=a.sibling}if(!r){for(a=o.child;a;){if(a===t){r=!0,t=o,i=s;break}if(a===i){r=!0,i=o,t=s;break}a=a.sibling}if(!r)throw Error(L(189))}}if(t.alternate!==i)throw Error(L(190))}if(t.tag!==3)throw Error(L(188));return t.stateNode.current===t?n:e}function O_(n){return n=eA(n),n!==null?M_(n):null}function M_(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=M_(n);if(e!==null)return e;n=n.sibling}return null}var N_=$t.unstable_scheduleCallback,Iw=$t.unstable_cancelCallback,tA=$t.unstable_shouldYield,nA=$t.unstable_requestPaint,ze=$t.unstable_now,iA=$t.unstable_getCurrentPriorityLevel,Fm=$t.unstable_ImmediatePriority,B_=$t.unstable_UserBlockingPriority,gc=$t.unstable_NormalPriority,sA=$t.unstable_LowPriority,F_=$t.unstable_IdlePriority,ou=null,Bn=null;function oA(n){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(ou,n,void 0,(n.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:lA,rA=Math.log,aA=Math.LN2;function lA(n){return n>>>=0,n===0?32:31-(rA(n)/aA|0)|0}var ll=64,cl=4194304;function Fr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function pc(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,r=t&268435455;if(r!==0){var a=r&~s;a!==0?i=Fr(a):(o&=r,o!==0&&(i=Fr(o)))}else r=t&~s,r!==0?i=Fr(r):o!==0&&(i=Fr(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-bn(e),s=1<<t,i|=n[t],e&=~s;return i}function cA(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uA(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var r=31-bn(o),a=1<<r,l=s[r];l===-1?(!(a&t)||a&i)&&(s[r]=cA(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function Gh(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function D_(){var n=ll;return ll<<=1,!(ll&4194240)&&(ll=64),n}function bd(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Fa(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-bn(e),n[e]=t}function dA(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-bn(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function Dm(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-bn(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var le=0;function z_(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var H_,zm,U_,$_,W_,Kh=!1,ul=[],Ri=null,Vi=null,Li=null,ua=new Map,da=new Map,Ei=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pw(n,e){switch(n){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(e.pointerId)}}function _r(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=za(e),e!==null&&zm(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function fA(n,e,t,i,s){switch(e){case"focusin":return Ri=_r(Ri,n,e,t,i,s),!0;case"dragenter":return Vi=_r(Vi,n,e,t,i,s),!0;case"mouseover":return Li=_r(Li,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return ua.set(o,_r(ua.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,da.set(o,_r(da.get(o)||null,n,e,t,i,s)),!0}return!1}function j_(n){var e=gs(n.target);if(e!==null){var t=Bs(e);if(t!==null){if(e=t.tag,e===13){if(e=L_(t),e!==null){n.blockedOn=e,W_(n.priority,function(){U_(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jl(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Qh(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);$h=i,t.target.dispatchEvent(i),$h=null}else return e=za(t),e!==null&&zm(e),n.blockedOn=t,!1;e.shift()}return!0}function Rw(n,e,t){jl(n)&&t.delete(e)}function mA(){Kh=!1,Ri!==null&&jl(Ri)&&(Ri=null),Vi!==null&&jl(Vi)&&(Vi=null),Li!==null&&jl(Li)&&(Li=null),ua.forEach(Rw),da.forEach(Rw)}function yr(n,e){n.blockedOn===e&&(n.blockedOn=null,Kh||(Kh=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,mA)))}function ha(n){function e(s){return yr(s,n)}if(0<ul.length){yr(ul[0],n);for(var t=1;t<ul.length;t++){var i=ul[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ri!==null&&yr(Ri,n),Vi!==null&&yr(Vi,n),Li!==null&&yr(Li,n),ua.forEach(e),da.forEach(e),t=0;t<Ei.length;t++)i=Ei[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ei.length&&(t=Ei[0],t.blockedOn===null);)j_(t),t.blockedOn===null&&Ei.shift()}var Mo=hi.ReactCurrentBatchConfig,wc=!0;function gA(n,e,t,i){var s=le,o=Mo.transition;Mo.transition=null;try{le=1,Hm(n,e,t,i)}finally{le=s,Mo.transition=o}}function pA(n,e,t,i){var s=le,o=Mo.transition;Mo.transition=null;try{le=4,Hm(n,e,t,i)}finally{le=s,Mo.transition=o}}function Hm(n,e,t,i){if(wc){var s=Qh(n,e,t,i);if(s===null)Ad(n,e,i,bc,t),Pw(n,i);else if(fA(s,n,e,t,i))i.stopPropagation();else if(Pw(n,i),e&4&&-1<hA.indexOf(n)){for(;s!==null;){var o=za(s);if(o!==null&&H_(o),o=Qh(n,e,t,i),o===null&&Ad(n,e,i,bc,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else Ad(n,e,i,null,t)}}var bc=null;function Qh(n,e,t,i){if(bc=null,n=Bm(i),n=gs(n),n!==null)if(e=Bs(n),e===null)n=null;else if(t=e.tag,t===13){if(n=L_(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return bc=n,null}function q_(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iA()){case Fm:return 1;case B_:return 4;case gc:case sA:return 16;case F_:return 536870912;default:return 16}default:return 16}}var Ii=null,Um=null,ql=null;function G_(){if(ql)return ql;var n,e=Um,t=e.length,i,s="value"in Ii?Ii.value:Ii.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var r=t-n;for(i=1;i<=r&&e[t-i]===s[o-i];i++);return ql=s.slice(n,1<i?1-i:void 0)}function Gl(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function dl(){return!0}function Vw(){return!1}function Gt(n){function e(t,i,s,o,r){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dl:Vw,this.isPropagationStopped=Vw,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$m=Gt(tr),Da=Ve({},tr,{view:0,detail:0}),wA=Gt(Da),vd,_d,Cr,ru=Ve({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(vd=n.screenX-Cr.screenX,_d=n.screenY-Cr.screenY):_d=vd=0,Cr=n),vd)},movementY:function(n){return"movementY"in n?n.movementY:_d}}),Lw=Gt(ru),bA=Ve({},ru,{dataTransfer:0}),vA=Gt(bA),_A=Ve({},Da,{relatedTarget:0}),yd=Gt(_A),yA=Ve({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),CA=Gt(yA),kA=Ve({},tr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xA=Gt(kA),TA=Ve({},tr,{data:0}),Ow=Gt(TA),EA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IA(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=AA[n])?!!e[n]:!1}function Wm(){return IA}var PA=Ve({},Da,{key:function(n){if(n.key){var e=EA[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Gl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?SA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(n){return n.type==="keypress"?Gl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),RA=Gt(PA),VA=Ve({},ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mw=Gt(VA),LA=Ve({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),OA=Gt(LA),MA=Ve({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),NA=Gt(MA),BA=Ve({},ru,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),FA=Gt(BA),DA=[9,13,27,32],jm=ri&&"CompositionEvent"in window,jr=null;ri&&"documentMode"in document&&(jr=document.documentMode);var zA=ri&&"TextEvent"in window&&!jr,K_=ri&&(!jm||jr&&8<jr&&11>=jr),Nw=String.fromCharCode(32),Bw=!1;function Q_(n,e){switch(n){case"keyup":return DA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J_(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function HA(n,e){switch(n){case"compositionend":return J_(e);case"keypress":return e.which!==32?null:(Bw=!0,Nw);case"textInput":return n=e.data,n===Nw&&Bw?null:n;default:return null}}function UA(n,e){if(_o)return n==="compositionend"||!jm&&Q_(n,e)?(n=G_(),ql=Um=Ii=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K_&&e.locale!=="ko"?null:e.data;default:return null}}var $A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!$A[n.type]:e==="textarea"}function Y_(n,e,t,i){A_(i),e=vc(e,"onChange"),0<e.length&&(t=new $m("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var qr=null,fa=null;function WA(n){ly(n,0)}function au(n){var e=ko(n);if(y_(e))return n}function jA(n,e){if(n==="change")return e}var X_=!1;if(ri){var Cd;if(ri){var kd="oninput"in document;if(!kd){var Dw=document.createElement("div");Dw.setAttribute("oninput","return;"),kd=typeof Dw.oninput=="function"}Cd=kd}else Cd=!1;X_=Cd&&(!document.documentMode||9<document.documentMode)}function zw(){qr&&(qr.detachEvent("onpropertychange",Z_),fa=qr=null)}function Z_(n){if(n.propertyName==="value"&&au(fa)){var e=[];Y_(e,fa,n,Bm(n)),V_(WA,e)}}function qA(n,e,t){n==="focusin"?(zw(),qr=e,fa=t,qr.attachEvent("onpropertychange",Z_)):n==="focusout"&&zw()}function GA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return au(fa)}function KA(n,e){if(n==="click")return au(e)}function QA(n,e){if(n==="input"||n==="change")return au(e)}function JA(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var _n=typeof Object.is=="function"?Object.is:JA;function ma(n,e){if(_n(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!Rh.call(e,s)||!_n(n[s],e[s]))return!1}return!0}function Hw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uw(n,e){var t=Hw(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Hw(t)}}function ey(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ey(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function ty(){for(var n=window,e=hc();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=hc(n.document)}return e}function qm(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function YA(n){var e=ty(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ey(t.ownerDocument.documentElement,t)){if(i!==null&&qm(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=Uw(t,o);var r=Uw(t,i);s&&r&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==r.node||n.focusOffset!==r.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(r.node,r.offset)):(e.setEnd(r.node,r.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var XA=ri&&"documentMode"in document&&11>=document.documentMode,yo=null,Jh=null,Gr=null,Yh=!1;function $w(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Yh||yo==null||yo!==hc(i)||(i=yo,"selectionStart"in i&&qm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Gr&&ma(Gr,i)||(Gr=i,i=vc(Jh,"onSelect"),0<i.length&&(e=new $m("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=yo)))}function hl(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Co={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},xd={},ny={};ri&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function lu(n){if(xd[n])return xd[n];if(!Co[n])return n;var e=Co[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in ny)return xd[n]=e[t];return n}var iy=lu("animationend"),sy=lu("animationiteration"),oy=lu("animationstart"),ry=lu("transitionend"),ay=new Map,Ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(n,e){ay.set(n,e),Ns(e,[n])}for(var Td=0;Td<Ww.length;Td++){var Ed=Ww[Td],ZA=Ed.toLowerCase(),e5=Ed[0].toUpperCase()+Ed.slice(1);ji(ZA,"on"+e5)}ji(iy,"onAnimationEnd");ji(sy,"onAnimationIteration");ji(oy,"onAnimationStart");ji("dblclick","onDoubleClick");ji("focusin","onFocus");ji("focusout","onBlur");ji(ry,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function jw(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,ZS(i,e,void 0,n),n.currentTarget=null}function ly(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;jw(s,a,c),o=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;jw(s,a,c),o=l}}}if(mc)throw n=qh,mc=!1,qh=null,n}function pe(n,e){var t=e[nf];t===void 0&&(t=e[nf]=new Set);var i=n+"__bubble";t.has(i)||(cy(e,n,2,!1),t.add(i))}function Sd(n,e,t){var i=0;e&&(i|=4),cy(t,n,i,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function ga(n){if(!n[fl]){n[fl]=!0,p_.forEach(function(t){t!=="selectionchange"&&(t5.has(t)||Sd(t,!1,n),Sd(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[fl]||(e[fl]=!0,Sd("selectionchange",!1,e))}}function cy(n,e,t,i){switch(q_(e)){case 1:var s=gA;break;case 4:s=pA;break;default:s=Hm}t=s.bind(null,e,t,n),s=void 0,!jh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Ad(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&(l=r.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;r=r.return}for(;a!==null;){if(r=gs(a),r===null)return;if(l=r.tag,l===5||l===6){i=o=r;continue e}a=a.parentNode}}i=i.return}V_(function(){var c=o,u=Bm(t),d=[];e:{var h=ay.get(n);if(h!==void 0){var f=$m,p=n;switch(n){case"keypress":if(Gl(t)===0)break e;case"keydown":case"keyup":f=RA;break;case"focusin":p="focus",f=yd;break;case"focusout":p="blur",f=yd;break;case"beforeblur":case"afterblur":f=yd;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=OA;break;case iy:case sy:case oy:f=CA;break;case ry:f=NA;break;case"scroll":f=wA;break;case"wheel":f=FA;break;case"copy":case"cut":case"paste":f=xA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Mw}var b=(e&4)!==0,x=!b&&n==="scroll",v=b?h!==null?h+"Capture":null:h;b=[];for(var w=c,C;w!==null;){C=w;var E=C.stateNode;if(C.tag===5&&E!==null&&(C=E,v!==null&&(E=ca(w,v),E!=null&&b.push(pa(w,E,C)))),x)break;w=w.return}0<b.length&&(h=new f(h,p,null,t,u),d.push({event:h,listeners:b}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==$h&&(p=t.relatedTarget||t.fromElement)&&(gs(p)||p[ai]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?gs(p):null,p!==null&&(x=Bs(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(b=Lw,E="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(b=Mw,E="onPointerLeave",v="onPointerEnter",w="pointer"),x=f==null?h:ko(f),C=p==null?h:ko(p),h=new b(E,w+"leave",f,t,u),h.target=x,h.relatedTarget=C,E=null,gs(u)===c&&(b=new b(v,w+"enter",p,t,u),b.target=C,b.relatedTarget=x,E=b),x=E,f&&p)t:{for(b=f,v=p,w=0,C=b;C;C=so(C))w++;for(C=0,E=v;E;E=so(E))C++;for(;0<w-C;)b=so(b),w--;for(;0<C-w;)v=so(v),C--;for(;w--;){if(b===v||v!==null&&b===v.alternate)break t;b=so(b),v=so(v)}b=null}else b=null;f!==null&&qw(d,h,f,b,!1),p!==null&&x!==null&&qw(d,x,p,b,!0)}}e:{if(h=c?ko(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var V=jA;else if(Fw(h))if(X_)V=QA;else{V=GA;var A=qA}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(V=KA);if(V&&(V=V(n,c))){Y_(d,V,t,u);break e}A&&A(n,h,c),n==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Fh(h,"number",h.value)}switch(A=c?ko(c):window,n){case"focusin":(Fw(A)||A.contentEditable==="true")&&(yo=A,Jh=c,Gr=null);break;case"focusout":Gr=Jh=yo=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,$w(d,t,u);break;case"selectionchange":if(XA)break;case"keydown":case"keyup":$w(d,t,u)}var P;if(jm)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else _o?Q_(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(K_&&t.locale!=="ko"&&(_o||I!=="onCompositionStart"?I==="onCompositionEnd"&&_o&&(P=G_()):(Ii=u,Um="value"in Ii?Ii.value:Ii.textContent,_o=!0)),A=vc(c,I),0<A.length&&(I=new Ow(I,n,null,t,u),d.push({event:I,listeners:A}),P?I.data=P:(P=J_(t),P!==null&&(I.data=P)))),(P=zA?HA(n,t):UA(n,t))&&(c=vc(c,"onBeforeInput"),0<c.length&&(u=new Ow("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=P))}ly(d,e)})}function pa(n,e,t){return{instance:n,listener:e,currentTarget:t}}function vc(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ca(n,t),o!=null&&i.unshift(pa(n,o,s)),o=ca(n,e),o!=null&&i.push(pa(n,o,s))),n=n.return}return i}function so(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function qw(n,e,t,i,s){for(var o=e._reactName,r=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=ca(t,o),l!=null&&r.unshift(pa(t,l,a))):s||(l=ca(t,o),l!=null&&r.push(pa(t,l,a)))),t=t.return}r.length!==0&&n.push({event:e,listeners:r})}var n5=/\r\n?/g,i5=/\u0000|\uFFFD/g;function Gw(n){return(typeof n=="string"?n:""+n).replace(n5,`
`).replace(i5,"")}function ml(n,e,t){if(e=Gw(e),Gw(n)!==e&&t)throw Error(L(425))}function _c(){}var Xh=null,Zh=null;function ef(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tf=typeof setTimeout=="function"?setTimeout:void 0,s5=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,o5=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(n){return Kw.resolve(null).then(n).catch(r5)}:tf;function r5(n){setTimeout(function(){throw n})}function Id(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),ha(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);ha(e)}function Oi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Qw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var nr=Math.random().toString(36).slice(2),Ln="__reactFiber$"+nr,wa="__reactProps$"+nr,ai="__reactContainer$"+nr,nf="__reactEvents$"+nr,a5="__reactListeners$"+nr,l5="__reactHandles$"+nr;function gs(n){var e=n[Ln];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ai]||t[Ln]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Qw(n);n!==null;){if(t=n[Ln])return t;n=Qw(n)}return e}n=t,t=n.parentNode}return null}function za(n){return n=n[Ln]||n[ai],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ko(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(L(33))}function cu(n){return n[wa]||null}var sf=[],xo=-1;function qi(n){return{current:n}}function _e(n){0>xo||(n.current=sf[xo],sf[xo]=null,xo--)}function me(n,e){xo++,sf[xo]=n.current,n.current=e}var Hi={},mt=qi(Hi),Et=qi(!1),As=Hi;function zo(n,e){var t=n.type.contextTypes;if(!t)return Hi;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function St(n){return n=n.childContextTypes,n!=null}function yc(){_e(Et),_e(mt)}function Jw(n,e,t){if(mt.current!==Hi)throw Error(L(168));me(mt,e),me(Et,t)}function uy(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(L(108,qS(n)||"Unknown",s));return Ve({},t,i)}function Cc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Hi,As=mt.current,me(mt,n),me(Et,Et.current),!0}function Yw(n,e,t){var i=n.stateNode;if(!i)throw Error(L(169));t?(n=uy(n,e,As),i.__reactInternalMemoizedMergedChildContext=n,_e(Et),_e(mt),me(mt,n)):_e(Et),me(Et,t)}var Zn=null,uu=!1,Pd=!1;function dy(n){Zn===null?Zn=[n]:Zn.push(n)}function c5(n){uu=!0,dy(n)}function Gi(){if(!Pd&&Zn!==null){Pd=!0;var n=0,e=le;try{var t=Zn;for(le=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Zn=null,uu=!1}catch(s){throw Zn!==null&&(Zn=Zn.slice(n+1)),N_(Fm,Gi),s}finally{le=e,Pd=!1}}return null}var To=[],Eo=0,kc=null,xc=0,Qt=[],Jt=0,Is=null,ni=1,ii="";function us(n,e){To[Eo++]=xc,To[Eo++]=kc,kc=n,xc=e}function hy(n,e,t){Qt[Jt++]=ni,Qt[Jt++]=ii,Qt[Jt++]=Is,Is=n;var i=ni;n=ii;var s=32-bn(i)-1;i&=~(1<<s),t+=1;var o=32-bn(e)+s;if(30<o){var r=s-s%5;o=(i&(1<<r)-1).toString(32),i>>=r,s-=r,ni=1<<32-bn(e)+s|t<<s|i,ii=o+n}else ni=1<<o|t<<s|i,ii=n}function Gm(n){n.return!==null&&(us(n,1),hy(n,1,0))}function Km(n){for(;n===kc;)kc=To[--Eo],To[Eo]=null,xc=To[--Eo],To[Eo]=null;for(;n===Is;)Is=Qt[--Jt],Qt[Jt]=null,ii=Qt[--Jt],Qt[Jt]=null,ni=Qt[--Jt],Qt[Jt]=null}var Ut=null,Dt=null,Ee=!1,gn=null;function fy(n,e){var t=Yt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Xw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ut=n,Dt=Oi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ut=n,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Is!==null?{id:ni,overflow:ii}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Yt(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ut=n,Dt=null,!0):!1;default:return!1}}function of(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rf(n){if(Ee){var e=Dt;if(e){var t=e;if(!Xw(n,e)){if(of(n))throw Error(L(418));e=Oi(t.nextSibling);var i=Ut;e&&Xw(n,e)?fy(i,t):(n.flags=n.flags&-4097|2,Ee=!1,Ut=n)}}else{if(of(n))throw Error(L(418));n.flags=n.flags&-4097|2,Ee=!1,Ut=n}}}function Zw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ut=n}function gl(n){if(n!==Ut)return!1;if(!Ee)return Zw(n),Ee=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ef(n.type,n.memoizedProps)),e&&(e=Dt)){if(of(n))throw my(),Error(L(418));for(;e;)fy(n,e),e=Oi(e.nextSibling)}if(Zw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(L(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Dt=Oi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Dt=null}}else Dt=Ut?Oi(n.stateNode.nextSibling):null;return!0}function my(){for(var n=Dt;n;)n=Oi(n.nextSibling)}function Ho(){Dt=Ut=null,Ee=!1}function Qm(n){gn===null?gn=[n]:gn.push(n)}var u5=hi.ReactCurrentBatchConfig;function fn(n,e){if(n&&n.defaultProps){e=Ve({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Tc=qi(null),Ec=null,So=null,Jm=null;function Ym(){Jm=So=Ec=null}function Xm(n){var e=Tc.current;_e(Tc),n._currentValue=e}function af(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function No(n,e){Ec=n,Jm=So=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Tt=!0),n.firstContext=null)}function tn(n){var e=n._currentValue;if(Jm!==n)if(n={context:n,memoizedValue:e,next:null},So===null){if(Ec===null)throw Error(L(308));So=n,Ec.dependencies={lanes:0,firstContext:n}}else So=So.next=n;return e}var ps=null;function Zm(n){ps===null?ps=[n]:ps.push(n)}function gy(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,Zm(e)):(t.next=s.next,s.next=t),e.interleaved=t,li(n,i)}function li(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ti=!1;function eg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function py(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function si(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Mi(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ne&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,li(n,t)}return s=i.interleaved,s===null?(e.next=e,Zm(i)):(e.next=s.next,s.next=e),i.interleaved=e,li(n,t)}function Kl(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Dm(n,t)}}function e1(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var r={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=r:o=o.next=r,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Sc(n,e,t,i){var s=n.updateQueue;Ti=!1;var o=s.firstBaseUpdate,r=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,r===null?o=c:r.next=c,r=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==r&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=s.baseState;r=0,u=c=l=null,a=o;do{var h=a.lane,f=a.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,b=a;switch(h=e,f=t,b.tag){case 1:if(p=b.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=b.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ve({},d,h);break e;case 2:Ti=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,r|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do r|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Rs|=r,n.lanes=r,n.memoizedState=d}}function t1(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(L(191,s));s.call(i)}}}var wy=new g_.Component().refs;function lf(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ve({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var du={isMounted:function(n){return(n=n._reactInternals)?Bs(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=wt(),s=Bi(n),o=si(i,s);o.payload=e,t!=null&&(o.callback=t),e=Mi(n,o,s),e!==null&&(vn(e,n,s,i),Kl(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=wt(),s=Bi(n),o=si(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Mi(n,o,s),e!==null&&(vn(e,n,s,i),Kl(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=wt(),i=Bi(n),s=si(t,i);s.tag=2,e!=null&&(s.callback=e),e=Mi(n,s,i),e!==null&&(vn(e,n,i,t),Kl(e,n,i))}};function n1(n,e,t,i,s,o,r){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,r):e.prototype&&e.prototype.isPureReactComponent?!ma(t,i)||!ma(s,o):!0}function by(n,e,t){var i=!1,s=Hi,o=e.contextType;return typeof o=="object"&&o!==null?o=tn(o):(s=St(e)?As:mt.current,i=e.contextTypes,o=(i=i!=null)?zo(n,s):Hi),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=du,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function i1(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&du.enqueueReplaceState(e,e.state,null)}function cf(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=wy,eg(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=tn(o):(o=St(e)?As:mt.current,s.context=zo(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lf(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&du.enqueueReplaceState(s,s.state,null),Sc(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function kr(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(L(309));var i=t.stateNode}if(!i)throw Error(L(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(r){var a=s.refs;a===wy&&(a=s.refs={}),r===null?delete a[o]:a[o]=r},e._stringRef=o,e)}if(typeof n!="string")throw Error(L(284));if(!t._owner)throw Error(L(290,n))}return n}function pl(n,e){throw n=Object.prototype.toString.call(e),Error(L(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function s1(n){var e=n._init;return e(n._payload)}function vy(n){function e(v,w){if(n){var C=v.deletions;C===null?(v.deletions=[w],v.flags|=16):C.push(w)}}function t(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Fi(v,w),v.index=0,v.sibling=null,v}function o(v,w,C){return v.index=C,n?(C=v.alternate,C!==null?(C=C.index,C<w?(v.flags|=2,w):C):(v.flags|=2,w)):(v.flags|=1048576,w)}function r(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,w,C,E){return w===null||w.tag!==6?(w=Bd(C,v.mode,E),w.return=v,w):(w=s(w,C),w.return=v,w)}function l(v,w,C,E){var V=C.type;return V===vo?u(v,w,C.props.children,E,C.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===xi&&s1(V)===w.type)?(E=s(w,C.props),E.ref=kr(v,w,C),E.return=v,E):(E=ec(C.type,C.key,C.props,null,v.mode,E),E.ref=kr(v,w,C),E.return=v,E)}function c(v,w,C,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Fd(C,v.mode,E),w.return=v,w):(w=s(w,C.children||[]),w.return=v,w)}function u(v,w,C,E,V){return w===null||w.tag!==7?(w=_s(C,v.mode,E,V),w.return=v,w):(w=s(w,C),w.return=v,w)}function d(v,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Bd(""+w,v.mode,C),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ol:return C=ec(w.type,w.key,w.props,null,v.mode,C),C.ref=kr(v,null,w),C.return=v,C;case bo:return w=Fd(w,v.mode,C),w.return=v,w;case xi:var E=w._init;return d(v,E(w._payload),C)}if(Br(w)||br(w))return w=_s(w,v.mode,C,null),w.return=v,w;pl(v,w)}return null}function h(v,w,C,E){var V=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return V!==null?null:a(v,w,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ol:return C.key===V?l(v,w,C,E):null;case bo:return C.key===V?c(v,w,C,E):null;case xi:return V=C._init,h(v,w,V(C._payload),E)}if(Br(C)||br(C))return V!==null?null:u(v,w,C,E,null);pl(v,C)}return null}function f(v,w,C,E,V){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(C)||null,a(w,v,""+E,V);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ol:return v=v.get(E.key===null?C:E.key)||null,l(w,v,E,V);case bo:return v=v.get(E.key===null?C:E.key)||null,c(w,v,E,V);case xi:var A=E._init;return f(v,w,C,A(E._payload),V)}if(Br(E)||br(E))return v=v.get(C)||null,u(w,v,E,V,null);pl(w,E)}return null}function p(v,w,C,E){for(var V=null,A=null,P=w,I=w=0,$=null;P!==null&&I<C.length;I++){P.index>I?($=P,P=null):$=P.sibling;var j=h(v,P,C[I],E);if(j===null){P===null&&(P=$);break}n&&P&&j.alternate===null&&e(v,P),w=o(j,w,I),A===null?V=j:A.sibling=j,A=j,P=$}if(I===C.length)return t(v,P),Ee&&us(v,I),V;if(P===null){for(;I<C.length;I++)P=d(v,C[I],E),P!==null&&(w=o(P,w,I),A===null?V=P:A.sibling=P,A=P);return Ee&&us(v,I),V}for(P=i(v,P);I<C.length;I++)$=f(P,v,I,C[I],E),$!==null&&(n&&$.alternate!==null&&P.delete($.key===null?I:$.key),w=o($,w,I),A===null?V=$:A.sibling=$,A=$);return n&&P.forEach(function(ot){return e(v,ot)}),Ee&&us(v,I),V}function b(v,w,C,E){var V=br(C);if(typeof V!="function")throw Error(L(150));if(C=V.call(C),C==null)throw Error(L(151));for(var A=V=null,P=w,I=w=0,$=null,j=C.next();P!==null&&!j.done;I++,j=C.next()){P.index>I?($=P,P=null):$=P.sibling;var ot=h(v,P,j.value,E);if(ot===null){P===null&&(P=$);break}n&&P&&ot.alternate===null&&e(v,P),w=o(ot,w,I),A===null?V=ot:A.sibling=ot,A=ot,P=$}if(j.done)return t(v,P),Ee&&us(v,I),V;if(P===null){for(;!j.done;I++,j=C.next())j=d(v,j.value,E),j!==null&&(w=o(j,w,I),A===null?V=j:A.sibling=j,A=j);return Ee&&us(v,I),V}for(P=i(v,P);!j.done;I++,j=C.next())j=f(P,v,I,j.value,E),j!==null&&(n&&j.alternate!==null&&P.delete(j.key===null?I:j.key),w=o(j,w,I),A===null?V=j:A.sibling=j,A=j);return n&&P.forEach(function(vi){return e(v,vi)}),Ee&&us(v,I),V}function x(v,w,C,E){if(typeof C=="object"&&C!==null&&C.type===vo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ol:e:{for(var V=C.key,A=w;A!==null;){if(A.key===V){if(V=C.type,V===vo){if(A.tag===7){t(v,A.sibling),w=s(A,C.props.children),w.return=v,v=w;break e}}else if(A.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===xi&&s1(V)===A.type){t(v,A.sibling),w=s(A,C.props),w.ref=kr(v,A,C),w.return=v,v=w;break e}t(v,A);break}else e(v,A);A=A.sibling}C.type===vo?(w=_s(C.props.children,v.mode,E,C.key),w.return=v,v=w):(E=ec(C.type,C.key,C.props,null,v.mode,E),E.ref=kr(v,w,C),E.return=v,v=E)}return r(v);case bo:e:{for(A=C.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){t(v,w.sibling),w=s(w,C.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=Fd(C,v.mode,E),w.return=v,v=w}return r(v);case xi:return A=C._init,x(v,w,A(C._payload),E)}if(Br(C))return p(v,w,C,E);if(br(C))return b(v,w,C,E);pl(v,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(t(v,w.sibling),w=s(w,C),w.return=v,v=w):(t(v,w),w=Bd(C,v.mode,E),w.return=v,v=w),r(v)):t(v,w)}return x}var Uo=vy(!0),_y=vy(!1),Ha={},Fn=qi(Ha),ba=qi(Ha),va=qi(Ha);function ws(n){if(n===Ha)throw Error(L(174));return n}function tg(n,e){switch(me(va,e),me(ba,n),me(Fn,Ha),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zh(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=zh(e,n)}_e(Fn),me(Fn,e)}function $o(){_e(Fn),_e(ba),_e(va)}function yy(n){ws(va.current);var e=ws(Fn.current),t=zh(e,n.type);e!==t&&(me(ba,n),me(Fn,t))}function ng(n){ba.current===n&&(_e(Fn),_e(ba))}var Ie=qi(0);function Ac(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rd=[];function ig(){for(var n=0;n<Rd.length;n++)Rd[n]._workInProgressVersionPrimary=null;Rd.length=0}var Ql=hi.ReactCurrentDispatcher,Vd=hi.ReactCurrentBatchConfig,Ps=0,Re=null,qe=null,Je=null,Ic=!1,Kr=!1,_a=0,d5=0;function lt(){throw Error(L(321))}function sg(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!_n(n[t],e[t]))return!1;return!0}function og(n,e,t,i,s,o){if(Ps=o,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ql.current=n===null||n.memoizedState===null?g5:p5,n=t(i,s),Kr){o=0;do{if(Kr=!1,_a=0,25<=o)throw Error(L(301));o+=1,Je=qe=null,e.updateQueue=null,Ql.current=w5,n=t(i,s)}while(Kr)}if(Ql.current=Pc,e=qe!==null&&qe.next!==null,Ps=0,Je=qe=Re=null,Ic=!1,e)throw Error(L(300));return n}function rg(){var n=_a!==0;return _a=0,n}function Pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Re.memoizedState=Je=n:Je=Je.next=n,Je}function nn(){if(qe===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=qe.next;var e=Je===null?Re.memoizedState:Je.next;if(e!==null)Je=e,qe=n;else{if(n===null)throw Error(L(310));qe=n,n={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Je===null?Re.memoizedState=Je=n:Je=Je.next=n}return Je}function ya(n,e){return typeof e=="function"?e(n):e}function Ld(n){var e=nn(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=n;var i=qe,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var r=s.next;s.next=o.next,o.next=r}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var a=r=null,l=null,c=o;do{var u=c.lane;if((Ps&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,r=i):l=l.next=d,Re.lanes|=u,Rs|=u}c=c.next}while(c!==null&&c!==o);l===null?r=i:l.next=a,_n(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseState=r,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,Re.lanes|=o,Rs|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Od(n){var e=nn(),t=e.queue;if(t===null)throw Error(L(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var r=s=s.next;do o=n(o,r.action),r=r.next;while(r!==s);_n(o,e.memoizedState)||(Tt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function Cy(){}function ky(n,e){var t=Re,i=nn(),s=e(),o=!_n(i.memoizedState,s);if(o&&(i.memoizedState=s,Tt=!0),i=i.queue,ag(Ey.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(t.flags|=2048,Ca(9,Ty.bind(null,t,i,s,e),void 0,null),Xe===null)throw Error(L(349));Ps&30||xy(t,e,s)}return s}function xy(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Ty(n,e,t,i){e.value=t,e.getSnapshot=i,Sy(e)&&Ay(n)}function Ey(n,e,t){return t(function(){Sy(e)&&Ay(n)})}function Sy(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!_n(n,t)}catch{return!0}}function Ay(n){var e=li(n,1);e!==null&&vn(e,n,1,-1)}function o1(n){var e=Pn();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:n},e.queue=n,n=n.dispatch=m5.bind(null,Re,n),[e.memoizedState,n]}function Ca(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Iy(){return nn().memoizedState}function Jl(n,e,t,i){var s=Pn();Re.flags|=n,s.memoizedState=Ca(1|e,t,void 0,i===void 0?null:i)}function hu(n,e,t,i){var s=nn();i=i===void 0?null:i;var o=void 0;if(qe!==null){var r=qe.memoizedState;if(o=r.destroy,i!==null&&sg(i,r.deps)){s.memoizedState=Ca(e,t,o,i);return}}Re.flags|=n,s.memoizedState=Ca(1|e,t,o,i)}function r1(n,e){return Jl(8390656,8,n,e)}function ag(n,e){return hu(2048,8,n,e)}function Py(n,e){return hu(4,2,n,e)}function Ry(n,e){return hu(4,4,n,e)}function Vy(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Ly(n,e,t){return t=t!=null?t.concat([n]):null,hu(4,4,Vy.bind(null,e,n),t)}function lg(){}function Oy(n,e){var t=nn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&sg(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function My(n,e){var t=nn();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&sg(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Ny(n,e,t){return Ps&21?(_n(t,e)||(t=D_(),Re.lanes|=t,Rs|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Tt=!0),n.memoizedState=t)}function h5(n,e){var t=le;le=t!==0&&4>t?t:4,n(!0);var i=Vd.transition;Vd.transition={};try{n(!1),e()}finally{le=t,Vd.transition=i}}function By(){return nn().memoizedState}function f5(n,e,t){var i=Bi(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Fy(n))Dy(e,t);else if(t=gy(n,e,t,i),t!==null){var s=wt();vn(t,n,i,s),zy(t,e,i)}}function m5(n,e,t){var i=Bi(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Fy(n))Dy(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var r=e.lastRenderedState,a=o(r,t);if(s.hasEagerState=!0,s.eagerState=a,_n(a,r)){var l=e.interleaved;l===null?(s.next=s,Zm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=gy(n,e,s,i),t!==null&&(s=wt(),vn(t,n,i,s),zy(t,e,i))}}function Fy(n){var e=n.alternate;return n===Re||e!==null&&e===Re}function Dy(n,e){Kr=Ic=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function zy(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Dm(n,t)}}var Pc={readContext:tn,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},g5={readContext:tn,useCallback:function(n,e){return Pn().memoizedState=[n,e===void 0?null:e],n},useContext:tn,useEffect:r1,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Jl(4194308,4,Vy.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Jl(4194308,4,n,e)},useInsertionEffect:function(n,e){return Jl(4,2,n,e)},useMemo:function(n,e){var t=Pn();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Pn();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=f5.bind(null,Re,n),[i.memoizedState,n]},useRef:function(n){var e=Pn();return n={current:n},e.memoizedState=n},useState:o1,useDebugValue:lg,useDeferredValue:function(n){return Pn().memoizedState=n},useTransition:function(){var n=o1(!1),e=n[0];return n=h5.bind(null,n[1]),Pn().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Re,s=Pn();if(Ee){if(t===void 0)throw Error(L(407));t=t()}else{if(t=e(),Xe===null)throw Error(L(349));Ps&30||xy(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,r1(Ey.bind(null,i,o,n),[n]),i.flags|=2048,Ca(9,Ty.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=Pn(),e=Xe.identifierPrefix;if(Ee){var t=ii,i=ni;t=(i&~(1<<32-bn(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=_a++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=d5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},p5={readContext:tn,useCallback:Oy,useContext:tn,useEffect:ag,useImperativeHandle:Ly,useInsertionEffect:Py,useLayoutEffect:Ry,useMemo:My,useReducer:Ld,useRef:Iy,useState:function(){return Ld(ya)},useDebugValue:lg,useDeferredValue:function(n){var e=nn();return Ny(e,qe.memoizedState,n)},useTransition:function(){var n=Ld(ya)[0],e=nn().memoizedState;return[n,e]},useMutableSource:Cy,useSyncExternalStore:ky,useId:By,unstable_isNewReconciler:!1},w5={readContext:tn,useCallback:Oy,useContext:tn,useEffect:ag,useImperativeHandle:Ly,useInsertionEffect:Py,useLayoutEffect:Ry,useMemo:My,useReducer:Od,useRef:Iy,useState:function(){return Od(ya)},useDebugValue:lg,useDeferredValue:function(n){var e=nn();return qe===null?e.memoizedState=n:Ny(e,qe.memoizedState,n)},useTransition:function(){var n=Od(ya)[0],e=nn().memoizedState;return[n,e]},useMutableSource:Cy,useSyncExternalStore:ky,useId:By,unstable_isNewReconciler:!1};function Wo(n,e){try{var t="",i=e;do t+=jS(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function Md(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function uf(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var b5=typeof WeakMap=="function"?WeakMap:Map;function Hy(n,e,t){t=si(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Vc||(Vc=!0,_f=i),uf(n,e)},t}function Uy(n,e,t){t=si(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){uf(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){uf(n,e),typeof i!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var r=e.stack;this.componentDidCatch(e.value,{componentStack:r!==null?r:""})}),t}function a1(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new b5;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=V5.bind(null,n,e,t),e.then(n,n))}function l1(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function c1(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=si(-1,1),e.tag=2,Mi(t,e,1))),t.lanes|=1),n)}var v5=hi.ReactCurrentOwner,Tt=!1;function gt(n,e,t,i){e.child=n===null?_y(e,null,t,i):Uo(e,n.child,t,i)}function u1(n,e,t,i,s){t=t.render;var o=e.ref;return No(e,s),i=og(n,e,t,i,o,s),t=rg(),n!==null&&!Tt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ci(n,e,s)):(Ee&&t&&Gm(e),e.flags|=1,gt(n,e,i,s),e.child)}function d1(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!pg(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,$y(n,e,o,i,s)):(n=ec(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var r=o.memoizedProps;if(t=t.compare,t=t!==null?t:ma,t(r,i)&&n.ref===e.ref)return ci(n,e,s)}return e.flags|=1,n=Fi(o,i),n.ref=e.ref,n.return=e,e.child=n}function $y(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(ma(o,i)&&n.ref===e.ref)if(Tt=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Tt=!0);else return e.lanes=n.lanes,ci(n,e,s)}return df(n,e,t,i,s)}function Wy(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Io,Ot),Ot|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,me(Io,Ot),Ot|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,me(Io,Ot),Ot|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,me(Io,Ot),Ot|=i;return gt(n,e,s,t),e.child}function jy(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function df(n,e,t,i,s){var o=St(t)?As:mt.current;return o=zo(e,o),No(e,s),t=og(n,e,t,i,o,s),i=rg(),n!==null&&!Tt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ci(n,e,s)):(Ee&&i&&Gm(e),e.flags|=1,gt(n,e,t,s),e.child)}function h1(n,e,t,i,s){if(St(t)){var o=!0;Cc(e)}else o=!1;if(No(e,s),e.stateNode===null)Yl(n,e),by(e,t,i),cf(e,t,i,s),i=!0;else if(n===null){var r=e.stateNode,a=e.memoizedProps;r.props=a;var l=r.context,c=t.contextType;typeof c=="object"&&c!==null?c=tn(c):(c=St(t)?As:mt.current,c=zo(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof r.getSnapshotBeforeUpdate=="function";d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==i||l!==c)&&i1(e,r,i,c),Ti=!1;var h=e.memoizedState;r.state=h,Sc(e,i,r,s),l=e.memoizedState,a!==i||h!==l||Et.current||Ti?(typeof u=="function"&&(lf(e,t,u,i),l=e.memoizedState),(a=Ti||n1(e,t,a,i,h,l,c))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),r.props=i,r.state=l,r.context=c,i=a):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,py(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:fn(e.type,a),r.props=c,d=e.pendingProps,h=r.context,l=t.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=St(t)?As:mt.current,l=zo(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==d||h!==l)&&i1(e,r,i,l),Ti=!1,h=e.memoizedState,r.state=h,Sc(e,i,r,s);var p=e.memoizedState;a!==d||h!==p||Et.current||Ti?(typeof f=="function"&&(lf(e,t,f,i),p=e.memoizedState),(c=Ti||n1(e,t,c,i,h,p,l)||!1)?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,p,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,p,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),r.props=i,r.state=p,r.context=l,i=c):(typeof r.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return hf(n,e,t,i,o,s)}function hf(n,e,t,i,s,o){jy(n,e);var r=(e.flags&128)!==0;if(!i&&!r)return s&&Yw(e,t,!1),ci(n,e,o);i=e.stateNode,v5.current=e;var a=r&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&r?(e.child=Uo(e,n.child,null,o),e.child=Uo(e,null,a,o)):gt(n,e,a,o),e.memoizedState=i.state,s&&Yw(e,t,!0),e.child}function qy(n){var e=n.stateNode;e.pendingContext?Jw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Jw(n,e.context,!1),tg(n,e.containerInfo)}function f1(n,e,t,i,s){return Ho(),Qm(s),e.flags|=256,gt(n,e,t,i),e.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function mf(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gy(n,e,t){var i=e.pendingProps,s=Ie.current,o=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),me(Ie,s&1),n===null)return rf(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(r=i.children,n=i.fallback,o?(i=e.mode,o=e.child,r={mode:"hidden",children:r},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=r):o=gu(r,i,0,null),n=_s(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=mf(t),e.memoizedState=ff,n):cg(e,r));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return _5(n,e,r,i,a,s,t);if(o){o=i.fallback,r=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(r&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Fi(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Fi(a,o):(o=_s(o,r,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,r=n.child.memoizedState,r=r===null?mf(t):{baseLanes:r.baseLanes|t,cachePool:null,transitions:r.transitions},o.memoizedState=r,o.childLanes=n.childLanes&~t,e.memoizedState=ff,i}return o=n.child,n=o.sibling,i=Fi(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function cg(n,e){return e=gu({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function wl(n,e,t,i){return i!==null&&Qm(i),Uo(e,n.child,null,t),n=cg(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function _5(n,e,t,i,s,o,r){if(t)return e.flags&256?(e.flags&=-257,i=Md(Error(L(422))),wl(n,e,r,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=gu({mode:"visible",children:i.children},s,0,null),o=_s(o,s,r,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Uo(e,n.child,null,r),e.child.memoizedState=mf(r),e.memoizedState=ff,o);if(!(e.mode&1))return wl(n,e,r,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,o=Error(L(419)),i=Md(o,i,void 0),wl(n,e,r,i)}if(a=(r&n.childLanes)!==0,Tt||a){if(i=Xe,i!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|r)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,li(n,s),vn(i,n,s,-1))}return gg(),i=Md(Error(L(421))),wl(n,e,r,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=L5.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Dt=Oi(s.nextSibling),Ut=e,Ee=!0,gn=null,n!==null&&(Qt[Jt++]=ni,Qt[Jt++]=ii,Qt[Jt++]=Is,ni=n.id,ii=n.overflow,Is=e),e=cg(e,i.children),e.flags|=4096,e)}function m1(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),af(n.return,e,t)}function Nd(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function Ky(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(gt(n,e,i.children,t),i=Ie.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&m1(n,t,e);else if(n.tag===19)m1(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(me(Ie,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Ac(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Nd(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Ac(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Nd(e,!0,t,null,o);break;case"together":Nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yl(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ci(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Rs|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(L(153));if(e.child!==null){for(n=e.child,t=Fi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Fi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function y5(n,e,t){switch(e.tag){case 3:qy(e),Ho();break;case 5:yy(e);break;case 1:St(e.type)&&Cc(e);break;case 4:tg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;me(Tc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(me(Ie,Ie.current&1),e.flags|=128,null):t&e.child.childLanes?Gy(n,e,t):(me(Ie,Ie.current&1),n=ci(n,e,t),n!==null?n.sibling:null);me(Ie,Ie.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Ky(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(Ie,Ie.current),i)break;return null;case 22:case 23:return e.lanes=0,Wy(n,e,t)}return ci(n,e,t)}var Qy,gf,Jy,Yy;Qy=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};gf=function(){};Jy=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,ws(Fn.current);var o=null;switch(t){case"input":s=Nh(n,s),i=Nh(n,i),o=[];break;case"select":s=Ve({},s,{value:void 0}),i=Ve({},i,{value:void 0}),o=[];break;case"textarea":s=Dh(n,s),i=Dh(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=_c)}Hh(t,i);var r;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(r in a)a.hasOwnProperty(r)&&(t||(t={}),t[r]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(aa.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(t||(t={}),t[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(t||(t={}),t[r]=l[r])}else t||(o||(o=[]),o.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(aa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&pe("scroll",n),o||a===l||(o=[])):(o=o||[]).push(c,l))}t&&(o=o||[]).push("style",t);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};Yy=function(n,e,t,i){t!==i&&(e.flags|=4)};function xr(n,e){if(!Ee)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ct(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function C5(n,e,t){var i=e.pendingProps;switch(Km(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return St(e.type)&&yc(),ct(e),null;case 3:return i=e.stateNode,$o(),_e(Et),_e(mt),ig(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(gl(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(kf(gn),gn=null))),gf(n,e),ct(e),null;case 5:ng(e);var s=ws(va.current);if(t=e.type,n!==null&&e.stateNode!=null)Jy(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(L(166));return ct(e),null}if(n=ws(Fn.current),gl(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[Ln]=e,i[wa]=o,n=(e.mode&1)!==0,t){case"dialog":pe("cancel",i),pe("close",i);break;case"iframe":case"object":case"embed":pe("load",i);break;case"video":case"audio":for(s=0;s<Dr.length;s++)pe(Dr[s],i);break;case"source":pe("error",i);break;case"img":case"image":case"link":pe("error",i),pe("load",i);break;case"details":pe("toggle",i);break;case"input":kw(i,o),pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},pe("invalid",i);break;case"textarea":Tw(i,o),pe("invalid",i)}Hh(t,o),s=null;for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];r==="children"?typeof a=="string"?i.textContent!==a&&(o.suppressHydrationWarning!==!0&&ml(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ml(i.textContent,a,n),s=["children",""+a]):aa.hasOwnProperty(r)&&a!=null&&r==="onScroll"&&pe("scroll",i)}switch(t){case"input":rl(i),xw(i,o,!0);break;case"textarea":rl(i),Ew(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=_c)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{r=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=x_(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=r.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=r.createElement(t,{is:i.is}):(n=r.createElement(t),t==="select"&&(r=n,i.multiple?r.multiple=!0:i.size&&(r.size=i.size))):n=r.createElementNS(n,t),n[Ln]=e,n[wa]=i,Qy(n,e,!1,!1),e.stateNode=n;e:{switch(r=Uh(t,i),t){case"dialog":pe("cancel",n),pe("close",n),s=i;break;case"iframe":case"object":case"embed":pe("load",n),s=i;break;case"video":case"audio":for(s=0;s<Dr.length;s++)pe(Dr[s],n);s=i;break;case"source":pe("error",n),s=i;break;case"img":case"image":case"link":pe("error",n),pe("load",n),s=i;break;case"details":pe("toggle",n),s=i;break;case"input":kw(n,i),s=Nh(n,i),pe("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ve({},i,{value:void 0}),pe("invalid",n);break;case"textarea":Tw(n,i),s=Dh(n,i),pe("invalid",n);break;default:s=i}Hh(t,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?S_(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T_(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&la(n,l):typeof l=="number"&&la(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(aa.hasOwnProperty(o)?l!=null&&o==="onScroll"&&pe("scroll",n):l!=null&&Lm(n,o,l,r))}switch(t){case"input":rl(n),xw(n,i,!1);break;case"textarea":rl(n),Ew(n);break;case"option":i.value!=null&&n.setAttribute("value",""+zi(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Vo(n,!!i.multiple,o,!1):i.defaultValue!=null&&Vo(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=_c)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(n&&e.stateNode!=null)Yy(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(L(166));if(t=ws(va.current),ws(Fn.current),gl(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ln]=e,(o=i.nodeValue!==t)&&(n=Ut,n!==null))switch(n.tag){case 3:ml(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ml(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ln]=e,e.stateNode=i}return ct(e),null;case 13:if(_e(Ie),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ee&&Dt!==null&&e.mode&1&&!(e.flags&128))my(),Ho(),e.flags|=98560,o=!1;else if(o=gl(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(L(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(L(317));o[Ln]=e}else Ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),o=!1}else gn!==null&&(kf(gn),gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ie.current&1?Ke===0&&(Ke=3):gg())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return $o(),gf(n,e),n===null&&ga(e.stateNode.containerInfo),ct(e),null;case 10:return Xm(e.type._context),ct(e),null;case 17:return St(e.type)&&yc(),ct(e),null;case 19:if(_e(Ie),o=e.memoizedState,o===null)return ct(e),null;if(i=(e.flags&128)!==0,r=o.rendering,r===null)if(i)xr(o,!1);else{if(Ke!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(r=Ac(n),r!==null){for(e.flags|=128,xr(o,!1),i=r.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,r=o.alternate,r===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,o.type=r.type,n=r.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return me(Ie,Ie.current&1|2),e.child}n=n.sibling}o.tail!==null&&ze()>jo&&(e.flags|=128,i=!0,xr(o,!1),e.lanes=4194304)}else{if(!i)if(n=Ac(r),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!r.alternate&&!Ee)return ct(e),null}else 2*ze()-o.renderingStartTime>jo&&t!==1073741824&&(e.flags|=128,i=!0,xr(o,!1),e.lanes=4194304);o.isBackwards?(r.sibling=e.child,e.child=r):(t=o.last,t!==null?t.sibling=r:e.child=r,o.last=r)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ze(),e.sibling=null,t=Ie.current,me(Ie,i?t&1|2:t&1),e):(ct(e),null);case 22:case 23:return mg(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ot&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function k5(n,e){switch(Km(e),e.tag){case 1:return St(e.type)&&yc(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return $o(),_e(Et),_e(mt),ig(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ng(e),null;case 13:if(_e(Ie),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(L(340));Ho()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _e(Ie),null;case 4:return $o(),null;case 10:return Xm(e.type._context),null;case 22:case 23:return mg(),null;case 24:return null;default:return null}}var bl=!1,ht=!1,x5=typeof WeakSet=="function"?WeakSet:Set,N=null;function Ao(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Me(n,e,i)}else t.current=null}function pf(n,e,t){try{t()}catch(i){Me(n,e,i)}}var g1=!1;function T5(n,e){if(Xh=wc,n=ty(),qm(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var r=0,a=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var f;d!==t||s!==0&&d.nodeType!==3||(a=r+s),d!==o||i!==0&&d.nodeType!==3||(l=r+i),d.nodeType===3&&(r+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===n)break t;if(h===t&&++c===s&&(a=r),h===o&&++u===i&&(l=r),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Zh={focusedElem:n,selectionRange:t},wc=!1,N=e;N!==null;)if(e=N,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,N=n;else for(;N!==null;){e=N;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var b=p.memoizedProps,x=p.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:fn(e.type,b),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(E){Me(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,N=n;break}N=e.return}return p=g1,g1=!1,p}function Qr(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&pf(e,t,o)}s=s.next}while(s!==i)}}function fu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function wf(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Xy(n){var e=n.alternate;e!==null&&(n.alternate=null,Xy(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ln],delete e[wa],delete e[nf],delete e[a5],delete e[l5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zy(n){return n.tag===5||n.tag===3||n.tag===4}function p1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bf(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=_c));else if(i!==4&&(n=n.child,n!==null))for(bf(n,e,t),n=n.sibling;n!==null;)bf(n,e,t),n=n.sibling}function vf(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(vf(n,e,t),n=n.sibling;n!==null;)vf(n,e,t),n=n.sibling}var nt=null,mn=!1;function _i(n,e,t){for(t=t.child;t!==null;)eC(n,e,t),t=t.sibling}function eC(n,e,t){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(ou,t)}catch{}switch(t.tag){case 5:ht||Ao(t,e);case 6:var i=nt,s=mn;nt=null,_i(n,e,t),nt=i,mn=s,nt!==null&&(mn?(n=nt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):nt.removeChild(t.stateNode));break;case 18:nt!==null&&(mn?(n=nt,t=t.stateNode,n.nodeType===8?Id(n.parentNode,t):n.nodeType===1&&Id(n,t),ha(n)):Id(nt,t.stateNode));break;case 4:i=nt,s=mn,nt=t.stateNode.containerInfo,mn=!0,_i(n,e,t),nt=i,mn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,r=o.destroy;o=o.tag,r!==void 0&&(o&2||o&4)&&pf(t,e,r),s=s.next}while(s!==i)}_i(n,e,t);break;case 1:if(!ht&&(Ao(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Me(t,e,a)}_i(n,e,t);break;case 21:_i(n,e,t);break;case 22:t.mode&1?(ht=(i=ht)||t.memoizedState!==null,_i(n,e,t),ht=i):_i(n,e,t);break;default:_i(n,e,t)}}function w1(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new x5),e.forEach(function(i){var s=O5.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function hn(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,mn=!1;break e;case 3:nt=a.stateNode.containerInfo,mn=!0;break e;case 4:nt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(nt===null)throw Error(L(160));eC(o,r,s),nt=null,mn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Me(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tC(e,n),e=e.sibling}function tC(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(hn(e,n),An(n),i&4){try{Qr(3,n,n.return),fu(3,n)}catch(b){Me(n,n.return,b)}try{Qr(5,n,n.return)}catch(b){Me(n,n.return,b)}}break;case 1:hn(e,n),An(n),i&512&&t!==null&&Ao(t,t.return);break;case 5:if(hn(e,n),An(n),i&512&&t!==null&&Ao(t,t.return),n.flags&32){var s=n.stateNode;try{la(s,"")}catch(b){Me(n,n.return,b)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,r=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&C_(s,o),Uh(a,r);var c=Uh(a,o);for(r=0;r<l.length;r+=2){var u=l[r],d=l[r+1];u==="style"?S_(s,d):u==="dangerouslySetInnerHTML"?T_(s,d):u==="children"?la(s,d):Lm(s,u,d,c)}switch(a){case"input":Bh(s,o);break;case"textarea":k_(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Vo(s,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Vo(s,!!o.multiple,o.defaultValue,!0):Vo(s,!!o.multiple,o.multiple?[]:"",!1))}s[wa]=o}catch(b){Me(n,n.return,b)}}break;case 6:if(hn(e,n),An(n),i&4){if(n.stateNode===null)throw Error(L(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(b){Me(n,n.return,b)}}break;case 3:if(hn(e,n),An(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ha(e.containerInfo)}catch(b){Me(n,n.return,b)}break;case 4:hn(e,n),An(n);break;case 13:hn(e,n),An(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(hg=ze())),i&4&&w1(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(ht=(c=ht)||u,hn(e,n),ht=c):hn(e,n),An(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(N=n,u=n.child;u!==null;){for(d=N=u;N!==null;){switch(h=N,f=h.child,h.tag){case 0:case 11:case 14:case 15:Qr(4,h,h.return);break;case 1:Ao(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(b){Me(i,t,b)}}break;case 5:Ao(h,h.return);break;case 22:if(h.memoizedState!==null){v1(d);continue}}f!==null?(f.return=h,N=f):v1(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,r=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=E_("display",r))}catch(b){Me(n,n.return,b)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Me(n,n.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hn(e,n),An(n),i&4&&w1(n);break;case 21:break;default:hn(e,n),An(n)}}function An(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Zy(t)){var i=t;break e}t=t.return}throw Error(L(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(la(s,""),i.flags&=-33);var o=p1(n);vf(n,o,s);break;case 3:case 4:var r=i.stateNode.containerInfo,a=p1(n);bf(n,a,r);break;default:throw Error(L(161))}}catch(l){Me(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function E5(n,e,t){N=n,nC(n)}function nC(n,e,t){for(var i=(n.mode&1)!==0;N!==null;){var s=N,o=s.child;if(s.tag===22&&i){var r=s.memoizedState!==null||bl;if(!r){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ht;a=bl;var c=ht;if(bl=r,(ht=l)&&!c)for(N=s;N!==null;)r=N,l=r.child,r.tag===22&&r.memoizedState!==null?_1(s):l!==null?(l.return=r,N=l):_1(s);for(;o!==null;)N=o,nC(o),o=o.sibling;N=s,bl=a,ht=c}b1(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,N=o):b1(n)}}function b1(n){for(;N!==null;){var e=N;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||fu(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ht)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:fn(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&t1(e,o,i);break;case 3:var r=e.updateQueue;if(r!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}t1(e,r,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ha(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}ht||e.flags&512&&wf(e)}catch(h){Me(e,e.return,h)}}if(e===n){N=null;break}if(t=e.sibling,t!==null){t.return=e.return,N=t;break}N=e.return}}function v1(n){for(;N!==null;){var e=N;if(e===n){N=null;break}var t=e.sibling;if(t!==null){t.return=e.return,N=t;break}N=e.return}}function _1(n){for(;N!==null;){var e=N;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fu(4,e)}catch(l){Me(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Me(e,s,l)}}var o=e.return;try{wf(e)}catch(l){Me(e,o,l)}break;case 5:var r=e.return;try{wf(e)}catch(l){Me(e,r,l)}}}catch(l){Me(e,e.return,l)}if(e===n){N=null;break}var a=e.sibling;if(a!==null){a.return=e.return,N=a;break}N=e.return}}var S5=Math.ceil,Rc=hi.ReactCurrentDispatcher,ug=hi.ReactCurrentOwner,Zt=hi.ReactCurrentBatchConfig,ne=0,Xe=null,je=null,it=0,Ot=0,Io=qi(0),Ke=0,ka=null,Rs=0,mu=0,dg=0,Jr=null,kt=null,hg=0,jo=1/0,Xn=null,Vc=!1,_f=null,Ni=null,vl=!1,Pi=null,Lc=0,Yr=0,yf=null,Xl=-1,Zl=0;function wt(){return ne&6?ze():Xl!==-1?Xl:Xl=ze()}function Bi(n){return n.mode&1?ne&2&&it!==0?it&-it:u5.transition!==null?(Zl===0&&(Zl=D_()),Zl):(n=le,n!==0||(n=window.event,n=n===void 0?16:q_(n.type)),n):1}function vn(n,e,t,i){if(50<Yr)throw Yr=0,yf=null,Error(L(185));Fa(n,t,i),(!(ne&2)||n!==Xe)&&(n===Xe&&(!(ne&2)&&(mu|=t),Ke===4&&Si(n,it)),At(n,i),t===1&&ne===0&&!(e.mode&1)&&(jo=ze()+500,uu&&Gi()))}function At(n,e){var t=n.callbackNode;uA(n,e);var i=pc(n,n===Xe?it:0);if(i===0)t!==null&&Iw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Iw(t),e===1)n.tag===0?c5(y1.bind(null,n)):dy(y1.bind(null,n)),o5(function(){!(ne&6)&&Gi()}),t=null;else{switch(z_(i)){case 1:t=Fm;break;case 4:t=B_;break;case 16:t=gc;break;case 536870912:t=F_;break;default:t=gc}t=uC(t,iC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function iC(n,e){if(Xl=-1,Zl=0,ne&6)throw Error(L(327));var t=n.callbackNode;if(Bo()&&n.callbackNode!==t)return null;var i=pc(n,n===Xe?it:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Oc(n,i);else{e=i;var s=ne;ne|=2;var o=oC();(Xe!==n||it!==e)&&(Xn=null,jo=ze()+500,vs(n,e));do try{P5();break}catch(a){sC(n,a)}while(1);Ym(),Rc.current=o,ne=s,je!==null?e=0:(Xe=null,it=0,e=Ke)}if(e!==0){if(e===2&&(s=Gh(n),s!==0&&(i=s,e=Cf(n,s))),e===1)throw t=ka,vs(n,0),Si(n,i),At(n,ze()),t;if(e===6)Si(n,i);else{if(s=n.current.alternate,!(i&30)&&!A5(s)&&(e=Oc(n,i),e===2&&(o=Gh(n),o!==0&&(i=o,e=Cf(n,o))),e===1))throw t=ka,vs(n,0),Si(n,i),At(n,ze()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(L(345));case 2:ds(n,kt,Xn);break;case 3:if(Si(n,i),(i&130023424)===i&&(e=hg+500-ze(),10<e)){if(pc(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){wt(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=tf(ds.bind(null,n,kt,Xn),e);break}ds(n,kt,Xn);break;case 4:if(Si(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var r=31-bn(i);o=1<<r,r=e[r],r>s&&(s=r),i&=~o}if(i=s,i=ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*S5(i/1960))-i,10<i){n.timeoutHandle=tf(ds.bind(null,n,kt,Xn),i);break}ds(n,kt,Xn);break;case 5:ds(n,kt,Xn);break;default:throw Error(L(329))}}}return At(n,ze()),n.callbackNode===t?iC.bind(null,n):null}function Cf(n,e){var t=Jr;return n.current.memoizedState.isDehydrated&&(vs(n,e).flags|=256),n=Oc(n,e),n!==2&&(e=kt,kt=t,e!==null&&kf(e)),n}function kf(n){kt===null?kt=n:kt.push.apply(kt,n)}function A5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!_n(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(n,e){for(e&=~dg,e&=~mu,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-bn(e),i=1<<t;n[t]=-1,e&=~i}}function y1(n){if(ne&6)throw Error(L(327));Bo();var e=pc(n,0);if(!(e&1))return At(n,ze()),null;var t=Oc(n,e);if(n.tag!==0&&t===2){var i=Gh(n);i!==0&&(e=i,t=Cf(n,i))}if(t===1)throw t=ka,vs(n,0),Si(n,e),At(n,ze()),t;if(t===6)throw Error(L(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ds(n,kt,Xn),At(n,ze()),null}function fg(n,e){var t=ne;ne|=1;try{return n(e)}finally{ne=t,ne===0&&(jo=ze()+500,uu&&Gi())}}function Vs(n){Pi!==null&&Pi.tag===0&&!(ne&6)&&Bo();var e=ne;ne|=1;var t=Zt.transition,i=le;try{if(Zt.transition=null,le=1,n)return n()}finally{le=i,Zt.transition=t,ne=e,!(ne&6)&&Gi()}}function mg(){Ot=Io.current,_e(Io)}function vs(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,s5(t)),je!==null)for(t=je.return;t!==null;){var i=t;switch(Km(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&yc();break;case 3:$o(),_e(Et),_e(mt),ig();break;case 5:ng(i);break;case 4:$o();break;case 13:_e(Ie);break;case 19:_e(Ie);break;case 10:Xm(i.type._context);break;case 22:case 23:mg()}t=t.return}if(Xe=n,je=n=Fi(n.current,null),it=Ot=e,Ke=0,ka=null,dg=mu=Rs=0,kt=Jr=null,ps!==null){for(e=0;e<ps.length;e++)if(t=ps[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var r=o.next;o.next=s,i.next=r}t.pending=i}ps=null}return n}function sC(n,e){do{var t=je;try{if(Ym(),Ql.current=Pc,Ic){for(var i=Re.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ic=!1}if(Ps=0,Je=qe=Re=null,Kr=!1,_a=0,ug.current=null,t===null||t.return===null){Ke=1,ka=e,je=null;break}e:{var o=n,r=t.return,a=t,l=e;if(e=it,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=l1(r);if(f!==null){f.flags&=-257,c1(f,r,a,o,e),f.mode&1&&a1(o,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var b=new Set;b.add(l),e.updateQueue=b}else p.add(l);break e}else{if(!(e&1)){a1(o,c,e),gg();break e}l=Error(L(426))}}else if(Ee&&a.mode&1){var x=l1(r);if(x!==null){!(x.flags&65536)&&(x.flags|=256),c1(x,r,a,o,e),Qm(Wo(l,a));break e}}o=l=Wo(l,a),Ke!==4&&(Ke=2),Jr===null?Jr=[o]:Jr.push(o),o=r;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=Hy(o,l,e);e1(o,v);break e;case 1:a=l;var w=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ni===null||!Ni.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=Uy(o,a,e);e1(o,E);break e}}o=o.return}while(o!==null)}aC(t)}catch(V){e=V,je===t&&t!==null&&(je=t=t.return);continue}break}while(1)}function oC(){var n=Rc.current;return Rc.current=Pc,n===null?Pc:n}function gg(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Xe===null||!(Rs&268435455)&&!(mu&268435455)||Si(Xe,it)}function Oc(n,e){var t=ne;ne|=2;var i=oC();(Xe!==n||it!==e)&&(Xn=null,vs(n,e));do try{I5();break}catch(s){sC(n,s)}while(1);if(Ym(),ne=t,Rc.current=i,je!==null)throw Error(L(261));return Xe=null,it=0,Ke}function I5(){for(;je!==null;)rC(je)}function P5(){for(;je!==null&&!tA();)rC(je)}function rC(n){var e=cC(n.alternate,n,Ot);n.memoizedProps=n.pendingProps,e===null?aC(n):je=e,ug.current=null}function aC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=k5(t,e),t!==null){t.flags&=32767,je=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ke=6,je=null;return}}else if(t=C5(t,e,Ot),t!==null){je=t;return}if(e=e.sibling,e!==null){je=e;return}je=e=n}while(e!==null);Ke===0&&(Ke=5)}function ds(n,e,t){var i=le,s=Zt.transition;try{Zt.transition=null,le=1,R5(n,e,t,i)}finally{Zt.transition=s,le=i}return null}function R5(n,e,t,i){do Bo();while(Pi!==null);if(ne&6)throw Error(L(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(L(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(dA(n,o),n===Xe&&(je=Xe=null,it=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||vl||(vl=!0,uC(gc,function(){return Bo(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Zt.transition,Zt.transition=null;var r=le;le=1;var a=ne;ne|=4,ug.current=null,T5(n,t),tC(t,n),YA(Zh),wc=!!Xh,Zh=Xh=null,n.current=t,E5(t),nA(),ne=a,le=r,Zt.transition=o}else n.current=t;if(vl&&(vl=!1,Pi=n,Lc=s),o=n.pendingLanes,o===0&&(Ni=null),oA(t.stateNode),At(n,ze()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(Vc)throw Vc=!1,n=_f,_f=null,n;return Lc&1&&n.tag!==0&&Bo(),o=n.pendingLanes,o&1?n===yf?Yr++:(Yr=0,yf=n):Yr=0,Gi(),null}function Bo(){if(Pi!==null){var n=z_(Lc),e=Zt.transition,t=le;try{if(Zt.transition=null,le=16>n?16:n,Pi===null)var i=!1;else{if(n=Pi,Pi=null,Lc=0,ne&6)throw Error(L(331));var s=ne;for(ne|=4,N=n.current;N!==null;){var o=N,r=o.child;if(N.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(N=c;N!==null;){var u=N;switch(u.tag){case 0:case 11:case 15:Qr(8,u,o)}var d=u.child;if(d!==null)d.return=u,N=d;else for(;N!==null;){u=N;var h=u.sibling,f=u.return;if(Xy(u),u===c){N=null;break}if(h!==null){h.return=f,N=h;break}N=f}}}var p=o.alternate;if(p!==null){var b=p.child;if(b!==null){p.child=null;do{var x=b.sibling;b.sibling=null,b=x}while(b!==null)}}N=o}}if(o.subtreeFlags&2064&&r!==null)r.return=o,N=r;else e:for(;N!==null;){if(o=N,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qr(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,N=v;break e}N=o.return}}var w=n.current;for(N=w;N!==null;){r=N;var C=r.child;if(r.subtreeFlags&2064&&C!==null)C.return=r,N=C;else e:for(r=w;N!==null;){if(a=N,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fu(9,a)}}catch(V){Me(a,a.return,V)}if(a===r){N=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,N=E;break e}N=a.return}}if(ne=s,Gi(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(ou,n)}catch{}i=!0}return i}finally{le=t,Zt.transition=e}}return!1}function C1(n,e,t){e=Wo(t,e),e=Hy(n,e,1),n=Mi(n,e,1),e=wt(),n!==null&&(Fa(n,1,e),At(n,e))}function Me(n,e,t){if(n.tag===3)C1(n,n,t);else for(;e!==null;){if(e.tag===3){C1(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ni===null||!Ni.has(i))){n=Wo(t,n),n=Uy(e,n,1),e=Mi(e,n,1),n=wt(),e!==null&&(Fa(e,1,n),At(e,n));break}}e=e.return}}function V5(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=wt(),n.pingedLanes|=n.suspendedLanes&t,Xe===n&&(it&t)===t&&(Ke===4||Ke===3&&(it&130023424)===it&&500>ze()-hg?vs(n,0):dg|=t),At(n,e)}function lC(n,e){e===0&&(n.mode&1?(e=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):e=1);var t=wt();n=li(n,e),n!==null&&(Fa(n,e,t),At(n,t))}function L5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),lC(n,t)}function O5(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(L(314))}i!==null&&i.delete(e),lC(n,t)}var cC;cC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Et.current)Tt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Tt=!1,y5(n,e,t);Tt=!!(n.flags&131072)}else Tt=!1,Ee&&e.flags&1048576&&hy(e,xc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Yl(n,e),n=e.pendingProps;var s=zo(e,mt.current);No(e,t),s=og(null,e,i,n,s,t);var o=rg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(i)?(o=!0,Cc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,eg(e),s.updater=du,e.stateNode=s,s._reactInternals=e,cf(e,i,n,t),e=hf(null,e,i,!0,o,t)):(e.tag=0,Ee&&o&&Gm(e),gt(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Yl(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=N5(i),n=fn(i,n),s){case 0:e=df(null,e,i,n,t);break e;case 1:e=h1(null,e,i,n,t);break e;case 11:e=u1(null,e,i,n,t);break e;case 14:e=d1(null,e,i,fn(i.type,n),t);break e}throw Error(L(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fn(i,s),df(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fn(i,s),h1(n,e,i,s,t);case 3:e:{if(qy(e),n===null)throw Error(L(387));i=e.pendingProps,o=e.memoizedState,s=o.element,py(n,e),Sc(e,i,null,t);var r=e.memoizedState;if(i=r.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Wo(Error(L(423)),e),e=f1(n,e,i,t,s);break e}else if(i!==s){s=Wo(Error(L(424)),e),e=f1(n,e,i,t,s);break e}else for(Dt=Oi(e.stateNode.containerInfo.firstChild),Ut=e,Ee=!0,gn=null,t=_y(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ho(),i===s){e=ci(n,e,t);break e}gt(n,e,i,t)}e=e.child}return e;case 5:return yy(e),n===null&&rf(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,r=s.children,ef(i,s)?r=null:o!==null&&ef(i,o)&&(e.flags|=32),jy(n,e),gt(n,e,r,t),e.child;case 6:return n===null&&rf(e),null;case 13:return Gy(n,e,t);case 4:return tg(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Uo(e,null,i,t):gt(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fn(i,s),u1(n,e,i,s,t);case 7:return gt(n,e,e.pendingProps,t),e.child;case 8:return gt(n,e,e.pendingProps.children,t),e.child;case 12:return gt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,r=s.value,me(Tc,i._currentValue),i._currentValue=r,o!==null)if(_n(o.value,r)){if(o.children===s.children&&!Et.current){e=ci(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){r=o.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=si(-1,t&-t),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),af(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)r=o.type===e.type?null:o.child;else if(o.tag===18){if(r=o.return,r===null)throw Error(L(341));r.lanes|=t,a=r.alternate,a!==null&&(a.lanes|=t),af(r,t,e),r=o.sibling}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}gt(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,No(e,t),s=tn(s),i=i(s),e.flags|=1,gt(n,e,i,t),e.child;case 14:return i=e.type,s=fn(i,e.pendingProps),s=fn(i.type,s),d1(n,e,i,s,t);case 15:return $y(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:fn(i,s),Yl(n,e),e.tag=1,St(i)?(n=!0,Cc(e)):n=!1,No(e,t),by(e,i,s),cf(e,i,s,t),hf(null,e,i,!0,n,t);case 19:return Ky(n,e,t);case 22:return Wy(n,e,t)}throw Error(L(156,e.tag))};function uC(n,e){return N_(n,e)}function M5(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(n,e,t,i){return new M5(n,e,t,i)}function pg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function N5(n){if(typeof n=="function")return pg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Mm)return 11;if(n===Nm)return 14}return 2}function Fi(n,e){var t=n.alternate;return t===null?(t=Yt(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ec(n,e,t,i,s,o){var r=2;if(i=n,typeof n=="function")pg(n)&&(r=1);else if(typeof n=="string")r=5;else e:switch(n){case vo:return _s(t.children,s,o,e);case Om:r=8,s|=8;break;case Vh:return n=Yt(12,t,e,s|2),n.elementType=Vh,n.lanes=o,n;case Lh:return n=Yt(13,t,e,s),n.elementType=Lh,n.lanes=o,n;case Oh:return n=Yt(19,t,e,s),n.elementType=Oh,n.lanes=o,n;case v_:return gu(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w_:r=10;break e;case b_:r=9;break e;case Mm:r=11;break e;case Nm:r=14;break e;case xi:r=16,i=null;break e}throw Error(L(130,n==null?n:typeof n,""))}return e=Yt(r,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function _s(n,e,t,i){return n=Yt(7,n,i,e),n.lanes=t,n}function gu(n,e,t,i){return n=Yt(22,n,i,e),n.elementType=v_,n.lanes=t,n.stateNode={isHidden:!1},n}function Bd(n,e,t){return n=Yt(6,n,null,e),n.lanes=t,n}function Fd(n,e,t){return e=Yt(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function B5(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wg(n,e,t,i,s,o,r,a,l){return n=new B5(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yt(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},eg(o),n}function F5(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bo,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function dC(n){if(!n)return Hi;n=n._reactInternals;e:{if(Bs(n)!==n||n.tag!==1)throw Error(L(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(n.tag===1){var t=n.type;if(St(t))return uy(n,t,e)}return e}function hC(n,e,t,i,s,o,r,a,l){return n=wg(t,i,!0,n,s,o,r,a,l),n.context=dC(null),t=n.current,i=wt(),s=Bi(t),o=si(i,s),o.callback=e??null,Mi(t,o,s),n.current.lanes=s,Fa(n,s,i),At(n,i),n}function pu(n,e,t,i){var s=e.current,o=wt(),r=Bi(s);return t=dC(t),e.context===null?e.context=t:e.pendingContext=t,e=si(o,r),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Mi(s,e,r),n!==null&&(vn(n,s,r,o),Kl(n,s,r)),r}function Mc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function k1(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function bg(n,e){k1(n,e),(n=n.alternate)&&k1(n,e)}function D5(){return null}var fC=typeof reportError=="function"?reportError:function(n){console.error(n)};function vg(n){this._internalRoot=n}wu.prototype.render=vg.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(L(409));pu(n,e,null,null)};wu.prototype.unmount=vg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vs(function(){pu(null,n,null,null)}),e[ai]=null}};function wu(n){this._internalRoot=n}wu.prototype.unstable_scheduleHydration=function(n){if(n){var e=$_();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ei.length&&e!==0&&e<Ei[t].priority;t++);Ei.splice(t,0,n),t===0&&j_(n)}};function _g(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function bu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function x1(){}function z5(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=Mc(r);o.call(c)}}var r=hC(e,i,n,0,null,!1,!1,"",x1);return n._reactRootContainer=r,n[ai]=r.current,ga(n.nodeType===8?n.parentNode:n),Vs(),r}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Mc(l);a.call(c)}}var l=wg(n,0,!1,null,null,!1,!1,"",x1);return n._reactRootContainer=l,n[ai]=l.current,ga(n.nodeType===8?n.parentNode:n),Vs(function(){pu(e,l,t,i)}),l}function vu(n,e,t,i,s){var o=t._reactRootContainer;if(o){var r=o;if(typeof s=="function"){var a=s;s=function(){var l=Mc(r);a.call(l)}}pu(e,r,n,s)}else r=z5(t,e,n,s,i);return Mc(r)}H_=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Fr(e.pendingLanes);t!==0&&(Dm(e,t|1),At(e,ze()),!(ne&6)&&(jo=ze()+500,Gi()))}break;case 13:Vs(function(){var i=li(n,1);if(i!==null){var s=wt();vn(i,n,1,s)}}),bg(n,1)}};zm=function(n){if(n.tag===13){var e=li(n,134217728);if(e!==null){var t=wt();vn(e,n,134217728,t)}bg(n,134217728)}};U_=function(n){if(n.tag===13){var e=Bi(n),t=li(n,e);if(t!==null){var i=wt();vn(t,n,e,i)}bg(n,e)}};$_=function(){return le};W_=function(n,e){var t=le;try{return le=n,e()}finally{le=t}};Wh=function(n,e,t){switch(e){case"input":if(Bh(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=cu(i);if(!s)throw Error(L(90));y_(i),Bh(i,s)}}}break;case"textarea":k_(n,t);break;case"select":e=t.value,e!=null&&Vo(n,!!t.multiple,e,!1)}};P_=fg;R_=Vs;var H5={usingClientEntryPoint:!1,Events:[za,ko,cu,A_,I_,fg]},Tr={findFiberByHostInstance:gs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},U5={bundleType:Tr.bundleType,version:Tr.version,rendererPackageName:Tr.rendererPackageName,rendererConfig:Tr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=O_(n),n===null?null:n.stateNode},findFiberByHostInstance:Tr.findFiberByHostInstance||D5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{ou=_l.inject(U5),Bn=_l}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H5;qt.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_g(e))throw Error(L(200));return F5(n,e,null,t)};qt.createRoot=function(n,e){if(!_g(n))throw Error(L(299));var t=!1,i="",s=fC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wg(n,1,!1,null,null,t,!1,i,s),n[ai]=e.current,ga(n.nodeType===8?n.parentNode:n),new vg(e)};qt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(L(188)):(n=Object.keys(n).join(","),Error(L(268,n)));return n=O_(e),n=n===null?null:n.stateNode,n};qt.flushSync=function(n){return Vs(n)};qt.hydrate=function(n,e,t){if(!bu(e))throw Error(L(200));return vu(null,n,e,!0,t)};qt.hydrateRoot=function(n,e,t){if(!_g(n))throw Error(L(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",r=fC;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),e=hC(e,null,n,1,t??null,s,!1,o,r),n[ai]=e.current,ga(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new wu(e)};qt.render=function(n,e,t){if(!bu(e))throw Error(L(200));return vu(null,n,e,!1,t)};qt.unmountComponentAtNode=function(n){if(!bu(n))throw Error(L(40));return n._reactRootContainer?(Vs(function(){vu(null,null,n,!1,function(){n._reactRootContainer=null,n[ai]=null})}),!0):!1};qt.unstable_batchedUpdates=fg;qt.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!bu(t))throw Error(L(200));if(n==null||n._reactInternals===void 0)throw Error(L(38));return vu(n,e,t,!1,i)};qt.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=qt})(DS);var T1=Ih;Ah.createRoot=T1.createRoot,Ah.hydrateRoot=T1.hydrateRoot;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $5(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const is=$5(),Z={isMac:mC(is),isWindows:W5(is),isGecko:j5(is),isSafari:q5(is),isiOS:G5(is),isAndroid:K5(is),isBlink:Q5(is),features:{isRegExpUnicodePropertySupported:J5()}};function mC(n){return n.indexOf("macintosh")>-1}function W5(n){return n.indexOf("windows")>-1}function j5(n){return!!n.match(/gecko\/\d+/)}function q5(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function G5(n){return!!n.match(/iphone|ipad/i)||mC(n)&&navigator.maxTouchPoints>0}function K5(n){return n.indexOf("android")>-1}function Q5(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function J5(){let n=!1;try{n="".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gC(n,e,t,i){t=t||function(l,c){return l===c};const s=Array.isArray(n)?n:Array.prototype.slice.call(n),o=Array.isArray(e)?e:Array.prototype.slice.call(e),r=Y5(s,o,t);return i?Z5(r,o.length):X5(o,r)}function Y5(n,e,t){const i=E1(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=S1(n,i),o=S1(e,i),r=E1(s,o,t),a=n.length-r,l=e.length-r;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function E1(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function S1(n,e){return n.slice(e).reverse()}function X5(n,e){const t=[],{firstIndex:i,lastIndexOld:s,lastIndexNew:o}=e;return o-i>0&&t.push({index:i,type:"insert",values:n.slice(i,o)}),s-i>0&&t.push({index:i+(o-i),type:"delete",howMany:s-i}),t}function Z5(n,e){const{firstIndex:t,lastIndexOld:i,lastIndexNew:s}=n;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),s-t>0&&(o=o.concat(Array(s-t).fill("insert"))),i-t>0&&(o=o.concat(Array(i-t).fill("delete"))),s<e&&(o=o.concat(Array(e-s).fill("equal"))),o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xr(n,e,t){t=t||function(b,x){return b===x};const i=n.length,s=e.length;if(i>200||s>200||i+s>300)return Xr.fastDiff(n,e,t,!0);let o,r;if(s<i){const b=n;n=e,e=b,o="delete",r="insert"}else o="insert",r="delete";const a=n.length,l=e.length,c=l-a,u={},d={};function h(b){const x=(d[b-1]!==void 0?d[b-1]:-1)+1,v=d[b+1]!==void 0?d[b+1]:-1,w=x>v?-1:1;u[b+w]&&(u[b]=u[b+w].slice(0)),u[b]||(u[b]=[]),u[b].push(x>v?o:r);let C=Math.max(x,v),E=C-b;for(;E<a&&C<l&&t(n[E],e[C]);)E++,C++,u[b].push("equal");return C}let f=0,p;do{for(p=-f;p<c;p++)d[p]=h(p);for(p=c+f;p>c;p--)d[p]=h(p);d[c]=h(c),f++}while(d[c]!==l);return u[c].slice(1)}Xr.fastDiff=gC;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ua(n,...e){e.forEach(t=>{const i=Object.getOwnPropertyNames(t),s=Object.getOwnPropertySymbols(t);i.concat(s).forEach(o=>{if(o in n.prototype||typeof t=="function"&&(o=="length"||o=="name"||o=="prototype"))return;const r=Object.getOwnPropertyDescriptor(t,o);r.enumerable=!1,Object.defineProperty(n.prototype,o,r)})})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function A1(){return function n(){n.called=!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ui{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=A1(),this.off=A1()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ut=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function sn(){const n=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,i=Math.random()*4294967296>>>0;return"e"+ut[n>>0&255]+ut[n>>8&255]+ut[n>>16&255]+ut[n>>24&255]+ut[e>>0&255]+ut[e>>8&255]+ut[e>>16&255]+ut[e>>24&255]+ut[t>>0&255]+ut[t>>8&255]+ut[t>>16&255]+ut[t>>24&255]+ut[i>>0&255]+ut[i>>8&255]+ut[i>>16&255]+ut[i>>24&255]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Di={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pC(n,e){const t=Di.get(e.priority);for(let i=0;i<n.length;i++)if(Di.get(n[i].priority)<t){n.splice(i,0,e);return}n.push(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const eI="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class y extends Error{constructor(e,t,i){super(tI(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const i=new y(e.message,t);throw i.stack=e.stack,i}}function Ce(n,e){console.warn(...vC(n,e))}function wC(n,e){console.error(...vC(n,e))}function bC(n){return`
Read more: ${eI}#error-${n}`}function tI(n,e){const t=new WeakSet,s=e?` ${JSON.stringify(e,(r,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",o=bC(n);return n+s+o}function vC(n,e){const t=bC(n);return e?[n,e,t]:[n,t]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nI="36.0.0",I1=typeof window=="object"?window:global;if(I1.CKEDITOR_VERSION)throw new y("ckeditor-duplicated-modules",null);I1.CKEDITOR_VERSION=nI;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fo=Symbol("listeningTo"),xf=Symbol("emitterId"),Qn=Symbol("delegations"),_C=ue(Object);function ue(n){if(!n)return _C;class e extends n{on(i,s,o){this.listenTo(this,i,s,o)}once(i,s,o){let r=!1;const a=(l,...c)=>{r||(r=!0,l.off(),s.call(this,l,...c))};this.listenTo(this,i,a,o)}off(i,s){this.stopListening(this,i,s)}listenTo(i,s,o,r={}){let a,l;this[fo]||(this[fo]={});const c=this[fo];Dd(i)||yC(i);const u=Dd(i);(a=c[u])||(a=c[u]={emitter:i,callbacks:{}}),(l=a.callbacks[s])||(l=a.callbacks[s]=[]),l.push(o),rI(this,i,s,o,r)}stopListening(i,s,o){const r=this[fo];let a=i&&Dd(i);const l=r&&a?r[a]:void 0,c=l&&s?l.callbacks[s]:void 0;if(!(!r||i&&!l||s&&!c))if(o)zd(this,i,s,o),c.indexOf(o)!==-1&&(c.length===1?delete l.callbacks[s]:zd(this,i,s,o));else if(c){for(;o=c.pop();)zd(this,i,s,o);delete l.callbacks[s]}else if(l){for(s in l.callbacks)this.stopListening(i,s);delete r[a]}else{for(a in r)this.stopListening(r[a].emitter);delete this[fo]}}fire(i,...s){try{const o=i instanceof ui?i:new ui(this,i),r=o.name;let a=kC(this,r);if(o.path.push(this),a){const c=[o,...s];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),o.off.called&&(delete o.off.called,this._removeEventListener(r,a[u].callback)),!o.stop.called);u++);}const l=this[Qn];if(l){const c=l.get(r),u=l.get("*");c&&P1(c,o,s),u&&P1(u,o,s)}return o.return}catch(o){y.rethrowUnexpectedError(o,this)}}delegate(...i){return{to:(s,o)=>{this[Qn]||(this[Qn]=new Map),i.forEach(r=>{const a=this[Qn].get(r);a?a.set(s,o):this[Qn].set(r,new Map([[s,o]]))})}}}stopDelegating(i,s){if(this[Qn])if(!i)this[Qn].clear();else if(!s)this[Qn].delete(i);else{const o=this[Qn].get(i);o&&o.delete(s)}}_addEventListener(i,s,o){oI(this,i);const r=Tf(this,i),a=Di.get(o.priority),l={callback:s,priority:a};for(const c of r)pC(c,l)}_removeEventListener(i,s){const o=Tf(this,i);for(const r of o)for(let a=0;a<r.length;a++)r[a].callback==s&&(r.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{ue[n]=_C.prototype[n]});function iI(n,e){const t=n[fo];return t&&t[e]?t[e].emitter:null}function yC(n,e){n[xf]||(n[xf]=e||sn())}function Dd(n){return n[xf]}function CC(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function sI(){return{callbacks:[],childEvents:[]}}function oI(n,e){const t=CC(n);if(t[e])return;let i=e,s=null;const o=[];for(;i!==""&&!t[i];)t[i]=sI(),o.push(t[i]),s&&t[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const r of o)r.callbacks=t[i].callbacks.slice();t[i].childEvents.push(s)}}function Tf(n,e){const t=CC(n)[e];if(!t)return[];let i=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const o=Tf(n,t.childEvents[s]);i=i.concat(o)}return i}function kC(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?kC(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function P1(n,e,t){for(let[i,s]of n){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const o=new ui(e.source,s);o.path=[...e.path],i.fire(o,...t)}}function rI(n,e,t,i,s){e._addEventListener?e._addEventListener(t,i,s):n._addEventListener.call(e,t,i,s)}function zd(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}var aI=typeof global=="object"&&global&&global.Object===Object&&global;const xC=aI;var lI=typeof self=="object"&&self&&self.Object===Object&&self,cI=xC||lI||Function("return this")();const Cn=cI;var uI=Cn.Symbol;const zn=uI;var TC=Object.prototype,dI=TC.hasOwnProperty,hI=TC.toString,Er=zn?zn.toStringTag:void 0;function fI(n){var e=dI.call(n,Er),t=n[Er];try{n[Er]=void 0;var i=!0}catch{}var s=hI.call(n);return i&&(e?n[Er]=t:delete n[Er]),s}var mI=Object.prototype,gI=mI.toString;function pI(n){return gI.call(n)}var wI="[object Null]",bI="[object Undefined]",R1=zn?zn.toStringTag:void 0;function Ki(n){return n==null?n===void 0?bI:wI:R1&&R1 in Object(n)?fI(n):pI(n)}function on(n){return n!=null&&typeof n=="object"}var vI="[object Symbol]";function _u(n){return typeof n=="symbol"||on(n)&&Ki(n)==vI}function _I(n,e){for(var t=-1,i=n==null?0:n.length,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}var yI=Array.isArray;const pt=yI;var CI=1/0,V1=zn?zn.prototype:void 0,L1=V1?V1.toString:void 0;function EC(n){if(typeof n=="string")return n;if(pt(n))return _I(n,EC)+"";if(_u(n))return L1?L1.call(n):"";var e=n+"";return e=="0"&&1/n==-CI?"-0":e}var kI=/\s/;function xI(n){for(var e=n.length;e--&&kI.test(n.charAt(e)););return e}var TI=/^\s+/;function EI(n){return n&&n.slice(0,xI(n)+1).replace(TI,"")}function ke(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var O1=0/0,SI=/^[-+]0x[0-9a-f]+$/i,AI=/^0b[01]+$/i,II=/^0o[0-7]+$/i,PI=parseInt;function M1(n){if(typeof n=="number")return n;if(_u(n))return O1;if(ke(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=ke(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=EI(n);var t=AI.test(n);return t||II.test(n)?PI(n.slice(2),t?2:8):SI.test(n)?O1:+n}function ms(n){return n}var RI="[object AsyncFunction]",VI="[object Function]",LI="[object GeneratorFunction]",OI="[object Proxy]";function Ls(n){if(!ke(n))return!1;var e=Ki(n);return e==VI||e==LI||e==RI||e==OI}var MI=Cn["__core-js_shared__"];const Hd=MI;var N1=function(){var n=/[^.]+$/.exec(Hd&&Hd.keys&&Hd.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function NI(n){return!!N1&&N1 in n}var BI=Function.prototype,FI=BI.toString;function Fs(n){if(n!=null){try{return FI.call(n)}catch{}try{return n+""}catch{}}return""}var DI=/[\\^$.*+?()[\]{}|]/g,zI=/^\[object .+?Constructor\]$/,HI=Function.prototype,UI=Object.prototype,$I=HI.toString,WI=UI.hasOwnProperty,jI=RegExp("^"+$I.call(WI).replace(DI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qI(n){if(!ke(n)||NI(n))return!1;var e=Ls(n)?jI:zI;return e.test(Fs(n))}function GI(n,e){return n==null?void 0:n[e]}function Ds(n,e){var t=GI(n,e);return qI(t)?t:void 0}var KI=Ds(Cn,"WeakMap");const Ef=KI;var B1=Object.create,QI=function(){function n(){}return function(e){if(!ke(e))return{};if(B1)return B1(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const JI=QI;function YI(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function SC(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var XI=800,ZI=16,eP=Date.now;function tP(n){var e=0,t=0;return function(){var i=eP(),s=ZI-(i-t);if(t=i,s>0){if(++e>=XI)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function nP(n){return function(){return n}}var iP=function(){try{var n=Ds(Object,"defineProperty");return n({},"",{}),n}catch{}}();const Nc=iP;var sP=Nc?function(n,e){return Nc(n,"toString",{configurable:!0,enumerable:!1,value:nP(e),writable:!0})}:ms;const oP=sP;var rP=tP(oP);const aP=rP;function lP(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var cP=9007199254740991,uP=/^(?:0|[1-9]\d*)$/;function yg(n,e){var t=typeof n;return e=e??cP,!!e&&(t=="number"||t!="symbol"&&uP.test(n))&&n>-1&&n%1==0&&n<e}function Cg(n,e,t){e=="__proto__"&&Nc?Nc(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function $a(n,e){return n===e||n!==n&&e!==e}var dP=Object.prototype,hP=dP.hasOwnProperty;function kg(n,e,t){var i=n[e];(!(hP.call(n,e)&&$a(i,t))||t===void 0&&!(e in n))&&Cg(n,e,t)}function ir(n,e,t,i){var s=!t;t||(t={});for(var o=-1,r=e.length;++o<r;){var a=e[o],l=i?i(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),s?Cg(t,a,l):kg(t,a,l)}return t}var F1=Math.max;function fP(n,e,t){return e=F1(e===void 0?n.length-1:e,0),function(){for(var i=arguments,s=-1,o=F1(i.length-e,0),r=Array(o);++s<o;)r[s]=i[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=i[s];return a[e]=t(r),YI(n,this,a)}}function mP(n,e){return aP(fP(n,e,ms),n+"")}var gP=9007199254740991;function AC(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=gP}function yu(n){return n!=null&&AC(n.length)&&!Ls(n)}function pP(n,e,t){if(!ke(t))return!1;var i=typeof e;return(i=="number"?yu(t)&&yg(e,t.length):i=="string"&&e in t)?$a(t[e],n):!1}function IC(n){return mP(function(e,t){var i=-1,s=t.length,o=s>1?t[s-1]:void 0,r=s>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(s--,o):void 0,r&&pP(t[0],t[1],r)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var a=t[i];a&&n(e,a,i,o)}return e})}var wP=Object.prototype;function xg(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||wP;return n===t}function bP(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var vP="[object Arguments]";function D1(n){return on(n)&&Ki(n)==vP}var PC=Object.prototype,_P=PC.hasOwnProperty,yP=PC.propertyIsEnumerable,CP=D1(function(){return arguments}())?D1:function(n){return on(n)&&_P.call(n,"callee")&&!yP.call(n,"callee")};const Sf=CP;function kP(){return!1}var RC=typeof zt=="object"&&zt&&!zt.nodeType&&zt,z1=RC&&typeof Ht=="object"&&Ht&&!Ht.nodeType&&Ht,xP=z1&&z1.exports===RC,H1=xP?Cn.Buffer:void 0,TP=H1?H1.isBuffer:void 0,EP=TP||kP;const xa=EP;var SP="[object Arguments]",AP="[object Array]",IP="[object Boolean]",PP="[object Date]",RP="[object Error]",VP="[object Function]",LP="[object Map]",OP="[object Number]",MP="[object Object]",NP="[object RegExp]",BP="[object Set]",FP="[object String]",DP="[object WeakMap]",zP="[object ArrayBuffer]",HP="[object DataView]",UP="[object Float32Array]",$P="[object Float64Array]",WP="[object Int8Array]",jP="[object Int16Array]",qP="[object Int32Array]",GP="[object Uint8Array]",KP="[object Uint8ClampedArray]",QP="[object Uint16Array]",JP="[object Uint32Array]",be={};be[UP]=be[$P]=be[WP]=be[jP]=be[qP]=be[GP]=be[KP]=be[QP]=be[JP]=!0;be[SP]=be[AP]=be[zP]=be[IP]=be[HP]=be[PP]=be[RP]=be[VP]=be[LP]=be[OP]=be[MP]=be[NP]=be[BP]=be[FP]=be[DP]=!1;function YP(n){return on(n)&&AC(n.length)&&!!be[Ki(n)]}function Tg(n){return function(e){return n(e)}}var VC=typeof zt=="object"&&zt&&!zt.nodeType&&zt,Zr=VC&&typeof Ht=="object"&&Ht&&!Ht.nodeType&&Ht,XP=Zr&&Zr.exports===VC,Ud=XP&&xC.process,ZP=function(){try{var n=Zr&&Zr.require&&Zr.require("util").types;return n||Ud&&Ud.binding&&Ud.binding("util")}catch{}}();const qo=ZP;var U1=qo&&qo.isTypedArray,eR=U1?Tg(U1):YP;const Eg=eR;var tR=Object.prototype,nR=tR.hasOwnProperty;function LC(n,e){var t=pt(n),i=!t&&Sf(n),s=!t&&!i&&xa(n),o=!t&&!i&&!s&&Eg(n),r=t||i||s||o,a=r?bP(n.length,String):[],l=a.length;for(var c in n)(e||nR.call(n,c))&&!(r&&(c=="length"||s&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||yg(c,l)))&&a.push(c);return a}function OC(n,e){return function(t){return n(e(t))}}var iR=OC(Object.keys,Object);const sR=iR;var oR=Object.prototype,rR=oR.hasOwnProperty;function aR(n){if(!xg(n))return sR(n);var e=[];for(var t in Object(n))rR.call(n,t)&&t!="constructor"&&e.push(t);return e}function Sg(n){return yu(n)?LC(n):aR(n)}function lR(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var cR=Object.prototype,uR=cR.hasOwnProperty;function dR(n){if(!ke(n))return lR(n);var e=xg(n),t=[];for(var i in n)i=="constructor"&&(e||!uR.call(n,i))||t.push(i);return t}function sr(n){return yu(n)?LC(n,!0):dR(n)}var hR=IC(function(n,e){ir(e,sr(e),n)});const MC=hR;var fR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mR=/^\w*$/;function gR(n,e){if(pt(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||_u(n)?!0:mR.test(n)||!fR.test(n)||e!=null&&n in Object(e)}var pR=Ds(Object,"create");const Ta=pR;function wR(){this.__data__=Ta?Ta(null):{},this.size=0}function bR(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var vR="__lodash_hash_undefined__",_R=Object.prototype,yR=_R.hasOwnProperty;function CR(n){var e=this.__data__;if(Ta){var t=e[n];return t===vR?void 0:t}return yR.call(e,n)?e[n]:void 0}var kR=Object.prototype,xR=kR.hasOwnProperty;function TR(n){var e=this.__data__;return Ta?e[n]!==void 0:xR.call(e,n)}var ER="__lodash_hash_undefined__";function SR(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ta&&e===void 0?ER:e,this}function Os(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Os.prototype.clear=wR;Os.prototype.delete=bR;Os.prototype.get=CR;Os.prototype.has=TR;Os.prototype.set=SR;function AR(){this.__data__=[],this.size=0}function Cu(n,e){for(var t=n.length;t--;)if($a(n[t][0],e))return t;return-1}var IR=Array.prototype,PR=IR.splice;function RR(n){var e=this.__data__,t=Cu(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():PR.call(e,t,1),--this.size,!0}function VR(n){var e=this.__data__,t=Cu(e,n);return t<0?void 0:e[t][1]}function LR(n){return Cu(this.__data__,n)>-1}function OR(n,e){var t=this.__data__,i=Cu(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function fi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}fi.prototype.clear=AR;fi.prototype.delete=RR;fi.prototype.get=VR;fi.prototype.has=LR;fi.prototype.set=OR;var MR=Ds(Cn,"Map");const Ea=MR;function NR(){this.size=0,this.__data__={hash:new Os,map:new(Ea||fi),string:new Os}}function BR(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function ku(n,e){var t=n.__data__;return BR(e)?t[typeof e=="string"?"string":"hash"]:t.map}function FR(n){var e=ku(this,n).delete(n);return this.size-=e?1:0,e}function DR(n){return ku(this,n).get(n)}function zR(n){return ku(this,n).has(n)}function HR(n,e){var t=ku(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function mi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}mi.prototype.clear=NR;mi.prototype.delete=FR;mi.prototype.get=DR;mi.prototype.has=zR;mi.prototype.set=HR;var UR="Expected a function";function Ag(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(UR);var t=function(){var i=arguments,s=e?e.apply(this,i):i[0],o=t.cache;if(o.has(s))return o.get(s);var r=n.apply(this,i);return t.cache=o.set(s,r)||o,r};return t.cache=new(Ag.Cache||mi),t}Ag.Cache=mi;var $R=500;function WR(n){var e=Ag(n,function(i){return t.size===$R&&t.clear(),i}),t=e.cache;return e}var jR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qR=/\\(\\)?/g,GR=WR(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(jR,function(t,i,s,o){e.push(s?o.replace(qR,"$1"):i||t)}),e});const KR=GR;function Ig(n){return n==null?"":EC(n)}function Pg(n,e){return pt(n)?n:gR(n,e)?[n]:KR(Ig(n))}var QR=1/0;function Rg(n){if(typeof n=="string"||_u(n))return n;var e=n+"";return e=="0"&&1/n==-QR?"-0":e}function NC(n,e){e=Pg(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[Rg(e[t++])];return t&&t==i?n:void 0}function Bc(n,e,t){var i=n==null?void 0:NC(n,e);return i===void 0?t:i}function BC(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var JR=OC(Object.getPrototypeOf,Object);const Vg=JR;var YR="[object Object]",XR=Function.prototype,ZR=Object.prototype,FC=XR.toString,e4=ZR.hasOwnProperty,t4=FC.call(Object);function xt(n){if(!on(n)||Ki(n)!=YR)return!1;var e=Vg(n);if(e===null)return!0;var t=e4.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&FC.call(t)==t4}function DC(n,e,t){var i=-1,s=n.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(s);++i<s;)o[i]=n[i+e];return o}function n4(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:DC(n,e,t)}var i4="\\ud800-\\udfff",s4="\\u0300-\\u036f",o4="\\ufe20-\\ufe2f",r4="\\u20d0-\\u20ff",a4=s4+o4+r4,l4="\\ufe0e\\ufe0f",c4="\\u200d",u4=RegExp("["+c4+i4+a4+l4+"]");function zC(n){return u4.test(n)}function d4(n){return n.split("")}var HC="\\ud800-\\udfff",h4="\\u0300-\\u036f",f4="\\ufe20-\\ufe2f",m4="\\u20d0-\\u20ff",g4=h4+f4+m4,p4="\\ufe0e\\ufe0f",w4="["+HC+"]",Af="["+g4+"]",If="\\ud83c[\\udffb-\\udfff]",b4="(?:"+Af+"|"+If+")",UC="[^"+HC+"]",$C="(?:\\ud83c[\\udde6-\\uddff]){2}",WC="[\\ud800-\\udbff][\\udc00-\\udfff]",v4="\\u200d",jC=b4+"?",qC="["+p4+"]?",_4="(?:"+v4+"(?:"+[UC,$C,WC].join("|")+")"+qC+jC+")*",y4=qC+jC+_4,C4="(?:"+[UC+Af+"?",Af,$C,WC,w4].join("|")+")",k4=RegExp(If+"(?="+If+")|"+C4+y4,"g");function x4(n){return n.match(k4)||[]}function T4(n){return zC(n)?x4(n):d4(n)}function E4(n){return function(e){e=Ig(e);var t=zC(e)?T4(e):void 0,i=t?t[0]:e.charAt(0),s=t?n4(t,1).join(""):e.slice(1);return i[n]()+s}}var S4=E4("toUpperCase");const A4=S4;function I4(){this.__data__=new fi,this.size=0}function P4(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function R4(n){return this.__data__.get(n)}function V4(n){return this.__data__.has(n)}var L4=200;function O4(n,e){var t=this.__data__;if(t instanceof fi){var i=t.__data__;if(!Ea||i.length<L4-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new mi(i)}return t.set(n,e),this.size=t.size,this}function Dn(n){var e=this.__data__=new fi(n);this.size=e.size}Dn.prototype.clear=I4;Dn.prototype.delete=P4;Dn.prototype.get=R4;Dn.prototype.has=V4;Dn.prototype.set=O4;function M4(n,e){return n&&ir(e,Sg(e),n)}function N4(n,e){return n&&ir(e,sr(e),n)}var GC=typeof zt=="object"&&zt&&!zt.nodeType&&zt,$1=GC&&typeof Ht=="object"&&Ht&&!Ht.nodeType&&Ht,B4=$1&&$1.exports===GC,W1=B4?Cn.Buffer:void 0,j1=W1?W1.allocUnsafe:void 0;function KC(n,e){if(e)return n.slice();var t=n.length,i=j1?j1(t):new n.constructor(t);return n.copy(i),i}function F4(n,e){for(var t=-1,i=n==null?0:n.length,s=0,o=[];++t<i;){var r=n[t];e(r,t,n)&&(o[s++]=r)}return o}function QC(){return[]}var D4=Object.prototype,z4=D4.propertyIsEnumerable,q1=Object.getOwnPropertySymbols,H4=q1?function(n){return n==null?[]:(n=Object(n),F4(q1(n),function(e){return z4.call(n,e)}))}:QC;const Lg=H4;function U4(n,e){return ir(n,Lg(n),e)}var $4=Object.getOwnPropertySymbols,W4=$4?function(n){for(var e=[];n;)BC(e,Lg(n)),n=Vg(n);return e}:QC;const JC=W4;function j4(n,e){return ir(n,JC(n),e)}function YC(n,e,t){var i=e(n);return pt(n)?i:BC(i,t(n))}function Pf(n){return YC(n,Sg,Lg)}function q4(n){return YC(n,sr,JC)}var G4=Ds(Cn,"DataView");const Rf=G4;var K4=Ds(Cn,"Promise");const Vf=K4;var Q4=Ds(Cn,"Set");const Lf=Q4;var G1="[object Map]",J4="[object Object]",K1="[object Promise]",Q1="[object Set]",J1="[object WeakMap]",Y1="[object DataView]",Y4=Fs(Rf),X4=Fs(Ea),Z4=Fs(Vf),e3=Fs(Lf),t3=Fs(Ef),hs=Ki;(Rf&&hs(new Rf(new ArrayBuffer(1)))!=Y1||Ea&&hs(new Ea)!=G1||Vf&&hs(Vf.resolve())!=K1||Lf&&hs(new Lf)!=Q1||Ef&&hs(new Ef)!=J1)&&(hs=function(n){var e=Ki(n),t=e==J4?n.constructor:void 0,i=t?Fs(t):"";if(i)switch(i){case Y4:return Y1;case X4:return G1;case Z4:return K1;case e3:return Q1;case t3:return J1}return e});const Sa=hs;var n3=Object.prototype,i3=n3.hasOwnProperty;function s3(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&i3.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var o3=Cn.Uint8Array;const Fc=o3;function Og(n){var e=new n.constructor(n.byteLength);return new Fc(e).set(new Fc(n)),e}function r3(n,e){var t=e?Og(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var a3=/\w*$/;function l3(n){var e=new n.constructor(n.source,a3.exec(n));return e.lastIndex=n.lastIndex,e}var X1=zn?zn.prototype:void 0,Z1=X1?X1.valueOf:void 0;function c3(n){return Z1?Object(Z1.call(n)):{}}function XC(n,e){var t=e?Og(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var u3="[object Boolean]",d3="[object Date]",h3="[object Map]",f3="[object Number]",m3="[object RegExp]",g3="[object Set]",p3="[object String]",w3="[object Symbol]",b3="[object ArrayBuffer]",v3="[object DataView]",_3="[object Float32Array]",y3="[object Float64Array]",C3="[object Int8Array]",k3="[object Int16Array]",x3="[object Int32Array]",T3="[object Uint8Array]",E3="[object Uint8ClampedArray]",S3="[object Uint16Array]",A3="[object Uint32Array]";function I3(n,e,t){var i=n.constructor;switch(e){case b3:return Og(n);case u3:case d3:return new i(+n);case v3:return r3(n,t);case _3:case y3:case C3:case k3:case x3:case T3:case E3:case S3:case A3:return XC(n,t);case h3:return new i;case f3:case p3:return new i(n);case m3:return l3(n);case g3:return new i;case w3:return c3(n)}}function ZC(n){return typeof n.constructor=="function"&&!xg(n)?JI(Vg(n)):{}}var P3="[object Map]";function R3(n){return on(n)&&Sa(n)==P3}var eb=qo&&qo.isMap,V3=eb?Tg(eb):R3;const L3=V3;var O3="[object Set]";function M3(n){return on(n)&&Sa(n)==O3}var tb=qo&&qo.isSet,N3=tb?Tg(tb):M3;const B3=N3;var F3=1,D3=2,z3=4,ek="[object Arguments]",H3="[object Array]",U3="[object Boolean]",$3="[object Date]",W3="[object Error]",tk="[object Function]",j3="[object GeneratorFunction]",q3="[object Map]",G3="[object Number]",nk="[object Object]",K3="[object RegExp]",Q3="[object Set]",J3="[object String]",Y3="[object Symbol]",X3="[object WeakMap]",Z3="[object ArrayBuffer]",e6="[object DataView]",t6="[object Float32Array]",n6="[object Float64Array]",i6="[object Int8Array]",s6="[object Int16Array]",o6="[object Int32Array]",r6="[object Uint8Array]",a6="[object Uint8ClampedArray]",l6="[object Uint16Array]",c6="[object Uint32Array]",fe={};fe[ek]=fe[H3]=fe[Z3]=fe[e6]=fe[U3]=fe[$3]=fe[t6]=fe[n6]=fe[i6]=fe[s6]=fe[o6]=fe[q3]=fe[G3]=fe[nk]=fe[K3]=fe[Q3]=fe[J3]=fe[Y3]=fe[r6]=fe[a6]=fe[l6]=fe[c6]=!0;fe[W3]=fe[tk]=fe[X3]=!1;function Fo(n,e,t,i,s,o){var r,a=e&F3,l=e&D3,c=e&z3;if(t&&(r=s?t(n,i,s,o):t(n)),r!==void 0)return r;if(!ke(n))return n;var u=pt(n);if(u){if(r=s3(n),!a)return SC(n,r)}else{var d=Sa(n),h=d==tk||d==j3;if(xa(n))return KC(n,a);if(d==nk||d==ek||h&&!s){if(r=l||h?{}:ZC(n),!a)return l?j4(n,N4(r,n)):U4(n,M4(r,n))}else{if(!fe[d])return s?n:{};r=I3(n,d,a)}}o||(o=new Dn);var f=o.get(n);if(f)return f;o.set(n,r),B3(n)?n.forEach(function(x){r.add(Fo(x,e,t,x,n,o))}):L3(n)&&n.forEach(function(x,v){r.set(v,Fo(x,e,t,v,n,o))});var p=c?l?q4:Pf:l?sr:Sg,b=u?void 0:p(n);return lP(b||n,function(x,v){b&&(v=x,x=n[v]),kg(r,v,Fo(x,e,t,v,n,o))}),r}var u6=4;function ik(n){return Fo(n,u6)}var d6=1,h6=4;function zs(n){return Fo(n,d6|h6)}var f6=1,m6=4;function sk(n,e){return e=typeof e=="function"?e:void 0,Fo(n,f6|m6,e)}var g6="__lodash_hash_undefined__";function p6(n){return this.__data__.set(n,g6),this}function w6(n){return this.__data__.has(n)}function Dc(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new mi;++e<t;)this.add(n[e])}Dc.prototype.add=Dc.prototype.push=p6;Dc.prototype.has=w6;function b6(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function v6(n,e){return n.has(e)}var _6=1,y6=2;function ok(n,e,t,i,s,o){var r=t&_6,a=n.length,l=e.length;if(a!=l&&!(r&&l>a))return!1;var c=o.get(n),u=o.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,f=t&y6?new Dc:void 0;for(o.set(n,e),o.set(e,n);++d<a;){var p=n[d],b=e[d];if(i)var x=r?i(b,p,d,e,n,o):i(p,b,d,n,e,o);if(x!==void 0){if(x)continue;h=!1;break}if(f){if(!b6(e,function(v,w){if(!v6(f,w)&&(p===v||s(p,v,t,i,o)))return f.push(w)})){h=!1;break}}else if(!(p===b||s(p,b,t,i,o))){h=!1;break}}return o.delete(n),o.delete(e),h}function C6(n){var e=-1,t=Array(n.size);return n.forEach(function(i,s){t[++e]=[s,i]}),t}function k6(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var x6=1,T6=2,E6="[object Boolean]",S6="[object Date]",A6="[object Error]",I6="[object Map]",P6="[object Number]",R6="[object RegExp]",V6="[object Set]",L6="[object String]",O6="[object Symbol]",M6="[object ArrayBuffer]",N6="[object DataView]",nb=zn?zn.prototype:void 0,$d=nb?nb.valueOf:void 0;function B6(n,e,t,i,s,o,r){switch(t){case N6:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case M6:return!(n.byteLength!=e.byteLength||!o(new Fc(n),new Fc(e)));case E6:case S6:case P6:return $a(+n,+e);case A6:return n.name==e.name&&n.message==e.message;case R6:case L6:return n==e+"";case I6:var a=C6;case V6:var l=i&x6;if(a||(a=k6),n.size!=e.size&&!l)return!1;var c=r.get(n);if(c)return c==e;i|=T6,r.set(n,e);var u=ok(a(n),a(e),i,s,o,r);return r.delete(n),u;case O6:if($d)return $d.call(n)==$d.call(e)}return!1}var F6=1,D6=Object.prototype,z6=D6.hasOwnProperty;function H6(n,e,t,i,s,o){var r=t&F6,a=Pf(n),l=a.length,c=Pf(e),u=c.length;if(l!=u&&!r)return!1;for(var d=l;d--;){var h=a[d];if(!(r?h in e:z6.call(e,h)))return!1}var f=o.get(n),p=o.get(e);if(f&&p)return f==e&&p==n;var b=!0;o.set(n,e),o.set(e,n);for(var x=r;++d<l;){h=a[d];var v=n[h],w=e[h];if(i)var C=r?i(w,v,h,e,n,o):i(v,w,h,n,e,o);if(!(C===void 0?v===w||s(v,w,t,i,o):C)){b=!1;break}x||(x=h=="constructor")}if(b&&!x){var E=n.constructor,V=e.constructor;E!=V&&"constructor"in n&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof V=="function"&&V instanceof V)&&(b=!1)}return o.delete(n),o.delete(e),b}var U6=1,ib="[object Arguments]",sb="[object Array]",yl="[object Object]",$6=Object.prototype,ob=$6.hasOwnProperty;function W6(n,e,t,i,s,o){var r=pt(n),a=pt(e),l=r?sb:Sa(n),c=a?sb:Sa(e);l=l==ib?yl:l,c=c==ib?yl:c;var u=l==yl,d=c==yl,h=l==c;if(h&&xa(n)){if(!xa(e))return!1;r=!0,u=!1}if(h&&!u)return o||(o=new Dn),r||Eg(n)?ok(n,e,t,i,s,o):B6(n,e,l,t,i,s,o);if(!(t&U6)){var f=u&&ob.call(n,"__wrapped__"),p=d&&ob.call(e,"__wrapped__");if(f||p){var b=f?n.value():n,x=p?e.value():e;return o||(o=new Dn),s(b,x,t,i,o)}}return h?(o||(o=new Dn),H6(n,e,t,i,s,o)):!1}function Mg(n,e,t,i,s){return n===e?!0:n==null||e==null||!on(n)&&!on(e)?n!==n&&e!==e:W6(n,e,t,i,Mg,s)}function j6(n){return function(e,t,i){for(var s=-1,o=Object(e),r=i(e),a=r.length;a--;){var l=r[n?a:++s];if(t(o[l],l,o)===!1)break}return e}}var q6=j6();const G6=q6;var K6=function(){return Cn.Date.now()};const Wd=K6;var Q6="Expected a function",J6=Math.max,Y6=Math.min;function di(n,e,t){var i,s,o,r,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(Q6);e=M1(e)||0,ke(t)&&(u=!!t.leading,d="maxWait"in t,o=d?J6(M1(t.maxWait)||0,e):o,h="trailing"in t?!!t.trailing:h);function f(A){var P=i,I=s;return i=s=void 0,c=A,r=n.apply(I,P),r}function p(A){return c=A,a=setTimeout(v,e),u?f(A):r}function b(A){var P=A-l,I=A-c,$=e-P;return d?Y6($,o-I):$}function x(A){var P=A-l,I=A-c;return l===void 0||P>=e||P<0||d&&I>=o}function v(){var A=Wd();if(x(A))return w(A);a=setTimeout(v,b(A))}function w(A){return a=void 0,h&&i?f(A):(i=s=void 0,r)}function C(){a!==void 0&&clearTimeout(a),c=0,i=l=s=a=void 0}function E(){return a===void 0?r:w(Wd())}function V(){var A=Wd(),P=x(A);if(i=arguments,s=this,l=A,P){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),r}return V.cancel=C,V.flush=E,V}function Of(n,e,t){(t!==void 0&&!$a(n[e],t)||t===void 0&&!(e in n))&&Cg(n,e,t)}function X6(n){return on(n)&&yu(n)}function Mf(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function Z6(n){return ir(n,sr(n))}function eV(n,e,t,i,s,o,r){var a=Mf(n,t),l=Mf(e,t),c=r.get(l);if(c){Of(n,t,c);return}var u=o?o(a,l,t+"",n,e,r):void 0,d=u===void 0;if(d){var h=pt(l),f=!h&&xa(l),p=!h&&!f&&Eg(l);u=l,h||f||p?pt(a)?u=a:X6(a)?u=SC(a):f?(d=!1,u=KC(l,!0)):p?(d=!1,u=XC(l,!0)):u=[]:xt(l)||Sf(l)?(u=a,Sf(a)?u=Z6(a):(!ke(a)||Ls(a))&&(u=ZC(l))):d=!1}d&&(r.set(l,u),s(u,l,i,o,r),r.delete(l)),Of(n,t,u)}function rk(n,e,t,i,s){n!==e&&G6(e,function(o,r){if(s||(s=new Dn),ke(o))eV(n,e,r,t,rk,i,s);else{var a=i?i(Mf(n,r),o,r+"",n,e,s):void 0;a===void 0&&(a=o),Of(n,r,a)}},sr)}function tV(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var ak=/[\\^$.*+?()[\]{}|]/g,nV=RegExp(ak.source);function lk(n){return n=Ig(n),n&&nV.test(n)?n.replace(ak,"\\$&"):n}var iV="[object String]";function rb(n){return typeof n=="string"||!pt(n)&&on(n)&&Ki(n)==iV}function sV(n,e){return e.length<2?n:NC(n,DC(e,0,-1))}function or(n){return on(n)&&n.nodeType===1&&!xt(n)}function ab(n,e){return Mg(n,e)}function oV(n,e,t){t=typeof t=="function"?t:void 0;var i=t?t(n,e):void 0;return i===void 0?Mg(n,e,void 0,t):!!i}var rV=IC(function(n,e,t){rk(n,e,t)});const ck=rV;function aV(n,e){return e=Pg(e,n),n=sV(n,e),n==null||delete n[Rg(tV(e))]}function lV(n,e,t,i){if(!ke(n))return n;e=Pg(e,n);for(var s=-1,o=e.length,r=o-1,a=n;a!=null&&++s<o;){var l=Rg(e[s]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(s!=r){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=ke(u)?u:yg(e[s+1])?[]:{})}kg(a,l,c),a=a[l]}return n}function cV(n,e,t){return n==null?n:lV(n,e,t)}var uV="Expected a function";function xu(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(uV);return ke(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),di(n,e,{leading:i,maxWait:e,trailing:s})}function dV(n,e){return n==null?!0:aV(n,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zc=Symbol("observableProperties"),Tu=Symbol("boundObservables"),Hc=Symbol("boundProperties"),oo=Symbol("decoratedMethods"),lb=Symbol("decoratedOriginal"),uk=se(ue());function se(n){if(!n)return uk;class e extends n{set(i,s){if(ke(i)){Object.keys(i).forEach(r=>{this.set(r,i[r])},this);return}jd(this);const o=this[zc];if(i in this&&!o.has(i))throw new y("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return o.get(i)},set(r){const a=o.get(i);let l=this.fire(`set:${i}`,i,r,a);l===void 0&&(l=r),(a!==l||!o.has(i))&&(o.set(i,l),this.fire(`change:${i}`,i,l,a))}}),this[i]=s}bind(...i){if(!i.length||!cb(i))throw new y("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new y("observable-bind-duplicate-properties",this);jd(this);const s=this[Hc];i.forEach(r=>{if(s.has(r))throw new y("observable-bind-rebind",this)});const o=new Map;return i.forEach(r=>{const a={property:r,to:[]};s.set(r,a),o.set(r,a)}),{to:hV,toMany:fV,_observable:this,_bindProperties:i,_to:[],_bindings:o}}unbind(...i){if(!this[zc])return;const s=this[Hc],o=this[Tu];if(i.length){if(!cb(i))throw new y("observable-unbind-wrong-properties",this);i.forEach(r=>{const a=s.get(r);a&&(a.to.forEach(([l,c])=>{const u=o.get(l),d=u[c];d.delete(a),d.size||delete u[c],Object.keys(u).length||(o.delete(l),this.stopListening(l,"change"))}),s.delete(r))})}else o.forEach((r,a)=>{this.stopListening(a,"change")}),o.clear(),s.clear()}decorate(i){jd(this);const s=this[i];if(!s)throw new y("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(o,r)=>{o.return=s.apply(this,r)}),this[i]=function(...o){return this.fire(i,o)},this[i][lb]=s,this[oo]||(this[oo]=[]),this[oo].push(i)}stopListening(i,s,o){if(!i&&this[oo]){for(const r of this[oo])this[r]=this[r][lb];delete this[oo]}super.stopListening(i,s,o)}}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{se[n]=uk.prototype[n]});function jd(n){n[zc]||(Object.defineProperty(n,zc,{value:new Map}),Object.defineProperty(n,Tu,{value:new Map}),Object.defineProperty(n,Hc,{value:new Map}))}function hV(...n){const e=gV(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new y("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new y("observable-bind-to-extra-callback",this);e.to.forEach(s=>{if(s.properties.length&&s.properties.length!==i)throw new y("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),bV(this._observable,this._to),wV(this),this._bindProperties.forEach(s=>{dk(this._observable,s)})}function fV(n,e,t){if(this._bindings.size>1)throw new y("observable-bind-to-many-not-one-binding",this);this.to(...mV(n,e),t)}function mV(n,e){const t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function cb(n){return n.every(e=>typeof e=="string")}function gV(...n){if(!n.length)throw new y("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new y("observable-bind-to-parse-error",null)}),e}function pV(n,e,t,i){const s=n[Tu],o=s.get(t),r=o||{};r[i]||(r[i]=new Set),r[i].add(e),o||s.set(t,r)}function wV(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(s=>{e=s.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([s.observable,e]),pV(n._observable,t,s.observable,e)})})}function dk(n,e){const i=n[Hc].get(e);let s;i.callback?s=i.callback.apply(n,i.to.map(o=>o[0][o[1]])):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=s:n.set(e,s)}function bV(n,e){e.forEach(t=>{const i=n[Tu];let s;i.get(t.observable)||n.listenTo(t.observable,"change",(o,r)=>{s=i.get(t.observable)[r],s&&s.forEach(a=>{dk(n,a.property)})})})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hk{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Nf(n){let e=0;for(const t of n)e++;return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dt(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wt(n){return!!(n&&n[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function On(n,e,t={},i=[]){const s=t&&t.xmlns,o=s?n.createElementNS(s,e):n.createElement(e);for(const r in t)o.setAttribute(r,t[r]);(rb(i)||!Wt(i))&&(i=[i]);for(let r of i)rb(r)&&(r=n.createTextNode(r)),o.appendChild(r);return o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fk{constructor(e,t){this._config={},t&&this.define(ub(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,s=!1){if(xt(t)){this._setObjectToTarget(e,t,s);return}const o=t.split(".");t=o.pop();for(const r of o)xt(e[r])||(e[r]={}),e=e[r];if(xt(i)){xt(e[t])||(e[t]={}),e=e[t],this._setObjectToTarget(e,i,s);return}s&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const s of i){if(!xt(e[s])){e=null;break}e=e[s]}return e?ub(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],i)})}}function ub(n){return sk(n,vV)}function vV(n){return or(n)?n:void 0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ui(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Uc(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mk=gi(ue());function gi(n){if(!n)return mk;class e extends n{listenTo(i,s,o,r={}){if(Ui(i)||Uc(i)){const a={capture:!!r.useCapture,passive:!!r.usePassive},l=this._getProxyEmitter(i,a)||new _V(i,a);this.listenTo(l,s,o,r)}else super.listenTo(i,s,o,r)}stopListening(i,s,o){if(Ui(i)||Uc(i)){const r=this._getAllProxyEmitters(i);for(const a of r)this.stopListening(a,s,o)}else super.stopListening(i,s,o)}_getProxyEmitter(i,s){return iI(this,gk(i,s))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(i,s)).filter(s=>!!s)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{gi[n]=mk.prototype[n]});class _V extends ue(){constructor(e,t){super(),yC(this,gk(e,t)),this._domNode=e,this._options=t}attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),ue().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){ue().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function yV(n){return n["data-ck-expando"]||(n["data-ck-expando"]=sn())}function gk(n,e){let t=yV(n);for(const i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Bf;try{Bf={window,document}}catch{Bf={window:{},document:{}}}const W=Bf;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pk(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function CV(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ne(n){return Object.prototype.toString.call(n)=="[object Text]"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Eu(n){return Object.prototype.toString.apply(n)=="[object Range]"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wk(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bk=["top","right","bottom","left","width","height"];class te{constructor(e){const t=Eu(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),vk(e)||t)if(t){const i=te.getDomRangeRects(e);Cl(this,te.getBoundingRect(i))}else Cl(this,e.getBoundingClientRect());else if(Uc(e)){const{innerWidth:i,innerHeight:s}=e;Cl(this,{top:0,right:i,bottom:s,left:0,width:i,height:s})}else Cl(this,e)}clone(){return new te(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new te(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(!db(e)){let i=e.parentNode||e.commonAncestorContainer;for(;i&&!db(i);){const s=new te(i),o=t.getIntersection(s);if(o)o.getArea()<t.getArea()&&(t=o);else return null;i=i.parentNode}}return t}isEqual(e){for(const t of bk)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,i,s;if(Uc(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const o=wk(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,i=e.offsetHeight-e.clientHeight-o.top-o.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const s of i)t.push(new te(s));else{let s=e.startContainer;Ne(s)&&(s=s.parentNode);const o=new te(s.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const s of e)i++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new te(t))}}function Cl(n,e){for(const t of bk)n[t]=e[t]}function db(n){return vk(n)?n===n.ownerDocument.body:!1}function vk(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class we{constructor(e,t){we._observerInstance||we._createObserver(),this._element=e,this._callback=t,we._addElementCallback(e,t),we._observerInstance.observe(e)}destroy(){we._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){we._elementCallbacks||(we._elementCallbacks=new Map);let i=we._elementCallbacks.get(e);i||(i=new Set,we._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=we._getElementCallbacks(e);i&&(i.delete(t),i.size||(we._elementCallbacks.delete(e),we._observerInstance.unobserve(e))),we._elementCallbacks&&!we._elementCallbacks.size&&(we._observerInstance=null,we._elementCallbacks=null)}static _getElementCallbacks(e){return we._elementCallbacks?we._elementCallbacks.get(e):null}static _createObserver(){we._observerInstance=new W.window.ResizeObserver(e=>{for(const t of e){const i=we._getElementCallbacks(t.target);if(i)for(const s of i)s(t)}})}}we._observerInstance=null;we._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hb(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ng(n){return e=>e+n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kl(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _k(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Po(n){return n&&n.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $i(n){return!!(n&&n.getClientRects&&n.getClientRects().length)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kV(n){return!n||!n.parentNode||n.offsetParent===W.document.body?null:n.offsetParent}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yk({element:n,target:e,positions:t,limiter:i,fitInViewport:s,viewportOffsetConfig:o}){Ls(e)&&(e=e()),Ls(i)&&(i=i());const r=kV(n),a=new te(n),l=new te(e);let c;const u=s&&xV(o)||null,d={targetRect:l,elementRect:a,positionedElementAncestor:r,viewportRect:u};if(!i&&!s)c=new Ff(t[0],d);else{const h=i&&new te(i).getVisible();Object.assign(d,{limiterRect:h,viewportRect:u}),c=TV(t,d)||new Ff(t[0],d)}return c}function xV(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new te(W.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function TV(n,e){const{elementRect:t}=e,i=t.getArea(),s=n.map(a=>new Ff(a,e)).filter(a=>!!a.name);let o=0,r=null;for(const a of s){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;const u=c**2+l**2;u>o&&(o=u,r=a)}return r}function EV(n,e){const t=Ck(new te(e)),i=wk(e);let s=0,o=0;s-=t.left,o-=t.top,s+=e.scrollLeft,o+=e.scrollTop,s-=i.left,o-=i.top,n.moveBy(s,o)}function Ck(n){const{scrollX:e,scrollY:t}=W.window;return n.clone().moveBy(e,t)}class Ff{constructor(e,t){const i=e(t.targetRect,t.elementRect,t.viewportRect);if(!i)return;const{left:s,top:o,name:r,config:a}=i;this.name=r,this.config=a,this._positioningFunctionCorrdinates={left:s,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;if(e){const t=this._options.viewportRect;if(t){const i=e.getIntersection(t);if(i)return i.getIntersectionArea(this._rect)}else return e.getIntersectionArea(this._rect)}return 0}get viewportIntersectionArea(){const e=this._options.viewportRect;return e?e.getIntersectionArea(this._rect):0}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCorrdinates.left,this._positioningFunctionCorrdinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=Ck(this._rect),this._options.positionedElementAncestor&&EV(this._cachedAbsoluteRect,this._options.positionedElementAncestor),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fb(n){const e=n.parentNode;e&&e.removeChild(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kk({target:n,viewportOffset:e=0}){const t=Bg(n);let i=t,s=null;for(;i;){let o;i==t?o=mb(n):o=mb(s),AV(o,()=>gb(n,i));const r=gb(n,i);if(SV(i,r,e),i.parent!=i){if(s=i.frameElement,i=i.parent,!s)return}else i=null}}function SV(n,e,t){const i=e.clone().moveBy(0,t),s=e.clone().moveBy(0,-t),o=new te(n).excludeScrollbarsAndBorders();if(![s,i].every(a=>o.contains(a))){let{scrollX:a,scrollY:l}=n;Tk(s,o)?l-=o.top-e.top+t:xk(i,o)&&(l+=e.bottom-o.bottom+t),Ek(e,o)?a-=o.left-e.left+t:Sk(e,o)&&(a+=e.right-o.right+t),n.scrollTo(a,l)}}function AV(n,e){const t=Bg(n);let i,s;for(;n!=t.document.body;)s=e(),i=new te(n).excludeScrollbarsAndBorders(),i.contains(s)||(Tk(s,i)?n.scrollTop-=i.top-s.top:xk(s,i)&&(n.scrollTop+=s.bottom-i.bottom),Ek(s,i)?n.scrollLeft-=i.left-s.left:Sk(s,i)&&(n.scrollLeft+=s.right-i.right)),n=n.parentNode}function xk(n,e){return n.bottom>e.bottom}function Tk(n,e){return n.top<e.top}function Ek(n,e){return n.left<e.left}function Sk(n,e){return n.right>e.right}function Bg(n){return Eu(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function mb(n){if(Eu(n)){let e=n.commonAncestorContainer;return Ne(e)&&(e=e.parentNode),e}else return n.parentNode}function gb(n,e){const t=Bg(n),i=new te(n);if(t===e)return i;{let s=t;for(;s!=e;){const o=s.frameElement,r=new te(o).excludeScrollbarsAndBorders();i.moveBy(r.left,r.top),s=s.parent}}return i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const IV={ctrl:"",cmd:"",alt:"",shift:""},PV={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Q=MV(),RV=Object.fromEntries(Object.entries(Q).map(([n,e])=>[e,n.charAt(0).toUpperCase()+n.slice(1)]));function Ms(n){let e;if(typeof n=="string"){if(e=Q[n.toLowerCase()],!e)throw new y("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?Q.alt:0)+(n.ctrlKey?Q.ctrl:0)+(n.shiftKey?Q.shift:0)+(n.metaKey?Q.cmd:0);return e}function Su(n){return typeof n=="string"&&(n=NV(n)),n.map(e=>typeof e=="string"?LV(e):e).reduce((e,t)=>t+e,0)}function pb(n){let e=Su(n);return Object.entries(Z.isMac?IV:PV).reduce((s,[o,r])=>(e&Q[o]&&(e&=~Q[o],s+=r),s),"")+(e?RV[e]:"")}function VV(n){return n==Q.arrowright||n==Q.arrowleft||n==Q.arrowup||n==Q.arrowdown}function Au(n,e){const t=e==="ltr";switch(n){case Q.arrowleft:return t?"left":"right";case Q.arrowright:return t?"right":"left";case Q.arrowup:return"up";case Q.arrowdown:return"down"}}function LV(n){if(n.endsWith("!"))return Ms(n.slice(0,-1));const e=Ms(n);return Z.isMac&&e==Q.ctrl?Q.cmd:e}function OV(n,e){const t=Au(n,e);return t==="down"||t==="right"}function MV(){const n={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;for(const e of"`-=[];',./\\")n[e]=e.charCodeAt(0);return n}function NV(n){return n.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const BV=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function Df(n){return BV.includes(n)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ze(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */W.window.CKEDITOR_TRANSLATIONS||(W.window.CKEDITOR_TRANSLATIONS={});function FV(n,e,t=1){if(typeof t!="number")throw new y("translation-service-quantity-not-a-number",null,{quantity:t});const i=zV();i===1&&(n=Object.keys(W.window.CKEDITOR_TRANSLATIONS)[0]);const s=e.id||e.string;if(i===0||!DV(n,s))return t!==1?e.plural:e.string;const o=W.window.CKEDITOR_TRANSLATIONS[n].dictionary,r=W.window.CKEDITOR_TRANSLATIONS[n].getPluralForm||(c=>c===1?0:1),a=o[s];if(typeof a=="string")return a;const l=Number(r(t));return a[l]}function DV(n,e){return!!W.window.CKEDITOR_TRANSLATIONS[n]&&!!W.window.CKEDITOR_TRANSLATIONS[n].dictionary[e]}function zV(){return Object.keys(W.window.CKEDITOR_TRANSLATIONS).length}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HV{constructor({uiLanguage:e="en",contentLanguage:t}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=Df(this.uiLanguage),this.contentLanguageDirection=Df(this.contentLanguage),this.t=(i,s)=>this._t(i,s)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=Ze(t),typeof e=="string"&&(e={string:e});const s=!!e.plural?t[0]:1,o=FV(this.uiLanguage,e,s);return UV(o,t)}}function UV(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xe extends ue(){constructor(e={},t={}){super();const i=Wt(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new y("collection-add-item-invalid-index",this);let i=0;for(const s of e){const o=this._getItemIdBeforeAdding(s),r=t+i;this._items.splice(r,0,s),this._itemMap.set(o,s),this.fire("add",s,r),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new y("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new y("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,i=(s,o,r)=>{const a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(o);if(a&&l)this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o);else{const c=e(o);if(!c){this._skippedIndexesFromExternal.push(r);return}let u=r;for(const d of this._skippedIndexesFromExternal)r>d&&u--;for(const d of t._skippedIndexesFromExternal)u>=d&&u++;this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o),this.add(c,u);for(let d=0;d<t._skippedIndexesFromExternal.length;d++)u<=t._skippedIndexesFromExternal[d]&&t._skippedIndexesFromExternal[d]++}};for(const s of t)i(null,s,t.getIndex(s));this.listenTo(t,"add",i),this.listenTo(t,"remove",(s,o,r)=>{const a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(r<c&&l.push(c-1),r>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let i;if(t in e){if(i=e[t],typeof i!="string")throw new y("collection-add-invalid-id",this);if(this.get(i))throw new y("collection-add-item-already-exists",this)}else e[t]=i=sn();return i}_remove(e){let t,i,s,o=!1;const r=this._idProperty;if(typeof e=="string"?(i=e,s=this._itemMap.get(i),o=!s,s&&(t=this._items.indexOf(s))):typeof e=="number"?(t=e,s=this._items[t],o=!s,s&&(i=s[r])):(s=e,i=s[r],t=this._items.indexOf(s),o=t==-1||!this._itemMap.get(i)),o)throw new y("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);const a=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(a),this.fire("remove",s,t),[s,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function de(n){const e=n.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Le extends gi(se()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new y("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ue{constructor(){this._listener=new(gi())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+Ms(i),i)})}set(e,t,i={}){const s=Su(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(r,a)=>{t(a,()=>{a.preventDefault(),a.stopPropagation(),r.stop()}),r.return=!0},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+Ms(e),e)}destroy(){this._listener.stopListening()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $V(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rn(n){return Wt(n)?new Map(n):$V(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const WV=1e4;function jV(n,e,t,i){if(Math.max(e.length,n.length)>WV)return n.slice(0,t).concat(e).concat(n.slice(t+i,n.length));{const s=Array.from(n);return s.splice(t,i,...e),s}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qV(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function GV(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function KV(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function Ak(n,e){return GV(n.charAt(e-1))&&KV(n.charAt(e))}function Ik(n,e){return qV(n.charAt(e))}const QV=YV();function JV(n,e){const t=String(n).matchAll(QV);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function YV(){const n=[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u],e=/\p{Regional_Indicator}{2}/u.source,t="(?:"+n.map(s=>s.source).join("|")+")",i=`${e}|${t}(?:${t})*`;return new RegExp(i,"ug")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k extends se(){constructor(e){super(),this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",wb,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",wb),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function wb(n){n.return=!1,n.stop()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F extends se(){constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"}),this.listenTo(e,"change:isReadOnly",(t,i,s)=>{s&&this.affectsData?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",bb,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",bb),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function bb(n){n.return=!1,n.stop()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vb extends F{constructor(e){super(e),this._childCommandsDefinitions=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){pC(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pk extends ue(){constructor(e,t=[],i=[]){super(),this._context=e,this._plugins=new Map,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,o]of i)this._contextPlugins.set(s,o),this._contextPlugins.set(o,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new y("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){const s=this,o=this._context;f(e),b(e);const r=e.filter(A=>!d(A,t)),a=[...p(r)];V(a,i);const l=C(a);return E(l,"init").then(()=>E(l,"afterInit")).then(()=>l);function c(A){return typeof A=="function"}function u(A){return c(A)&&A.isContextPlugin}function d(A,P){return P.some(I=>I===A||h(A)===I||h(I)===A)}function h(A){return c(A)?A.pluginName||A.name:A}function f(A,P=new Set){A.forEach(I=>{c(I)&&(P.has(I)||(P.add(I),I.pluginName&&!s._availablePlugins.has(I.pluginName)&&s._availablePlugins.set(I.pluginName,I),I.requires&&f(I.requires,P)))})}function p(A,P=new Set){return A.map(I=>c(I)?I:s._availablePlugins.get(I)).reduce((I,$)=>P.has($)?I:(P.add($),$.requires&&(b($.requires,$),p($.requires,P).forEach(j=>I.add(j))),I.add($)),new Set)}function b(A,P=null){A.map(I=>c(I)?I:s._availablePlugins.get(I)||I).forEach(I=>{x(I,P),v(I,P),w(I,P)})}function x(A,P){if(!c(A))throw P?new y("plugincollection-soft-required",o,{missingPlugin:A,requiredBy:h(P)}):new y("plugincollection-plugin-not-found",o,{plugin:A})}function v(A,P){if(u(P)&&!u(A))throw new y("plugincollection-context-required",o,{plugin:h(A),requiredBy:h(P)})}function w(A,P){if(P&&d(A,t))throw new y("plugincollection-required",o,{plugin:h(A),requiredBy:h(P)})}function C(A){return A.map(P=>{let I=s._contextPlugins.get(P);return I=I||new P(o),s._add(P,I),I})}function E(A,P){return A.reduce((I,$)=>!$[P]||s._contextPlugins.has($)?I:I.then($[P].bind($)),Promise.resolve())}function V(A,P){for(const I of P){if(typeof I!="function")throw new y("plugincollection-replace-plugin-invalid-type",null,{pluginItem:I});const $=I.pluginName;if(!$)throw new y("plugincollection-replace-plugin-missing-name",null,{pluginItem:I});if(I.requires&&I.requires.length)throw new y("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:$});const j=s._availablePlugins.get($);if(!j)throw new y("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:$});const ot=A.indexOf(j);if(ot===-1){if(s._contextPlugins.has(j))return;throw new y("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:$})}if(j.requires&&j.requires.length)throw new y("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:$});A.splice(ot,1,I),s._availablePlugins.set($,I)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new y("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XV{constructor(e){this.config=new fk(e,this.constructor.defaultConfig);const t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new Pk(this,t);const i=this.config.get("language")||{};this.locale=new HV({uiLanguage:typeof i=="string"?i:i.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new xe,this._contextOwner=null}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new y("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new y("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new y("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iu extends se(){constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tc=new WeakMap;function Fg(n){const{view:e,element:t,text:i,isDirectHost:s=!0,keepOnFocus:o=!1}=n,r=e.document;tc.has(r)||(tc.set(r,new Map),r.registerPostFixer(a=>qd(r,a)),r.on("change:isComposing",()=>{e.change(a=>qd(r,a))},{priority:"high"})),tc.get(r).set(t,{text:i,isDirectHost:s,keepOnFocus:o,hostElement:s?t:null}),e.change(a=>qd(r,a))}function ZV(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function e7(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function t7(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(r=>!r.is("uiElement")))return!1;const i=n.document,o=i.selection.anchor;return i.isComposing&&o&&o.parent===n?!1:e||!i.isFocused?!0:!!o&&o.parent!==n}function qd(n,e){const t=tc.get(n),i=[];let s=!1;for(const[o,r]of t)r.isDirectHost&&(i.push(o),_b(e,o,r)&&(s=!0));for(const[o,r]of t){if(r.isDirectHost)continue;const a=n7(o);a&&(i.includes(a)||(r.hostElement=a,_b(e,o,r)&&(s=!0)))}return s}function _b(n,e,t){const{text:i,isDirectHost:s,hostElement:o}=t;let r=!1;return o.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,o),r=!0),(s||e.childCount==1)&&t7(o,t.keepOnFocus)?ZV(n,o)&&(r=!0):e7(n,o)&&(r=!0),r}function n7(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Hs=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Us=class extends ue(Hs){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new y("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=dt(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=ik(this);return delete e.parent,e}};Us.prototype.is=function(n){return n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ye=class zf extends Us{constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof zf?this===e||this.data===e.data:!1}_clone(){return new zf(this.document,this.data)}};ye.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Rn=class extends Hs{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new y("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new y("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}};Rn.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kn{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const s=yb(t,i);if(s)return{element:t,pattern:i,match:s}}return null}matchAll(...e){const t=[];for(const i of e)for(const s of this._patterns){const o=yb(i,s);o&&t.push({element:i,pattern:s,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}}function yb(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=i7(e.name,n.name),!t.name)||e.attributes&&(t.attributes=a7(e.attributes,n),!t.attributes)||e.classes&&(t.classes=l7(e.classes,n),!t.classes)||e.styles&&(t.styles=c7(e.styles,n),!t.styles)?null:t}function i7(n,e){return n instanceof RegExp?!!e.match(n):n===e}function Dg(n,e,t){const i=s7(n),s=Array.from(e),o=[];if(i.forEach(([r,a])=>{s.forEach(l=>{o7(r,l)&&r7(a,l,t)&&o.push(l)})}),!(!i.length||o.length<i.length))return o}function s7(n){return Array.isArray(n)?n.map(e=>xt(e)?((e.key===void 0||e.value===void 0)&&Ce("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):xt(n)?Object.entries(n):[[n,!0]]}function o7(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function r7(n,e,t){if(n===!0)return!0;const i=t(e);return n===i||n instanceof RegExp&&!!String(i).match(n)}function a7(n,e){const t=new Set(e.getAttributeKeys());return xt(n)?(n.style!==void 0&&Ce("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&Ce("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),Dg(n,t,i=>e.getAttribute(i))}function l7(n,e){return Dg(n,e.getClassNames(),()=>{})}function c7(n,e){return Dg(n,e.getStyleNames(!0),t=>e.getStyle(t))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u7{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){const e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Array.from(h7(e).entries());for(const[i,s]of t)this._styleProcessor.toNormalizedForm(i,s,this._styles)}has(e){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);return Array.isArray(i)}set(e,t){if(ke(e))for(const[i,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=Hf(e);dV(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!ke(this._styles[e]))return this._styles[e];const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([i])=>i)}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const s=t.splice(0,t.length-1).join("."),o=Bc(this._styles,s);if(!o)return;!Array.from(Object.keys(o)).length&&this.remove(s)}}class d7{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(ke(t)){Gd(i,Hf(e),t);return}if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:o,value:r}=s(t);Gd(i,o,r)}else Gd(i,e,t)}getNormalized(e,t){if(!e)return ck({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return Bc(t,i);const s=i(e,t);if(s)return s}return Bc(t,Hf(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=Array.from(this._consumables.keys()).filter(s=>{const o=this.getNormalized(s,e);return o&&typeof o=="object"?Object.keys(o).length:o}),i=new Set([...t,...Object.keys(e)]);return Array.from(i.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function h7(n){let e=null,t=0,i=0,s=null;const o=new Map;if(n==="")return o;n.charAt(n.length-1)!=";"&&(n=n+";");for(let r=0;r<n.length;r++){const a=n.charAt(r);if(e===null)switch(a){case":":s||(s=n.substr(t,r-t),i=r+1);break;case'"':case"'":e=a;break;case";":{const l=n.substr(i,r-i);s&&o.set(s.trim(),l.trim()),s=null,t=r+1;break}}else a===e&&(e=null)}return o}function Hf(n){return n.replace("-",".")}function Gd(n,e,t){let i=t;ke(t)&&(i=ck({},Bc(n,e),t)),cV(n,e,i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let yn=class Rk extends Us{constructor(e,t,i,s){if(super(e),this.name=t,this._attrs=f7(i),this._children=[],s&&this._insertChild(0,s),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");Cb(this._classes,o),this._attrs.delete("class")}this._styles=new u7(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._unsafeAttributesToRender=[]}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Rk))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new kn(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const t=[];if(e)for(const s of this.getChildren())t.push(s._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=m7(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){const i=String(t);this._fireChange("attributes",this),e=="class"?Cb(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of Ze(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of Ze(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),xt(e)?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of Ze(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};yn.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function f7(n){const e=rn(n);for(const[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function Cb(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}function m7(n,e){return typeof e=="string"?[new ye(n,e)]:(Wt(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new ye(n,t):t instanceof Rn?new ye(n,t.data):t))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Aa extends yn{constructor(...e){super(...e),this.getFillerOffset=Vk}}Aa.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Vk(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pu extends se(Aa){constructor(...e){super(...e);const t=e[0];this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",i=>i&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}Pu.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kb=Symbol("rootName");class Lk extends Pu{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(kb)}set rootName(e){this._setCustomProperty(kb,e)}set _name(e){this.name=e}}Lk.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let bs=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new y("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new y("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=O._createAt(e.startPosition):this.position=O._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,i,s;do s=this.position,{done:t,value:i}=this.next();while(!t&&e(i));t||(this.position=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(i instanceof ye){if(e.isAtEnd)return this.position=O._createAfter(i),this._next();s=i.data[e.offset]}else s=i.getChild(e.offset);if(s instanceof yn)return this.shallow?e.offset++:e=new O(s,0),this.position=e,this._formatReturnValue("elementStart",s,t,e,1);if(s instanceof ye){if(this.singleCharacters)return e=new O(s,0),this.position=e,this._next();{let o=s.data.length,r;return s==this._boundaryEndParent?(o=this.boundaries.end.offset,r=new Rn(s,0,o),e=O._createAfter(r)):(r=new Rn(s,0,s.data.length),e.offset++),this.position=e,this._formatReturnValue("text",r,t,e,o)}}else if(typeof s=="string"){let o;this.singleCharacters?o=1:o=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const r=new Rn(i,e.offset,o);return e.offset+=o,this.position=e,this._formatReturnValue("text",r,t,e,o)}else return e=O._createAfter(i),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(i instanceof ye){if(e.isAtStart)return this.position=O._createBefore(i),this._previous();s=i.data[e.offset-1]}else s=i.getChild(e.offset-1);if(s instanceof yn)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new O(s,s.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s instanceof ye){if(this.singleCharacters)return e=new O(s,s.data.length),this.position=e,this._previous();{let o=s.data.length,r;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;r=new Rn(s,a,s.data.length-a),o=r.data.length,e=O._createBefore(r)}else r=new Rn(s,0,s.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",r,t,e,o)}}else if(typeof s=="string"){let o;if(this.singleCharacters)o=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-a}e.offset-=o;const r=new Rn(i,e.offset,o);return this.position=e,this._formatReturnValue("text",r,t,e,o)}else return e=O._createBefore(i),this.position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,s,o){return t instanceof Rn&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=O._createAfter(t.textNode),this.position=s):i=O._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=O._createBefore(t.textNode),this.position=s):i=O._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:o}}}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let O=class Jn extends Hs{constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Pu);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=Jn._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new bs(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const s=dt(t,i);switch(s){case"prefix":return"before";case"extension":return"after";default:return t[s]<i[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new bs(e)}clone(){return new Jn(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Jn)return new this(e.parent,e.offset);{const i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new y("view-createpositionat-offset-required",i)}return new Jn(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Jn(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new y("view-position-after-root",e,{root:e});return new Jn(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Jn(e.textNode,e.offsetInText);if(!e.parent)throw new y("view-position-before-root",e,{root:e});return new Jn(e.parent,e.index)}};O.prototype.is=function(n){return n==="position"||n==="view:position"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Y=class Ci extends Hs{constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new bs({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(xl,{direction:"backward"}),t=this.end.getLastMatchingPosition(xl);return e.parent.is("$text")&&e.isAtStart&&(e=O._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=O._createAfter(t.parent)),new Ci(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(xl);if(e.isAfter(this.end)||e.isEqual(this.end))return new Ci(e,e);let t=this.end.getLastMatchingPosition(xl,{direction:"backward"});const i=e.nodeAfter,s=t.nodeBefore;return i&&i.is("$text")&&(e=new O(i,0)),s&&s.is("$text")&&(t=new O(s,s.data.length)),new Ci(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Ci(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Ci(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Ci(t,i)}return null}getWalker(e={}){return e.boundaries=this,new bs(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Ci(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new bs(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new bs(e);yield t.position;for(const i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,s){return new this(new O(e,t),new O(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(O._createBefore(e),t)}};Y.prototype.is=function(n){return n==="range"||n==="view:range"};function xl(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Wi=class Ok extends ue(Hs){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=Nf(this.getRanges()),i=Nf(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let o=!1;for(let r of e.getRanges())if(r=r.getTrimmed(),s.start.isEqual(r.start)&&s.end.isEqual(r.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(s);else if(t instanceof Ok||t instanceof zg)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Y)this._setRanges([t],s&&s.backward),this._setFakeOptions(s);else if(t instanceof O)this._setRanges([new Y(t)]),this._setFakeOptions(s);else if(t instanceof Us){const o=!!s&&!!s.backward;let r;if(i===void 0)throw new y("view-selection-setto-required-second-parameter",this);i=="in"?r=Y._createIn(t):i=="on"?r=Y._createOn(t):r=new Y(O._createAt(t,i)),this._setRanges([r],o),this._setFakeOptions(s)}else if(Wt(t))this._setRanges(t,s&&s.backward),this._setFakeOptions(s);else throw new y("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new y("view-selection-setfocus-no-ranges",this);const i=O._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),i.compareWith(s)=="before"?this._addRange(new Y(i,s),!0):this._addRange(new Y(s,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Y))throw new y("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new y("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Y(e.start,e.end))}};Wi.prototype.is=function(n){return n==="selection"||n==="view:selection"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let zg=class extends ue(Hs){constructor(...e){super(),this._selection=new Wi,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};zg.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rr extends ui{constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Kd=Symbol("bubbling contexts");function Uf(n){class e extends n{fire(i,...s){try{const o=i instanceof ui?i:new ui(this,i),r=Qd(this);if(!r.size)return;if(Sr(o,"capturing",this),ro(r,"$capture",o,...s))return o.return;const a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?Boolean(Mk(r,l)):!1;let u=l||g7(a);if(Sr(o,"atTarget",u),!c){if(ro(r,"$text",o,...s))return o.return;Sr(o,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(ro(r,"$root",o,...s))return o.return}else if(u.is("element")&&ro(r,u.name,o,...s))return o.return;if(ro(r,u,o,...s))return o.return;u=u.parent,Sr(o,"bubbling",u)}return Sr(o,"bubbling",this),ro(r,"$document",o,...s),o.return}catch(o){y.rethrowUnexpectedError(o,this)}}_addEventListener(i,s,o){const r=Ze(o.context||"$document"),a=Qd(this);for(const l of r){let c=a.get(l);c||(c=new(ue()),a.set(l,c)),this.listenTo(c,i,s,o)}}_removeEventListener(i,s){const o=Qd(this);for(const r of o.values())this.stopListening(r,i,s)}}return e}{const n=Uf(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Uf[e]=n.prototype[e]})}function Sr(n,e,t){n instanceof rr&&(n._eventPhase=e,n._currentTarget=t)}function ro(n,e,t,...i){const s=typeof e=="string"?n.get(e):Mk(n,e);return s?(s.fire(t,...i),t.stop.called):!1}function Mk(n,e){for(const[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function Qd(n){return n[Kd]||(n[Kd]=new Map),n[Kd]}function g7(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,i=e.getPath(),s=t.getPath();return i.length>s.length?e:t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ru=class extends Uf(se()){constructor(e){super(),this.selection=new zg,this.roots=new xe({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(t=i(e),t)break;while(t)}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nk=10;class ys extends yn{constructor(...e){super(...e),this.getFillerOffset=p7,this._priority=Nk,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new y("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}ys.DEFAULT_PRIORITY=Nk;ys.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function p7(){if(Jd(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(Jd(n)>1)return null;n=n.parent}return!n||Jd(n)>1?null:this.childCount}function Jd(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hg extends yn{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=w7}_insertChild(e,t){if(t&&(t instanceof Us||Array.from(t).length>0))throw new y("view-emptyelement-cannot-add",[this,t]);return 0}}Hg.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function w7(){return null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vu extends yn{constructor(...e){super(...e),this.getFillerOffset=v7}_insertChild(e,t){if(t&&(t instanceof Us||Array.from(t).length>0))throw new y("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}}Vu.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function b7(n){n.document.on("arrowKey",(e,t)=>_7(e,t,n.domConverter),{priority:"low"})}function v7(){return null}function _7(n,e,t){if(e.keyCode==Q.arrowright){const i=e.domTarget.ownerDocument.defaultView.getSelection(),s=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(s||e.shiftKey){const o=i.focusNode,r=i.focusOffset,a=t.domPositionToView(o,r);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=t.viewPositionToDom(c);s?i.collapse(u.parent,u.offset):i.extend(u.parent,u.offset)}}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ug extends yn{constructor(...e){super(...e),this.getFillerOffset=y7}_insertChild(e,t){if(t&&(t instanceof Us||Array.from(t).length>0))throw new y("view-rawelement-cannot-add",[this,t]);return 0}render(){}}Ug.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function y7(){return null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Cs=class extends ue(Hs){constructor(e,t){super(),this.document=e,this._children=[],t&&this._insertChild(0,t),this._customProperties=new Map}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;const s=C7(this.document,t);for(const o of s)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Cs.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function C7(n,e){return typeof e=="string"?[new ye(n,e)]:(Wt(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new ye(n,t):t instanceof Rn?new ye(n,t.data):t))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bk{constructor(e){this.document=e,this._cloneGroups=new Map,this._slotFactory=null}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(...e){this.document.selection._setFocus(...e)}createDocumentFragment(e){return new Cs(this.document,e)}createText(e){return new ye(this.document,e)}createAttributeElement(e,t,i={}){const s=new ys(this.document,e,t);return typeof i.priority=="number"&&(s._priority=i.priority),i.id&&(s._id=i.id),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createContainerElement(e,t,i={},s={}){let o=null;xt(i)?s=i:o=i;const r=new Aa(this.document,e,t,o);return s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}createEditableElement(e,t,i={}){const s=new Pu(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEmptyElement(e,t,i={}){const s=new Hg(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createUIElement(e,t,i){const s=new Vu(this.document,e,t);return i&&(s.render=i),s}createRawElement(e,t,i,s={}){const o=new Ug(this.document,e,t);return i&&(o.render=i),s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){xt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof O?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new y("view-writer-break-non-container-element",this.document);if(!t.parent)throw new y("view-writer-break-root",this.document);if(e.isAtStart)return O._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert(O._createAfter(t),i);const s=new Y(e,O._createAt(t,"end")),o=new O(i,0);this.move(s,o)}return O._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const r=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new O(r,a))}const s=i.getChild(t-1),o=i.getChild(t);if(!s||!o)return e;if(s.is("$text")&&o.is("$text"))return Tb(s,o);if(s.is("attributeElement")&&o.is("attributeElement")&&s.isSimilar(o)){const r=s.childCount;return s._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new O(s,r))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new y("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),o=s instanceof ye?O._createAt(s,"end"):O._createAt(t,"end");return this.move(Y._createIn(i),O._createAt(t,"end")),this.remove(Y._createOn(i)),o}insert(e,t){t=Wt(t)?[...t]:[t],Fk(t,this.document);const i=t.reduce((r,a)=>{const l=r[r.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?r.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),r},[]);let s=null,o=e;for(const{nodes:r,breakAttributes:a}of i){const l=this._insertNodes(o,r,a);s||(s=l.start),o=l.end}return s?new Y(s,o):new Y(e)}remove(e){const t=e instanceof Y?e:Y._createOn(e);if(Ar(t,this.document),t.isCollapsed)return new Cs(this.document);const{start:i,end:s}=this._breakAttributesRange(t,!0),o=i.parent,r=s.offset-i.offset,a=o._removeChildren(i.offset,r);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new Cs(this.document,a)}clear(e,t){Ar(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const o=s.item;let r;if(o.is("element")&&t.isSimilar(o))r=Y._createOn(o);else if(!s.nextPosition.isAfter(e.start)&&o.is("$textProxy")){const a=o.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(r=Y._createIn(a))}r&&(r.end.isAfter(e.end)&&(r.end=e.end),r.start.isBefore(e.start)&&(r.start=e.start),this.remove(r))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const s=t.parent,o=s.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=s.childCount-o}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof ys))throw new y("view-writer-wrap-invalid-attribute",this.document);if(Ar(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!k7(i.parent)&&(i=i.getLastMatchingPosition(o=>o.item.is("uiElement"))),i=this._wrapPosition(i,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new Y(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof ys))throw new y("view-writer-unwrap-invalid-attribute",this.document);if(Ar(e,this.document),e.isCollapsed)return e;const{start:i,end:s}=this._breakAttributesRange(e,!0),o=i.parent,r=this._unwrapChildren(o,i.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Y(a,l)}rename(e,t){const i=new Aa(this.document,e,t.getAttributes());return this.insert(O._createAfter(t),i),this.move(Y._createIn(t),O._createAt(i,0)),this.remove(Y._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return O._createAt(e,t)}createPositionAfter(e){return O._createAfter(e)}createPositionBefore(e){return O._createBefore(e)}createRange(...e){return new Y(...e)}createRangeOn(e){return Y._createOn(e)}createRangeIn(e){return Y._createIn(e)}createSelection(...e){return new Wi(...e)}createSlot(e){if(!this._slotFactory)throw new y("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let s;if(i?s=$f(e):s=e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new y("view-writer-invalid-position-container",this.document);let o;i?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Yd(e):e;const r=s._insertChild(o.offset,t);for(const u of t)this._addToClonedElementsGroup(u);const a=o.getShiftedBy(r),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;const c=this.mergeAttributes(a);return new Y(l,c)}_wrapChildren(e,t,i,s){let o=t;const r=[];for(;o<i;){const l=e.getChild(o),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(s,l))r.push(new O(e,o));else if(c||!u||x7(s,l)){const d=s._clone();l._remove(),d._appendChild(l),e._insertChild(o,d),this._addToClonedElementsGroup(d),r.push(new O(e,o))}else this._wrapChildren(l,0,l.childCount,s);o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Y._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,s){let o=t;const r=[];for(;o<i;){const l=e.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(s)){const c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),r.push(new O(e,o),new O(e,o+u)),o+=u,i+=u-1;continue}if(this._unwrapAttributeElement(s,l)){r.push(new O(e,o),new O(e,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,s),o++}let a=0;for(const l of r){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Y._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:s}=this._breakAttributesRange(e,!0),o=i.parent,r=this._wrapChildren(o,i.offset,s.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const l=this.mergeAttributes(r.end);return new Y(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return xb(e.clone());e.parent.is("$text")&&(e=Yd(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const s=new Y(e,e.getShiftedBy(1));this.wrap(s,t);const o=new O(i.parent,i.index);i._remove();const r=o.nodeBefore,a=o.nodeAfter;return r instanceof ye&&a instanceof ye?Tb(r,a):xb(o)}_wrapAttributeElement(e,t){if(!Eb(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(const i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(const i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!Eb(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(const i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,s=e.end;if(Ar(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new Y(l,l)}const o=this._breakAttributes(s,t),r=o.parent.childCount,a=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-r,new Y(a,o)}_breakAttributes(e,t=!1){const i=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new y("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new y("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new y("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&Wf(s.parent)||Wf(s))return e.clone();if(s.is("$text"))return this._breakAttributes(Yd(e),t);const o=s.childCount;if(i==o){const r=new O(s.parent,s.index+1);return this._breakAttributes(r,t)}else if(i===0){const r=new O(s.parent,s.index);return this._breakAttributes(r,t)}else{const r=s.index+1,a=s._clone();s.parent._insertChild(r,a),this._addToClonedElementsGroup(a);const l=s.childCount-i,c=s._removeChildren(i,l);a._appendChild(c);const u=new O(s.parent,r);return this._breakAttributes(u,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function k7(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function $f(n){let e=n.parent;for(;!Wf(e);){if(!e)return;e=e.parent}return e}function x7(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function xb(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new O(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new O(t,0):n}function Yd(n){if(n.offset==n.parent.data.length)return new O(n.parent.parent,n.parent.index+1);if(n.offset===0)return new O(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new ye(n.root.document,e)),new O(n.parent.parent,n.parent.index+1)}function Tb(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new O(n,t)}const T7=[ye,ys,Aa,Hg,Ug,Vu];function Fk(n,e){for(const t of n){if(!T7.some(i=>t instanceof i))throw new y("view-writer-insert-invalid-node-type",e);t.is("$text")||Fk(t.getChildren(),e)}}function Wf(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Ar(n,e){const t=$f(n.start),i=$f(n.end);if(!t||!i||t!==i)throw new y("view-writer-invalid-range-container",e)}function Eb(n,e){return n.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Dk=n=>n.createTextNode(""),zk=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="",e},Hk=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},Mn=7,$c="".repeat(Mn);function Ft(n){return Ne(n)&&n.data.substr(0,Mn)===$c}function zr(n){return n.data.length==Mn&&Ft(n)}function Sb(n){return Ft(n)?n.data.slice(Mn):n.data}function E7(n){n.document.on("arrowKey",S7,{priority:"low"})}function S7(n,e){if(e.keyCode==Q.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;Ft(i)&&s<=Mn&&t.collapse(i,0)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A7 extends se(){constructor(e,t){super(),this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),Z.isBlink&&!Z.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()}),this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new y("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Z.isAndroid)return;let e=null;const t=Z.isBlink&&!Z.isAndroid?!this.isSelecting:!0;for(const i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=O._createBefore(e.parent)));for(const i of this.markedAttributes)this._updateAttrs(i);for(const i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(const i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){const i=this.domConverter.viewPositionToDom(e),s=i.parent.ownerDocument;Ft(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=Ab(s,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){if(!this.domConverter.mapViewToDom(e))return;const i=Array.from(this.domConverter.mapViewToDom(e).childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(i,s),r=this._findReplaceActions(o,i,s);if(r.indexOf("replace")!==-1){const a={equal:0,insert:0,delete:0};for(const l of r)if(l==="replace"){const c=a.equal+a.insert,u=a.equal+a.delete,d=e.getChild(c);d&&!(d.is("uiElement")||d.is("rawElement"))&&this._updateElementMappings(d,i[u]),fb(s[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?O._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Ne(t.parent)&&Ft(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Ft(e))throw new y("view-renderer-filler-was-lost",this);zr(e)?e.remove():e.data=e.data.substr(Mn),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!I7(t)||i===t.getFillerOffset())return!1;const s=e.nodeBefore,o=e.nodeAfter;return!(s instanceof ye||o instanceof ye||Z.isAndroid&&(s||o))}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e);let o=this.domConverter.viewToDom(e).data;const r=t.inlineFillerPosition;r&&r.parent==e.parent&&r.offset==e.index&&(o=$c+o),Rb(i,o)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.attributes).map(o=>o.name),s=e.getAttributeKeys();for(const o of s)this.domConverter.setDomElementAttribute(t,o,e.getAttribute(o),e);for(const o of i)e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(t,o)}_updateChildren(e,t){const i=this.domConverter.mapViewToDom(e);if(!i)return;if(Z.isAndroid){let d=null;for(const h of Array.from(i.childNodes)){if(d&&Ne(d)&&Ne(h)){i.normalize();break}d=h}}const s=t.inlineFillerPosition,o=i.childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&Ab(i.ownerDocument,r,s.offset);const a=this._diffNodeLists(o,r),l=Z.isAndroid?this._findReplaceActions(a,o,r,{replaceText:!0}):a;let c=0;const u=new Set;for(const d of l)d==="delete"?(u.add(o[c]),fb(o[c])):(d==="equal"||d==="replace")&&c++;c=0;for(const d of l)d==="insert"?(_k(i,c,r[c]),c++):d==="replace"?(Rb(o[c],r[c].data),c++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(r[c])),c++);for(const d of u)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,t){return e=V7(e,this._fakeSelectionContainer),Xr(e,t,P7.bind(null,this.domConverter))}_findReplaceActions(e,t,i,s={}){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],r=[],a=[];const l={equal:0,insert:0,delete:0};for(const c of e)c==="insert"?a.push(i[l.equal+l.insert]):c==="delete"?r.push(t[l.equal+l.delete]):(o=o.concat(Xr(r,a,s.replaceText?Pb:Ib).map(u=>u==="equal"?"replace":u)),o.push("equal"),r=[],a=[]),l[c]++;return o.concat(Xr(r,a,s.replaceText?Pb:Ib).map(c=>c==="equal"?"replace":c))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(Z.isBlink&&!Z.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Z.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=L7(t));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"";const s=t.getSelection(),o=t.createRange();s.removeAllRanges(),o.selectNodeContents(i),s.addRange(o)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(i.parent,i.offset),t.extend(s.parent,s.offset),Z.isGecko&&R7(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const i=e.activeElement,s=this.domConverter.mapDomToView(i);i&&s&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function I7(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function Ab(n,e,t){const i=e instanceof Array?e:e.childNodes,s=i[t];if(Ne(s))return s.data=$c+s.data,s;{const o=n.createTextNode($c);return Array.isArray(e)?i.splice(t,0,o):_k(e,t,o),o}}function Ib(n,e){return Ui(n)&&Ui(e)&&!Ne(n)&&!Ne(e)&&!Po(n)&&!Po(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function Pb(n,e){return Ui(n)&&Ui(e)&&Ne(n)&&Ne(e)}function P7(n,e,t){return e===t?!0:Ne(e)&&Ne(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function R7(n,e){const t=n.parent;if(t.nodeType!=Node.ELEMENT_NODE||n.offset!=t.childNodes.length-1)return;const i=t.childNodes[n.offset];i&&i.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function V7(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function L7(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="",e}function Rb(n,e){const t=n.data;if(t==e)return;const i=gC(t,e);for(const s of i)s.type==="insert"?n.insertData(s.index,s.values.join("")):n.deleteData(s.index,s.howMany)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const O7=Hk(W.document),M7=Dk(W.document),N7=zk(W.document),Tl="data-ck-unsafe-attribute-",Vb="data-ck-unsafe-element";class Lu{constructor(e,t={}){this.document=e,this.renderingMode=t.renderingMode||"editing",this.blockFillerMode=t.blockFillerMode||(this.renderingMode==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?W.document:W.document.implementation.createHTMLDocument(""),this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new kn,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Wi(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of Array.from(e.children))this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const i=new DOMParser().parseFromString(t,"text/html"),s=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);const r=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=r.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(Ob(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{if(this.mapViewToDom(e))return this.mapViewToDom(e);let i;if(e.is("documentFragment"))i=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(i,e);else{if(e.is("uiElement"))return e.name==="$comment"?i=this._domDocument.createComment(e.getCustomProperty("$rawContent")):i=e.render(this._domDocument,this),t.bind&&this.bindElements(i,e),i;this._shouldRenameElement(e.name)?(Ob(e.name),i=this._createReplacementDomElement(e.name)):e.hasAttribute("xmlns")?i=this._domDocument.createElementNS(e.getAttribute("xmlns"),e.name):i=this._domDocument.createElement(e.name),e.is("rawElement")&&e.render(i,this),t.bind&&this.bindElements(i,e);for(const s of e.getAttributeKeys())this.setDomElementAttribute(i,s,e.getAttribute(s),e)}if(t.withChildren!==!1)for(const s of this.viewChildrenToDom(e,t))i.appendChild(s);return i}}setDomElementAttribute(e,t,i,s){const o=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);o||Ce("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(Tl+t)&&o&&e.removeAttribute(Tl+t),e.setAttribute(o?t:Tl+t,i)}removeDomElementAttribute(e,t){t!=Vb&&(e.removeAttribute(t),e.removeAttribute(Tl+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const o of e.getChildren()){i===s&&(yield this._getBlockFiller());const r=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!de(o.getAttributes());r&&this.renderingMode=="data"?yield*this.viewChildrenToDom(o,t):(r&&Ce("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t)),s++}i===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let s=e.offset;return Ft(i)&&(s+=Mn),{parent:i,offset:s}}else{let i,s,o;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;o=i.childNodes[0]}else{const a=e.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;i=s.parentNode,o=s.nextSibling}if(Ne(o)&&Ft(o))return{parent:o,offset:Mn};const r=s?kl(s)+1:0;return{parent:i,offset:r}}}domToView(e,t={}){if(this.isBlockFiller(e))return null;const i=this.getHostViewElement(e);if(i)return i;if(Po(e)&&t.skipComments)return null;if(Ne(e)){if(zr(e))return null;{const s=this._processDataFromDomText(e);return s===""?null:new ye(this.document,s)}}else{if(this.mapDomToView(e))return this.mapDomToView(e);let s;if(this.isDocumentFragment(e))s=new Cs(this.document),t.bind&&this.bindDocumentFragments(e,s);else{s=this._createViewElement(e,t),t.bind&&this.bindElements(e,s);const o=e.attributes;if(o)for(let r=o.length,a=0;a<r;a++)s._setAttribute(o[a].name,o[a].value);if(this._isViewElementWithRawContent(s,t)||Po(e)){const r=Po(e)?e.data:e.innerHTML;return s._setCustomProperty("$rawContent",r),this._encounteredRawContentDomNodes.add(e),s}}if(t.withChildren!==!1)for(const o of this.domChildrenToView(e,t))s._appendChild(o);return s}}*domChildrenToView(e,t){for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i],o=this.domToView(s,t);o!==null&&(yield o)}}domSelectionToView(e){if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;Ne(s)&&(s=s.parentNode);const o=this.fakeSelectionToView(s);if(o)return o}const t=this.isDomSelectionBackward(e),i=[];for(let s=0;s<e.rangeCount;s++){const o=e.getRangeAt(s),r=this.domRangeToView(o);r&&i.push(r)}return new Wi(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new Y(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,kl(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return O._createBefore(i);if(Ne(e)){if(zr(e))return this.domPositionToView(e.parentNode,kl(e));const s=this.findCorrespondingViewText(e);let o=t;return s?(Ft(e)&&(o-=Mn,o=o<0?0:o),new O(s,o)):null}else{if(t===0){const s=this.mapDomToView(e);if(s)return new O(s,0)}else{const s=e.childNodes[t-1];if(Ne(s)&&zr(s))return this.domPositionToView(s.parentNode,kl(s));const o=Ne(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(o&&o.parent)return new O(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(zr(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const s=this.mapDomToView(i);if(s){const o=s.nextSibling;return o instanceof ye?o:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const o=s.getChild(0);return o instanceof ye?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:i,scrollY:s}=W.window,o=[];Lb(t,r=>{const{scrollLeft:a,scrollTop:l}=r;o.push([a,l])}),t.focus(),Lb(t,r=>{const[a,l]=o.shift();r.scrollLeft=a,r.scrollTop=l}),W.window.scrollTo(i,s)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(O7):e.tagName==="BR"&&Uk(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(N7)||F7(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=pk(e);for(t.pop();t.length;){const i=t.pop(),s=this._domToViewMapping.get(i);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Dk(this._domDocument);case"markedNbsp":return zk(this._domDocument);case"br":return Hk(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(Ne(e)&&Ft(e)&&t<Mn||this.isElement(e)&&Ft(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(i=>this.preElements.includes(i.name)))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t=""+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),s=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||s)&&(t=t.substr(0,t.length-1)+"")}return t.replace(/ {2}/g," ")}_nodeEndsWithSpace(e){if(e.getAncestors().some(i=>this.preElements.includes(i.name)))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_processDataFromDomText(e){let t=e.data;if(B7(e,this.preElements))return Sb(e);t=t.replace(/[ \n\t\r]{1,}/g," ");const i=this._getTouchingInlineDomNode(e,!1),s=this._getTouchingInlineDomNode(e,!0),o=this._checkShouldLeftTrimDomText(e,i),r=this._checkShouldRightTrimDomText(e,s);o&&(t=t.replace(/^ /,"")),r&&(t=t.replace(/ $/,"")),t=Sb(new Text(t)),t=t.replace(/ \u00A0/g,"  ");const a=s&&this.isElement(s)&&s.tagName!="BR",l=s&&Ne(s)&&s.data.charAt(0)==" ";return(/( |\u00A0)\u00A0$/.test(t)||!s||a||l)&&(t=t.replace(/\u00A0$/," ")),(o||i&&this.isElement(i)&&i.tagName!="BR")&&(t=t.replace(/^\u00A0/," ")),t}_checkShouldLeftTrimDomText(e,t){return t?this.isElement(t)?t.tagName==="BR":this._encounteredRawContentDomNodes.has(e.previousSibling)?!1:/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)):!0}_checkShouldRightTrimDomText(e,t){return t?!1:!Ft(e)}_getTouchingInlineViewNode(e,t){const i=new bs({startPosition:t?O._createAfter(e):O._createBefore(e),direction:t?"forward":"backward"});for(const s of i){if(s.item.is("element")&&this.inlineObjectElements.includes(s.item.name))return s.item;if(s.item.is("containerElement"))return null;if(s.item.is("element","br"))return null;if(s.item.is("$textProxy"))return s.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;const i=t?"firstChild":"lastChild",s=t?"nextSibling":"previousSibling";let o=!0,r=e;do if(!o&&r[i]?r=r[i]:r[s]?(r=r[s],o=!1):(r=r.parentNode,o=!0),!r||this._isBlockElement(r))return null;while(!(Ne(r)||r.tagName=="BR"||this._isInlineObjectElement(r)));return r}_isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase())}_createViewElement(e,t){if(Po(e))return new Vu(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new yn(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(Vb,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const s of t.getAttributeNames())i.setAttribute(s,t.getAttribute(s))}return i}}function B7(n,e){return pk(n).some(i=>i.tagName&&e.includes(i.tagName.toLowerCase()))}function Lb(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function F7(n,e){return n.isEqualNode(M7)&&Uk(n,e)&&n.parentNode.childNodes.length===1}function Uk(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function Ob(n){n==="script"&&Ce("domconverter-unsafe-script-element-detected"),n==="style"&&Ce("domconverter-unsafe-style-element-detected")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wn extends gi(){constructor(e){super(),this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Go{constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,MC(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qi extends Wn{constructor(e){super(e),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(s,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture})})}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Go(this.view,t,i))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D7 extends Qi{constructor(e){super(e),this.domEventType=["keydown","keyup"]}onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Ms(this)}};this.fire(e.type,e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z7 extends Wn{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=di(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new Wi(t.getRanges(),{backward:t.isBackward,fake:!1});(e==Q.arrowleft||e==Q.arrowup)&&i.setTo(i.getFirstPosition()),(e==Q.arrowright||e==Q.arrowdown)&&i.setTo(i.getLastPosition());const s={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let $k=class extends Wn{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,i=new Set,s=new Set;for(const r of e){const a=t.mapDomToView(r.target);a&&(a.is("uiElement")||a.is("rawElement")||r.type==="childList"&&!this._isBogusBrMutation(r)&&s.add(a))}for(const r of e){const a=t.mapDomToView(r.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&r.type==="characterData"){const l=t.findCorrespondingViewText(r.target);l&&!s.has(l.parent)?i.add(l):!l&&Ft(r.target)&&s.add(t.mapDomToView(r.target.parentNode))}}let o=!1;for(const r of i)o=!0,this.renderer.markToSync("text",r);for(const r of s){const a=t.mapViewToDom(r),l=Array.from(r.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));oV(l,c,H7)||(o=!0,this.renderer.markToSync("children",r))}o&&this.view.forceRender()}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function H7(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jf extends Qi{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),t.on("blur",(i,s)=>{const o=t.selection.editableElement;(o===null||o===s.target)&&(t.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class U7 extends Wn{constructor(e){super(e),this.mutationObserver=e.getObserver($k),this.focusObserver=e.getObserver(jf),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=di(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=di(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",(o,r)=>{this.document.isComposing&&!Z.isAndroid||(this._handleSelectionChange(r,t),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(t))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_handleSelectionChange(e,t){if(!this.isEnabled)return;const i=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(i.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(i);if(s.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,!(this.selection.isEqual(s)&&this.domConverter.isDomSelectionCorrect(i))&&!(++this._loopbackCounter>60))if(this.focusObserver.flush(),this.selection.isSimilar(s))this.view.forceRender();else{const o={oldSelection:this.selection,newSelection:s,domSelection:i};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $7 extends Qi{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wk{constructor(e){this.files=W7(e),this._native=e}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function W7(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j7 extends Qi{constructor(e){super(e),this.domEventType=["beforeinput"]}onDomEvent(e){const t=e.getTargetRanges(),i=this.view,s=i.document;let o=null,r=null,a=[];if(e.dataTransfer&&(o=new Wk(e.dataTransfer)),e.data!==null?r=e.data:o&&(r=o.getData("text/plain")),s.selection.isFake)a=Array.from(s.selection.getRanges());else if(t.length)a=t.map(l=>i.domConverter.domRangeToView(l));else if(Z.isAndroid){const l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(Z.isAndroid&&e.inputType=="insertCompositionText"&&r&&r.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&r&&r.includes(`
`)){const l=r.split(/\n{1,2}/g);let c=a;for(let u=0;u<l.length;u++){const d=l[u];d!=""&&(this.fire(e.type,e,{data:d,dataTransfer:o,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[s.selection.getFirstRange()]),u+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[s.selection.getFirstRange()])}return}this.fire(e.type,e,{data:r,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q7 extends Wn{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&VV(i.keyCode)){const s=new rr(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,i),s.stop.called&&t.stop()}})}observe(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G7 extends Wn{constructor(e){super(e);const t=this.document;t.on("keydown",(i,s)=>{if(!this.isEnabled||s.keyCode!=Q.tab||s.ctrlKey)return;const o=new rr(t,"tab",t.selection.getFirstRange());t.fire(o,s),o.stop.called&&i.stop()})}observe(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let K7=class extends se(){constructor(e){super(),this.document=new Ru(e),this.domConverter=new Lu(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new A7(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Bk(this.document),this.addObserver($k),this.addObserver(jf),this.addObserver(U7),this.addObserver(D7),this.addObserver(z7),this.addObserver($7),this.addObserver(q7),this.addObserver(j7),this.addObserver(G7),E7(this),b7(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const s={};for(const{name:r,value:a}of Array.from(e.attributes))s[r]=a,r==="class"?this._writer.addClass(a.split(" "),i):this._writer.setAttribute(r,a,i);this._initialDomRootAttributes.set(e,s);const o=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(r,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(r,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(r,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const r of this._observers.values())r.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:s})=>t.removeAttribute(s));const i=this._initialDomRootAttributes.get(t);for(const s in i)t.setAttribute(s,i[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[i,s]of this.domRoots)t.observe(s,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){const e=this.document.selection.getFirstRange();e&&kk({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new y("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){y.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(jf).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return O._createAt(e,t)}createPositionAfter(e){return O._createAfter(e)}createPositionBefore(e){return O._createBefore(e)}createRange(...e){return new Y(...e)}createRangeOn(e){return Y._createOn(e)}createRangeIn(e){return Y._createIn(e)}createSelection(...e){return new Wi(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ji{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ar=class extends Ji{constructor(e){super(),this.parent=null,this._attrs=rn(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new y("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new y("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let o=0;for(;i[o]==s[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=dt(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=rn(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};ar.prototype.is=function(n){return n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ea{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce((i,s)=>i+s.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new y("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new y("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const i of t)if(!(i instanceof ar))throw new y("model-nodelist-insertnodes-not-node",this);this._nodes=jV(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ve=class qf extends ar{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new qf(this.data,this.getAttributes())}static fromJSON(e){return new qf(e.data,e.attributes)}};ve.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pn extends Ji{constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new y("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new y("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}pn.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class re extends ar{constructor(e,t,i){super(t),this._children=new ea,this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new re(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=Q7(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(re.fromJSON(i)):t.push(ve.fromJSON(i))}return new re(e.name,e.attributes,t)}}re.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function Q7(n){return typeof n=="string"?[new ve(n)]:(Wt(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new ve(e):e instanceof pn?new ve(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nn{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new y("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new y("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=R._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,i,s,o;do s=this.position,o=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this.position=s,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=ta(t,i),o=s||jk(t,i,s);if(o instanceof re)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=o),this.position=t,ss("elementStart",o,e,t,1);if(o instanceof ve){let r;if(this.singleCharacters)r=1;else{let c=o.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),r=c-t.offset}const a=t.offset-o.startOffset,l=new pn(o,a,r);return t.offset+=r,this.position=t,ss("text",l,e,t,r)}else return t.path.pop(),t.offset++,this.position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():ss("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,o=ta(t,s),r=o||qk(t,s,o);if(r instanceof re)return t.offset--,this.shallow?(this.position=t,ss("elementStart",r,e,t,1)):(t.path.push(r.maxOffset),this.position=t,this._visitedParent=r,this.ignoreElementEnd?this._previous():ss("elementEnd",r,e,t));if(r instanceof ve){let a;if(this.singleCharacters)a=1;else{let u=r.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}const l=t.offset-r.startOffset,c=new pn(r,l-a,a);return t.offset-=a,this.position=t,ss("text",c,e,t,a)}else return t.path.pop(),this.position=t,this._visitedParent=i.parent,ss("elementStart",i,e,t,1)}}function ss(n,e,t,i,s){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:s}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R extends Ji{constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new y("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new y("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new y("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new y("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return ta(this,this.parent)}get nodeAfter(){const e=this.parent;return jk(this,e,ta(this,e))}get nodeBefore(){const e=this.parent;return qk(this,e,ta(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=dt(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Nn(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=dt(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){const s=this.path[i]-e.path[i];if(s<-1||s>1)return!1;if(s===1)return Mb(e,this,i);if(s===-1)return Mb(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?Gf(this.path,t):Gf(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),i=e.getParentPath();return dt(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=R._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this);let s;return i?(s=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(s=s._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?s=R._createAt(e.deletionPosition):s=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),s}_getTransformedByDeletion(e,t){const i=R._createAt(this);if(this.root!=e.root)return i;if(dt(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(dt(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+t>this.path[s])return null;i.path[s]-=t}}return i}_getTransformedByInsertion(e,t){const i=R._createAt(this);if(this.root!=e.root)return i;if(dt(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(dt(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;e.offset<=this.path[s]&&(i.path[s]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return R._createAt(this);const s=this._getTransformedByDeletion(e,i);return s===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):s._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,s=R._createAt(t);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[i]-e.offset,s.path=[...s.path,...this.path.slice(i+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof R)return new R(e.root,e.path,e.stickiness);{const s=e;if(t=="end")t=s.maxOffset;else{if(t=="before")return this._createBefore(s,i);if(t=="after")return this._createAfter(s,i);if(t!==0&&!t)throw new y("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new y("model-position-parent-incorrect",[this,e]);const o=s.getPath();return o.push(t),new this(s.root,o,i)}}static _createAfter(e,t){if(!e.parent)throw new y("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new y("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const i=new R(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new y("model-position-fromjson-no-root",t,{rootName:e.root});return new R(t.getRoot(e.root),e.path,e.stickiness)}}R.prototype.is=function(n){return n==="position"||n==="model:position"};function ta(n,e){const t=e.getChild(e.offsetToIndex(n.offset));return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function jk(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset))}function qk(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function Mb(n,e,t){return!(t+1===n.path.length||!Gf(e.path,t+1)||!J7(n,t+1))}function Gf(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function J7(n,e){let t=n.parent,i=n.path.length-1,s=0;for(;i>=e;){if(n.path[i]+s!==t.maxOffset)return!1;s=1,i--,t=t.parent}return!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S extends Ji{constructor(e,t){super(),this.start=R._createAt(e),this.end=t?R._createAt(t):R._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Nn({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return dt(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}containsItem(e){const t=R._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new S(this.start,e.start)),this.containsPosition(e.end)&&t.push(new S(e.end,this.end))):t.push(new S(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new S(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let s=this.start,o=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(o)&&(o=e.end),new S(s,o)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=R._createAt(this.start);let s=i.parent;for(;i.path.length>t+1;){const o=s.maxOffset-i.offset;o!==0&&e.push(new S(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,s=s.parent}for(;i.path.length<=this.end.path.length;){const o=this.end.path[i.path.length-1],r=o-i.offset;r!==0&&e.push(new S(i,i.getShiftedBy(r))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Nn(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Nn(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new Nn(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new S(this.start,this.end)]}getTransformedByOperations(e){const t=[new S(this.start,this.end)];for(const i of e)for(let s=0;s<t.length;s++){const o=t[s].getTransformedByOperation(i);t.splice(s,1,...o),s+=o.length-1}for(let i=0;i<t.length;i++){const s=t[i];for(let o=i+1;o<t.length;o++){const r=t[o];(s.containsRange(r)||r.containsRange(s)||s.isEqual(r))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,s=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,s,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new S(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new S(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=R._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new S(t,i)):new S(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new S(this.start,e),new S(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const s=new S(this.start,this.end);return s.start=s.start._getTransformedByInsertion(e,t),s.end=s.end._getTransformedByInsertion(e,t),[s]}}_getTransformedByMove(e,t,i,s=!1){if(this.isCollapsed){const d=this.start._getTransformedByMove(e,t,i);return[new S(d)]}const o=S._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!s&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const d=this.start._getTransformedByMove(e,t,i),h=this.end._getTransformedByMove(e,t,i);return[new S(d,h)]}let a;const l=this.getDifference(o);let c=null;const u=this.getIntersection(o);if(l.length==1?c=new S(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new S(this.start,this.end._getTransformedByDeletion(e,i))),c?a=c._getTransformedByInsertion(r,i,u!==null||s):a=[],u){const d=new S(u.start._getCombined(o.start,r),u.end._getCombined(o.start,r));a.length==2?a.splice(1,0,d):a.push(d)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),s=this.end._getTransformedByDeletion(e,t);return i==null&&s==null?null:(i==null&&(i=e),s==null&&(s=e),new S(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return new this(R._createAt(e,0),R._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(R._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new y("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((o,r)=>o.start.isAfter(r.start)?1:-1);const i=e.indexOf(t),s=new this(t.start,t.end);if(i>0)for(let o=i-1;e[o].end.isEqual(s.start);o++)s.start=R._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(s.end);o++)s.end=R._createAt(e[o].end);return s}static fromJSON(e,t){return new this(R.fromJSON(e.start,t),R.fromJSON(e.end,t))}}S.prototype.is=function(n){return n==="range"||n==="model:range"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gk extends ue(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new y("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),s=this._viewToModelMapping.get(i),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=R._createAt(s,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const s of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(s);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));const s=this._elementToMarkerNames.get(e);s&&(s.delete(t),s.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new S(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Y(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const s of t)if(s.is("attributeElement"))for(const o of s.getElementsWithSameId())i.add(o);else i.add(s);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){const o=this._toModelOffset(e.parent,e.index,i),r=this._toModelOffset(e,t,e);return o+r}if(e.is("$text"))return t;let s=0;for(let o=0;o<t;o++)s+=this.getModelLength(e.getChild(o));return s}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,s=0,o=0,r=0;if(e.is("$text"))return new O(e,t);for(;o<t;)i=e.getChild(r),s=this.getModelLength(i),o+=s,r++;return o==t?this._moveViewPositionToTextNode(new O(e,r)):this.findPositionIn(i,t-(o-s))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t instanceof ye?new O(t,t.data.length):i instanceof ye?new O(i,0):e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y7{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=El(t),e instanceof pn&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=El(t),e instanceof pn&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=El(t),e instanceof pn&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const s=i.get(t);return s===void 0?null:s}revert(e,t){t=El(t),e instanceof pn&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[i,s]of this._consumable)for(const[o,r]of s){const a=o.split(":")[0];r&&e==a&&t.push({event:o,item:i.name||i.description})}if(t.length)throw new y("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const s=i.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,s=e.parent,o=Symbol("$textProxy:"+e.data);let r,a;return r=this._textProxyRegistry.get(t),r||(r=new Map,this._textProxyRegistry.set(t,r)),a=r.get(i),a||(a=new Map,r.set(i,a)),a.set(s,o),o}}function El(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kk extends ue(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){const s=this._createConversionApi(i,e.getRefreshedItems());for(const r of e.getMarkersToRemove())this._convertMarkerRemove(r.name,r.range,s);const o=this._reduceChanges(e.getChanges());for(const r of o)r.type==="insert"?this._convertInsert(S._createFromPositionAndShift(r.position,r.length),s):r.type==="reinsert"?this._convertReinsert(S._createFromPositionAndShift(r.position,r.length),s):r.type==="remove"?this._convertRemove(r.position,r.length,r.name,s):this._convertAttribute(r.range,r.attributeKey,r.attributeOldValue,r.attributeNewValue,s);for(const r of s.mapper.flushUnboundMarkerNames()){const a=t.get(r).getRange();this._convertMarkerRemove(r,a,s),this._convertMarkerAdd(r,a,s)}for(const r of e.getMarkersToAdd())this._convertMarkerAdd(r.name,r.range,s);s.mapper.flushDeferredBindings(),s.consumable.verifyAllConsumed("insert")}convert(e,t,i,s={}){const o=this._createConversionApi(i,void 0,s);this._convertInsert(e,o);for(const[r,a]of t)this._convertMarkerAdd(r,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){const s=Array.from(t.getMarkersAtPosition(e.getFirstPosition())),o=this._createConversionApi(i);if(this._addConsumablesForSelection(o.consumable,e,s),this.fire("selection",{selection:e},o),!!e.isCollapsed){for(const r of s){const a=r.getRange();if(!X7(e.getFirstPosition(),r,o.mapper))continue;const l={item:e,markerName:r.name,markerRange:a};o.consumable.test(e,"addMarker:"+r.name)&&this.fire(`addMarker:${r.name}`,l,o)}for(const r of e.getAttributeKeys()){const a={item:e,range:e.getFirstRange(),attributeKey:r,attributeOldValue:null,attributeNewValue:e.getAttribute(r)};o.consumable.test(e,"attribute:"+a.attributeKey)&&this.fire(`attribute:${a.attributeKey}:$text`,a,o)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,Array.from(e));for(const s of Array.from(e.getWalker({shallow:!0})).map(Nb))this._testAndFire("insert",s,t)}_convertRemove(e,t,i,s){this.fire(`remove:${i}`,{position:e,length:t},s)}_convertAttribute(e,t,i,s,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(const r of e){const a={item:r.item,range:S._createFromPositionAndShift(r.previousPosition,r.length),attributeKey:t,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){const i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(const s of i.map(Nb))this._testAndFire("insert",{...s,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;const s=`addMarker:${e}`;if(i.consumable.add(t,s),this.fire(s,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,s)){this._addConsumablesForRange(i.consumable,t,s);for(const o of t.getItems()){if(!i.consumable.test(o,s))continue;const r={item:o,range:S._createOn(o),markerName:e,markerRange:t};this.fire(s,r,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){const t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(const i of t){const s=i.item;if(e.test(s,"insert")===null){e.add(s,"insert");for(const o of s.getAttributeKeys())e.add(s,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,i){for(const s of t.getItems())e.add(s,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const s of i)e.add(t,"addMarker:"+s.name);for(const s of t.getAttributeKeys())e.add(t,"attribute:"+s);return e}_testAndFire(e,t,i){const s=Z7(e,t),o=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,r=this._firedEventsMap.get(i),a=r.get(o);if(!a)r.set(o,new Set([s]));else if(!a.has(s))a.add(s);else return;this.fire(s,t,i)}_testAndFireAddAttributes(e,t){const i={item:e,range:S._createOn(e)};for(const s of i.item.getAttributeKeys())i.attributeKey=s,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(s),this._testAndFire(`attribute:${s}`,i,t)}_createConversionApi(e,t=new Set,i={}){const s={...this._conversionApi,consumable:new Y7,writer:e,options:i,convertItem:o=>this._convertInsert(S._createOn(o),s),convertChildren:o=>this._convertInsert(S._createIn(o),s,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,s),canReuseView:o=>!t.has(s.mapper.toModelElement(o))};return this._firedEventsMap.set(s,new Map),s}}function X7(n,e,t){const i=e.getRange(),s=Array.from(n.getAncestors());return s.shift(),s.reverse(),!s.some(r=>{if(i.containsItem(r))return!!t.toViewElement(r).getCustomProperty("addHighlight")})}function Z7(n,e){const t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function Nb(n){const e=n.item,t=S._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hn extends ue(Ji){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new S(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new S(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new S(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof Hn)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof S)this._setRanges([t],!!s&&!!s.backward);else if(t instanceof R)this._setRanges([new S(t)]);else if(t instanceof ar){const o=!!s&&!!s.backward;let r;if(i=="in")r=S._createIn(t);else if(i=="on")r=S._createOn(t);else if(i!==void 0)r=new S(R._createAt(t,i));else throw new y("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([r],o)}else if(Wt(t))this._setRanges(t,s&&!!s.backward);else throw new y("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const i=Array.from(e),s=i.some(o=>{if(!(o instanceof S))throw new y("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(r=>!r.isEqual(o))});i.length===this._ranges.length&&!s||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new y("model-selection-setfocus-no-ranges",[this,e]);const i=R._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(s)=="before"?(this._pushRange(new S(i,s)),this._lastRangeBackward=!0):(this._pushRange(new S(s,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=Bb(t.start,e);i&&Kf(i,t)&&(yield i);for(const o of t.getWalker()){const r=o.item;o.type=="elementEnd"&&eL(r,e,t)&&(yield r)}const s=Bb(t.end,e);s&&!t.end.isTouching(R._createAt(s,0))&&Kf(s,t)&&(yield s)}}containsEntireContent(e=this.anchor.root){const t=R._createAt(e,0),i=R._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new S(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new y("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Hn.prototype.is=function(n){return n==="selection"||n==="model:selection"};function Qk(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function eL(n,e,t){return Qk(n,e)&&Kf(n,t)}function Bb(n,e){const i=n.parent.root.document.model.schema,s=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;const r=s.find(a=>o?!1:(o=i.isLimit(a),!o&&Qk(a,e)));return s.forEach(a=>e.add(a)),r}function Kf(n,e){const t=tL(n);return t?!e.containsRange(S._createOn(t),!0):!0}function tL(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class an extends ue(S){constructor(e,t){super(e,t),nL.call(this)}detach(){this.stopListening()}toRange(){return new S(this.start,this.end)}static fromRange(e){return new an(e.start,e.end)}}an.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function nL(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&iL.call(this,t)},{priority:"low"})}function iL(n){const e=this.getTransformedByOperation(n),t=S._createFromRanges(e),i=!t.isEqual(this),s=sL(this,n);let o=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?o=n.sourcePosition:o=n.deletionPosition);const r=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",r,{deletionPosition:o})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function sL(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ia="selection:";class ln extends ue(Ji){constructor(e){super(),this._selection=new oL(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Ia+e}static _isStoreAttributeKey(e){return e.startsWith(Ia)}}ln.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class oL extends Hn{constructor(e){super(),this.markers=new xe({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{const s=i[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,s,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(t,i)=>{rL(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=sn();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new y("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new y("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=an.fromRange(e);return t.on("change:range",(i,s,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const r=this._ranges.indexOf(t);this._ranges.splice(r,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const s of this._model.markers){const o=s.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const r=s.getRange();for(const a of this.getRanges())r.containsRange(a,!a.isCollapsed)&&e.push(s)}const i=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),t=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let s=!1;const o=Array.from(this.markers),r=this.markers.has(e);if(!t)r&&(this.markers.remove(e),s=!0);else{let a=!1;for(const l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!r?(this.markers.add(e),s=!0):!a&&r&&(this.markers.remove(e),s=!0)}s&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){const t=rn(this._getSurroundingAttributes()),i=rn(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,r]of this._attributePriority)r=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);const s=[];for(const[o,r]of this.getAttributes())(!i.has(o)||i.get(o)!==r)&&s.push(o);for(const[o]of i)this.hasAttribute(o)||s.push(o);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,t,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,s),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[i,s]of this.getAttributes())e.get(i)!==s&&this._removeAttribute(i,!1);for(const[i,s]of e)this._setAttribute(i,s,!1)&&t.add(i);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(Ia)&&(yield[t.substr(Ia.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let i=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=Sl(s)),i||(i=Sl(o)),!this.isGravityOverridden&&!i){let r=s;for(;r&&!t.isInline(r)&&!i;)r=r.previousSibling,i=Sl(r)}if(!i){let r=o;for(;r&&!t.isInline(r)&&!i;)r=r.nextSibling,i=Sl(r)}i||(i=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const o of s){if(o.item.is("element")&&t.isObject(o.item))break;if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function Sl(n){return n instanceof pn||n instanceof ve?n.getAttributes():null}function rL(n,e){const t=n.document.differ;for(const i of t.getChanges()){if(i.type!="insert")continue;const s=i.position.parent;i.length===s.maxOffset&&n.enqueueChange(e,r=>{const a=Array.from(s.getAttributeKeys()).filter(l=>l.startsWith(Ia));for(const l of a)r.removeAttribute(l,s)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jk{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aL extends Jk{elementToElement(e){return this.add(TL(e))}elementToStructure(e){return this.add(EL(e))}attributeToElement(e){return this.add(SL(e))}attributeToAttribute(e){return this.add(AL(e))}markerToElement(e){return this.add(IL(e))}markerToHighlight(e){return this.add(RL(e))}markerToData(e){return this.add(PL(e))}}function Yk(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const i=t.writer,s=t.mapper.toViewPosition(e.range.start),o=i.createText(e.item.data);i.insert(s,o)}}function Xk(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function lL(){return(n,e,t)=>{const i=t.mapper.toViewPosition(e.position),s=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(s,{isPhantom:!0}),r=t.writer.createRange(i,o),a=t.writer.remove(r.getTrimmed());for(const l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function Zk(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function cL(){return(n,e,t)=>{const i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=[];for(const o of i.getRanges())s.push(t.mapper.toViewRange(o));t.writer.setSelection(s,{backward:i.isBackward})}}function uL(){return(n,e,t)=>{const i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=t.writer,o=i.getFirstPosition(),r=t.mapper.toViewPosition(o),a=s.breakAttributes(r);s.setSelection(a)}}function dL(){return(n,e,t)=>{const i=t.writer,s=i.document.selection;for(const o of s.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);i.setSelection(null)}}function hL(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!s&&!o)return;i.consumable.consume(t.item,e.name);const r=i.writer,a=r.document.selection;if(t.item instanceof Hn||t.item instanceof ln)r.wrap(a.getFirstRange(),o);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(l=r.unwrap(l,s)),t.attributeNewValue!==null&&o&&r.wrap(l,o)}}}function fL(n,e=FL){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const o=n(i.item,s,i);if(!o)return;e(i.item,s.consumable);const r=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,o),s.writer.insert(r,o),s.convertAttributes(i.item),sx(o,i.item.getChildren(),s,{reconversion:i.reconversion})}}function mL(n,e){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const o=new Map;s.writer._registerSlotFactory(OL(i.item,o,s));const r=n(i.item,s,i);if(s.writer._clearSlotFactory(),!r)return;ML(i.item,o,s),e(i.item,s.consumable);const a=s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,r),s.writer.insert(a,r),s.convertAttributes(i.item),NL(r,o,s,{reconversion:i.reconversion})}}function gL(n){return(e,t,i)=>{t.isOpening=!0;const s=n(t,i);t.isOpening=!1;const o=n(t,i);if(!s||!o)return;const r=t.markerRange;if(r.isCollapsed&&!i.consumable.consume(r,e.name))return;for(const c of r)if(!i.consumable.consume(c.item,e.name))return;const a=i.mapper,l=i.writer;l.insert(a.toViewPosition(r.start),s),i.mapper.bindElementToMarker(s,t.markerName),r.isCollapsed||(l.insert(a.toViewPosition(r.end),o),i.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function pL(){return(n,e,t)=>{const i=t.mapper.markerNameToElements(e.markerName);if(i){for(const s of i)t.mapper.unbindElementFromMarkerName(s,e.markerName),t.writer.clear(t.writer.createRangeOn(s),s);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function wL(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const o=t.markerRange;i.consumable.consume(o,e.name)&&(Fb(o,!1,i,t,s),Fb(o,!0,i,t,s),e.stop())}}function Fb(n,e,t,i,s){const o=e?n.start:n.end,r=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(r||a){let c,u;e&&r||!e&&!a?(c=r,u=!0):(c=a,u=!1);const d=t.mapper.toViewElement(c);if(d){bL(d,e,u,t,i,s);return}}const l=t.mapper.toViewPosition(o);vL(l,e,t,i,s)}function bL(n,e,t,i,s,o){const r=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(r)?n.getAttribute(r).split(","):[];a.unshift(o.name),i.writer.setAttribute(r,a.join(","),n),i.mapper.bindElementToMarker(n,s.markerName)}function vL(n,e,t,i,s){const o=`${s.group}-${e?"start":"end"}`,r=s.name?{name:s.name}:null,a=t.writer.createUIElement(o,r);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function _L(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const o=i.mapper.markerNameToElements(t.markerName);if(!o)return;for(const a of o)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(r(`data-${s.group}-start-before`,a),r(`data-${s.group}-start-after`,a),r(`data-${s.group}-end-before`,a),r(`data-${s.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function r(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(s.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function yL(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!s&&!o)return;i.consumable.consume(t.item,e.name);const r=i.mapper.toViewElement(t.item),a=i.writer;if(!r)throw new y("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&s)if(s.key=="class"){const l=Ze(s.value);for(const c of l)a.removeClass(c,r)}else if(s.key=="style"){const l=Object.keys(s.value);for(const c of l)a.removeStyle(c,r)}else a.removeAttribute(s.key,r);if(t.attributeNewValue!==null&&o)if(o.key=="class"){const l=Ze(o.value);for(const c of l)a.addClass(c,r)}else if(o.key=="style"){const l=Object.keys(o.value);for(const c of l)a.setStyle(c,o.value[c],r)}else a.setAttribute(o.key,o.value,r)}}function CL(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof Hn||t.item instanceof ln)&&!t.item.is("$textProxy"))return;const s=$g(n,t,i);if(!s||!i.consumable.consume(t.item,e.name))return;const o=i.writer,r=Zk(o,s),a=o.document.selection;if(t.item instanceof Hn||t.item instanceof ln)o.wrap(a.getFirstRange(),r);else{const l=i.mapper.toViewRange(t.range),c=o.wrap(l,r);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(r)){i.mapper.bindElementToMarker(u,t.markerName);break}}}}function kL(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof re))return;const s=$g(n,t,i);if(!s||!i.consumable.test(t.item,e.name))return;const o=i.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const a of S._createIn(t.item))i.consumable.consume(a.item,e.name);o.getCustomProperty("addHighlight")(o,s,i.writer),i.mapper.bindElementToMarker(o,t.markerName)}}}function xL(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;const s=$g(n,t,i);if(!s)return;const o=Zk(i.writer,s),r=i.mapper.markerNameToElements(t.markerName);if(r){for(const a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,s.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function TL(n){const e=ex(n.model),t=Pa(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,fL(t,ix(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",nx(e),{priority:"low"})}}function EL(n){const e=ex(n.model),t=Pa(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new y("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,mL(t,ix(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",nx(e),{priority:"low"})}}function SL(n){n=zs(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=Pa(n.view[s],"attribute");else n.view=Pa(n.view,"attribute");const i=tx(n);return s=>{s.on(t,hL(i),{priority:n.converterPriority||"normal"})}}function AL(n){n=zs(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=Db(n.view[s]);else n.view=Db(n.view);const i=tx(n);return s=>{s.on(t,yL(i),{priority:n.converterPriority||"normal"})}}function IL(n){const e=Pa(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,gL(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,pL(),{priority:n.converterPriority||"normal"})}}function PL(n){n=zs(n);const e=n.model;let t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${e}`,wL(t),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${e}`,_L(t),{priority:n.converterPriority||"normal"})}}function RL(n){return e=>{e.on(`addMarker:${n.model}`,CL(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,kL(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,xL(n.view),{priority:n.converterPriority||"normal"})}}function ex(n){return typeof n=="string"&&(n={name:n}),n.attributes?Array.isArray(n.attributes)||(n.attributes=[n.attributes]):n.attributes=[],n.children=!!n.children,n}function Pa(n,e){return typeof n=="function"?n:(t,i)=>VL(n,i,e)}function VL(n,e,t){typeof n=="string"&&(n={name:n});let i;const s=e.writer,o=Object.assign({},n.attributes);if(t=="container")i=s.createContainerElement(n.name,o);else if(t=="attribute"){const r={priority:n.priority||ys.DEFAULT_PRIORITY};i=s.createAttributeElement(n.name,o,r)}else i=s.createUIElement(n.name,o);if(n.styles){const r=Object.keys(n.styles);for(const a of r)s.setStyle(a,n.styles[a],i)}if(n.classes){const r=n.classes;if(typeof r=="string")s.addClass(r,i);else for(const a of r)s.addClass(a,i)}return i}function tx(n){return n.model.values?(e,t,i)=>{const s=n.view[e];return s?s(e,t,i):null}:n.view}function Db(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function $g(n,e,t){const i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function LL(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else if(n.children)return!0;return!1}}function nx(n){const e=LL(n);return(t,i)=>{const s=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const o of i.changes){const r=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!r||!e(r,o)){s.push(o);continue}if(!i.reconvertedElements.has(r)){i.reconvertedElements.add(r);const a=R._createBefore(r);s.push({type:"remove",name:r.name,position:a,length:1},{type:"reinsert",name:r.name,position:a,length:1})}}i.changes=s}}function ix(n){return(e,t,i={})=>{const s=["insert"];for(const o of n.attributes)e.hasAttribute(o)&&s.push(`attribute:${o}`);return s.every(o=>t.test(e,o))?(i.preflight||s.forEach(o=>t.consume(e,o)),!0):!1}}function OL(n,e,t){return(i,s="children")=>{const o=i.createContainerElement("$slot");let r=null;if(s==="children")r=Array.from(n.getChildren());else if(typeof s=="function")r=Array.from(n.getChildren()).filter(a=>s(a));else throw new y("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:s});return e.set(o,r),o}}function ML(n,e,t){const i=Array.from(e.values()).flat(),s=new Set(i);if(s.size!=i.length)throw new y("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(s.size!=n.childCount)throw new y("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function NL(n,e,t,i){t.mapper.on("modelToViewPosition",r,{priority:"highest"});let s=null,o=null;for([s,o]of e)sx(n,o,t,i),t.writer.move(t.writer.createRangeIn(s),t.writer.createPositionBefore(s)),t.writer.remove(s);t.mapper.off("modelToViewPosition",r);function r(a,l){const c=l.modelPosition.nodeAfter,u=o.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(s,u))}}function sx(n,e,t,i){for(const s of e)BL(n.root,s,t,i)||t.convertItem(s)}function BL(n,e,t,i){const{writer:s,mapper:o}=t;if(!i.reconversion)return!1;const r=o.toViewElement(e);return!r||r.root==n||!t.canReuseView(r)?!1:(s.move(s.createRangeOn(r),o.toViewPosition(R._createBefore(e))),!0)}function FL(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ox(n){const{schema:e,document:t}=n.model;for(const i of t.getRootNames()){const s=t.getRoot(i);if(s.isEmpty&&!e.checkChild(s,"$text")&&e.checkChild(s,"paragraph"))return n.insertElement("paragraph",s),!0}return!1}function rx(n,e,t){const i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function ax(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DL extends Jk{elementToElement(e){return this.add(lx(e))}elementToAttribute(e){return this.add(UL(e))}attributeToAttribute(e){return this.add($L(e))}elementToMarker(e){return this.add(WL(e))}dataToMarker(e){return this.add(jL(e))}}function zb(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:i,modelCursor:s}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=s}}}function zL(){return(n,e,{schema:t,consumable:i,writer:s})=>{let o=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!rx(o,"$text",t)||e.viewItem.data.trim().length==0)return;const a=o.nodeBefore;o=ax(o,s),a&&a.is("element","$marker")&&(s.move(s.createRangeOn(a),o),o=s.createPositionAfter(a))}i.consume(e.viewItem);const r=s.createText(e.viewItem.data);s.insert(r,o),e.modelRange=s.createRange(o,o.getShiftedBy(r.offsetSize)),e.modelCursor=e.modelRange.end}}function HL(n,e){return(t,i)=>{const s=i.newSelection,o=[];for(const a of s.getRanges())o.push(e.toModelRange(a));const r=n.createSelection(o,{backward:s.isBackward});r.isEqual(n.document.selection)||n.change(a=>{a.setSelection(r)})}}function lx(n){n=zs(n);const e=Qf(n),t=Wg(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"normal"})}}function UL(n){n=zs(n),cx(n);const e=ux(n,!1),t=Wg(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"low"})}}function $L(n){n=zs(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=KL(n)),cx(n,e);const t=ux(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function WL(n){const e=YL(n.model);return lx({...n,model:e})}function jL(n){n=zs(n),n.model||(n.model=s=>s?n.view+":"+s:n.view);const e={view:n.view,model:n.model},t=Qf(Hb(e,"start")),i=Qf(Hb(e,"end"));return s=>{s.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),s.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});const o=Di.get("low"),r=Di.get("highest"),a=Di.get(n.converterPriority)/r;s.on("element",qL(e),{priority:o+a})}}function qL(n){return(e,t,i)=>{const s=`data-${n.view}`;if(!i.consumable.test(t.viewItem,{attributes:s+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:s+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(s+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(s+"-start-before").split(","));function o(r,a){for(const l of a){const c=n.model(l,i),u=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(u,r),t.modelCursor.isEqual(r)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(r,1),t.modelRange=t.modelRange._getTransformedByInsertion(r,1)[0]}}}}function Wg(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function Qf(n){const e=new kn(n.view);return(t,i,s)=>{const o=e.match(i.viewItem);if(!o)return;const r=o.match;if(r.name=!0,!s.consumable.test(i.viewItem,r))return;const a=GL(n.model,i.viewItem,s);a&&s.safeInsert(a,i.modelCursor)&&(s.consumable.consume(i.viewItem,r),s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i))}}function GL(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function KL(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key;let t;if(e=="class"||e=="style")t={[e=="class"?"classes":"styles"]:n.view.value};else{const i=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;t={attributes:{[e]:i}}}return n.view.name&&(t.name=n.view.name),n.view=t,e}function cx(n,e=null){const t=e===null?!0:o=>o.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,s=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:s}}function ux(n,e){const t=new kn(n.view);return(i,s,o)=>{if(!s.modelRange&&e)return;const r=t.match(s.viewItem);if(!r||(QL(n.view,s.viewItem)?r.match.name=!0:delete r.match.name,!o.consumable.test(s.viewItem,r.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(s.viewItem,o):n.model.value;if(l===null)return;s.modelRange||Object.assign(s,o.convertChildren(s.viewItem,s.modelCursor)),JL(s.modelRange,{key:a,value:l},e,o)&&(o.consumable.test(s.viewItem,{name:!0})&&(r.match.name=!0),o.consumable.consume(s.viewItem,r.match))}}function QL(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!Wg(t)?!1:!t.classes&&!t.attributes&&!t.styles}function JL(n,e,t,i){let s=!1;for(const o of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(o,e.key)&&(s=!0,!o.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,o));return s}function YL(n){return(e,t)=>{const i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function Hb(n,e){const t=(i,s)=>{const o=i.getAttribute("name"),r=n.model(o,s);return s.writer.createElement("$marker",{"data-name":r})};return{view:`${n.view}-${e}`,model:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XL extends se(){constructor(e,t){super(),this.model=e,this.view=new K7(t),this.mapper=new Gk,this.downcastDispatcher=new Kk({mapper:this.mapper,schema:e.schema});const i=this.model.document,s=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(r=>{this.downcastDispatcher.convertChanges(i.differ,o,r),this.downcastDispatcher.convertSelection(s,o,r)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",HL(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",Yk(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Xk(),{priority:"lowest"}),this.downcastDispatcher.on("remove",lL(),{priority:"low"}),this.downcastDispatcher.on("selection",dL(),{priority:"high"}),this.downcastDispatcher.on("selection",cL(),{priority:"low"}),this.downcastDispatcher.on("selection",uL(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(r=>{if(r.rootName=="$graveyard")return null;const a=new Lk(this.view.document,r.name);return a.rootName=r.rootName,this.mapper.bindElements(r,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new y("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class na{constructor(){this._consumables=new Map}add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new ZL(e),this._consumables.set(e,i)),i.add(t)}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const r of i)r=="style"||r=="class"||t.attributes.push(r);const s=e.getClassNames();for(const r of s)t.classes.push(r);const o=e.getStyleNames();for(const r of o)t.styles.push(r);return t}static createFrom(e,t){if(t||(t=new na),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,na.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=na.createFrom(i,t);return t}}const Al=["attributes","classes","styles"];class ZL{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of Al)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of Al)if(t in e){const i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of Al)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of Al)t in e&&this._revert(t,e[t])}_add(e,t){const i=pt(t)?t:[t],s=this._consumables[e];for(const o of i){if(e==="attributes"&&(o==="class"||o==="style"))throw new y("viewconsumable-invalid-attribute",this);if(s.set(o,!0),e==="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!0)}}_test(e,t){const i=pt(t)?t:[t],s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles",a=this._test(r,[...this._consumables[r].keys()]);if(a!==!0)return a}else{const r=s.get(o);if(r===void 0)return null;if(!r)return!1}return!0}_consume(e,t){const i=pt(t)?t:[t],s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._consume(r,[...this._consumables[r].keys()])}else if(s.set(o,!1),e=="styles")for(const r of this.element.document.stylesProcessor.getRelatedStyles(o))s.set(r,!1)}_revert(e,t){const i=pt(t)?t:[t],s=this._consumables[e];for(const o of i)if(e==="attributes"&&(o==="class"||o==="style")){const r=o=="class"?"classes":"styles";this._revert(r,[...this._consumables[r].keys()])}else s.get(o)===!1&&s.set(o,!0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eO extends se(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new ks(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new ks(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new y("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new y("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(t,e):!1}checkAttribute(e,t){const i=this.getDefinition(e.last);return i?i.allowAttributes.includes(t):!1}checkMerge(e,t){if(e instanceof R){const i=e.nodeBefore,s=e.nodeAfter;if(!(i instanceof re))throw new y("schema-check-merge-no-element-before",this);if(!(s instanceof re))throw new y("schema-check-merge-no-element-after",this);return this.checkMerge(i,s)}for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e){this.on("checkChild",(t,[i,s])=>{if(!s)return;const o=e(i,s);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(t,[i,s])=>{const o=e(i,s);typeof o=="boolean"&&(t.stop(),t.return=o)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(e instanceof R?t=e.parent:t=(e instanceof S?[e]:Array.from(e.getRanges())).reduce((s,o)=>{const r=o.getCommonAncestor();return s?s.getCommonAncestor(r,{includeSelf:!0}):r},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const s=[...e.getFirstPosition().getAncestors(),new ve("",e.getAttributes())];return this.checkAttribute(s,t)}else{const i=e.getRanges();for(const s of i)for(const o of s)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=pO(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new S(e);let i,s;const o=e.getAncestors().reverse().find(r=>this.isLimit(r))||e.root;(t=="both"||t=="backward")&&(i=new Nn({boundaries:S._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(s=new Nn({boundaries:S._createIn(o),startPosition:e}));for(const r of gO(i,s)){const a=r.walker==i?"elementEnd":"elementStart",l=r.value;if(l.type==a&&this.isObject(l.item))return S._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new S(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){const s=i.model;for(const[o,r]of Object.entries(t))s.schema.checkAttribute(e,o)&&i.setAttribute(o,r,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))Ub(this,i,t);else{const o=S._createIn(i).getPositions();for(const r of o){const a=r.nodeBefore||r.parent;Ub(this,a,t)}}}getAttributesWithProperty(e,t,i){const s={};for(const[o,r]of e.getAttributes()){const a=this.getAttributeProperties(o);a[t]!==void 0&&(i===void 0||i===a[t])&&(s[o]=r)}return s}createContext(e){return new ks(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const s of i)e[s]=tO(t[s],s);for(const s of i)nO(e,s);for(const s of i)iO(e,s);for(const s of i)sO(e,s);for(const s of i)oO(e,s),rO(e,s);for(const s of i)aO(e,s),lO(e,s),cO(e,s);this._compiledDefinitions=e}_checkContextMatch(e,t,i=t.length-1){const s=t.getItem(i);if(e.allowIn.includes(s.name)){if(i==0)return!0;{const o=this.getDefinition(s);return this._checkContextMatch(o,t,i-1)}}else return!1}*_getValidRangesForRange(e,t){let i=e.start,s=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(S._createIn(o),t)),this.checkAttribute(o,t)||(i.isEqual(s)||(yield new S(i,s)),i=R._createAfter(o)),s=R._createAfter(o);i.isEqual(s)||(yield new S(i,s))}}class ks{constructor(e){if(e instanceof ks)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(mO)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new ks([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function tO(n,e){const t={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return uO(n,t),os(n,t,"allowIn"),os(n,t,"allowContentOf"),os(n,t,"allowWhere"),os(n,t,"allowAttributes"),os(n,t,"allowAttributesOf"),os(n,t,"allowChildren"),os(n,t,"inheritTypesFrom"),dO(n,t),t}function nO(n,e){const t=n[e];for(const i of t.allowChildren){const s=n[i];s&&s.allowIn.push(e)}t.allowChildren.length=0}function iO(n,e){for(const t of n[e].allowContentOf)n[t]&&hO(n,t).forEach(s=>{s.allowIn.push(e)});delete n[e].allowContentOf}function sO(n,e){for(const t of n[e].allowWhere){const i=n[t];if(i){const s=i.allowIn;n[e].allowIn.push(...s)}}delete n[e].allowWhere}function oO(n,e){for(const t of n[e].allowAttributesOf){const i=n[t];if(i){const s=i.allowAttributes;n[e].allowAttributes.push(...s)}}delete n[e].allowAttributesOf}function rO(n,e){const t=n[e];for(const i of t.inheritTypesFrom){const s=n[i];if(s){const o=Object.keys(s).filter(r=>r.startsWith("is"));for(const r of o)r in t||(t[r]=s[r])}}delete t.inheritTypesFrom}function aO(n,e){const t=n[e],i=t.allowIn.filter(s=>n[s]);t.allowIn=Array.from(new Set(i))}function lO(n,e){const t=n[e];for(const i of t.allowIn)n[i].allowChildren.push(e)}function cO(n,e){const t=n[e];t.allowAttributes=Array.from(new Set(t.allowAttributes))}function uO(n,e){for(const t of n){const i=Object.keys(t).filter(s=>s.startsWith("is"));for(const s of i)e[s]=!!t[s]}}function os(n,e,t){for(const i of n){const s=i[t];typeof s=="string"?e[t].push(s):Array.isArray(s)&&e[t].push(...s)}}function dO(n,e){for(const t of n){const i=t.inheritAllFrom;i&&(e.allowContentOf.push(i),e.allowWhere.push(i),e.allowAttributesOf.push(i),e.inheritTypesFrom.push(i))}}function hO(n,e){const t=n[e];return fO(n).filter(i=>i.allowIn.includes(t.name))}function fO(n){return Object.keys(n).map(e=>n[e])}function mO(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*gO(n,e){let t=!1;for(;!t;){if(t=!0,n){const i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){const i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*pO(n){for(const e of n)yield*e.getMinimalFlatRanges()}function Ub(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wO extends ue(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=vO(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=na.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(s){this._removeEmptyElements();for(const r of Array.from(this._modelCursor.parent.getChildren()))t.append(r,o);o.markers=bO(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){const i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof S))throw new y("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:R._createAt(t,0);const s=new S(i);for(const o of Array.from(e.getChildren())){const r=this._convertItem(o,i);r.modelRange instanceof S&&(s.end=r.modelRange.end,i=r.modelCursor)}return{modelRange:s,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){const i=this._getSplitParts(e),s=this.conversionApi.writer;t.modelRange||(t.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(i[i.length-1])));const o=this._cursorParents.get(e);o?t.modelCursor=s.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:s}=this.conversionApi;let o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return rx(t,e,i)?{position:ax(t,s)}:null;const r=this.conversionApi.writer.split(t,o),a=[];for(const c of r.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const u=a.pop(),d=c.item;this._registerSplitPair(u,d)}const l=r.range.end.parent;return this._cursorParents.set(e,l),{position:r.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}function bO(n,e){const t=new Set,i=new Map,s=S._createIn(n).getItems();for(const o of s)o.is("element","$marker")&&t.add(o);for(const o of t){const r=o.getAttribute("data-name"),a=e.createPositionBefore(o);i.has(r)?i.get(r).end=a.clone():i.set(r,new S(a.clone())),e.remove(o)}return i}function vO(n,e){let t;for(const i of new ks(n)){const s={};for(const r of i.getAttributeKeys())s[r]=i.getAttribute(r);const o=e.createElement(i.name,s);t&&e.insert(o,t),t=R._createAt(o,0)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _O{getHtml(e){const i=document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yO{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new Lu(e,{renderingMode:"data"}),this.htmlWriter=new _O}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);return i}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CO extends ue(){constructor(e,t){super(),this.model=e,this.mapper=new Gk,this.downcastDispatcher=new Kk({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",Yk(),{priority:"lowest"}),this.downcastDispatcher.on("insert",Xk(),{priority:"lowest"}),this.upcastDispatcher=new wO({schema:e.schema}),this.viewDocument=new Ru(t),this.stylesProcessor=t,this.htmlProcessor=new yO(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Bk(this.viewDocument),this.upcastDispatcher.on("text",zL(),{priority:"lowest"}),this.upcastDispatcher.on("element",zb(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",zb(),{priority:"lowest"}),se().prototype.decorate.call(this,"init"),se().prototype.decorate.call(this,"set"),se().prototype.decorate.call(this,"get"),se().prototype.decorate.call(this,"toView"),se().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},ox)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new y("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(t);return i==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,e)}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const o=S._createIn(e),r=new Cs(i);this.mapper.bindElements(e,r);const a=e.is("documentFragment")?e.markers:kO(e);return this.downcastDispatcher.convert(o,a,s,t),r}init(e){if(this.model.document.version)throw new y("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new y("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const s of Object.keys(t)){const o=this.model.document.getRoot(s);i.insert(this.parse(t[s],o),o,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new y("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(i)){const r=this.model.document.getRoot(o);s.remove(s.createRangeIn(r)),s.insert(this.parse(i[o],r),r,0)}})}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRootNames().includes(t))return!1;return!0}}function kO(n){const e=[],t=n.root.document;if(!t)return new Map;const i=S._createIn(n);for(const s of t.model.markers){const o=s.getRange(),r=o.isCollapsed,a=o.start.isEqual(i.start)||o.end.isEqual(i.end);if(r&&a)e.push([s.name,o]);else{const l=i.getIntersection(o);l&&e.push([s.name,l])}}return e.sort(([s,o],[r,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return r.localeCompare(s)}}}),new Map(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xO{constructor(e,t){this._helpers=new Map,this._downcast=Ze(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ze(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new y("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new y("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of Xd(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of Xd(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of Xd(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new y("conversion-group-exists",this);const s=i?new aL(t):new DL(t);this._helpers.set(e,s)}}function*Xd(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],s=n.upcastAlso?n.upcastAlso[e]:void 0;yield*$b(t,i,s)}else yield*$b(n.model,n.view,n.upcastAlso)}function*$b(n,e,t){if(yield{model:n,view:e},t)for(const i of Ze(t))yield{model:n,view:i}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cn{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jg(n,e){const t=hx(e),i=t.reduce((r,a)=>r+a.offsetSize,0),s=n.parent;La(n);const o=n.index;return s._insertChild(o,t),Va(s,o+t.length),Va(s,o),new S(n,n.getShiftedBy(i))}function dx(n){if(!n.isFlat)throw new y("operation-utils-remove-range-not-flat",this);const e=n.start.parent;La(n.start),La(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return Va(e,n.start.index),t}function Ra(n,e){if(!n.isFlat)throw new y("operation-utils-move-range-not-flat",this);const t=dx(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),jg(e,t)}function TO(n,e,t){La(n.start),La(n.end);for(const i of n.getItems({shallow:!0})){const s=i.is("$textProxy")?i.textNode:i;t!==null?s._setAttribute(e,t):s._removeAttribute(e),Va(s.parent,s.index)}Va(n.end.parent,n.end.index)}function hx(n){const e=[];function t(i){if(typeof i=="string")e.push(new ve(i));else if(i instanceof pn)e.push(new ve(i.data,i.getAttributes()));else if(i instanceof ar)e.push(i);else if(Wt(i))for(const s of i)t(s)}t(n);for(let i=1;i<e.length;i++){const s=e[i],o=e[i-1];s instanceof ve&&o instanceof ve&&fx(s,o)&&(e.splice(i-1,2,new ve(o.data+s.data,o.getAttributes())),i--)}return e}function Va(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&fx(t,i)){const s=new ve(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,s)}}function La(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const o=new ve(e.data.substr(0,i),e.getAttributes()),r=new ve(e.data.substr(i),e.getAttributes());t._insertChild(s,[o,r])}}function fx(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;i.next()}return i.next().done}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oe extends cn{constructor(e,t,i,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}clone(){return new oe(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new oe(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,s=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new y("move-operation-nodes-do-not-exist",this);if(e===t&&i<s&&s<i+this.howMany)throw new y("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&dt(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new y("move-operation-node-into-itself",this)}}_execute(){Ra(S._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=R.fromJSON(e.sourcePosition,t),s=R.fromJSON(e.targetPosition,t);return new this(i,e.howMany,s,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tt extends cn{constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ea(hx(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const e=new ea([...this.nodes].map(i=>i._clone(!0))),t=new tt(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new R(e,[0]);return new oe(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new y("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ea([...e].map(t=>t._clone(!0))),jg(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const o of e.nodes)o.name?i.push(re.fromJSON(o)):i.push(ve.fromJSON(o));const s=new tt(R.fromJSON(e.position,t),i,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class It extends cn{constructor(e,t,i,s,o,r){super(r),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=s}get type(){return"marker"}clone(){return new It(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new It(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new It(e.name,e.oldRange?S.fromJSON(e.oldRange,t):null,e.newRange?S.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class He extends cn{constructor(e,t,i,s,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}clone(){return new He(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new He(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new y("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!ab(e.getAttribute(this.key),this.oldValue))throw new y("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new y("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){ab(this.oldValue,this.newValue)||TO(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new He(S.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class et extends cn{get type(){return"noop"}clone(){return new et(this.baseVersion)}getReversed(){return new et(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pt extends cn{constructor(e,t,i,s){super(s),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}clone(){return new Pt(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Pt(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof re){if(e.name!==this.oldName)throw new y("rename-operation-wrong-name",this)}else throw new y("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new Pt(R.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oi extends cn{constructor(e,t,i,s,o){super(o),this.root=e,this.key=t,this.oldValue=i,this.newValue=s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}clone(){return new oi(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new oi(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new y("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new y("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new y("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new y("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new oi(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fe extends cn{constructor(e,t,i,s,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new R(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new S(this.sourcePosition,e)}clone(){return new Fe(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new R(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new ce(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new y("merge-operation-how-many-invalid",this)}else throw new y("merge-operation-target-position-invalid",this);else throw new y("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,t=S._createIn(e);Ra(t,this.targetPosition),Ra(S._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=R.fromJSON(e.sourcePosition,t),s=R.fromJSON(e.targetPosition,t),o=R.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,s,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ce extends cn{constructor(e,t,i,s,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new R(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new S(this.splitPosition,e)}clone(){return new ce(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new R(e,[0]);return new Fe(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new y("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new y("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new y("split-operation-graveyard-position-invalid",this)}else throw new y("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Ra(S._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();jg(this.insertionPosition,i)}const t=new S(R._createAt(e,this.splitPosition.offset),R._createAt(e,e.maxOffset));Ra(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new R(e.root,t,"toPrevious")}static fromJSON(e,t){const i=R.fromJSON(e.splitPosition,t),s=R.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?R.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,s,o,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xn={};xn[He.className]=He;xn[tt.className]=tt;xn[It.className]=It;xn[oe.className]=oe;xn[et.className]=et;xn[cn.className]=cn;xn[Pt.className]=Pt;xn[oi.className]=oi;xn[ce.className]=ce;xn[Fe.className]=Fe;class EO{static fromJSON(e,t){return xn[e.__className].fromJSON(e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jf=new Map;function ie(n,e,t){let i=Jf.get(n);i||(i=new Map,Jf.set(n,i)),i.set(e,t)}function SO(n,e){const t=Jf.get(n);return t&&t.has(e)?t.get(e):AO}function AO(n){return[n]}function Wb(n,e,t={}){const i=SO(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(s){throw s}}function IO(n,e,t){n=n.slice(),e=e.slice();const i=new PO(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const s=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:s};const o=new WeakMap;for(const l of n)o.set(l,0);const r={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const l=n[a],c=o.get(l);if(c==e.length){a++;continue}const u=e[c],d=Wb(l,u,i.getContext(l,u,!0)),h=Wb(u,l,i.getContext(u,l,!1));i.updateRelation(l,u),i.setOriginalOperations(d,l),i.setOriginalOperations(h,u);for(const f of d)o.set(f,c+h.length);n.splice(a,1,...d),e.splice(c,1,...h)}if(t.padWithNoOps){const l=n.length-r.originalOperationsACount,c=e.length-r.originalOperationsBCount;qb(n,c-l),qb(e,l-c)}return jb(n,r.nextBaseVersionB),jb(e,r.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:s}}class PO{constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,i||s)}updateRelation(e,t){if(e instanceof oe)t instanceof Fe?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof oe&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof ce){if(t instanceof Fe)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof oe)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=S._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const s=i.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:s,offset:o})}}}else if(e instanceof Fe)t instanceof Fe?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof ce&&e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource");else if(e instanceof It){const i=e.newRange;if(!i)return;if(t instanceof oe){const s=S._createFromPositionAndShift(t.sourcePosition,t.howMany),o=s.containsPosition(i.start)||s.start.isEqual(i.start),r=s.containsPosition(i.end)||s.end.isEqual(i.end);(o||r)&&!s.containsRange(i)&&this._setRelation(e,t,{side:o?"left":"right",path:o?i.start.path.slice():i.end.path.slice()})}else if(t instanceof Fe){const s=i.start.isEqual(t.targetPosition),o=i.start.isEqual(t.deletionPosition),r=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(s||o||r||a)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:r,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),s=this._history.getUndoneOperation(i);if(!s)return null;const o=this.originalOperations.get(e),r=this._relations.get(o);return r&&r.get(s)||null}_setRelation(e,t,i){const s=this.originalOperations.get(e),o=this.originalOperations.get(t);let r=this._relations.get(s);r||(r=new Map,this._relations.set(s,r)),r.set(o,i)}}function jb(n,e){for(const t of n)t.baseVersion=e++}function qb(n,e){for(let t=0;t<e;t++)n.push(new et(0))}ie(He,He,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(o=>new He(o,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(e.range);return s&&t.aIsStrong&&i.push(new He(s,e.key,e.newValue,n.newValue,0)),i.length==0?[new et(0)]:i}else return[n]});ie(He,tt,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(s=>new He(s,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const s=mx(e,n.key,n.oldValue);s&&i.unshift(s)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function mx(n,e,t){const s=n.nodes.getNode(0).getAttribute(e);if(s==t)return null;const o=new S(n.position,n.position.getShiftedBy(n.howMany));return new He(o,e,s,t,0)}ie(He,Fe,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(S._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(s=>new He(s,n.key,n.oldValue,n.newValue,n.baseVersion))});ie(He,oe,(n,e)=>RO(n.range,e).map(i=>new He(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function RO(n,e){const t=S._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,s=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(s=n.getDifference(t),i=n.getIntersection(t)):s=[n];const o=[];for(let r of s){r=r._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),l=r.start.hasSameParentAs(a),c=r._getTransformedByInsertion(a,e.howMany,l);o.push(...c)}return i&&o.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}ie(He,ce,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new S(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});ie(tt,He,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=mx(n,e.key,e.newValue);i&&t.push(i)}return t});ie(tt,tt,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));ie(tt,oe,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));ie(tt,ce,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));ie(tt,Fe,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));ie(It,tt,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));ie(It,It,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new et(0)];return[n]});ie(It,Fe,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));ie(It,oe,(n,e,t)=>{if(n.oldRange&&(n.oldRange=S._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){if(t.abRelation){const i=S._createFromRanges(n.newRange._getTransformedByMoveOperation(e));if(t.abRelation.side=="left"&&e.targetPosition.isEqual(n.newRange.start))return n.newRange.end=i.end,n.newRange.start.path=t.abRelation.path,[n];if(t.abRelation.side=="right"&&e.targetPosition.isEqual(n.newRange.end))return n.newRange.start=i.start,n.newRange.end.path=t.abRelation.path,[n]}n.newRange=S._createFromRanges(n.newRange._getTransformedByMoveOperation(e))}return[n]});ie(It,ce,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=R._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement&&(n.newRange.start=R._createAt(e.moveTargetPosition)),n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=R._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=R._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});ie(Fe,tt,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));ie(Fe,Fe,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new R(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new et(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new oe(l,n.howMany,c,0)]}else return[new et(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});ie(Fe,oe,(n,e,t)=>{const i=S._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new et(0)]:(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});ie(Fe,ce,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)){const i=e.howMany!=0,s=e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition);if(i||s||t.abRelation=="mergeTargetNotMoved")return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n]}if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});ie(oe,tt,(n,e)=>{const i=S._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});ie(oe,oe,(n,e,t)=>{const i=S._createFromPositionAndShift(n.sourcePosition,n.howMany),s=S._createFromPositionAndShift(e.sourcePosition,e.howMany);let o=t.aIsStrong,r=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?r=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(r=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&r?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Gb(n,e)&&Gb(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(s,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ro([i],a);if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Ro([i],a);const u=dt(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ro([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);const d=[],h=i.getDifference(s);for(const p of h){p.start=p.start._getTransformedByDeletion(e.sourcePosition,e.howMany),p.end=p.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const b=dt(p.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",x=p._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,b);d.push(...x)}const f=i.getIntersection(s);return f!==null&&o&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.length===0?d.push(f):d.length==1?s.start.isBefore(i.start)||s.start.isEqual(i.start)?d.unshift(f):d.push(f):d.splice(1,0,f)),d.length===0?[new et(n.baseVersion)]:Ro(d,a)});ie(oe,ce,(n,e,t)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e));const s=S._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let a=new S(e.splitPosition,s.end);a=a._getTransformedBySplitOperation(e);const l=[new S(s.start,e.splitPosition),a];return Ro(l,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const r=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&r.push(S._createFromPositionAndShift(e.insertionPosition,1))}return Ro(r,i)});ie(oe,Fe,(n,e,t)=>{const i=S._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const r=[];let a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);n.howMany>1&&(r.push(new oe(n.sourcePosition,n.howMany-1,n.targetPosition,0)),a=a._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany-1));const c=e.deletionPosition._getCombined(n.sourcePosition,n.targetPosition),u=new oe(a,1,c,0),d=u.getMovedRangeStart().path.slice();d.push(0);const h=new R(u.targetPosition.root,d);l=l._getTransformedByMove(a,c,1);const f=new oe(l,e.howMany,h,0);return r.push(u),r.push(f),r}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new et(0)]}const o=S._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=o.start,n.howMany=o.end.offset-o.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});ie(Pt,tt,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));ie(Pt,Fe,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));ie(Pt,oe,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));ie(Pt,Pt,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new et(0)];return[n]});ie(Pt,ce,(n,e)=>{const t=n.position.path,i=e.splitPosition.getParentPath();if(dt(t,i)=="same"&&!e.graveyardPosition){const s=new Pt(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,s]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});ie(oi,oi,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new et(0)];n.oldValue=e.newValue}return[n]});ie(ce,tt,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));ie(ce,Fe,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const s=new R(e.graveyardPosition.root,i),o=ce.getInsertionPosition(new R(e.graveyardPosition.root,i)),r=new ce(s,0,o,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=ce.getInsertionPosition(n.splitPosition),n.graveyardPosition=r.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[r,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=ce.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});ie(ce,oe,(n,e,t)=>{const i=S._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const o=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&o){const r=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new R(a.root,l);return[new oe(r,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const s=n.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=ce.getInsertionPosition(n.splitPosition),[n];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:o,offset:r}=t.abRelation;return n.howMany+=o,n.splitPosition=n.splitPosition.getShiftedBy(r),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const o=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=o,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=ce.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=ce.getInsertionPosition(n.splitPosition),[n]});ie(ce,ce,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new et(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new et(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const l=[];return e.howMany&&l.push(new oe(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new oe(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new et(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const s=new R(e.insertionPosition.root,i),o=new oe(n.insertionPosition,1,s,0);return[n,o]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=ce.getInsertionPosition(n.splitPosition),[n]});function Gb(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function Ro(n,e){const t=[];for(let i=0;i<n.length;i++){const s=n[i],o=new oe(s.start,s.end.offset-s.start.offset,e,0);t.push(o);for(let r=i+1;r<n.length;r++)n[r]=n[r]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class We extends ue(R){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new y("model-liveposition-root-not-rootelement",e);VO.call(this)}detach(){this.stopListening()}toPosition(){return new R(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}We.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function VO(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&LO.call(this,t)},{priority:"low"})}function LO(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ao{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Ce("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:s=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=s,this.isTyping=o}get type(){return Ce("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OO{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=S._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(i)){const o=s.getData();this.bufferMarkerChange(s.name,o,o)}break}case"split":{const i=t.splitPosition.parent;this._isInInsertedElement(i)||this._markRemove(i,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1);const o=t.targetPosition.parent;this._isInInsertedElement(o)||this._markInsert(o,t.targetPosition.offset,i.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){const s=this._changedMarkers.get(e);s?(s.newMarkerData=i,s.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{newMarkerData:i,oldMarkerData:t})}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this._changesInElement.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,s=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(i||s||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const s=this._changesInElement.get(i).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),o=this._elementSnapshots.get(i),r=Kb(i.getChildren()),a=MO(o.length,s);let l=0,c=0;for(const u of a)if(u==="i")t.push(this._getInsertDiff(i,l,r[l])),l++;else if(u==="r")t.push(this._getRemoveDiff(i,l,o[c])),c++;else if(u==="a"){const d=r[l].attributes,h=o[c].attributes;let f;if(r[l].name=="$text")f=new S(R._createAt(i,l),R._createAt(i,l+1));else{const p=i.offsetToIndex(l);f=new S(R._createAt(i,l),R._createAt(i.getChild(p),0))}t.push(...this._getAttributesDiff(f,h,d)),l++,c++}else l++,c++}t.sort((i,s)=>i.position.root!=s.position.root?i.position.root.rootName<s.position.root.rootName?-1:1:i.position.isEqual(s.position)?i.changeCount-s.changeCount:i.position.isBefore(s.position)?-1:1);for(let i=1,s=0;i<t.length;i++){const o=t[s],r=t[i],a=o.type=="remove"&&r.type=="remove"&&o.name=="$text"&&r.name=="$text"&&o.position.isEqual(r.position),l=o.type=="insert"&&r.type=="insert"&&o.name=="$text"&&r.name=="$text"&&o.position.parent==r.position.parent&&o.position.offset+o.length==r.position.offset,c=o.type=="attribute"&&r.type=="attribute"&&o.position.parent==r.position.parent&&o.range.isFlat&&r.range.isFlat&&o.position.offset+o.length==r.position.offset&&o.attributeKey==r.attributeKey&&o.attributeOldValue==r.attributeOldValue&&o.attributeNewValue==r.attributeNewValue;a||l||c?(o.length++,c&&(o.range.end=o.range.end.getShiftedBy(1)),t[i]=null):s=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(NO),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const t=S._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._cachedChanges=null}_markInsert(e,t,i){const s={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,i){const s={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Kb(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const s=e.offset+e.howMany,o=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<o&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<o){const r=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:r-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(s<=i.offset)i.offset-=e.howMany;else if(s<=o)if(e.offset<i.offset){const r=s-i.offset;i.offset=e.offset,i.howMany-=r,e.nodesToHandle-=r}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<o){const r=o-e.offset;i.howMany-=r,e.nodesToHandle-=r}}if(i.type=="remove"&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const r=s-i.offset;i.offset=e.offset,i.howMany-=r}else if(e.offset<o)if(s<=o){const r=i.howMany;i.howMany=e.offset-i.offset;const a=r-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=o-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&s>i.offset){if(s>o){const r={type:"attribute",offset:o,howMany:s-o,count:this._changeCount++};this._handleChange(r,t),t.push(r)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<o&&(s>o?(e.nodesToHandle=s-o,e.offset=o):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&s>i.offset){const r={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(r,t),t.push(r),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&s<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=o&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i){return{type:"insert",position:R._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,i){return{type:"remove",position:R._createAt(e,t),name:i.name,attributes:new Map(i.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const s=[];i=new Map(i);for(const[o,r]of t){const a=i.has(o)?i.get(o):null;a!==r&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(o)}for(const[o,r]of i)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),s=e.startOffset;if(i){for(const o of i)if(o.type=="insert"&&s>=o.offset&&s<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const s=new S(R._createAt(e,t),R._createAt(e,t+i));for(const o of s.getItems({shallow:!0}))o.is("element")&&(this._elementSnapshots.delete(o),this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}}function Kb(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;i++)e.push({name:"$text",attributes:new Map(t.getAttributes())});else e.push({name:t.name,attributes:new Map(t.getAttributes())});return e}function MO(n,e){const t=[];let i=0,s=0;for(const o of e){if(o.offset>i){for(let r=0;r<o.offset-i;r++)t.push("e");s+=o.offset-i}if(o.type=="insert"){for(let r=0;r<o.howMany;r++)t.push("i");i=o.offset+o.howMany}else if(o.type=="remove"){for(let r=0;r<o.howMany;r++)t.push("r");i=o.offset,s+=o.howMany}else t.push(..."a".repeat(o.howMany).split("")),i=o.offset+o.howMany,s+=o.howMany}if(s<n)for(let o=0;o<n-s-i;o++)t.push("e");return t}function NO(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BO{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new y("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let s=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),s>a&&s<l&&(s=a-1);if(s<i.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let r=this._baseVersionToOperationIndex.get(s);return r===void 0&&(r=this._operations.length-1),this._operations.slice(o,r+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wc extends re{constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}toJSON(){return this.rootName}}Wc.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zd="$graveyard";class FO extends ue(){constructor(e){super(),this.model=e,this.history=new BO,this.selection=new ln(this),this.roots=new xe({idProperty:"rootName"}),this.differ=new OO(e.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Zd),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,s,o,r)=>{const a={...i.getData(),range:o};this.differ.bufferMarkerChange(i.name,r,a),s===null&&i.on("change",(l,c)=>{const u=i.getData();this.differ.bufferMarkerChange(i.name,{...u,range:c},u)})})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(Zd)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new y("model-document-createroot-name-exists",this,{name:t});const i=new Wc(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,e=>e.rootName).filter(e=>e!=Zd)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=ik(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,s=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(s)||t.createRange(s)}_validateSelectionRange(e){return Qb(e.start)&&Qb(e.end)}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}}function Qb(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!Ak(t,i)&&!Ik(t,i)}return!0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DO extends ue(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof mo?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,s=!1){const o=e instanceof mo?e.name:e;if(o.includes(","))throw new y("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const c=r.getData(),u=r.getRange();let d=!1;return u.isEqual(t)||(r._attachLiveRange(an.fromRange(t)),d=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,d=!0),typeof s=="boolean"&&s!=r.affectsData&&(r._affectsData=s,d=!0),d&&this.fire(`update:${o}`,r,u,t,c),r}const a=an.fromRange(t),l=new mo(o,a,i,s);return this._markers.set(o,l),this.fire(`update:${o}`,l,null,t,{...l.getData(),range:null}),l}_remove(e){const t=e instanceof mo?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){const t=e instanceof mo?e.name:e,i=this._markers.get(t);if(!i)throw new y("markercollection-refresh-marker-not-exists",this);const s=i.getRange();this.fire(`update:${t}`,i,s,s,i.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class mo extends ue(Ji){constructor(e,t,i,s){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new y("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new y("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new y("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new y("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new y("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}mo.prototype.is=function(n){return n==="marker"||n==="model:marker"};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zO extends cn{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new y("detach-operation-on-document-node",this)}_execute(){dx(S._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ei extends Ji{constructor(e){super(),this.markers=new Map,this._children=new ea,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(re.fromJSON(i)):t.push(ve.fromJSON(i));return new ei(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=HO(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}}ei.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function HO(n){return typeof n=="string"?[new ve(n)]:(Wt(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new ve(e):e instanceof pn?new ve(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UO{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new ve(e,t)}createElement(e,t){return new re(e,t)}createDocumentFragment(){return new ei}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof ve&&e.data=="")return;const s=R._createAt(t,i);if(e.parent)if(Xb(e.root,s.root)){this.move(S._createOn(e),s);return}else{if(e.root.document)throw new y("model-writer-insert-forbidden-move",this);this.remove(e)}const o=s.root.document?s.root.document.version:null,r=new tt(s,e,o);if(e instanceof ve&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof ei)for(const[a,l]of e.markers){const c=R._createAt(l.root,0),d={range:new S(l.start._getCombined(c,s),l.end._getCombined(c,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(e,t,i,s){t instanceof ei||t instanceof re||t instanceof R?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,s)}insertElement(e,t,i,s){t instanceof ei||t instanceof re||t instanceof R?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof ei||t instanceof re?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof ei||t instanceof re?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof S){const s=i.getMinimalFlatRanges();for(const o of s)Jb(this,e,t,o)}else Yb(this,e,t,i)}setAttributes(e,t){for(const[i,s]of rn(e))this.setAttribute(i,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof S){const i=t.getMinimalFlatRanges();for(const s of i)Jb(this,e,null,s)}else Yb(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const s of i.getAttributeKeys())this.removeAttribute(s,i)};if(!(e instanceof S))t(e);else for(const i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof S))throw new y("writer-move-invalid-range",this);if(!e.isFlat)throw new y("writer-move-range-not-flat",this);const s=R._createAt(t,i);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Xb(e.root,s.root))throw new y("writer-move-different-document",this);const o=e.root.document?e.root.document.version:null,r=new oe(e.start,e.end.offset-e.start.offset,s,o);this.batch.addOperation(r),this.model.applyOperation(r)}remove(e){this._assertWriterUsedCorrectly();const i=(e instanceof S?e:S._createOn(e)).getMinimalFlatRanges().reverse();for(const s of i)this._addOperationForAffectedMarkers("move",s),$O(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof re))throw new y("writer-merge-no-element-before",this);if(!(i instanceof re))throw new y("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(S._createIn(i),R._createAt(t,"end")),this.remove(i)}_merge(e){const t=R._createAt(e.nodeBefore,"end"),i=R._createAt(e.nodeAfter,0),s=e.root.document.graveyard,o=new R(s,[0]),r=e.root.document.version,a=new Fe(i,e.nodeAfter.maxOffset,t,o,r);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof re))throw new y("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,s=new Pt(R._createBefore(e),e.name,t,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new y("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new y("writer-split-invalid-limit-element",this);let s,o;do{const r=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=ce.getInsertionPosition(e),c=new ce(e,a,l,null,r);this.batch.addOperation(c),this.model.applyOperation(c),!s&&!o&&(s=i,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new S(R._createAt(s,"end"),R._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new y("writer-wrap-range-not-flat",this);const i=t instanceof re?t:new re(t);if(i.childCount>0)throw new y("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new y("writer-wrap-element-attached",this);this.insert(i,e.start);const s=new S(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,R._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new y("writer-unwrap-element-no-parent",this);this.move(S._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new y("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,s=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new y("writer-addmarker-marker-exists",this);if(!s)throw new y("writer-addmarker-no-range",this);return i?(Ir(this,e,null,s,o),this.model.markers.get(e)):this.model.markers._set(e,s,i,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,s=this.model.markers.get(i);if(!s)throw new y("writer-updatemarker-marker-not-exists",this);if(!t){Ce("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(s);return}const o=typeof t.usingOperation=="boolean",r=typeof t.affectsData=="boolean",a=r?t.affectsData:s.affectsData;if(!o&&!t.range&&!r)throw new y("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=t.range?t.range:l;if(o&&t.usingOperation!==s.managedUsingOperations){t.usingOperation?Ir(this,i,null,c,a):(Ir(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}s.managedUsingOperations?Ir(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new y("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}const s=i.getRange();Ir(this,t,s,null,i.affectsData)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,s]of rn(e))this._setSelectionAttribute(i,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=ln._getStoreAttributeKey(e);this.setAttribute(s,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=ln._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new y("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let o=!1;if(e==="move"){const r=t;o=r.containsPosition(s.start)||r.start.isEqual(s.start)||r.containsPosition(s.end)||r.end.isEqual(s.end)}else{const r=t,a=r.nodeBefore,l=r.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,u=s.end.parent==l&&s.end.offset==0,d=s.end.nodeAfter==l,h=s.start.nodeAfter==l;o=c||u||d||h}o&&this.updateMarker(i.name,{range:s})}}}function Jb(n,e,t,i){const s=n.model,o=s.document;let r=i.start,a,l,c;for(const d of i.getWalker({shallow:!0}))c=d.item.getAttribute(e),a&&l!=c&&(l!=t&&u(),r=a),a=d.nextPosition,l=c;a instanceof R&&a!=r&&l!=t&&u();function u(){const d=new S(r,a),h=d.root.document?o.version:null,f=new He(d,e,l,t,h);n.batch.addOperation(f),s.applyOperation(f)}}function Yb(n,e,t,i){const s=n.model,o=s.document,r=i.getAttribute(e);let a,l;if(r!=t){if(i.root===i){const u=i.document?o.version:null;l=new oi(i,e,r,t,u)}else{a=new S(R._createBefore(i),n.createPositionAfter(i));const u=a.root.document?o.version:null;l=new He(a,e,r,t,u)}n.batch.addOperation(l),s.applyOperation(l)}}function Ir(n,e,t,i,s){const o=n.model,r=o.document,a=new It(e,t,i,o.markers,!!s,r.version);n.batch.addOperation(a),o.applyOperation(a)}function $O(n,e,t,i){let s;if(n.root.document){const o=i.document,r=new R(o.graveyard,[0]);s=new oe(n,e,r,o.version)}else s=new zO(n,e);t.addOperation(s),i.applyOperation(s)}function Xb(n,e){return n===e||n instanceof Wc&&e instanceof Wc}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function WO(n){n.document.registerPostFixer(e=>jO(e,n))}function jO(n,e){const t=e.document.selection,i=e.schema,s=[];let o=!1;for(const r of t.getRanges()){const a=qO(r,i);a&&!a.isEqual(r)?(s.push(a),o=!0):s.push(r)}return o&&n.setSelection(JO(s),{backward:t.isBackward}),!1}function qO(n,e){return n.isCollapsed?GO(n,e):KO(n,e)}function GO(n,e){const t=n.start,i=e.getNearestSelectionRange(t);if(!i){const o=t.getAncestors().reverse().find(r=>e.isObject(r));return o?S._createOn(o):null}if(!i.isCollapsed)return i;const s=i.start;return t.isEqual(s)?null:new S(s)}function KO(n,e){const{start:t,end:i}=n,s=e.checkChild(t,"$text"),o=e.checkChild(i,"$text"),r=e.getLimitElement(t),a=e.getLimitElement(i);if(r===a){if(s&&o)return null;if(QO(t,i,e)){const d=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),f=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),p=d?d.start:t,b=f?f.end:i;return new S(p,b)}}const l=r&&!r.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,d=l&&(!u||!e0(t.nodeAfter,e)),h=c&&(!u||!e0(i.nodeBefore,e));let f=t,p=i;return d&&(f=R._createBefore(Zb(r,e))),h&&(p=R._createAfter(Zb(a,e))),new S(f,p)}return null}function Zb(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function QO(n,e,t){const i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),s=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||s}function JO(n){const e=[...n],t=new Set;let i=1;for(;i<e.length;){const o=e[i],r=e.slice(0,i);for(const[a,l]of r.entries())if(!t.has(a)){if(o.isEqual(l))t.add(a);else if(o.isIntersecting(l)){t.add(a),t.add(i);const c=o.getJoined(l);e.push(c)}}i++}return e.filter((o,r)=>!t.has(r))}function e0(n,e){return n&&e.isSelectable(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function YO(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const s=n.schema;n.change(o=>{if(!t.doNotResetEntireContent&&rM(s,e)){oM(o,e);return}const r={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(r,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=XO(i);a.isTouching(l)||o.remove(o.createRange(a,l)),t.leaveUnmerged||(eM(o,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),o)),bx(o,e,a),!t.doNotAutoparagraph&&iM(s,a)&&wx(o,a,e,r),a.detach(),l.detach()})}function XO(n){const e=n.root.document.model,t=n.start;let i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const s=ZO(i);if(s&&i.isTouching(e.createPositionAt(s,0))){const o=e.createSelection(n);e.modifySelection(o,{direction:"backward"});const r=o.getLastPosition(),a=e.createRange(r,i);e.hasContent(a,{ignoreMarkers:!0})||(i=r)}}return[We.fromPosition(t,"toPrevious"),We.fromPosition(i,"toNext")]}function ZO(n){const e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of i){if(t.isLimit(s))return null;if(t.isBlock(s))return s}}function eM(n,e,t){const i=n.model;if(!qg(n.model.schema,e,t))return;const[s,o]=nM(e,t);!s||!o||(!i.hasContent(s,{ignoreMarkers:!0})&&i.hasContent(o,{ignoreMarkers:!0})?px(n,e,t,s.parent):gx(n,e,t,s.parent))}function gx(n,e,t,i){const s=e.parent,o=t.parent;if(!(s==i||o==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(o,e),n.merge(e);t.parent.isEmpty;){const r=t.parent;t=n.createPositionBefore(r),n.remove(r)}qg(n.model.schema,e,t)&&gx(n,e,t,i)}}function px(n,e,t,i){const s=e.parent,o=t.parent;if(!(s==i||o==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(s,t);e.parent.isEmpty;){const r=e.parent;e=n.createPositionBefore(r),n.remove(r)}t=n.createPositionBefore(o),tM(n,t),qg(n.model.schema,e,t)&&px(n,e,t,i)}}function tM(n,e){const t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function qg(n,e,t){const i=e.parent,s=t.parent;return i==s||n.isLimit(i)||n.isLimit(s)?!1:sM(e,t,n)}function nM(n,e){const t=n.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]&&t[s]==i[s];)s++;return[t[s],i[s]]}function iM(n,e){const t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function sM(n,e,t){const i=new S(n,e);for(const s of i.getWalker())if(t.isLimit(s.item))return!1;return!0}function wx(n,e,t,i={}){const s=n.createElement("paragraph");n.model.schema.setAllowedAttributes(s,i,n),n.insert(s,e),bx(n,t,n.createPositionAt(s,0))}function oM(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),wx(n,n.createPositionAt(t,0),e)}function rM(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function bx(n,e,t){e instanceof ln?n.setSelection(t):e.setTo(t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function aM(n,e){return n.change(t=>{const i=t.createDocumentFragment(),s=e.getFirstRange();if(!s||s.isCollapsed)return i;const o=s.start.root,r=s.start.getCommonPath(s.end),a=o.getNodeByPath(r);let l;s.start.parent==s.end.parent?l=s:l=t.createRange(t.createPositionAt(a,s.start.path[r.length]),t.createPositionAt(a,s.end.path[r.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?t.appendText(u.data,u.getAttributes(),i):t.append(t.cloneElement(u,!0),i);if(l!=s){const u=s._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],d=t.createRange(t.createPositionAt(i,0),u.start),h=t.createRange(u.end,t.createPositionAt(i,"end"));t0(h,t),t0(d,t)}return i})}function t0(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let s=i;for(;s.parent&&s.isEmpty;){const o=e.createRangeOn(s);s=s.parent,e.remove(o)}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lM(n,e,t,i){return n.change(s=>{let o;t?t instanceof Hn||t instanceof ln?o=t:o=s.createSelection(t,i):o=n.document.selection,o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});const r=new cM(n,s,o.anchor),a=[];let l;if(e.is("documentFragment")){if(e.markers.size){const d=[];for(const[h,f]of e.markers){const{start:p,end:b}=f,x=p.isEqual(b);d.push({position:p,name:h,isCollapsed:x},{position:b,name:h,isCollapsed:x})}d.sort(({position:h},{position:f})=>h.isBefore(f)?1:-1);for(const{position:h,name:f,isCollapsed:p}of d){let b=null,x=null;const v=h.parent===e&&h.isAtStart,w=h.parent===e&&h.isAtEnd;!v&&!w?(b=s.createElement("$marker"),s.insert(b,h)):p&&(x=v?"start":"end"),a.push({name:f,element:b,collapsed:x})}}l=e.getChildren()}else l=[e];r.handleNodes(l);let c=r.getSelectionRange();if(e.is("documentFragment")&&a.length){const d=c?an.fromRange(c):null,h={};for(let f=a.length-1;f>=0;f--){const{name:p,element:b,collapsed:x}=a[f],v=!h[p];if(v&&(h[p]=[]),b){const w=s.createPositionAt(b,"before");h[p].push(w),s.remove(b)}else{const w=r.getAffectedRange();if(!w){x&&h[p].push(r.position);continue}x?h[p].push(w[x]):h[p].push(v?w.start:w.end)}}for(const[f,[p,b]]of Object.entries(h))p&&b&&p.root===b.root&&s.addMarker(f,{usingOperation:!0,affectsData:!0,range:new S(p,b)});d&&(c=d.toRange(),d.detach())}c&&(o instanceof ln?s.setSelection(c):o.setTo(c));const u=r.getAffectedRange()||n.createRange(o.anchor);return r.destroy(),u})}class cM{constructor(e,t,i){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new y("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?S._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new S(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let t=this._checkAndAutoParagraphToAllowedPosition(e);if(!t&&(t=this._checkAndSplitToAllowedPosition(e),!t)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=We.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new y("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=We.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=We.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof re)||!this._canMergeLeft(e))return;const t=We._createBefore(e);t.stickiness="toNext";const i=We.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=We._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=We._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof re)||!this._canMergeRight(e))return;const t=We._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new y("insertcontent-invalid-insertion-position",this);this.position=R._createAt(t.nodeBefore,"end");const i=We.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=We._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=We._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof re&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof re&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vx(n,e,t="auto"){const i=n.getSelectedElement();if(i&&e.schema.isObject(i)&&!e.schema.isInline(i))return t=="before"||t=="after"?e.createRange(e.createPositionAt(i,t)):e.createRangeOn(i);const s=de(n.getSelectedBlocks());if(!s)return e.createRange(n.focus);if(s.isEmpty)return e.createRange(e.createPositionAt(s,0));const o=e.createPositionAfter(s);return n.focus.isTouching(o)?e.createRange(o):e.createRange(e.createPositionBefore(s))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function uM(n,e,t,i,s={}){if(!n.schema.isObject(e))throw new y("insertobject-element-not-an-object",n,{object:e});let o;t?t instanceof Hn||t instanceof ln?o=t:o=n.createSelection(t,i):o=n.document.selection;let r=o;s.findOptimalPosition&&n.schema.isBlock(e)&&(r=n.createSelection(vx(o,n,s.findOptimalPosition)));const a=de(o.getSelectedBlocks()),l={};return a&&Object.assign(l,n.schema.getAttributesWithProperty(a,"copyOnReplace",!0)),n.change(c=>{r.isCollapsed||n.deleteContent(r,{doNotAutoparagraph:!0});let u=e;const d=r.anchor.parent;!n.schema.checkChild(d,e)&&n.schema.checkChild(d,"paragraph")&&n.schema.checkChild("paragraph",e)&&(u=c.createElement("paragraph"),c.insert(e,u)),n.schema.setAllowedAttributes(u,l,c);const h=n.insertContent(u,r);return h.isCollapsed||s.setSelection&&dM(c,e,s.setSelection,l),h})}function dM(n,e,t,i){const s=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new y("insertobject-invalid-place-parameter-value",s);let o=e.nextSibling;if(s.schema.isInline(e)){n.setSelection(e,"after");return}!(o&&s.schema.checkChild(o,"$text"))&&s.schema.checkChild(e.parent,"paragraph")&&(o=n.createElement("paragraph"),s.schema.setAllowedAttributes(o,i,n),s.insertContent(o,n.createPositionAfter(e))),o&&n.setSelection(o,0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hM=' ,.?!:;"-()';function fM(n,e,t={}){const i=n.schema,s=t.direction!="backward",o=t.unit?t.unit:"character",r=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Nn({boundaries:wM(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),c={walker:l,schema:i,isForward:s,unit:o,treatEmojiAsSingleUnit:r};let u;for(;u=l.next();){if(u.done)return;const d=mM(c,u.value);if(d){e instanceof ln?n.change(h=>{h.setSelectionFocus(d)}):e.setFocus(d);return}}}function mM(n,e){const{isForward:t,walker:i,unit:s,schema:o,treatEmojiAsSingleUnit:r}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?pM(i,t):gM(i,s,r);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(l))return R._createAt(l,t?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(l)){i.skip(()=>!0);return}if(o.checkChild(c,"$text"))return c}}function gM(n,e,t){const i=n.position.textNode;if(i){const s=i.data;let o=n.position.offset-i.startOffset;for(;Ak(s,o)||e=="character"&&Ik(s,o)||t&&JV(s,o);)n.next(),o=n.position.offset-i.startOffset}return n.position}function pM(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const i=n.position.offset-t.startOffset;if(vM(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(bM(t.data,i,e))break;n.next()}}return n.position}function wM(n,e){const t=n.root,i=R._createAt(t,e?"end":0);return e?new S(n,i):new S(i,n)}function bM(n,e,t){const i=e+(t?0:-1);return hM.includes(n.charAt(i))}function vM(n,e,t){return e===(t?n.offsetSize:0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let _M=class extends se(){constructor(){super(),this.markers=new DO,this.document=new FO(this),this.schema=new eO,this._pendingChanges=[],this._currentWriter=null,["insertContent","insertObject","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if(t.name==="$marker")return!0}),WO(this),this.document.registerPostFixer(ox)}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new ao,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){y.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new ao):e instanceof ao||(e=new ao(e)):e=new ao,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){y.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i){return lM(this,e,t,i)}insertObject(e,t,i,s){return uM(this,e,t,i,s)}deleteContent(e,t){YO(this,e,t)}modifySelection(e,t){fM(this,e,t)}getSelectedContent(e){return aM(this,e)}hasContent(e,t={}){const i=e instanceof S?e:S._createIn(e);if(i.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:o=!1}=t;if(!o){for(const r of this.markers.getMarkersIntersectingRange(i))if(r.affectsData)return!0}for(const r of i.getItems())if(this.schema.isContent(r))if(r.is("$textProxy"))if(s){if(r.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}createPositionFromPath(e,t,i){return new R(e,t,i)}createPositionAt(e,t){return R._createAt(e,t)}createPositionAfter(e){return R._createAfter(e)}createPositionBefore(e){return R._createBefore(e)}createRange(e,t){return new S(e,t)}createRangeIn(e){return S._createIn(e)}createRangeOn(e){return S._createOn(e)}createSelection(...e){return new Hn(...e)}createBatch(e){return new ao(e)}createOperationFromJSON(e){return EO.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new UO(this,t);const i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yM extends Qi{constructor(e){super(e),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ou extends Qi{constructor(e){super(e),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $s{constructor(e){this.document=e}createDocumentFragment(e){return new Cs(this.document,e)}createElement(e,t,i){return new yn(this.document,e,t,i)}createText(e){return new ye(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const s=i.getChildIndex(e);return this.removeChildren(s,1,i),this.insertChild(s,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new yn(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){xt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return O._createAt(e,t)}createPositionAfter(e){return O._createAfter(e)}createPositionBefore(e){return O._createBefore(e)}createRange(e,t){return new Y(e,t)}createRangeOn(e){return Y._createOn(e)}createRangeIn(e){return Y._createIn(e)}createSelection(...e){return new Wi(...e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const CM=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,kM=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,xM=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,TM=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,EM=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,SM=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function _x(n){return n.startsWith("#")?CM.test(n):n.startsWith("rgb")?kM.test(n)||xM.test(n):n.startsWith("hsl")?TM.test(n)||EM.test(n):SM.has(n.toLowerCase())}const AM=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function IM(n){return AM.includes(n)}const PM=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Mu(n){return PM.test(n)}const RM=/^[+-]?[0-9]*([.][0-9]+)?%$/;function yx(n){return RM.test(n)}const VM=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function LM(n){return VM.includes(n)}const OM=["center","top","bottom","left","right"];function MM(n){return OM.includes(n)}const NM=["fixed","scroll","local"];function BM(n){return NM.includes(n)}const FM=/^url\(/;function DM(n){return FM.test(n)}function ia(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=Gg(n),t=e[0],i=e[2]||t,s=e[1]||t,o=e[3]||s;return{top:t,bottom:i,right:s,left:o}}function sa(n){return e=>{const{top:t,right:i,bottom:s,left:o}=e,r=[];return[t,i,o,s].every(a=>!!a)?r.push([n,zM(e)]):(t&&r.push([n+"-top",t]),i&&r.push([n+"-right",i]),s&&r.push([n+"-bottom",s]),o&&r.push([n+"-left",o])),r}}function zM({top:n,right:e,bottom:t,left:i}){const s=[];return i!==e?s.push(n,e,t,i):t!==n?s.push(n,e,t):e!==n?s.push(n,e):s.push(n),s.join(" ")}function Cx(n){return e=>({path:n,value:ia(e)})}function Gg(n){return n.replace(/, /g,",").split(" ").map(e=>e.replace(/,/g,", "))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kg(n){n.setNormalizer("background",HM()),n.setNormalizer("background-color",UM()),n.setReducer("background",$M()),n.setStyleRelation("background",["background-color"])}function HM(){return n=>{const e={},t=Gg(n);for(const i of t)LM(i)?(e.repeat=e.repeat||[],e.repeat.push(i)):MM(i)?(e.position=e.position||[],e.position.push(i)):BM(i)?e.attachment=i:_x(i)?e.color=i:DM(i)&&(e.image=i);return{path:"background",value:e}}}function UM(){return n=>({path:"background.color",value:n})}function $M(){return n=>{const e=[];return e.push(["background-color",n.color]),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kx(n){n.setNormalizer("border",WM()),n.setNormalizer("border-top",Il("top")),n.setNormalizer("border-right",Il("right")),n.setNormalizer("border-bottom",Il("bottom")),n.setNormalizer("border-left",Il("left")),n.setNormalizer("border-color",eh("color")),n.setNormalizer("border-width",eh("width")),n.setNormalizer("border-style",eh("style")),n.setNormalizer("border-top-color",Kt("color","top")),n.setNormalizer("border-top-style",Kt("style","top")),n.setNormalizer("border-top-width",Kt("width","top")),n.setNormalizer("border-right-color",Kt("color","right")),n.setNormalizer("border-right-style",Kt("style","right")),n.setNormalizer("border-right-width",Kt("width","right")),n.setNormalizer("border-bottom-color",Kt("color","bottom")),n.setNormalizer("border-bottom-style",Kt("style","bottom")),n.setNormalizer("border-bottom-width",Kt("width","bottom")),n.setNormalizer("border-left-color",Kt("color","left")),n.setNormalizer("border-left-style",Kt("style","left")),n.setNormalizer("border-left-width",Kt("width","left")),n.setExtractor("border-top",Pl("top")),n.setExtractor("border-right",Pl("right")),n.setExtractor("border-bottom",Pl("bottom")),n.setExtractor("border-left",Pl("left")),n.setExtractor("border-top-color","border.color.top"),n.setExtractor("border-right-color","border.color.right"),n.setExtractor("border-bottom-color","border.color.bottom"),n.setExtractor("border-left-color","border.color.left"),n.setExtractor("border-top-width","border.width.top"),n.setExtractor("border-right-width","border.width.right"),n.setExtractor("border-bottom-width","border.width.bottom"),n.setExtractor("border-left-width","border.width.left"),n.setExtractor("border-top-style","border.style.top"),n.setExtractor("border-right-style","border.style.right"),n.setExtractor("border-bottom-style","border.style.bottom"),n.setExtractor("border-left-style","border.style.left"),n.setReducer("border-color",sa("border-color")),n.setReducer("border-style",sa("border-style")),n.setReducer("border-width",sa("border-width")),n.setReducer("border-top",Rl("top")),n.setReducer("border-right",Rl("right")),n.setReducer("border-bottom",Rl("bottom")),n.setReducer("border-left",Rl("left")),n.setReducer("border",qM()),n.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),n.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),n.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),n.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),n.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),n.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function WM(){return n=>{const{color:e,style:t,width:i}=xx(n);return{path:"border",value:{color:ia(e),style:ia(t),width:ia(i)}}}}function Il(n){return e=>{const{color:t,style:i,width:s}=xx(e),o={};return t!==void 0&&(o.color={[n]:t}),i!==void 0&&(o.style={[n]:i}),s!==void 0&&(o.width={[n]:s}),{path:"border",value:o}}}function eh(n){return e=>({path:"border",value:jM(e,n)})}function jM(n,e){return{[e]:ia(n)}}function Kt(n,e){return t=>({path:"border",value:{[n]:{[e]:t}}})}function Pl(n){return(e,t)=>{if(t.border)return Hr(t.border,n)}}function Hr(n,e){const t={};return n.width&&n.width[e]&&(t.width=n.width[e]),n.style&&n.style[e]&&(t.style=n.style[e]),n.color&&n.color[e]&&(t.color=n.color[e]),t}function xx(n){const e={},t=Gg(n);for(const i of t)Mu(i)||/thin|medium|thick/.test(i)?e.width=i:IM(i)?e.style=i:e.color=i;return e}function qM(){return e=>{const t=Hr(e,"top"),i=Hr(e,"right"),s=Hr(e,"bottom"),o=Hr(e,"left"),r=[t,i,s,o],a={width:n(r,"width"),style:n(r,"style"),color:n(r,"color")},l=go(a,"all");return l.length?l:[...Object.entries(a).reduce((u,[d,h])=>(h&&(u.push([`border-${d}`,h]),r.forEach(f=>delete f[d])),u),[]),...go(t,"top"),...go(i,"right"),...go(s,"bottom"),...go(o,"left")]};function n(e,t){return e.map(i=>i[t]).reduce((i,s)=>i==s?i:null)}}function Rl(n){return e=>go(e,n)}function go(n,e){const t=[];if(n&&n.width&&t.push("width"),n&&n.style&&t.push("style"),n&&n.color&&t.push("color"),t.length==3){const i=t.map(s=>n[s]).join(" ");return[e=="all"?["border",i]:[`border-${e}`,i]]}return e=="all"?[]:t.map(i=>[`border-${e}-${i}`,n[i]])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function GM(n){n.setNormalizer("margin",Cx("margin")),n.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),n.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),n.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),n.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),n.setReducer("margin",sa("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function KM(n){n.setNormalizer("padding",Cx("padding")),n.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),n.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),n.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),n.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),n.setReducer("padding",sa("padding")),n.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QM{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new y("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JM extends Ue{constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){const s=t;t=(o,r)=>{this.editor.execute(s),r()}}super.set(e,t,i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let YM=class extends se(){constructor(e={}){super();const t=this.constructor,i=e.language||t.defaultConfig&&t.defaultConfig.language;this._context=e.context||new XV({language:i}),this._context._addEditor(this,!e.context);const s=Array.from(t.builtinPlugins||[]);this.config=new fk(e,t.defaultConfig),this.config.define("plugins",s),this.config.define(this._context._getEditorConfig()),this.plugins=new Pk(this,s,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new QM,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new _M;const o=new d7;this.data=new CO(this.model,o),this.editing=new XL(this.model,o),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new xO([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new JM(this),this.keystrokes.listenTo(this.editing.view.document)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new y("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new y("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new y("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),i,o)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(i){y.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function XM(n){if(!Ls(n.updateSourceElement))throw new y("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(ZM(e)&&e.form){let t;const i=e.form,s=()=>n.updateSourceElement();Ls(i.submit)&&(t=i.submit,i.submit=()=>{s(),t.apply(i)}),i.addEventListener("submit",s),n.on("destroy",()=>{i.removeEventListener("submit",s),t&&(i.submit=t)})}}function ZM(n){return!!n&&n.tagName.toLowerCase()==="textarea"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nc(n){class e extends n{setData(i){this.data.set(i)}getData(i){return this.data.get(i)}}return e}{const n=nc(Object);nc.setData=n.prototype.setData,nc.getData=n.prototype.getData}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yf(n){class e extends n{updateSourceElement(i=this.data.get()){if(!this.sourceElement)throw new y("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!o){hb(this.sourceElement,"");return}hb(this.sourceElement,i)}}return e}Yf.updateSourceElement=Yf(Object).prototype.updateSourceElement;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jc extends Iu{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new xe({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new y("pendingactions-add-invalid-message",this);const t=new(se());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const eN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',tN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',nN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',iN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',sN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',oN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',rN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',aN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',lN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',cN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',uN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',dN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',hN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',fN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',mN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',gN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',pN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',wN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',bN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',vN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',_N='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',yN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',CN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',kN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',xN='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',TN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',EN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',SN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',AN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',IN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',PN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',RN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',VN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path clip-rule="evenodd" d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>',LN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path clip-rule="evenodd" d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const H={bold:IN,cancel:eN,caption:tN,check:nN,cog:iN,eraser:sN,image:rN,lowVision:oN,importExport:LN,paragraph:PN,plus:RN,text:VN,alignBottom:aN,alignMiddle:lN,alignTop:cN,alignLeft:uN,alignCenter:dN,alignRight:hN,alignJustify:fN,objectLeft:vN,objectCenter:gN,objectRight:_N,objectFullWidth:wN,objectInline:bN,objectBlockLeft:mN,objectBlockRight:pN,objectSizeFull:yN,objectSizeLarge:CN,objectSizeSmall:kN,objectSizeMedium:xN,pencil:TN,pilcrow:EN,quote:SN,threeVerticalDots:AN};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qg=["left","right","center","justify"];function Tx(n){return Qg.includes(n)}function Ex(n,e){return e.contentLanguageDirection=="rtl"?n==="right":n==="left"}function Sx(n){const e=n.map(i=>{let s;return typeof i=="string"?s={name:i}:s=i,s}).filter(i=>{const s=Qg.includes(i.name);return s||Ce("alignment-config-name-not-recognized",{option:i}),s}),t=e.filter(i=>Boolean(i.className)).length;if(t&&t<e.length)throw new y("alignment-config-classnames-are-missing",{configuredOptions:n});return e.forEach((i,s,o)=>{const r=o.slice(s+1);if(r.some(l=>l.name==i.name))throw new y("alignment-config-name-already-defined",{option:i,configuredOptions:n});if(i.className&&r.some(c=>c.className==i.className))throw new y("alignment-config-classname-already-defined",{option:i,configuredOptions:n})}),e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Jg="alignment";class ON extends F{refresh(){const t=this.editor.locale,i=de(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=Boolean(i)&&this._canBeAligned(i),this.isEnabled&&i.hasAttribute("alignment")?this.value=i.getAttribute("alignment"):this.value=t.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const t=this.editor,i=t.locale,s=t.model,o=s.document,r=e.value;s.change(a=>{const l=Array.from(o.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");Ex(r,i)||c===r||!r?MN(l,a):NN(l,a,r)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,Jg)}}function MN(n,e){for(const t of n)e.removeAttribute(Jg,t)}function NN(n,e,t){for(const i of n)e.setAttribute(Jg,t,i)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BN extends k{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:Qg.map(t=>({name:t}))})}init(){const e=this.editor,t=e.locale,i=e.model.schema,o=Sx(e.config.get("alignment.options")).filter(c=>Tx(c.name)&&!Ex(c.name,t)),r=o.some(c=>!!c.className);i.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),r?e.conversion.attributeToAttribute(HN(o)):e.conversion.for("downcast").attributeToAttribute(FN(o));const a=DN(o);for(const c of a)e.conversion.for("upcast").attributeToAttribute(c);const l=zN(o);for(const c of l)e.conversion.for("upcast").attributeToAttribute(c);e.commands.add("alignment",new ON(e))}}function FN(n){const e={};for(const{name:i}of n)e[i]={key:"style",value:{"text-align":i}};return{model:{key:"alignment",values:n.map(i=>i.name)},view:e}}function DN(n){const e=[];for(const{name:t}of n)e.push({view:{key:"style",value:{"text-align":t}},model:{key:"alignment",value:t}});return e}function zN(n){const e=[];for(const{name:t}of n)e.push({view:{key:"align",value:t},model:{key:"alignment",value:t}});return e}function HN(n){const e={};for(const i of n)e[i.name]={key:"class",value:i.className};return{model:{key:"alignment",values:n.map(i=>i.name)},view:e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lr({emitter:n,activator:e,callback:t,contextElements:i}){n.listenTo(document,"mousedown",(s,o)=>{if(!e())return;const r=typeof o.composedPath=="function"?o.composedPath():[],a=typeof i=="function"?i():i;for(const l of a)if(l.contains(o.target)||r.includes(l))return;t()})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Nu(n){const e=n;e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=()=>{e._isCssTransitionsDisabled=!0},e.enableCssTransitions=()=>{e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ws({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Bu({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:s}){const o=typeof i=="number"?()=>i:i;n.set("arrowright",r((c,u)=>s==="rtl"?l(c,u.length):a(c,u.length))),n.set("arrowleft",r((c,u)=>s==="rtl"?a(c,u.length):l(c,u.length))),n.set("arrowup",r((c,u)=>{let d=c-o();return d<0&&(d=c+o()*Math.floor(u.length/o()),d>u.length-1&&(d-=o())),d})),n.set("arrowdown",r((c,u)=>{let d=c+o();return d>u.length-1&&(d=c%o()),d}));function r(c){return u=>{const d=t.find(p=>p.element===e.focusedElement),h=t.getIndex(d),f=c(h,t);t.get(f).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yt extends xe{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,s)=>{this._renderViewIntoCollectionParent(i,s)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!UN(e))throw new y("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const i of this)for(const s of e)i.delegate(s).to(t);this.on("add",(i,s)=>{for(const o of e)s.delegate(o).to(t)}),this.on("remove",(i,s)=>{for(const o of e)s.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}function UN(n){return n.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B extends gi(se()){constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new xe,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=bt.bind(this,this)}createCollection(e){const t=new yt(e);return this._viewCollections.add(t),t}registerChild(e){Wt(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){Wt(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new bt(e)}extendTemplate(e){bt.extend(this.template,e)}render(){if(this.isRendered)throw new y("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $N="http://www.w3.org/1999/xhtml";class bt extends ue(){constructor(e){super(),Object.assign(this,i0(n0(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=r0(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new y("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const i of t.children)qc(i)?yield i:Yg(i)&&(yield*e(i))}yield*e(this)}static bind(e,t){return{to(i,s){return new WN({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:s})},if(i,s,o){return new Ax({observable:e,emitter:t,attribute:i,valueIfTrue:s,callback:o})}}}static extend(e,t){if(e._isRendered)throw new y("template-extend-render",[this,e]);Vx(e,i0(n0(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new y("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||$N,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),ic(this.text)?this._bindToObservable({schema:this.text,updater:qN(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,i=e.revertData;for(const s in this.attributes){const o=t.getAttribute(s),r=this.attributes[s];i&&(i.attributes[s]=o);const a=o0(r)?r[0].ns:null;if(ic(r)){const l=o0(r)?r[0].value:r;i&&a0(s)&&l.unshift(o),this._bindToObservable({schema:l,updater:GN(t,s,a),data:e})}else if(s=="style"&&typeof r[0]!="string")this._renderStyleAttribute(r[0],e);else{i&&o&&a0(s)&&r.unshift(o);const l=r.map(c=>c&&(c.value||c)).reduce((c,u)=>c.concat(u),[]).reduce(Rx,"");Ko(l)||t.setAttributeNS(a,s,l)}}}_renderStyleAttribute(e,t){const i=t.node;for(const s in e){const o=e[s];ic(o)?this._bindToObservable({schema:[o],updater:KN(i,s),data:t}):i.style[s]=o}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,s=e.isApplying;let o=0;for(const r of this.children)if(Xg(r)){if(!s){r.setParent(t);for(const a of r)i.appendChild(a.element)}}else if(qc(r))s||(r.isRendered||r.render(),i.appendChild(r.element));else if(Ui(r))i.appendChild(r);else if(s){const a=e.revertData,l=r0();a.children.push(l),r._renderNode({intoFragment:!1,node:i.childNodes[o++],isApplying:!0,revertData:l})}else i.appendChild(r.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const i=this.eventListeners[t].map(s=>{const[o,r]=t.split("@");return s.activateDomEventListener(o,r,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){const s=i.revertData;Ix(e,t,i);const o=e.filter(r=>!Ko(r)).filter(r=>r.observable).map(r=>r.activateAttributeListener(e,t,i));s&&s.bindings.push(o)}_revertTemplateFromNode(e,t){for(const s of t.bindings)for(const o of s)o();if(t.text){e.textContent=t.text;return}const i=e;for(const s in t.attributes){const o=t.attributes[s];o===null?i.removeAttribute(s):i.setAttribute(s,o)}for(let s=0;s<t.children.length;++s)this._revertTemplateFromNode(i.childNodes[s],t.children[s])}}class Wa{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const s=()=>Ix(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class WN extends Wa{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){const s=(o,r)=>{(!t||r.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(r):this.observable.fire(this.eventNameOrFunction,r))};return this.emitter.listenTo(i.node,e,s),()=>{this.emitter.stopListening(i.node,e,s)}}}class Ax extends Wa{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return Ko(t)?!1:this.valueIfTrue||!0}}function ic(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(ic):n instanceof Wa):!1}function jN(n,e){return n.map(t=>t instanceof Wa?t.getValue(e):t)}function Ix(n,e,{node:t}){const i=jN(n,t);let s;n.length==1&&n[0]instanceof Ax?s=i[0]:s=i.reduce(Rx,""),Ko(s)?e.remove():e.set(s)}function qN(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function GN(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function KN(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function n0(n){return sk(n,t=>{if(t&&(t instanceof Wa||Yg(t)||qc(t)||Xg(t)))return t})}function i0(n){if(typeof n=="string"?n=YN(n):n.text&&XN(n),n.on&&(n.eventListeners=JN(n.on),delete n.on),!n.text){n.attributes&&QN(n.attributes);const e=[];if(n.children)if(Xg(n.children))e.push(n.children);else for(const t of n.children)Yg(t)||qc(t)||Ui(t)?e.push(t):e.push(new bt(t));n.children=e}return n}function QN(n){for(const e in n)n[e].value&&(n[e].value=Ze(n[e].value)),Px(n,e)}function JN(n){for(const e in n)Px(n,e);return n}function YN(n){return{text:[n]}}function XN(n){n.text=Ze(n.text)}function Px(n,e){n[e]=Ze(n[e])}function Rx(n,e){return Ko(e)?n:Ko(n)?e:`${n} ${e}`}function s0(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function Vx(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),s0(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),s0(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new y("ui-template-extend-children-mismatch",n);let t=0;for(const i of e.children)Vx(n.children[t++],i)}}function Ko(n){return!n&&n!==0}function qc(n){return n instanceof B}function Yg(n){return n instanceof bt}function Xg(n){return n instanceof yt}function o0(n){return ke(n[0])&&n[0].ns}function r0(){return{children:[],bindings:[],attributes:{}}}function a0(n){return n=="class"||n=="style"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZN extends yt{constructor(e,t=[]){super(t),this.locale=e}attachToDom(){this._bodyCollectionContainer=new bt({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=On(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class js extends B{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon","ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),i=t.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:s,value:o}of Array.from(t.attributes))js.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,o);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}js.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z extends B{constructor(e){super(e);const t=this.bindTemplate,i=sn();this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._createLabelView(i),this.iconView=new js,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const s={tag:"button",attributes:{class:["ck","ck-button",t.to("class"),t.if("isEnabled","ck-disabled",o=>!o),t.if("isVisible","ck-hidden",o=>!o),t.to("isOn",o=>o?"ck-on":"ck-off"),t.if("withText","ck-button_with-text"),t.if("withKeystroke","ck-button_with-keystroke")],type:t.to("type",o=>o||"button"),tabindex:t.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${i}`,"aria-disabled":t.if("isEnabled",!0,o=>!o),"aria-pressed":t.to("isOn",o=>this.isToggleable?String(!!o):!1),"data-cke-tooltip-text":t.to("_tooltipString"),"data-cke-tooltip-position":t.to("tooltipPosition")},children:this.children,on:{click:t.to(o=>{this.isEnabled?this.fire("execute"):o.preventDefault()})}};Z.isSafari&&(s.on.mousedown=t.to(o=>{this.focus(),o.preventDefault()})),this.setTemplate(s)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createLabelView(e){const t=new B,i=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:i.to("labelStyle"),id:`ck-editor__aria-label_${e}`},children:[{text:this.bindTemplate.to("label")}]}),t}_createKeystrokeView(){const e=new B;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>pb(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=pb(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ja extends z{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new B;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Oa(n,e){const t=n.t,i={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(s=>{const o=i[s.label];return o&&o!=s.label&&(s.label=o),s})}function Ma(n){return n.map(eB).filter(e=>!!e)}function eB(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder===void 0?!1:n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}const tB='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lx extends z{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=tB,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xf extends B{constructor(e,t){super(e);const i=t&&t.colorDefinitions||[];this.columns=t&&t.columns?t.columns:5;const s={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new Le,this.keystrokes=new Ue,this.items.on("add",(o,r)=>{r.isOn=r.color===this.selectedColor}),i.forEach(o=>{const r=new Lx;r.set({color:o.color,label:o.label,tooltip:!0,hasBorder:o.options.hasBorder}),r.on("execute",()=>{this.fire("execute",{value:o.color,hasBorder:o.options.hasBorder,label:o.label})}),this.items.add(r)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",(o,r,a)=>{for(const l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),Bu({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nB{constructor(e){this.editor=e,this._components=new Map}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(th(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new y("componentfactory-item-missing",this,{name:e});return this._components.get(th(e)).callback(this.editor.locale)}has(e){return this._components.has(th(e))}}function th(n){return String(n).toLowerCase()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qo extends B{constructor(e,t,i){super(e);const s=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.keystrokes=new Ue,this.focusTracker=new Le,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(t,i,s)=>{s&&(this.panelPosition==="auto"?this.panelView.position=Qo._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)}),this.keystrokes.listenTo(this.element);const e=(t,i)=>{this.isOpen&&(this.isOpen=!1,i())};this.keystrokes.set("arrowdown",(t,i)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,i())}),this.keystrokes.set("arrowright",(t,i)=>{this.isOpen&&i()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:i,southWest:s,northEast:o,northWest:r,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:u}=Qo.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[i,s,a,l,e,o,r,c,u,t]:[s,i,l,a,e,r,o,u,c,t]}}Qo.defaultPanelPositions={south:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/2,name:"s"}),southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),southMiddleEast:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)/4,name:"sme"}),southMiddleWest:(n,e)=>({top:n.bottom,left:n.left-(e.width-n.width)*3/4,name:"smw"}),north:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/2,name:"n"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),northMiddleEast:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)/4,name:"nme"}),northMiddleWest:(n,e)=>({top:n.top-e.height,left:n.left-(e.width-n.width)*3/4,name:"nmw"})};Qo._getOptimalPosition=yk;const Zg='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ox extends z{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new js;return e.content=Zg,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qs extends B{constructor(e){super(e);const t=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new Ue,this.focusTracker=new Le,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",t.to("class"),t.if("isVisible","ck-hidden",i=>!i),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(){const e=new z;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const e=new z,t=e.bindTemplate;return e.icon=Zg,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iB extends B{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:t.to(i=>i.preventDefault())}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Ce("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rt{constructor(e){if(this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(const s of i)e.keystrokeHandler.set(s,(o,r)=>{this[t](),r()})}}get first(){return this.focusables.find(nh)||null}get last(){return this.focusables.filter(nh).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{const s=t.element===this.focusTracker.focusedElement;return s&&(e=i),s}),e)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(e){const t=this.current,i=this.focusables.length;if(!i)return null;if(t===null)return this[e===1?"first":"last"];let s=(t+i+e)%i;do{const o=this.focusables.get(s);if(nh(o))return o;s=(s+i+e)%i}while(s!==t);return null}}function nh(n){return!!(n.focus&&$i(n.element))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ep extends B{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sB extends B{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oB(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Mx(n){return Array.isArray(n)?{items:n,removeItems:[]}:n?Object.assign({items:[],removeItems:[]},n):{items:[],removeItems:[]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{threeVerticalDots:Nx}=H,rB={alignLeft:H.alignLeft,bold:H.bold,importExport:H.importExport,paragraph:H.paragraph,plus:H.plus,text:H.text,threeVerticalDots:H.threeVerticalDots};class Jo extends B{constructor(e,t){super(e);const i=this.bindTemplate,s=this.t;this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Le,this.keystrokes=new Ue,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new aB(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=e.uiLanguageDirection==="rtl";this._focusCycler=new Rt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:this.children,on:{mousedown:oB(this)}}),this._behavior=this.options.shouldGroupWhenFull?new cB(this):new lB(this)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){const s=Mx(e),o=i||s.removeItems;return this._cleanItemsConfiguration(s.items,t,o).map(a=>ke(a)?this._createNestedToolbarDropdown(a,t,o):a==="|"?new ep:a==="-"?new sB:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){const s=e.filter((o,r,a)=>o==="|"?!0:i.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(Ce("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!ke(o)&&!t.has(o)?(Ce("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(e){const t=r=>r!=="-"&&r!=="|",i=e.length,s=e.findIndex(t);if(s===-1)return[];const o=i-e.slice().reverse().findIndex(t);return e.slice(s,o).filter((r,a,l)=>t(r)?!0:!(a>0&&l[a-1]===r))}_createNestedToolbarDropdown(e,t,i){let{label:s,icon:o,items:r,tooltip:a=!0,withText:l=!1}=e;if(r=this._cleanItemsConfiguration(r,t,i),!r.length)return null;const c=this.locale,u=Se(c);return s||Ce("toolbarview-nested-toolbar-dropdown-missing-label",e),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:s,tooltip:a,withText:!!l}),o!==!1?u.buttonView.icon=rB[o]||o||Nx:u.buttonView.withText=!0,qa(u,()=>u.toolbarView._buildItemsFromConfig(r,t,i)),u}}class aB extends B{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class lB{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>i),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class cB{constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCycleableItems.bind(this)),e.children.on("change",this._updateFocusCycleableItems.bind(this)),e.items.on("change",(t,i)=>{const s=i.index,o=Array.from(i.added);for(const r of i.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(r):this.ungroupedItems.remove(r);for(let r=s;r<s+o.length;r++){const a=o[r-s];r>this.ungroupedItems.length?this.groupedItems.add(a,r-this.ungroupedItems.length):this.ungroupedItems.add(a,r)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!$i(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new te(e.lastChild),s=new te(e);if(!this.cachedPadding){const o=W.window.getComputedStyle(e),r=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[r])}return t==="ltr"?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new we(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new ep),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=Se(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",qa(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:Nx}),i}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bx extends B{constructor(e){super(e);const t=this.bindTemplate;this.items=this.createCollection(),this.focusTracker=new Le,this.keystrokes=new Ue,this._focusCycler=new Rt({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],"aria-label":t.to("ariaLabel")},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tp extends B{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)]},children:this.children})}focus(){this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uB extends B{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Se(n,e=Ox){const t=new e(n),i=new iB(n),s=new Qo(n,t,i);return t.bind("isEnabled").to(s),t instanceof qs?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),dB(s),s}function qa(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?l0(n,e,t):n.once("change:isOpen",()=>l0(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&Fu(n,()=>n.toolbarView.items.find(i=>i.isOn))}function l0(n,e,t){const i=n.locale,s=i.t,o=n.toolbarView=new Jo(i),r=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),r instanceof yt?o.items.bindTo(r).using(a=>a):o.items.addMany(r),n.panelView.children.add(o),o.items.delegate("execute").to(n)}function Tn(n,e,t={}){n.isOpen?c0(n,e,t):n.once("change:isOpen",()=>c0(n,e,t),{priority:"highest"}),Fu(n,()=>n.listView.items.find(i=>i instanceof tp?i.children.first.isOn:!1))}function c0(n,e,t){const i=n.locale,s=n.listView=new Bx(i),o=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel,s.items.bindTo(o).using(r=>{if(r.type==="separator")return new uB(i);if(r.type==="button"||r.type==="switchbutton"){const a=new tp(i);let l;return r.type==="button"?l=new z(i):l=new ja(i),l.bind(...Object.keys(r.model)).to(r.model),l.delegate("execute").to(a),a.children.add(l),a}return null}),n.panelView.children.add(s),s.items.delegate("execute").to(n)}function Fu(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():Ce("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Di.low-10})}function dB(n){hB(n),fB(n),mB(n),gB(n),pB(n),wB(n)}function hB(n){n.on("render",()=>{lr({emitter:n,activator:()=>n.isOpen,callback:()=>{n.isOpen=!1},contextElements:[n.element]})})}function fB(n){n.on("execute",e=>{e.source instanceof ja||(n.isOpen=!1)})}function mB(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{n.isOpen&&!i&&(n.isOpen=!1)})}function gB(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function pB(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;const s=n.panelView.element;s&&s.contains(W.document.activeElement)&&n.buttonView.focus()})}function wB(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const u0=Ng("px"),d0=W.document.body;class ft extends B{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",i=>`ck-balloon-panel_${i}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",u0),left:t.to("left",u0)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=ft.defaultPositions,i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast,t.viewportStickyNorth],limiter:d0,fitInViewport:!0},e),s=ft._getOptimalPosition(i),o=parseInt(s.left),r=parseInt(s.top),a=s.name,l=s.config||{},{withArrow:c=!0}=l;this.top=r,this.left=o,this.position=a,this.withArrow=c}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=Zf(e.target),i=e.limiter?Zf(e.limiter):d0;this.listenTo(W.document,"scroll",(s,o)=>{const r=o.target,a=t&&r.contains(t),l=i&&r.contains(i);(a||l||!t||!i)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(W.window,"resize",()=>{this.attachTo(e)})}_stopPinning(){this.stopListening(W.document,"scroll"),this.stopListening(W.window,"resize")}}ft.arrowSideOffset=25;ft.arrowHeightOffset=10;ft.stickyVerticalOffset=20;ft._getOptimalPosition=yk;ft.defaultPositions=Fx();function Zf(n){return or(n)?n:Eu(n)?n.commonAncestorContainer:typeof n=="function"?Zf(n()):null}function Fx(n={}){const{sideOffset:e=ft.arrowSideOffset,heightOffset:t=ft.arrowHeightOffset,stickyVerticalOffset:i=ft.stickyVerticalOffset,config:s}=n;return{northWestArrowSouthWest:(a,l)=>({top:o(a,l),left:a.left-e,name:"arrow_sw",...s&&{config:s}}),northWestArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.left-l.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northWestArrowSouth:(a,l)=>({top:o(a,l),left:a.left-l.width/2,name:"arrow_s",...s&&{config:s}}),northWestArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.left-l.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northWestArrowSouthEast:(a,l)=>({top:o(a,l),left:a.left-l.width+e,name:"arrow_se",...s&&{config:s}}),northArrowSouthWest:(a,l)=>({top:o(a,l),left:a.left+a.width/2-e,name:"arrow_sw",...s&&{config:s}}),northArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northArrowSouth:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width/2,name:"arrow_s",...s&&{config:s}}),northArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northArrowSouthEast:(a,l)=>({top:o(a,l),left:a.left+a.width/2-l.width+e,name:"arrow_se",...s&&{config:s}}),northEastArrowSouthWest:(a,l)=>({top:o(a,l),left:a.right-e,name:"arrow_sw",...s&&{config:s}}),northEastArrowSouthMiddleWest:(a,l)=>({top:o(a,l),left:a.right-l.width*.25-e,name:"arrow_smw",...s&&{config:s}}),northEastArrowSouth:(a,l)=>({top:o(a,l),left:a.right-l.width/2,name:"arrow_s",...s&&{config:s}}),northEastArrowSouthMiddleEast:(a,l)=>({top:o(a,l),left:a.right-l.width*.75+e,name:"arrow_sme",...s&&{config:s}}),northEastArrowSouthEast:(a,l)=>({top:o(a,l),left:a.right-l.width+e,name:"arrow_se",...s&&{config:s}}),southWestArrowNorthWest:a=>({top:r(a),left:a.left-e,name:"arrow_nw",...s&&{config:s}}),southWestArrowNorthMiddleWest:(a,l)=>({top:r(a),left:a.left-l.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southWestArrowNorth:(a,l)=>({top:r(a),left:a.left-l.width/2,name:"arrow_n",...s&&{config:s}}),southWestArrowNorthMiddleEast:(a,l)=>({top:r(a),left:a.left-l.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southWestArrowNorthEast:(a,l)=>({top:r(a),left:a.left-l.width+e,name:"arrow_ne",...s&&{config:s}}),southArrowNorthWest:a=>({top:r(a),left:a.left+a.width/2-e,name:"arrow_nw",...s&&{config:s}}),southArrowNorthMiddleWest:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southArrowNorth:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width/2,name:"arrow_n",...s&&{config:s}}),southArrowNorthMiddleEast:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southArrowNorthEast:(a,l)=>({top:r(a),left:a.left+a.width/2-l.width+e,name:"arrow_ne",...s&&{config:s}}),southEastArrowNorthWest:a=>({top:r(a),left:a.right-e,name:"arrow_nw",...s&&{config:s}}),southEastArrowNorthMiddleWest:(a,l)=>({top:r(a),left:a.right-l.width*.25-e,name:"arrow_nmw",...s&&{config:s}}),southEastArrowNorth:(a,l)=>({top:r(a),left:a.right-l.width/2,name:"arrow_n",...s&&{config:s}}),southEastArrowNorthMiddleEast:(a,l)=>({top:r(a),left:a.right-l.width*.75+e,name:"arrow_nme",...s&&{config:s}}),southEastArrowNorthEast:(a,l)=>({top:r(a),left:a.right-l.width+e,name:"arrow_ne",...s&&{config:s}}),westArrowEast:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.left-l.width-t,name:"arrow_e",...s&&{config:s}}),eastArrowWest:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.right+t,name:"arrow_w",...s&&{config:s}}),viewportStickyNorth:(a,l,c)=>a.getIntersection(c)?{top:c.top+i,left:a.left+a.width/2-l.width/2,name:"arrowless",config:{withArrow:!1,...s}}:null};function o(a,l){return a.top-l.height-t}function r(a){return a.bottom+t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const h0="ck-tooltip";class Qe extends gi(){constructor(e){if(super(),Qe._editors.add(e),Qe._instance)return Qe._instance;Qe._instance=this,this.tooltipTextView=new B(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new ft(e.locale),this.balloonPanelView.class=h0,this.balloonPanelView.content.add(this.tooltipTextView),this._resizeObserver=null,this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._pinTooltipDebounced=di(this._pinTooltip,600),this.listenTo(W.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(W.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(W.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(W.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(W.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;Qe._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Qe._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Qe._instance=null)}static getPositioningFunctions(e){const t=Qe.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onEnterOrFocus(e,{target:t}){const i=ih(t);i&&i!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(i,bB(i)))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!or(t)||this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const s=ih(t),o=ih(i);s&&s!==o&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltip()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:s}){const o=de(Qe._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.pin({target:e,positions:Qe.getPositioningFunctions(i)}),this._resizeObserver=new we(e,()=>{$i(e)||this._unpinTooltip()}),this.balloonPanelView.class=[h0,s].filter(r=>r).join(" ");for(const r of Qe._editors)this.listenTo(r.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Qe._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy()}_updateTooltipPosition(){if(!$i(this._currentElementWithTooltip)){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Qe.getPositioningFunctions(this._currentTooltipPosition)})}}Qe.defaultBalloonPositions=Fx({heightOffset:5,sideOffset:13});Qe._editors=new Set;Qe._instance=null;function ih(n){return or(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function bB(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vB extends se(){constructor(e){super(),this.editor=e,this.componentFactory=new nB(e),this.focusTracker=new Le,this.tooltipManager=new Qe(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.isReady=!1,this.once("ready",()=>{this.isReady=!0}),this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this.listenTo(e.editing.view.document,"layoutChanged",()=>this.update()),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor);for(const e of this._editableElementsMap.values())e.ckeditorInstance=null;this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){const e=this.editor,t=e.editing.view;let i,s;e.keystrokes.set("Alt+F10",(o,r)=>{const a=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(a)&&!Array.from(t.domRoots.values()).includes(a)&&(i=a);const l=this._getCurrentFocusedToolbarDefinition();(!l||!s)&&(s=this._getFocusableCandidateToolbarDefinitions());for(let c=0;c<s.length;c++){const u=s.shift();if(s.push(u),u!==l&&this._focusFocusableCandidateToolbar(u)){l&&l.options.afterBlur&&l.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(o,r)=>{const a=this._getCurrentFocusedToolbarDefinition();a&&(i?(i.focus(),i=null):e.editing.view.focus(),a.options.afterBlur&&a.options.afterBlur(),r())})}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:i,options:s}=t;($i(i.element)||s.beforeFocus)&&e.push(t)}return e.sort((t,i)=>f0(t)-f0(i)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),$i(t.element)?(t.focus(),!0):!1}}function f0(n){const{toolbarView:e,options:t}=n;let i=10;return $i(e.element)&&i--,t.isContextual&&i--,i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _B extends B{constructor(e){super(e),this.body=new ZN(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wn extends B{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${sn()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yB extends _B{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new wn;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CB extends B{constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(s){e.change(o=>{const r=e.document.getRoot(s.name);o.addClass(s.isFocused?"ck-focused":"ck-blurred",r),o.removeClass(s.isFocused?"ck-blurred":"ck-focused",r)})}function i(s){e.once("change:isRenderingInProgress",(o,r,a)=>{a?i(s):t(s)})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kB extends CB{constructor(e,t,i,s={}){super(e,t,i);const o=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=s.label||(()=>o("Editor editing area: %0",this.name))}render(){super.render();const e=this._editingView;e.change(t=>{const i=e.document.getRoot(this.name);t.setAttribute("aria-label",this._generateLabel(this),i)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Du extends B{constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children});const s=new B(e);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"]},children:[{text:i.to("label")}]}),this.children.add(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dx extends B{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new Le,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0),this.set("inputMode","text");const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),inputmode:t.to("inputMode"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=xB(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function xB(n){return!n.value}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zx extends Dx{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TB extends Dx{constructor(e,{min:t,max:i,step:s}={}){super(e);const o=this.bindTemplate;this.set("min",t),this.set("max",i),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ge extends B{constructor(e,t){super(e);const i=`ck-labeled-field-view-${sn()}`,s=`ck-labeled-field-view-status-${sn()}`;this.fieldView=t(this,i,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(r,a)=>r||a);const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",r=>!r),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new wn(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new B(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",s=>!s)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(){this.fieldView.focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xt(n,e,t){const i=new zx(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i}function EB(n,e,t){const i=new TB(n.locale);return i.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i}function Hx(n,e,t){const i=Se(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isEnabled").to(n),i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gc extends Iu{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class un extends se(){constructor(e,t){super(),t&&MC(this,t),e&&this.set(e)}}const em='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',SB='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Vl=Ng("px");class Un extends k{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const t=this.editor.editing.view,s=t.document.selection.editableElement;return s?t.domConverter.mapViewToDom(s.root):null},this.set("visibleView",null),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=null,this._fakePanelsView=null}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new y("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new y("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new y("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new ft(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new AB(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,s)=>{if(s<2)return"";const o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,s])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new IB(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:s=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class AB extends B{constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Le,this.buttonPrevView=this._createButtonView(t("Previous"),em),this.buttonNextView=this._createButtonView(t("Next"),SB),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new z(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class IB extends B{constructor(e,t){super(e);const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:i.to("top",Vl),left:i.to("left",Vl),width:i.to("width",Vl),height:i.to("height",Vl)}},children:this.content}),this.on("change:numberOfPanels",(s,o,r,a)=>{r>a?this._addPanels(r-a):this._removePanels(a-r),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new B;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:i,height:s}=new te(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:s})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Pr=Ng("px");class PB extends B{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new bt({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?Pr(this._panelRect.height):null)}}}).render(),this._contentPanel=new bt({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?Pr(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_hasViewportTopOffset",i=>i?Pr(this.viewportTopOffset):null),bottom:t.to("_isStickyToTheLimiter",i=>i?Pr(this.limiterBottomOffset):null),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(W.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const e=this._panelRect=this._contentPanel.getBoundingClientRect();let t;this.limiterElement?(t=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&t.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<t.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Pr(-W.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ll=new Map([["left",H.alignLeft],["right",H.alignRight],["center",H.alignCenter],["justify",H.alignJustify]]);class RB extends k{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,t=e.ui.componentFactory,i=e.t,s=Sx(e.config.get("alignment.options"));s.map(o=>o.name).filter(Tx).forEach(o=>this._addButton(o)),t.add("alignment",o=>{const r=Se(o);qa(r,()=>s.map(c=>t.create(`alignment:${c.name}`)),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:i("Text alignment toolbar")}),r.buttonView.set({label:i("Text alignment"),tooltip:!0}),r.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const a=o.contentLanguageDirection==="rtl"?Ll.get("right"):Ll.get("left"),l=e.commands.get("alignment");return r.buttonView.bind("icon").to(l,"value",c=>Ll.get(c)||a),r.bind("isEnabled").to(l,"isEnabled"),this.listenTo(r,"execute",()=>{e.editing.view.focus()}),r})}_addButton(e){const t=this.editor;t.ui.componentFactory.add(`alignment:${e}`,i=>{const s=t.commands.get("alignment"),o=new z(i);return o.set({label:this.localizedOptionTitles[e],icon:Ll.get(e),tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s),o.bind("isOn").to(s,"value",r=>r===e),this.listenTo(o,"execute",()=>{t.execute("alignment",{value:e}),t.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VB extends k{static get requires(){return[BN,RB]}static get pluginName(){return"Alignment"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ux{constructor(e,t=20){this._batch=null,this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LB extends F{constructor(e,t){super(e),this._buffer=new Ux(e.model,t)}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,s=e.text||"",o=s.length;let r=i.selection;e.selection?r=e.selection:e.range&&(r=t.createSelection(e.range));const a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock(),t.deleteContent(r),s&&t.insertContent(l.createText(s,i.selection.getAttributes()),r),a?l.setSelection(a):r.is("documentSelection")||l.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const m0=["insertText","insertReplacementText"];class OB extends Wn{constructor(e){super(e),Z.isAndroid&&m0.push("insertCompositionText");const t=e.document;t.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;const{data:o,targetRanges:r,inputType:a,domEvent:l}=s;if(!m0.includes(a))return;const c=new ui(t,"insertText");t.fire(c,new Go(e,l,{text:o,selection:e.createSelection(r)})),c.stop.called&&i.stop()}),t.on("compositionend",(i,{data:s,domEvent:o})=>{!this.isEnabled||Z.isAndroid||s&&t.fire("insertText",new Go(e,o,{text:s,selection:t.selection}))},{priority:"lowest"})}observe(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $x extends k{static get pluginName(){return"Input"}init(){const e=this.editor,t=e.model,i=e.editing.view,s=t.document.selection;i.addObserver(OB);const o=new LB(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",o),e.commands.add("input",o),this.listenTo(i.document,"insertText",(r,a)=>{i.document.isComposing||a.preventDefault();const{text:l,selection:c,resultRange:u}=a,d=Array.from(c.getRanges()).map(p=>e.editing.mapper.toModelRange(p));let h=l;if(Z.isAndroid){const p=Array.from(d[0].getItems()).reduce((b,x)=>b+(x.is("$textProxy")?x.data:""),"");p&&(p.length<=h.length?h.startsWith(p)&&(h=h.substring(p.length),d[0].start=d[0].start.getShiftedBy(p.length)):p.startsWith(h)&&(d[0].start=d[0].start.getShiftedBy(h.length),h=""))}const f={text:h,selection:t.createSelection(d)};u&&(f.resultRange=e.editing.mapper.toModelRange(u)),e.execute("insertText",f)}),Z.isAndroid?this.listenTo(i.document,"keydown",(r,a)=>{s.isCollapsed||a.keyCode!=229||!i.document.isComposing||g0(t,o)}):this.listenTo(i.document,"compositionstart",()=>{s.isCollapsed||g0(t,o)})}}function g0(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p0 extends F{constructor(e,t){super(e),this.direction=t,this._buffer=new Ux(e.model,e.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const o=s.createSelection(e.selection||i.selection),r=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(r)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(o,r)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let l=0;o.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=Nf(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),s.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;const a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,s=t.document.selection,o=t.schema.getLimitElement(s),r=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(r,o),e.setSelection(r,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const s=e.getFirstPosition(),o=i.schema.getLimitElement(s),r=o.getChild(0);return!(s.parent!=r||!e.containsEntireContent(r)||!i.schema.checkChild(o,"paragraph")||r.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const MB="character",w0="word",NB="codePoint",Ai="selection",po="backward",Ur="forward",Wx={deleteContent:{unit:Ai,direction:po},deleteContentBackward:{unit:NB,direction:po},deleteWordBackward:{unit:w0,direction:po},deleteHardLineBackward:{unit:Ai,direction:po},deleteSoftLineBackward:{unit:Ai,direction:po},deleteContentForward:{unit:MB,direction:Ur},deleteWordForward:{unit:w0,direction:Ur},deleteHardLineForward:{unit:Ai,direction:Ur},deleteSoftLineForward:{unit:Ai,direction:Ur}};class BB extends Wn{constructor(e){super(e);const t=e.document;let i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(s,o)=>{if(!this.isEnabled)return;const{targetRanges:r,domEvent:a,inputType:l}=o,c=Wx[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:i};u.unit==Ai&&(u.selectionToRemove=e.createSelection(r[0])),Z.isAndroid&&l==="deleteContentBackward"&&(u.sequence=1,r.length==1&&(r[0].start.parent!=r[0].end.parent||r[0].start.offset+1!=r[0].end.offset)&&(u.unit=Ai,u.selectionToRemove=e.createSelection(r)));const d=new rr(t,"delete",r[0]);t.fire(d,new Go(e,a,u)),d.stop.called&&s.stop()}),Z.isBlink&&FB(this)}observe(){}}function FB(n){const e=n.view,t=e.document;let i=null,s=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,s=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=t.selection,d=n.isEnabled&&l==i&&o(l)&&!u.isCollapsed&&!s;if(i=null,d){const h=u.getFirstRange(),f=new rr(t,"delete",h),p={unit:Ai,direction:r(l),selectionToRemove:u};t.fire(f,new Go(e,c,p))}}),t.on("beforeinput",(a,{inputType:l})=>{const c=Wx[l];o(i)&&c&&c.direction==r(i)&&(s=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==Q.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function o(a){return a==Q.backspace||a==Q.delete}function r(a){return a==Q.backspace?po:Ur}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pi extends k{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.model.document;t.addObserver(BB),this._undoOnBackspace=!1;const o=new p0(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new p0(e,"backward")),this.listenTo(i,"delete",(r,a)=>{i.isComposing||a.preventDefault();const{direction:l,sequence:c,selectionToRemove:u,unit:d}=a,h=l==="forward"?"deleteForward":"delete",f={sequence:c};if(d=="selection"){const p=Array.from(u.getRanges()).map(b=>e.editing.mapper.toModelRange(b));f.selection=e.model.createSelection(p)}else f.unit=d;e.execute(h,f),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(r,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),r.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jx extends k{static get requires(){return[$x,pi]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qx(n,e){let t=n.start;return{text:Array.from(n.getItems()).reduce((s,o)=>o.is("$text")||o.is("$textProxy")?s+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,n.end)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class np extends se(){constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:s})=>{if(s){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(e,t={}){const i=this.model,o=i.document.selection,r=i.createRange(i.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:l}=qx(r,i),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){const u=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(u,c),this.fire(`matched:${e}`,u)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kc extends k{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",(r,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const l=a.keyCode==Q.arrowright,c=a.keyCode==Q.arrowleft;if(!l&&!c)return;const u=s.contentLanguageDirection;let d=!1;u==="ltr"&&l||u==="rtl"&&c?d=this._handleForwardMovement(a):d=this._handleBackwardMovement(a),d===!0&&r.stop()},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(o,"change:range",(r,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&sc(o.getFirstPosition(),this.attributes)||this._restoreGravity())})}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,s=this.editor.model.document.selection,o=s.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&sh(s,t)?!1:sc(o,t)?(Ol(e),this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,o=s.getFirstPosition();return this._isGravityOverridden?(Ol(e),this._restoreGravity(),oh(i,t,o),!0):o.isAtStart?sh(s,t)?(Ol(e),oh(i,t,o),!0):!1:DB(o,t)?o.isAtEnd&&!sh(s,t)&&sc(o,t)?(Ol(e),oh(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function sh(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function oh(n,e,t){const i=t.nodeBefore;n.change(s=>{i?s.setSelectionAttribute(i.getAttributes()):s.removeSelectionAttribute(e)})}function Ol(n){n.preventDefault()}function DB(n,e){const t=n.getShiftedBy(-1);return sc(t,e)}function sc(n,e){const{nodeBefore:t,nodeAfter:i}=n;for(const s of e){const o=t?t.getAttribute(s):void 0;if((i?i.getAttribute(s):void 0)!==o)return!0}return!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const b0={copyright:{from:"(c)",to:""},registeredTrademark:{from:"(r)",to:""},trademark:{from:"(tm)",to:""},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"",null]},lessThanOrEqual:{from:"<=",to:""},greaterThanOrEqual:{from:">=",to:""},notEqual:{from:"!=",to:""},arrowLeft:{from:"<-",to:""},arrowRight:{from:"->",to:""},horizontalEllipsis:{from:"...",to:""},enDash:{from:/(^| )(--)( )$/,to:[null,"",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"",null]},quotesPrimary:{from:lo('"'),to:[null,"",null,""]},quotesSecondary:{from:lo("'"),to:[null,"",null,""]},quotesPrimaryEnGb:{from:lo("'"),to:[null,"",null,""]},quotesSecondaryEnGb:{from:lo('"'),to:[null,"",null,""]},quotesPrimaryPl:{from:lo('"'),to:[null,"",null,""]},quotesSecondaryPl:{from:lo("'"),to:[null,"",null,""]}},v0={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},zB=["symbols","mathematical","typography","quotes"];class HB extends k{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}constructor(e){super(e),e.config.define("typing",{transformations:{include:zB}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,t=e.model,i=e.plugins.get("Delete"),s=jB(e.config.get("typing.transformations")),o=a=>{for(const l of s)if(l.from.test(a))return{normalizedTransformation:l}},r=new np(e.model,o);r.on("matched:data",(a,l)=>{if(!l.batch.isTyping)return;const{from:c,to:u}=l.normalizedTransformation,d=c.exec(l.text),h=u(d.slice(1)),f=l.range;let p=d.index;t.enqueueChange(b=>{for(let x=1;x<d.length;x++){const v=d[x],w=h[x-1];if(w==null){p+=v.length;continue}const C=f.start.getShiftedBy(p),E=t.createRange(C,C.getShiftedBy(v.length)),V=WB(C);t.insertContent(b.createText(w,V),E),p+=w.length}t.enqueueChange(()=>{i.requestUndoOnBackspace()})})}),r.bind("isEnabled").to(this)}}function UB(n){return typeof n=="string"?new RegExp(`(${lk(n)})$`):n}function $B(n){return typeof n=="string"?()=>[n]:n instanceof Array?()=>n:n}function WB(n){return(n.textNode?n.textNode:n.nodeAfter).getAttributes()}function lo(n){return new RegExp(`(^|\\s)(${n})([^${n}]*)(${n})$`)}function jB(n){const e=n.extra||[],t=n.remove||[],i=o=>!t.includes(o),s=n.include.concat(e).filter(i);return qB(s).filter(i).map(o=>typeof o=="string"&&b0[o]?b0[o]:o).filter(o=>typeof o=="object").map(o=>({from:UB(o.from),to:$B(o.to)}))}function qB(n){const e=new Set;for(const t of n)if(typeof t=="string"&&v0[t])for(const i of v0[t])e.add(i);else e.add(t);return Array.from(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yo(n,e,t,i){return i.createRange(_0(n,e,t,!0,i),_0(n,e,t,!1,i))}function _0(n,e,t,i,s){let o=n.textNode||(i?n.nodeBefore:n.nodeAfter),r=null;for(;o&&o.getAttribute(e)==t;)r=o,o=i?o.previousSibling:o.nextSibling;return r?s.createPositionAt(r,i?"before":"after"):n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gx(n,e,t,i){const s=n.editing.view,o=new Set;s.document.registerPostFixer(r=>{const a=n.model.document.selection;let l=!1;if(a.hasAttribute(e)){const c=Yo(a.getFirstPosition(),e,a.getAttribute(e),n.model),u=n.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",t)&&!d.hasClass(i)&&(r.addClass(i,d),o.add(d),l=!0)}return l}),n.conversion.for("editingDowncast").add(r=>{r.on("insert",a,{priority:"highest"}),r.on("remove",a,{priority:"highest"}),r.on("attribute",a,{priority:"highest"}),r.on("selection",a,{priority:"highest"});function a(){s.change(l=>{for(const c of o.values())l.removeClass(i,c),o.delete(c)})}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yi(n,e,t,i){let s,o=null;typeof i=="function"?s=i:(o=n.commands.get(i),s=()=>{n.execute(i)}),n.model.document.on("change:data",(r,a)=>{if(o&&!o.isEnabled||!e.isEnabled)return;const l=de(n.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(n.model.document.differ.getChanges()),u=c[0];if(c.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const d=u.position.parent;if(d.is("element","codeBlock")||d.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||o&&o.value===!0)return;const h=d.getChild(0),f=n.model.createRangeOn(h);if(!f.containsRange(l)&&!l.end.isEqual(f.end))return;const p=t.exec(h.data.substr(0,l.end.offset));p&&n.model.enqueueChange(b=>{const x=b.createPositionAt(d,0),v=b.createPositionAt(d,p[0].length),w=new an(x,v);if(s({match:p})!==!1){b.remove(w);const E=n.model.document.selection.getFirstRange(),V=b.createRangeIn(d);d.isEmpty&&!V.isEqual(E)&&!V.containsRange(E,!0)&&b.remove(d)}w.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function co(n,e,t,i){let s,o;t instanceof RegExp?s=t:o=t,o=o||(r=>{let a;const l=[],c=[];for(;(a=s.exec(r))!==null&&!(a&&a.length<4);){let{index:u,"1":d,"2":h,"3":f}=a;const p=d+h+f;u+=a[0].length-p.length;const b=[u,u+d.length],x=[u+d.length+h.length,u+d.length+h.length+f.length];l.push(b),l.push(x),c.push([u+d.length,u+d.length+h.length])}return{remove:l,format:c}}),n.model.document.on("change:data",(r,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const l=n.model,c=l.document.selection;if(!c.isCollapsed)return;const u=Array.from(l.document.differ.getChanges()),d=u[0];if(u.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const h=c.focus,f=h.parent,{text:p,range:b}=GB(l.createRange(l.createPositionAt(f,0),h),l),x=o(p),v=y0(b.start,x.format,l),w=y0(b.start,x.remove,l);v.length&&w.length&&l.enqueueChange(C=>{if(i(C,v)!==!1){for(const V of w.reverse())C.remove(V);l.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function y0(n,e,t){return e.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>t.createRange(n.getShiftedBy(i[0]),n.getShiftedBy(i[1])))}function GB(n,e){let t=n.start;return{text:Array.from(n.getItems()).reduce((s,o)=>!(o.is("$text")||o.is("$textProxy"))||o.getAttribute("code")?(t=e.createPositionAfter(o),""):s+o.data,""),range:e.createRange(t,n.end)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KB extends k{static get requires(){return[pi]}static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&yi(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&yi(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&yi(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&yi(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=Ml(this.editor,"bold");co(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),co(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=Ml(this.editor,"italic");co(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),co(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=Ml(this.editor,"code");co(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=Ml(this.editor,"strikethrough");co(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const i=t[7],s=new RegExp(`^(#{${i}})\\s$`);yi(this.editor,this,s,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&yi(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&yi(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&yi(this.editor,this,/^---$/,"horizontalLine")}}function Ml(n,e){return(t,i)=>{if(!n.commands.get(e).isEnabled)return!1;const o=n.model.schema.getValidRanges(i,e);for(const r of o)t.setAttribute(e,!0,r);t.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ip extends Qi{constructor(e){super(e);const t=this.document;this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(s){return(o,r)=>{r.preventDefault();const a=r.dropRange?[r.dropRange]:null,l=new ui(t,s);t.fire(l,{dataTransfer:r.dataTransfer,method:o.name,targetRanges:a,target:r.target}),l.stop.called&&r.stopPropagation()}}}onDomEvent(e){const t={dataTransfer:new Wk("clipboardData"in e?e.clipboardData:e.dataTransfer)};(e.type=="drop"||e.type=="dragover")&&(t.dropRange=QB(this.view,e)),this.fire(e.type,e,t)}}function QB(n,e){const t=e.target.ownerDocument,i=e.clientX,s=e.clientY;let o;return t.caretRangeFromPoint&&t.caretRangeFromPoint(i,s)?o=t.caretRangeFromPoint(i,s):e.rangeParent&&(o=t.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o?n.domConverter.domRangeToView(o):null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function JB(n){return n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function YB(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const C0=["figcaption","li"];function Kx(n){let e="";if(n.is("$text")||n.is("$textProxy"))e=n.data;else if(n.is("element","img")&&n.hasAttribute("alt"))e=n.getAttribute("alt");else if(n.is("element","br"))e=`
`;else{let t=null;for(const i of n.getChildren()){const s=Kx(i);t&&(t.is("containerElement")||i.is("containerElement"))&&(C0.includes(t.name)||C0.includes(i.name)?e+=`
`:e+=`

`),e+=s,t=i}}return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $n extends k{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(ip),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document;this.listenTo(s,"clipboardInput",o=>{e.isReadOnly&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,r)=>{const a=r.dataTransfer;let l;if(r.content)l=r.content;else{let u="";a.getData("text/html")?u=YB(a.getData("text/html")):a.getData("text/plain")&&(u=JB(a.getData("text/plain"))),l=this.editor.data.htmlProcessor.toView(u)}const c=new ui(this,"inputTransformation");this.fire(c,{content:l,dataTransfer:a,targetRanges:r.targetRanges,method:r.method}),c.stop.called&&o.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,r)=>{if(r.content.isEmpty)return;const l=this.editor.data.toModel(r.content,"$clipboardHolder");l.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:l,method:r.method,dataTransfer:r.dataTransfer,targetRanges:r.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,r)=>{r.resultRange=t.insertContent(r.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,s=e.editing.view.document,o=(r,a)=>{const l=a.dataTransfer;a.preventDefault();const c=e.data.toView(e.model.getSelectedContent(t.selection));s.fire("clipboardOutput",{dataTransfer:l,content:c,method:r.name})};this.listenTo(s,"copy",o,{priority:"low"}),this.listenTo(s,"cut",(r,a)=>{e.isReadOnly?a.preventDefault():o(r,a)},{priority:"low"}),this.listenTo(s,"clipboardOutput",(r,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",Kx(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*Qx(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XB extends F{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,i=t.document.selection,s=t.schema,o=i.isCollapsed,r=i.getFirstRange(),a=r.start.parent,l=r.end.parent;if(s.isLimit(a)||s.isLimit(l))return!o&&a==l&&t.deleteContent(i),!1;if(o){const c=Qx(e.model.schema,i.getAttributes());return k0(e,r.start),e.setSelectionAttribute(c),!0}else{const c=!(r.start.isAtStart&&r.end.isAtEnd),u=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(u)return k0(e,i.focus),!0;e.setSelection(l,0)}}return!1}}function k0(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ZB={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class Jx extends Wn{constructor(e){super(e);const t=this.document;t.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;const o=s.domEvent,r=ZB[s.inputType];if(!r)return;const a=new rr(t,"enter",s.targetRanges[0]);t.fire(a,new Go(e,o,{isSoft:r.isSoft})),a.stop.called&&i.stop()})}observe(){}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zu extends k{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,i=t.document;t.addObserver(Jx),e.commands.add("enter",new XB(e)),this.listenTo(i,"enter",(s,o)=>{i.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e8 extends F{execute(){const e=this.editor.model,t=e.document;e.change(i=>{n8(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=t8(e.schema,t.selection)}}function t8(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const i=e.getFirstRange(),s=i.start.parent,o=i.end.parent;return!((tm(s,n)||tm(o,n))&&s!==o)}function n8(n,e,t){const i=t.isCollapsed,s=t.getFirstRange(),o=s.start.parent,r=s.end.parent,a=o==r;if(i){const l=Qx(n.schema,t.getAttributes());x0(n,e,s.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{const l=!(s.start.isAtStart&&s.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?x0(n,e,t.focus):l&&e.setSelection(r,0)}}function x0(n,e,t){const i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function tm(n,e){return n.is("rootElement")?!1:e.isLimit(n)||tm(n.parent,e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yx extends k{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,i=e.conversion,s=e.editing.view,o=s.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(r,{writer:a})=>a.createEmptyElement("br")}),s.addObserver(Jx),e.commands.add("shiftEnter",new e8(e)),this.listenTo(o,"enter",(r,a)=>{o.isComposing||a.preventDefault(),a.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class i8 extends ue(){constructor(){super(),this._stack=[]}add(e,t){const i=this._stack,s=i[0];this._insertDescriptor(e);const o=i[0];s!==o&&!rh(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}remove(e,t){const i=this._stack,s=i[0];this._removeDescriptor(e);const o=i[0];s!==o&&!rh(s,o)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:o,writer:t})}_insertDescriptor(e){const t=this._stack,i=t.findIndex(o=>o.id===e.id);if(rh(e,t[i]))return;i>-1&&t.splice(i,1);let s=0;for(;t[s]&&s8(t[s],e);)s++;t.splice(s,0,e)}_removeDescriptor(e){const t=this._stack,i=t.findIndex(s=>s.id===e);i>-1&&t.splice(i,1)}}function rh(n,e){return n&&e&&n.priority==e.priority&&Qc(n.classes)==Qc(e.classes)}function s8(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:Qc(n.classes)>Qc(e.classes)}function Qc(n){return Array.isArray(n)?n.sort().join(","):n}const o8='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const r8="ck-widget",T0="ck-widget_selected";function Pe(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function cr(n,e,t={}){if(!n.is("containerElement"))throw new y("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(r8,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=d8,e.setCustomProperty("widgetLabel",[],n),t.label&&c8(n,t.label),t.hasSelectionHandle&&h8(n,e),Xx(n,e),n}function a8(n,e,t){if(e.classes&&t.addClass(Ze(e.classes),n),e.attributes)for(const i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function l8(n,e,t){if(e.classes&&t.removeClass(Ze(e.classes),n),e.attributes)for(const i in e.attributes)t.removeAttribute(i,n)}function Xx(n,e,t=a8,i=l8){const s=new i8;s.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});const o=(a,l,c)=>s.add(l,c),r=(a,l,c)=>s.remove(l,c);e.setCustomProperty("addHighlight",o,n),e.setCustomProperty("removeHighlight",r,n)}function c8(n,e){n.getCustomProperty("widgetLabel").push(e)}function u8(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function sp(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),e.setAttribute("role","textbox",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,s,o)=>{e.setAttribute("contenteditable",o?"false":"true",n)}),n.on("change:isFocused",(i,s,o)=>{o?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),Xx(n,e),n}function Ga(n,e){const t=n.getSelectedElement();if(t){const i=ki(n);if(i)return e.createRange(e.createPositionAt(t,i))}return vx(n,e)}function d8(){return null}function h8(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const s=this.toDomElement(i),o=new js;return o.set("content",o8),o.render(),s.appendChild(o.element),s});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yn="widget-type-around";function rs(n,e,t){return!!n&&Pe(n)&&!t.isInline(e)}function f8(n){return n.closest(".ck-widget__type-around__button")}function m8(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function g8(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function ki(n){return n.getAttribute(Yn)}const p8='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zx=["before","after"],w8=new DOMParser().parseFromString(p8,"image/svg+xml").firstChild,E0="ck-widget__type-around_disabled";class b8 extends k{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[zu,pi]}constructor(e){super(e),this._currentFakeCaretModelElement=null}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,s,o)=>{t.change(r=>{for(const a of t.document.roots)o?r.removeClass(E0,a):r.addClass(E0,a)}),o||e.model.change(r=>{r.removeSelectionAttribute(Yn)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,s=i.editing.view,o=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:o}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,t,i,s){this.listenTo(e,t,(...o)=>{this.isEnabled&&i(...o)},s)}_insertParagraphAccordingToFakeCaretPosition(){const i=this.editor.model.document.selection,s=ki(i);if(!s)return!1;const o=i.getSelectedElement();return this._insertParagraph(o,s),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,i=e.locale.t,s={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,r,a)=>{const l=a.mapper.toViewElement(r.item);l&&rs(l,r.item,t)&&(v8(a.writer,s,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,i=t.document.selection,s=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Pe,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(Yn)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=i.getSelectedElement();if(a){const l=e.editing.mapper.toViewElement(a);if(rs(l,a,s))return}e.model.change(l=>{l.removeSelectionAttribute(Yn)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{const u=c.writer;if(this._currentFakeCaretModelElement){const p=c.mapper.toViewElement(this._currentFakeCaretModelElement);p&&(u.removeClass(Zx.map(r),p),this._currentFakeCaretModelElement=null)}const d=l.selection.getSelectedElement();if(!d)return;const h=c.mapper.toViewElement(d);if(!rs(h,d,s))return;const f=ki(l.selection);f&&(u.addClass(r(f),h),this._currentFakeCaretModelElement=d)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(u=>{u.removeSelectionAttribute(Yn)})});function r(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){const i=this.editor,s=i.model,o=s.document.selection,r=s.schema,a=i.editing.view,l=t.keyCode,c=OV(l,i.locale.contentLanguageDirection),u=a.document.selection.getSelectedElement(),d=i.editing.mapper.toModelElement(u);let h;rs(u,d,r)?h=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed?h=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(h=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),h&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const i=this.editor.model,s=i.document.selection,o=ki(s);return i.change(r=>{if(o){if(!(o===(e?"after":"before")))return r.removeSelectionAttribute(Yn),!0}else return r.setSelectionAttribute(Yn,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,i=t.model,s=i.schema,o=t.plugins.get("Widget"),r=o._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(r);return rs(a,r,s)?(i.change(l=>{o._setSelectionOverElement(r),l.setSelectionAttribute(Yn,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,i=t.model,s=i.schema,o=t.editing.mapper,r=i.document.selection,a=e?r.getLastPosition().nodeBefore:r.getFirstPosition().nodeAfter,l=o.toViewElement(a);return rs(l,a,s)?(i.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(Yn,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,s)=>{const o=f8(s.domTarget);if(!o)return;const r=m8(o),a=g8(o,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,r),s.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(s,o)=>{if(s.eventPhase!="atTarget")return;const r=t.getSelectedElement(),a=e.editing.mapper.toViewElement(r),l=e.model.schema;let c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:rs(a,r,l)&&(this._insertParagraph(r,o.isSoft?"before":"after"),c=!0),c&&(o.preventDefault(),s.stop())},{context:Pe})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=t.selection)},{priority:"high"}),Z.isAndroid?this._listenToIfEnabled(t,"keydown",(i,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,i=e.model,s=i.schema;this._listenToIfEnabled(t.document,"delete",(o,r)=>{if(o.eventPhase!="atTarget")return;const a=ki(i.document.selection);if(!a)return;const l=r.direction,c=i.document.selection.getSelectedElement(),u=a==="before",d=l=="forward";if(u===d)e.execute("delete",{selection:i.createSelection(c,"on")});else{const f=s.getNearestSelectionRange(i.createPositionAt(c,a),l);if(f)if(!f.isCollapsed)i.change(p=>{p.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const p=i.createSelection(f.start);if(i.modifySelection(p,{direction:l}),!p.focus.isEqual(f.start))i.change(b=>{b.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const b=C8(s,f.start.parent);i.deleteContent(i.createSelection(b,"on"),{doNotAutoparagraph:!0})}}}r.preventDefault(),o.stop()},{context:Pe})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(s,[o,r])=>{if(r&&!r.is("documentSelection"))return;const a=ki(i);if(a)return s.stop(),t.change(l=>{const c=i.getSelectedElement(),u=t.createPositionAt(c,a),d=l.createSelection(u),h=t.insertContent(o,d);return l.setSelection(d),h})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(s,o)=>{const[,r,,a={}]=o;if(r&&!r.is("documentSelection"))return;const l=ki(i);l&&(a.findOptimalPosition=l,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(s,[o])=>{if(o&&!o.is("documentSelection"))return;ki(i)&&s.stop()},{priority:"high"})}}function v8(n,e,t){const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const o=this.toDomElement(s);return _8(o,e),y8(o),o});n.insert(n.createPositionAt(t,"end"),i)}function _8(n,e){for(const t of Zx){const i=new bt({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(w8,!0)]});n.appendChild(i.render())}}function y8(n){const e=new bt({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function C8(n,e){let t=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function k8(n){const e=n.model;return(t,i)=>{const s=i.keyCode==Q.arrowup,o=i.keyCode==Q.arrowdown,r=i.shiftKey,a=e.document.selection;if(!s&&!o)return;const l=o;if(r&&E8(a,l))return;const c=x8(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(r)return}(c.isCollapsed||T8(n,c,l))&&(e.change(u=>{const d=l?c.end:c.start;if(r){const h=e.createSelection(a.anchor);h.setFocus(d),u.setSelection(h)}else u.setSelection(d)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function x8(n,e,t){const i=n.model;if(t){const s=e.isCollapsed?e.focus:e.getLastPosition(),o=S0(i,s,"forward");if(!o)return null;const r=i.createRange(s,o),a=A0(i.schema,r,"backward");return a?i.createRange(s,a):null}else{const s=e.isCollapsed?e.focus:e.getFirstPosition(),o=S0(i,s,"backward");if(!o)return null;const r=i.createRange(o,s),a=A0(i.schema,r,"forward");return a?i.createRange(a,s):null}}function S0(n,e,t){const i=n.schema,s=n.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:r,item:a,type:l}of s.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return r;if(l==o&&i.isBlock(a))return null}return null}function A0(n,e,t){const i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:s}of e.getWalker({direction:t}))if(n.checkChild(s,"$text"))return s;return null}function T8(n,e,t){const i=n.model,s=n.view.domConverter;if(t){const c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}const o=n.mapper.toViewRange(e),r=s.viewRangeToDom(o),a=te.getDomRangeRects(r);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function E8(n,e){return!n.isCollapsed&&n.isBackward==e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yi extends k{static get pluginName(){return"Widget"}static get requires(){return[b8,pi]}init(){const e=this.editor,t=e.editing.view,i=t.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(s,o,r)=>{const a=r.writer,l=o.selection;if(l.isCollapsed)return;const c=l.getSelectedElement();if(!c)return;const u=e.editing.mapper.toViewElement(c);Pe(u)&&r.consumable.consume(l,"selection")&&a.setSelection(a.createRangeOn(u),{fake:!0,label:u8(u)})}),this.editor.editing.downcastDispatcher.on("selection",(s,o,r)=>{this._clearPreviouslySelectedWidgets(r.writer);const a=r.writer,l=a.document.selection;let c=null;for(const u of l.getRanges())for(const d of u){const h=d.item;Pe(h)&&!A8(h,c)&&(a.addClass(T0,h),this._previouslySelected.add(h),c=h)}},{priority:"low"}),t.addObserver(Ou),this.listenTo(i,"mousedown",(...s)=>this._onMousedown(...s)),this.listenTo(i,"arrowKey",(...s)=>{this._handleSelectionChangeOnArrowKeyPress(...s)},{context:[Pe,"$text"]}),this.listenTo(i,"arrowKey",(...s)=>{this._preventDefaultOnArrowKeyPress(...s)},{context:"$root"}),this.listenTo(i,"arrowKey",k8(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(s,o)=>{this._handleDelete(o.direction=="forward")&&(o.preventDefault(),s.stop())},{context:"$root"})}_onMousedown(e,t){const i=this.editor,s=i.editing.view,o=s.document;let r=t.target;if(S8(r)){if((Z.isSafari||Z.isGecko)&&t.domEvent.detail>=3){const l=i.editing.mapper,c=r.is("attributeElement")?r.findAncestor(d=>!d.is("attributeElement")):r,u=l.toModelElement(c);t.preventDefault(),this.editor.model.change(d=>{d.setSelection(u,"in")})}return}if(!Pe(r)&&(r=r.findAncestor(Pe),!r))return;Z.isAndroid&&t.preventDefault(),o.isFocused||s.focus();const a=i.editing.mapper.toModelElement(r);this._setSelectionOverElement(a)}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,s=this.editor.model,o=s.schema,r=s.document.selection,a=r.getSelectedElement(),l=Au(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",u=l=="up"||l=="down";if(a&&o.isObject(a)){const h=c?r.getLastPosition():r.getFirstPosition(),f=o.getNearestSelectionRange(h,c?"forward":"backward");f&&(s.change(p=>{p.setSelection(f)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed&&!t.shiftKey){const h=r.getFirstPosition(),f=r.getLastPosition(),p=h.nodeAfter,b=f.nodeBefore;(p&&o.isObject(p)||b&&o.isObject(b))&&(s.change(x=>{x.setSelection(c?f:h)}),t.preventDefault(),e.stop());return}if(!r.isCollapsed)return;const d=this._getObjectElementNextToSelection(c);if(d&&o.isObject(d)){if(o.isInline(d)&&u)return;this._setSelectionOverElement(d),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,s=i.schema,o=i.document.selection.getSelectedElement();o&&s.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){if(this.editor.isReadOnly)return;const i=this.editor.model.document.selection;if(!i.isCollapsed)return;const s=this._getObjectElementNextToSelection(e);if(s)return this.editor.model.change(o=>{let r=i.anchor.parent;for(;r.isEmpty;){const a=r;r=a.parent,o.remove(a)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,s=t.document.selection,o=t.createSelection(s);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(s))return null;const r=e?o.focus.nodeBefore:o.focus.nodeAfter;return r&&i.isObject(r)?r:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(T0,t);this._previouslySelected.clear()}}function S8(n){let e=n;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(Pe(e))return!1;e=e.parent}return!1}function A8(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jc extends k{static get requires(){return[Un]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",i=>{I8(e.editing.view.document.selection)&&i.stop()},{priority:"high"})}this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:s,balloonClassName:o="ck-toolbar-container"}){if(!i.length){Ce("widget-toolbar-no-items",{toolbarId:e});return}const r=this.editor,a=r.t,l=new Jo(r.locale);if(l.ariaLabel=t||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new y("widget-toolbar-duplicated",this,{toolbarId:e});const c={view:l,getRelatedElement:s,balloonClassName:o,itemsConfig:i,initialized:!1};r.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const u=s(r.editing.view.document.selection);u&&this._showToolbar(c,u)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(e,c)}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const s of this._toolbarDefinitions.values()){const o=s.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(s)&&this._hideToolbar(s);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(s)&&this._hideToolbar(s);else{const r=o.getAncestors().length;r>e&&(e=r,t=o,i=s)}}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?I0(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:e2(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const i of this._toolbarDefinitions.values())if(this._isToolbarVisible(i)){const s=i.getRelatedElement(this.editor.editing.view.document.selection);I0(this.editor,s)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function I0(n,e){const t=n.plugins.get("ContextualBalloon"),i=e2(n,e);t.updatePosition(i)}function e2(n,e){const t=n.editing.view,i=ft.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}function I8(n){const e=n.getSelectedElement();return!!(e&&Pe(e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P8 extends se(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){const s=new te(t);this.activeHandlePosition=O8(e),this._referenceCoordinates=V8(t,M8(this.activeHandlePosition)),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height;const o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=R8(i,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function R8(n,e){const t=n.parentElement,i=parseFloat(t.ownerDocument.defaultView.getComputedStyle(t).width);return e.width/i*100}function V8(n,e){const t=new te(n),i=e.split("-"),s={x:i[1]=="right"?t.right:t.left,y:i[0]=="bottom"?t.bottom:t.top};return s.x+=n.ownerDocument.defaultView.scrollX,s.y+=n.ownerDocument.defaultView.scrollY,s}function L8(n){return`ck-widget__resizer__handle-${n}`}function O8(n){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(n.classList.contains(L8(t)))return t}function M8(n){const e=n.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N8 extends B{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(i,s)=>i!==null&&s!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(i,s,o)=>e.unit==="px"?`${i}${s}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(i,s,o)=>s<50||o<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P0 extends se(){constructor(e){super(),this._options=e,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,i)=>t&&i),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(s=>{const o=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(r){const a=this.toDomElement(r);return e._appendHandles(a),e._appendSizeUI(a),a});s.insert(s.createPositionAt(t,"end"),o),s.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new P8(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{const u=this._options.unit||"%",d=(u==="%"?t.widthPercents:t.width)+u;c.setStyle("width",d,this._options.viewElement)});const s=this._getHandleHost(),o=new te(s),r=Math.round(o.width),a=Math.round(o.height),l=new te(s);t.width=Math.round(l.width),t.height=Math.round(l.height),this.redraw(o),this.state.update({...t,handleHostWidth:r,handleHostHeight:a})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!D8(t))return;const i=t.parentElement,s=this._getHandleHost(),o=this._viewResizerWrapper,r=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let a;if(i.isSameNode(s)){const l=e||new te(s);a=[l.width+"px",l.height+"px",void 0,void 0]}else a=[s.offsetWidth+"px",s.offsetHeight+"px",s.offsetLeft+"px",s.offsetTop+"px"];dt(r,a)!=="same"&&this._options.editor.editing.view.change(l=>{l.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,i=F8(e),s=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};s&&t.activeHandlePosition.endsWith("-right")&&(o.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),s&&(o.x*=2);let r=Math.abs(t.originalWidth+o.x),a=Math.abs(t.originalHeight+o.y);return(r/t.aspectRatio>a?"width":"height")=="width"?a=r/t.aspectRatio:r=a*t.aspectRatio,{width:Math.round(r),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*r*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const i of t)e.appendChild(new bt({tag:"div",attributes:{class:`ck-widget__resizer__handle ${B8(i)}`}}).render())}_appendSizeUI(e){this._sizeView=new N8,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function B8(n){return`ck-widget__resizer__handle-${n}`}function F8(n){return{x:n.pageX,y:n.pageY}}function D8(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ah extends k{static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=W.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),this._resizers=new Map,e.view.addObserver(Ou),this._observer=new(gi()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=xu(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[s,o]of this._resizers)s.isAttached()||(this._resizers.delete(s),o.destroy())},{priority:"lowest"}),this._observer.listenTo(W.window,"resize",this._redrawSelectedResizerThrottled);const i=this.editor.editing.view.document.selection;i.on("change",()=>{const s=i.getSelectedElement(),o=this.getResizerByViewElement(s)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new P0(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const r=i.get("WidgetToolbarRepository");t.on("begin",()=>{r.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{r.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{r.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const i=t.domTarget;P0.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z8 extends k{static get pluginName(){return"DragDrop"}static get requires(){return[$n,Yi]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=xu(i=>this._updateDropMarker(i),40),this._removeDropMarkerDelayed=L0(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=L0(()=>this._clearDraggableAttributes(),40),t.addObserver(ip),t.addObserver(Ou),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,s,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,s,o)=>{o||this._finalizeDragging(!1)}),Z.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,i=t.document,s=e.editing.view,o=s.document;this.listenTo(o,"dragstart",(r,a)=>{const l=i.selection;if(a.target&&a.target.is("editableElement")){a.preventDefault();return}const c=a.target?O0(a.target):null;if(c){const h=e.editing.mapper.toModelElement(c);this._draggedRange=an.fromRange(t.createRangeOn(h)),e.plugins.has("WidgetToolbarRepository")&&e.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!o.selection.isCollapsed){const h=o.selection.getSelectedElement();(!h||!Pe(h))&&(this._draggedRange=an.fromRange(l.getFirstRange()))}if(!this._draggedRange){a.preventDefault();return}this._draggingUid=sn(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const u=t.createSelection(this._draggedRange.toRange()),d=e.data.toView(t.getSelectedContent(u));o.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:d,method:"dragstart"}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(o,"dragend",(r,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this.listenTo(o,"dragenter",()=>{this.isEnabled&&s.focus()}),this.listenTo(o,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(o,"dragging",(r,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}this._removeDropMarkerDelayed.cancel();const l=R0(e,a.targetRanges,a.target);this._draggedRange||(a.dataTransfer.dropEffect="copy"),Z.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),l&&this._updateDropMarkerThrottled(l)},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"clipboardInput",(s,o)=>{if(o.method!="drop")return;const r=R0(e,o.targetRanges,o.target);if(this._removeDropMarker(),!r){this._finalizeDragging(!1),s.stop();return}if(this._draggedRange&&this._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),V0(o.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(r,!0)){this._finalizeDragging(!1),s.stop();return}o.targetRanges=[e.editing.mapper.toViewRange(r)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get($n);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=i.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(s))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=V0(i.dataTransfer)=="move",o=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(o&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(s,o)=>{if(Z.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let r=O0(o.target);if(Z.isBlink&&!e.isReadOnly&&!r&&!i.selection.isCollapsed){const a=i.selection.getSelectedElement();(!a||!Pe(a))&&(r=i.selection.editableElement)}r&&(t.change(a=>{a.setAttribute("draggable","true",r)}),this._draggableElement=e.editing.mapper.toModelElement(r))}),this.listenTo(i,"mouseup",()=>{Z.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return i.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(o){const r=this.toDomElement(o);return r.append("",o.createElement("span"),""),r})}})}_updateDropMarker(e){const t=this.editor,i=t.model.markers;t.model.change(s=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||s.updateMarker("drop-target",{range:e}):s.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){const e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_finalizeDragging(e){const t=this.editor,i=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&i.deleteContent(i.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function R0(n,e,t){const i=n.model,s=n.editing.mapper;let o=null;const r=e?e[0].start:null;if(t.is("uiElement")&&(t=t.parent),o=H8(n,t),o)return o;const a=j8(n,t),l=r?s.toModelPosition(r):null;return l?(o=$8(n,l,a),o||(o=i.schema.getNearestSelectionRange(l,Z.isGecko?"forward":"backward"),o)?o:W8(n,l.parent)):U8(n,a)}function H8(n,e){const t=n.model,i=n.editing.mapper;if(Pe(e))return t.createRangeOn(i.toModelElement(e));if(!e.is("editableElement")){const s=e.findAncestor(o=>Pe(o)||o.is("editableElement"));if(Pe(s))return t.createRangeOn(i.toModelElement(s))}return null}function U8(n,e){const t=n.model,i=t.schema,s=t.createPositionAt(e,0);return i.getNearestSelectionRange(s,"forward")}function $8(n,e,t){const i=n.model;if(!i.schema.checkChild(t,"$block"))return null;const s=i.createPositionAt(t,0),o=e.path.slice(0,s.path.length),a=i.createPositionFromPath(e.root,o).nodeAfter;return a&&i.schema.isObject(a)?i.createRangeOn(a):null}function W8(n,e){const t=n.model;let i=e;for(;i;){if(t.schema.isObject(i))return t.createRangeOn(i);i=i.parent}return null}function j8(n,e){const t=n.editing.mapper,i=n.editing.view,s=t.toModelElement(e);if(s)return s;const o=i.createPositionBefore(e),r=t.findMappedViewAncestor(o);return t.toModelElement(r)}function V0(n){return Z.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function L0(n,e){let t;function i(...s){i.cancel(),t=setTimeout(()=>n(...s),e)}return i.cancel=()=>{clearTimeout(t)},i}function O0(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Pe);if(Pe(n))return n;const e=n.findAncestor(t=>Pe(t)||t.is("editableElement"));return Pe(e)?e:null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q8 extends k{static get pluginName(){return"PastePlainText"}static get requires(){return[$n]}init(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,o=t.document.selection;let r=!1;i.addObserver(ip),this.listenTo(s,"keydown",(a,l)=>{r=l.shiftKey}),e.plugins.get($n).on("contentInsertion",(a,l)=>{!r&&!G8(l.content,t.schema)||t.change(c=>{const u=Array.from(o.getAttributes()).filter(([h])=>t.schema.getAttributeProperties(h).isFormatting);o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),u.push(...o.getAttributes());const d=c.createRangeIn(l.content);for(const h of d.getItems())h.is("$textProxy")&&c.setAttributes(u,h)})})}}function G8(n,e){if(n.childCount>1)return!1;const t=n.getChild(0);return e.isObject(t)?!1:Array.from(t.getAttributeKeys()).length==0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class op extends k{static get pluginName(){return"Clipboard"}static get requires(){return[$n,z8,q8]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t2 extends F{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(e.data,"set",(t,i)=>{i[1]={...i[1]};const s=i[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const s=this.editor.model,o=s.document,r=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(const c of a){const u=c.filter(d=>d.root!=o.graveyard).filter(d=>!Q8(d,l));u.length&&(K8(u),r.push(u[0]))}r.length&&s.change(c=>{c.setSelection(r,{backward:t})})}_undo(e,t){const i=this.editor.model,s=i.document;this._createdBatches.add(t);const o=e.operations.slice().filter(r=>r.isDocumentOperation);o.reverse();for(const r of o){const a=r.baseVersion+1,l=Array.from(s.history.getOperations(a)),u=IO([r.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const d of u)t.addOperation(d),i.applyOperation(d),s.history.setOperationAsUndone(r,d)}}}function K8(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function Q8(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J8 extends t2{execute(e=null){const t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(i.batch,s);const o=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,o),this.fire("revert",i.batch,s)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y8 extends t2{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const s=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(s);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X8 extends k{static get pluginName(){return"UndoEditing"}constructor(e){super(e),this._batchRegistry=new WeakSet}init(){const e=this.editor;this._undoCommand=new J8(e),this._redoCommand=new Y8(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(t,i)=>{const s=i[0];if(!s.isDocumentOperation)return;const o=s.batch,r=this._redoCommand._createdBatches.has(o),a=this._undoCommand._createdBatches.has(o);this._batchRegistry.has(o)||(this._batchRegistry.add(o),o.isUndoable&&(r?this._undoCommand.addBatch(o):a||(this._undoCommand.addBatch(o),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(t,i,s)=>{this._redoCommand.addBatch(s)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}const M0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',N0='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z8 extends k{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?M0:N0,o=t.uiLanguageDirection=="ltr"?N0:M0;this._addButton("undo",i("Undo"),"CTRL+Z",s),this._addButton("redo",i("Redo"),"CTRL+Y",o)}_addButton(e,t,i,s){const o=this.editor;o.ui.componentFactory.add(e,r=>{const a=o.commands.get(e),l=new z(r);return l.set({label:t,icon:s,keystroke:i,tooltip:!0}),l.bind("isEnabled").to(a,"isEnabled"),this.listenTo(l,"execute",()=>{o.execute(e),o.editing.view.focus()}),l})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rp extends k{static get requires(){return[X8,Z8]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function eF(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function B0(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot()])}function n2(n,e){const t=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?i&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:s(o):null;function s(o){const r={name:!0};return o.hasAttribute("src")&&(r.attributes=["src"]),r}}function ap(n,e){const t=de(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jt extends k{static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null){const s=this.editor,o=s.model,r=o.document.selection;i=i2(s,t||r,i),e={...Object.fromEntries(r.getAttributes()),...e};for(const a in e)o.schema.checkAttribute(i,a)||delete e[a];return o.change(a=>{const l=a.createElement(i,e);return o.insertObject(l,t,null,{setSelection:"on",findOptimalPosition:!t&&i!="imageInline"}),l.parent?l:null})}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const i=e.getSelectedElement();if(i&&this.isImageWidget(i))return i;let s=t.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){const t=this.editor.model.document.selection;return tF(this.editor,t)&&nF(t)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),cr(e,t,{label:()=>{const r=this.findViewImgElement(e).getAttribute("alt");return r?`${r} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Pe(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}}function tF(n,e){if(i2(n,e)=="imageBlock"){const i=iF(e,n.model);if(n.model.schema.checkChild(i,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function nF(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function iF(n,e){const i=Ga(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function i2(n,e,t){const i=n.model.schema,s=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(s==="inline"?"imageInline":s==="block"?"imageBlock":e.is("selection")?ap(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sF=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class oF extends k{static get requires(){return[op,jt,rp,pi]}static get pluginName(){return"AutoImage"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",()=>{const i=t.selection.getFirstRange(),s=We.fromPosition(i.start);s.stickiness="toPrevious";const o=We.fromPosition(i.end);o.stickiness="toNext",t.once("change:data",()=>{this._embedImageBetweenPositions(s,o),s.detach(),o.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(W.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,t){const i=this.editor,s=new an(e,t),o=s.getWalker({ignoreElementEnd:!0}),r=Object.fromEntries(i.model.document.selection.getAttributes()),a=this.editor.plugins.get("ImageUtils");let l="";for(const c of o)c.item.is("$textProxy")&&(l+=c.item.data);if(l=l.trim(),!l.match(sF)){s.detach();return}this._positionToInsert=We.fromPosition(e),this._timeoutId=W.window.setTimeout(()=>{if(!i.commands.get("insertImage").isEnabled){s.detach();return}i.model.change(u=>{this._timeoutId=null,u.remove(s),s.detach();let d;this._positionToInsert.root.rootName!=="$graveyard"&&(d=this._positionToInsert.toPosition()),a.insertImage({...r,src:l},d),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get("Delete").requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rF=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,aF=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,lF=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,cF=/^((\w+:(\/{2,})?)|(\W))/i,oc="Ctrl+K";function uF(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function F0(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function s2(n){return n=String(n),dF(n)?n:"#"}function dF(n){return n.replace(rF,"").match(aF)}function hF(n,e){const t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(i=>(i.label&&t[i.label]&&(i.label=t[i.label]),i)),e}function fF(n){const e=[];if(n)for(const[t,i]of Object.entries(n)){const s=Object.assign({},i,{id:`link${A4(t)}`});e.push(s)}return e}function nm(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function mF(n){return lF.test(n)}function lp(n,e){const t=mF(n)?"mailto:":e,i=!!t&&!o2(n);return n&&i?t+n:n}function o2(n){return cF.test(n)}function D0(n){window.open(n,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gF=4,pF=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),wF=2;class r2 extends k{static get requires(){return[pi]}static get pluginName(){return"AutoLink"}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const e=this.editor,t=new np(e.model,i=>{if(!bF(i))return;const s=z0(i.substr(0,i.length-1));if(s)return{url:s}});t.on("matched:data",(i,s)=>{const{batch:o,range:r,url:a}=s;if(!o.isTyping)return;const l=r.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=e.model.createRange(c,l);this._applyAutoLink(a,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition();if(!s.parent.previousSibling)return;const o=t.createRangeIn(s.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:s}=qx(e,t),o=z0(i);if(o){const r=t.createRange(s.end.getShiftedBy(-o.length),s.end);this._applyAutoLink(o,r)}}_applyAutoLink(e,t){const i=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),o=lp(e,s);!this.isEnabled||!vF(t,i)||!o2(o)||_F(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const i=this.editor.model,s=this.editor.plugins.get("Delete");i.enqueueChange(o=>{o.setAttribute("linkHref",e,t),i.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function bF(n){return n.length>gF&&n[n.length-1]===" "&&n[n.length-2]!==" "}function z0(n){const e=pF.exec(n);return e?e[wF]:null}function vF(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function _F(n){const e=n.start.nodeAfter;return e&&e.hasAttribute("linkHref")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yF extends F{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,s=t.document.selection,o=Array.from(s.getSelectedBlocks()),r=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!r)this._removeQuote(a,o.filter(Nl));else{const l=o.filter(c=>Nl(c)||U0(i,c));this._applyQuote(a,l)}})}_getValue(){const e=this.editor.model.document.selection,t=de(e.getSelectedBlocks());return!!(t&&Nl(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=de(e.getSelectedBlocks());return i?U0(t,i):!1}_removeQuote(e,t){H0(e,t).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd){e.unwrap(i.start.parent);return}if(i.start.isAtStart){const o=e.createPositionBefore(i.start.parent);e.move(i,o);return}i.end.isAtEnd||e.split(i.end);const s=e.createPositionAfter(i.end.parent);e.move(i,s)})}_applyQuote(e,t){const i=[];H0(e,t).reverse().forEach(s=>{let o=Nl(s.start);o||(o=e.createElement("blockQuote"),e.wrap(s,o)),i.push(o)}),i.reverse().reduce((s,o)=>s.nextSibling==o?(e.merge(e.createPositionAfter(s)),s):o)}}function Nl(n){return n.parent.name=="blockQuote"?n.parent:null}function H0(n,e){let t,i=0;const s=[];for(;i<e.length;){const o=e[i],r=e[i+1];t||(t=n.createPositionBefore(o)),(!r||o.nextSibling!=r)&&(s.push(n.createRange(t,n.createPositionAfter(o))),t=null),i++}return s}function U0(n,e){const t=n.checkChild(e.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],e);return t&&i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CF extends k{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[zu,pi]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new yF(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(r=>{const a=e.model.document.differ.getChanges();for(const l of a)if(l.type=="insert"){const c=l.position.nodeAfter;if(!c)continue;if(c.is("element","blockQuote")&&c.isEmpty)return r.remove(c),!0;if(c.is("element","blockQuote")&&!t.checkChild(l.position,c))return r.unwrap(c),!0;if(c.is("element")){const u=r.createRangeIn(c);for(const d of u.getItems())if(d.is("element","blockQuote")&&!t.checkChild(r.createPositionBefore(d),d))return r.unwrap(d),!0}}else if(l.type=="remove"){const c=l.position.parent;if(c.is("element","blockQuote")&&c.isEmpty)return r.remove(c),!0}return!1});const i=this.editor.editing.view.document,s=e.model.document.selection,o=e.commands.get("blockQuote");this.listenTo(i,"enter",(r,a)=>{if(!s.isCollapsed||!o.value)return;s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(r,a)=>{if(a.direction!="backward"||!s.isCollapsed||!o.value)return;const l=s.getLastPosition().parent;l.isEmpty&&!l.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),r.stop())},{context:"blockquote"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kF extends k{static get pluginName(){return"BlockQuoteUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("blockQuote",i=>{const s=e.commands.get("blockQuote"),o=new z(i);return o.set({label:t("Block quote"),icon:H.quote,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute("blockQuote"),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xF extends k{static get requires(){return[CF,kF]}static get pluginName(){return"BlockQuote"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gs extends F{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(r=>{if(s.isCollapsed)o?r.setSelectionAttribute(this.attributeKey,!0):r.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const l of a)o?r.setAttribute(this.attributeKey,o,l):r.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const s of i.getRanges())for(const o of s.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const uo="bold";class TF extends k{static get pluginName(){return"BoldEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:uo}),e.model.schema.setAttributeProperties(uo,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:uo,view:"strong",upcastAlso:["b",t=>{const i=t.getStyle("font-weight");return i&&(i=="bold"||Number(i)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(uo,new Gs(e,uo)),e.keystrokes.set("CTRL+B",uo)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lh="bold";class EF extends k{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(lh,i=>{const s=e.commands.get(lh),o=new z(i);return o.set({label:t("Bold"),icon:H.bold,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(lh),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SF extends k{static get requires(){return[TF,EF]}static get pluginName(){return"Bold"}}const AF='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IF extends k{static get pluginName(){return"CKBoxUI"}afterInit(){const e=this.editor;if(!e.commands.get("ckbox"))return;const t=e.t;e.ui.componentFactory.add("ckbox",s=>{const o=e.commands.get("ckbox"),r=new z(s);return r.set({label:t("Open file manager"),icon:AF,tooltip:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.on("execute",()=>{e.execute("ckbox")}),r})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const PF=4e3,RF=80,VF=10;function a2({token:n,id:e,origin:t,width:i,extension:s}){const o=l2(n),r=LF(i),a=OF(s),l=$0({environmentId:o,id:e,origin:t,width:i,extension:a}),u=[{srcset:r.map(d=>`${$0({environmentId:o,id:e,origin:t,width:d,extension:"webp"})} ${d}w`).join(","),sizes:`(max-width: ${i}px) 100vw, ${i}px`,type:"image/webp"}];return{imageFallbackUrl:l,imageSources:u}}function l2(n){const[,e]=n.value.split(".");return JSON.parse(atob(e)).aud}function LF(n){const e=[n*VF/100,RF],t=Math.floor(Math.max(...e)),i=[Math.min(n,PF)];let s=i[0];for(;s-t>=t;)s-=t,i.unshift(s);return i}function OF(n){return n==="bmp"||n==="tiff"||n==="jpg"?"jpeg":n}function $0({environmentId:n,id:e,origin:t,width:i,extension:s}){const o=`${n}/assets/${e}/images/${i}.${s}`;return new URL(o,t).toString()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const MF=1e3;class NF extends F{constructor(e){super(e),this._chosenAssets=new Set,this._wrapper=null,this._initListeners()}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){this.fire("ckbox:open")}_getValue(){return this._wrapper!==null}_checkEnabled(){const e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");return!(!e.isEnabled&&!t.isEnabled)}_prepareOptions(){const t=this.editor.config.get("ckbox");return{theme:t.theme,language:t.language,tokenUrl:t.tokenUrl,serviceOrigin:t.serviceOrigin,assetsOrigin:t.assetsOrigin,dialog:{onClose:()=>this.fire("ckbox:close")},assets:{onChoose:i=>this.fire("ckbox:choose",i)}}}_initListeners(){const e=this.editor,t=e.model,i=!e.config.get("ckbox.ignoreDataId");this.on("ckbox",()=>{this.refresh()},{priority:"low"}),this.on("ckbox:open",()=>{!this.isEnabled||this.value||(this._wrapper=On(document,"div",{class:"ck ckbox-wrapper"}),document.body.appendChild(this._wrapper),window.CKBox.mount(this._wrapper,this._prepareOptions()))}),this.on("ckbox:close",()=>{this.value&&(this._wrapper.remove(),this._wrapper=null)}),this.on("ckbox:choose",(s,o)=>{if(!this.isEnabled)return;const r=e.commands.get("insertImage"),a=e.commands.get("link"),l=e.plugins.get("CKBoxEditing"),c=e.config.get("ckbox.assetsOrigin"),u=BF({assets:o,origin:c,token:l.getToken(),isImageAllowed:r.isEnabled,isLinkAllowed:a.isEnabled});u.length!==0&&t.change(d=>{for(const h of u){const f=h===u[u.length-1];this._insertAsset(h,f,d),i&&(setTimeout(()=>this._chosenAssets.delete(h),MF),this._chosenAssets.add(h))}})}),this.listenTo(e,"destroy",()=>{this.fire("ckbox:close"),this._chosenAssets.clear()})}_insertAsset(e,t,i){const r=this.editor.model.document.selection;i.removeSelectionAttribute("linkHref"),e.type==="image"?this._insertImage(e):this._insertLink(e,i),t||i.setSelection(r.getLastPosition())}_insertImage(e){const t=this.editor,{imageFallbackUrl:i,imageSources:s,imageTextAlternative:o}=e.attributes;t.execute("insertImage",{source:{src:i,sources:s,alt:o}})}_insertLink(e,t){const i=this.editor,s=i.model,o=s.document.selection,{linkName:r,linkHref:a}=e.attributes;if(o.isCollapsed){const l=rn(o.getAttributes()),c=t.createText(r,l),u=s.insertContent(c);t.setSelection(u)}i.execute("link",a)}}function BF({assets:n,origin:e,token:t,isImageAllowed:i,isLinkAllowed:s}){return n.map(o=>({id:o.data.id,type:c2(o)?"image":"link",attributes:FF(o,t,e)})).filter(o=>o.type==="image"?i:s)}function FF(n,e,t){if(c2(n)){const{imageFallbackUrl:i,imageSources:s}=a2({token:e,origin:t,id:n.data.id,width:n.data.metadata.width,extension:n.data.extension});return{imageFallbackUrl:i,imageSources:s,imageTextAlternative:n.data.metadata.description||""}}return{linkName:n.data.name,linkHref:DF(n,e,t)}}function c2(n){const e=n.data.metadata;return e?e.width&&e.height:!1}function DF(n,e,t){const i=l2(e),s=new URL(`${i}/assets/${n.data.id}/file`,t);return s.searchParams.set("download","true"),s.toString()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zF extends se(){constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((i,s)=>{t.onload=()=>{const o=t.result;this._data=o,i(o)},t.onerror=()=>{s("error")},t.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xs extends k{static get pluginName(){return"FileRepository"}static get requires(){return[jc]}init(){this.loaders=new xe,this.loaders.on("change",()=>this._updatePendingAction()),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Ce("filerepository-no-upload-adapter"),null;const t=new W0(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(i=>{this._loadersMap.set(i,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let i=0;for(const s of this.loaders)i+=s.uploaded;this.uploaded=i}),t.on("change:uploadTotal",()=>{let i=0;for(const s of this.loaders)s.uploadTotal&&(i+=s.uploadTotal);this.uploadTotal=i}),t}destroyLoader(e){const t=e instanceof W0?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((i,s)=>{i===t&&this._loadersMap.delete(s)})}_updatePendingAction(){const e=this.editor.plugins.get(jc);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=s=>`${t("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}class W0 extends se(){constructor(e,t){super(),this.id=sn(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new zF,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,s)=>s?i/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new y("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new y("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((i,s)=>{t.rejecter=s,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,i(o)}).catch(o=>{t.isFulfilled=!0,s(o)})}),t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HF extends B{constructor(e){super(e),this.buttonView=new z(e),this._fileInputView=new UF(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class UF extends B{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $F extends k{static get requires(){return["ImageUploadEditing","ImageUploadProgress",xs,im]}static get pluginName(){return"CKBoxUploadAdapter"}async afterInit(){const e=this.editor,t=!!e.config.get("ckbox"),i=!!window.CKBox;if(!t&&!i)return;const s=e.plugins.get(xs),o=e.plugins.get(im);s.createUploadAdapter=l=>new WF(l,o.getToken(),e);const r=!e.config.get("ckbox.ignoreDataId"),a=e.plugins.get("ImageUploadEditing");r&&a.on("uploadComplete",(l,{imageElement:c,data:u})=>{e.model.change(d=>{d.setAttribute("ckboxImageId",u.ckboxImageId,c)})})}}class WF{constructor(e,t,i){this.loader=e,this.token=t,this.editor=i,this.controller=new AbortController,this.serviceOrigin=i.config.get("ckbox.serviceOrigin"),this.assetsOrigin=i.config.get("ckbox.assetsOrigin")}async getAvailableCategories(e=0){const i=new URL("categories",this.serviceOrigin);return i.searchParams.set("limit",50 .toString()),i.searchParams.set("offset",e.toString()),this._sendHttpRequest({url:i}).then(async s=>{if(s.totalCount-(e+50)>0){const r=await this.getAvailableCategories(e+50);return[...s.items,...r]}return s.items}).catch(()=>{this.controller.signal.throwIfAborted(),wC("ckbox-fetch-category-http-error")})}async getCategoryIdForFile(e){const t=j0(e.name),i=await this.getAvailableCategories();if(!i)return null;const s=this.editor.config.get("ckbox.defaultUploadCategories");if(s){const r=Object.keys(s).find(a=>s[a].includes(t));if(r){const a=i.find(l=>l.id===r||l.name===r);return a?a.id:null}}const o=i.find(r=>r.extensions.includes(t));return o?o.id:null}async upload(){const e=this.editor.t,t=e("Cannot determine a category for the uploaded file."),i=await this.loader.file,s=await this.getCategoryIdForFile(i);if(!s)return Promise.reject(t);const o=new URL("assets",this.serviceOrigin),r=new FormData;r.append("categoryId",s),r.append("file",i);const a={method:"POST",url:o,data:r,onUploadProgress:l=>{l.lengthComputable&&(this.loader.uploadTotal=l.total,this.loader.uploaded=l.loaded)}};return this._sendHttpRequest(a).then(async l=>{const c=await this._getImageWidth(),u=j0(i.name),d=a2({token:this.token,id:l.id,origin:this.assetsOrigin,width:c,extension:u});return{ckboxImageId:l.id,default:d.imageFallbackUrl,sources:d.imageSources}}).catch(()=>{const l=e("Cannot upload file:")+` ${i.name}.`;return Promise.reject(l)})}abort(){this.controller.abort()}_sendHttpRequest(e){const{url:t,data:i,onUploadProgress:s}=e,o=e.method||"GET",r=this.controller.signal,a=new XMLHttpRequest;a.open(o,t.toString(),!0),a.setRequestHeader("Authorization",this.token.value),a.setRequestHeader("CKBox-Version","CKEditor 5"),a.responseType="json";const l=()=>{a.abort()};return new Promise((c,u)=>{r.addEventListener("abort",l),a.addEventListener("loadstart",()=>{r.addEventListener("abort",l)}),a.addEventListener("loadend",()=>{r.removeEventListener("abort",l)}),a.addEventListener("error",()=>{u()}),a.addEventListener("abort",()=>{u()}),a.addEventListener("load",async()=>{const d=a.response;return!d||d.statusCode>=400?u(d&&d.message):c(d)}),s&&a.upload.addEventListener("progress",d=>{s(d)}),a.send(i)})}_getImageWidth(){return new Promise(e=>{const t=new Image;t.onload=()=>{URL.revokeObjectURL(t.src),e(t.width)},t.src=this.loader.data})}}function j0(n){const e=/\.(?<ext>[^.]+)$/;return n.match(e).groups.ext}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class im extends k{static get pluginName(){return"CKBoxEditing"}static get requires(){return["CloudServices","LinkEditing","PictureEditing",$F]}async init(){const e=this.editor,t=!!e.config.get("ckbox"),i=!!window.CKBox;if(!t&&!i)return;this._initConfig();const s=e.plugins.get("CloudServicesCore"),o=e.config.get("ckbox.tokenUrl"),r=e.config.get("cloudServices.tokenUrl");o===r?this._token=e.plugins.get("CloudServices").token:this._token=await s.createToken(o).init(),e.config.get("ckbox.ignoreDataId")||(this._initSchema(),this._initConversion(),this._initFixers()),i&&e.commands.add("ckbox",new NF(e))}getToken(){return this._token}_initConfig(){const e=this.editor;if(e.config.define("ckbox",{serviceOrigin:"https://api.ckbox.io",assetsOrigin:"https://ckbox.cloud",defaultUploadCategories:null,ignoreDataId:!1,language:e.locale.uiLanguage,theme:"default",tokenUrl:e.config.get("cloudServices.tokenUrl")}),!e.config.get("ckbox.tokenUrl"))throw new y("ckbox-plugin-missing-token-url",this);!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing")&&wC("ckbox-plugin-image-feature-missing",e)}_initSchema(){const t=this.editor.model.schema;t.extend("$text",{allowAttributes:"ckboxLinkId"}),t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["ckboxImageId","ckboxLinkId"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["ckboxImageId","ckboxLinkId"]}),t.addAttributeCheck((i,s)=>{if(!!!i.last.getAttribute("linkHref")&&s==="ckboxLinkId")return!1})}_initConversion(){const e=this.editor;e.conversion.for("downcast").add(t=>{t.on("attribute:ckboxLinkId:imageBlock",(i,s,o)=>{const{writer:r,mapper:a,consumable:l}=o;if(!l.consume(s.item,i.name))return;const u=[...a.toViewElement(s.item).getChildren()].find(d=>d.name==="a");u&&(s.item.hasAttribute("ckboxLinkId")?r.setAttribute("data-ckbox-resource-id",s.item.getAttribute("ckboxLinkId"),u):r.removeAttribute("data-ckbox-resource-id",u))},{priority:"low"}),t.on("attribute:ckboxLinkId",(i,s,o)=>{const{writer:r,mapper:a,consumable:l}=o;if(l.consume(s.item,i.name)){if(s.attributeOldValue){const c=q0(r,s.attributeOldValue);r.unwrap(a.toViewRange(s.range),c)}if(s.attributeNewValue){const c=q0(r,s.attributeNewValue);if(s.item.is("selection")){const u=r.document.selection;r.wrap(u.getFirstRange(),c)}else r.wrap(a.toViewRange(s.range),c)}}},{priority:"low"})}),e.conversion.for("upcast").add(t=>{t.on("element:a",(i,s,o)=>{const{writer:r,consumable:a}=o;if(!s.viewItem.getAttribute("href"))return;const l={attributes:["data-ckbox-resource-id"]};if(!a.consume(s.viewItem,l))return;const c=s.viewItem.getAttribute("data-ckbox-resource-id");if(c)if(s.modelRange)for(let u of s.modelRange.getItems())u.is("$textProxy")&&(u=u.textNode),KF(u)&&r.setAttribute("ckboxLinkId",c,u);else{const u=s.modelCursor.nodeBefore||s.modelCursor.parent;r.setAttribute("ckboxLinkId",c,u)}},{priority:"low"})}),e.conversion.for("downcast").attributeToAttribute({model:"ckboxImageId",view:"data-ckbox-resource-id"}),e.conversion.for("upcast").elementToAttribute({model:{key:"ckboxImageId",value:t=>t.getAttribute("data-ckbox-resource-id")},view:{attributes:{"data-ckbox-resource-id":/[\s\S]+/}}})}_initFixers(){const e=this.editor,t=e.model,i=t.document.selection;t.document.registerPostFixer(jF(e)),t.document.registerPostFixer(qF(i))}}function jF(n){return e=>{let t=!1;const i=n.model,s=n.commands.get("ckbox");if(!s)return t;for(const o of i.document.differ.getChanges()){if(o.type!=="insert"&&o.type!=="attribute")continue;const r=o.type==="insert"?new S(o.position,o.position.getShiftedBy(o.length)):o.range,a=o.type==="attribute"&&o.attributeKey==="linkHref"&&o.attributeNewValue===null;for(const l of r.getItems()){if(a&&l.hasAttribute("ckboxLinkId")){e.removeAttribute("ckboxLinkId",l),t=!0;continue}const c=GF(l,s._chosenAssets);for(const u of c){const d=u.type==="image"?"ckboxImageId":"ckboxLinkId";u.id!==l.getAttribute(d)&&(e.setAttribute(d,u.id,l),t=!0)}}}return t}}function qF(n){return e=>{!n.hasAttribute("linkHref")&&n.hasAttribute("ckboxLinkId")&&e.removeSelectionAttribute("ckboxLinkId")}}function GF(n,e){const t=n.is("element","imageInline")||n.is("element","imageBlock"),i=n.hasAttribute("linkHref");return[...e].filter(s=>{if(s.type==="image"&&t)return s.attributes.imageFallbackUrl===n.getAttribute("src");if(s.type==="link"&&i)return s.attributes.linkHref===n.getAttribute("linkHref")})}function q0(n,e){const t=n.createAttributeElement("a",{"data-ckbox-resource-id":e},{priority:5});return n.setCustomProperty("link",!0,t),t}function KF(n){return!!(n.is("$text")||n.is("element","imageInline")||n.is("element","imageBlock"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QF extends k{static get pluginName(){return"CKBox"}static get requires(){return[im,IF]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ch={autoRefresh:!0},G0=36e5;class Hu{constructor(e,t=ch){if(!e)throw new y("token-missing-token-url",this);t.initValue&&this._validateTokenValue(t.initValue),this.set("value",t.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>JF(e),this._options=Object.assign({},ch,t)}init(){return new Promise((e,t)=>{if(!this.value){this.refreshToken().then(e).catch(t);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){return this._refresh().then(e=>{this._validateTokenValue(e),this.set("value",e),this._options.autoRefresh&&this._registerRefreshTokenTimeout()}).then(()=>this)}destroy(){clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const t=typeof e=="string",i=!/^".*"$/.test(e),s=t&&e.split(".").length===3;if(!(i&&s))throw new y("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(){const e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},e)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:t}=JSON.parse(atob(e));return t?Math.floor((t*1e3-Date.now())/2):G0}catch{return G0}}static create(e,t=ch){return new Hu(e,t).init()}}Ua(Hu,se);function JF(n){return new Promise((e,t)=>{const i=new XMLHttpRequest;i.open("GET",n),i.addEventListener("load",()=>{const s=i.status,o=i.response;return s<200||s>299?t(new y("token-cannot-download-new-token",null)):e(o)}),i.addEventListener("error",()=>t(new Error("Network Error"))),i.addEventListener("abort",()=>t(new Error("Abort"))),i.send()})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sm=/^data:(\S*?);base64,/;class u2{constructor(e,t,i){if(!e)throw new y("fileuploader-missing-file",null);if(!t)throw new y("fileuploader-missing-token",null);if(!i)throw new y("fileuploader-missing-api-address",null);this.file=XF(e)?YF(e):e,this._token=t,this._apiAddress=i}onProgress(e){return this.on("progress",(t,i)=>e(i)),this}onError(e){return this.once("error",(t,i)=>e(i)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this,t=this.xhr;t.addEventListener("error",i("Network Error")),t.addEventListener("abort",i("Abort")),t.upload&&t.upload.addEventListener("progress",s=>{s.lengthComputable&&this.fire("progress",{total:s.total,uploaded:s.loaded})}),t.addEventListener("load",()=>{const s=t.status,o=t.response;if(s<200||s>299)return this.fire("error",o.message||o.error)});function i(s){return()=>e.fire("error",s)}}_sendRequest(){const e=new FormData,t=this.xhr;return e.append("file",this.file),new Promise((i,s)=>{t.addEventListener("load",()=>{const o=t.status,r=t.response;return o<200||o>299?r.message?s(new y("fileuploader-uploading-data-failed",this,{message:r.message})):s(r.error):i(r)}),t.addEventListener("error",()=>s(new Error("Network Error"))),t.addEventListener("abort",()=>s(new Error("Abort"))),t.send(e)})}}Ua(u2,ue);function YF(n,e=512){try{const t=n.match(sm)[1],i=atob(n.replace(sm,"")),s=[];for(let o=0;o<i.length;o+=e){const r=i.slice(o,o+e),a=new Array(r.length);for(let l=0;l<r.length;l++)a[l]=r.charCodeAt(l);s.push(new Uint8Array(a))}return new Blob(s,{type:t})}catch{throw new y("fileuploader-decoding-image-data-error",null)}}function XF(n){if(typeof n!="string")return!1;const e=n.match(sm);return!!(e&&e.length)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZF{constructor(e,t){if(!e)throw new y("uploadgateway-missing-token",null);if(!t)throw new y("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t}upload(e){return new u2(e,this._token,this._apiAddress)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eD extends Iu{static get pluginName(){return"CloudServicesCore"}createToken(e,t){return new Hu(e,t)}createUploadGateway(e,t){return new ZF(e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tD extends Iu{static get pluginName(){return"CloudServices"}static get requires(){return[eD]}init(){const t=this.context.config.get("cloudServices")||{};for(const i in t)this[i]=t[i];if(this._tokens=new Map,!this.tokenUrl){this.token=null;return}return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init()}registerTokenUrl(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));const t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init()}getTokenFor(e){const t=this._tokens.get(e);if(!t)throw new y("cloudservices-token-not-registered",this);return t}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nD extends vB{constructor(e,t){super(e),this.view=t,this._toolbarConfig=Mx(e.config.get("toolbar")),this._elementReplacer=new hk}get element(){return this.view.element}init(e){const t=this.editor,i=this.view,s=t.editing.view,o=i.editable,r=s.document.getRoot();o.name=r.rootName,i.render();const a=o.element;this.setEditableElement(o.name,a),i.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),s=e.sourceElement,o=e.config.get("placeholder")||s&&s.tagName.toLowerCase()==="textarea"&&s.getAttribute("placeholder");o&&Fg({view:t,element:i,text:o,isDirectHost:!1,keepOnFocus:!0})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iD extends yB{constructor(e,t,i={}){super(e),this.stickyPanel=new PB(e),this.toolbar=new Jo(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),this.editable=new kB(e,t)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sD extends nc(Yf(YM)){constructor(e,t={}){if(!rc(e)&&t.initialData!==void 0)throw new y("editor-create-initial-data",null);super(t),this.config.get("initialData")===void 0&&this.config.set("initialData",oD(e)),rc(e)&&(this.sourceElement=e),this.model.document.createRoot();const i=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=new iD(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i});this.ui=new nD(this,s),XM(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{const s=new this(e,t);i(s.initPlugins().then(()=>s.ui.init(rc(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function oD(n){return rc(n)?CV(n):n}function rc(n){return or(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const as="code",rD="ck-code_selected";class aD extends k{static get pluginName(){return"CodeEditing"}static get requires(){return[Kc]}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:as}),e.model.schema.setAttributeProperties(as,{isFormatting:!0,copyOnEnter:!1}),e.conversion.attributeToElement({model:as,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),e.commands.add(as,new Gs(e,as)),e.plugins.get(Kc).registerAttribute(as),Gx(e,as,"code",rD)}}const lD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const uh="code";class cD extends k{static get pluginName(){return"CodeUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(uh,i=>{const s=e.commands.get(uh),o=new z(i);return o.set({label:t("Code"),icon:lD,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(uh),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uD extends k{static get requires(){return[aD,cD]}static get pluginName(){return"Code"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cp(n){const e=n.t,t=n.config.get("codeBlock.languages");for(const i of t)i.label==="Plain text"&&(i.label=e("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return t}function om(n,e,t){const i={};for(const s of n)if(e==="class"){const o=s[e].split(" ").shift();i[o]=s[t]}else i[s[e]]=s[t];return i}function up(n){return n.data.match(/^(\s*)/)[0]}function dD(n,e){const t=n.createDocumentFragment(),i=e.split(`
`),s=i.reduce((o,r,a)=>(o.push(r),a<i.length-1&&o.push(n.createElement("br")),o),[]);return n.appendChild(s,t),t}function rm(n){const e=n.document.selection,t=[];if(e.isCollapsed)return[e.anchor];const i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:s}of i){if(!s.is("$textProxy"))continue;const{parent:o,startOffset:r}=s.textNode;if(!o.is("element","codeBlock"))continue;const a=up(s.textNode),l=n.createPositionAt(o,r+a.length);t.push(l)}return t}function d2(n){const e=de(n.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function K0(n,e){return e.is("rootElement")||n.isLimit(e)?!1:n.checkChild(e.parent,"codeBlock")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hD extends F{constructor(e){super(e),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor,i=t.model,s=i.document.selection,r=cp(t)[0],a=Array.from(s.getSelectedBlocks()),l=e.forceValue==null?!this.value:e.forceValue,c=fD(e,this._lastLanguage,r.language);i.change(u=>{l?this._applyCodeBlock(u,a,c):this._removeCodeBlock(u,a)})}_getValue(){const e=this.editor.model.document.selection,t=de(e.getSelectedBlocks());return!!(t&&t.is("element","codeBlock"))?t.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=de(e.getSelectedBlocks());return i?K0(t,i):!1}_applyCodeBlock(e,t,i){this._lastLanguage=i;const s=this.editor.model.schema,o=t.filter(r=>K0(s,r));for(const r of o)e.rename(r,"codeBlock"),e.setAttribute("language",i,r),s.removeDisallowedAttributes([r],e),Array.from(r.getChildren()).filter(a=>!s.checkChild(r,a)).forEach(a=>e.remove(a));o.reverse().forEach((r,a)=>{const l=o[a+1];r.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(r)))})}_removeCodeBlock(e,t){const i=t.filter(s=>s.is("element","codeBlock"));for(const s of i){const o=e.createRangeOn(s);for(const r of Array.from(o.getItems()).reverse())if(r.is("element","softBreak")&&r.parent.is("element","codeBlock")){const{position:a}=e.split(e.createPositionBefore(r)),l=a.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(r)}e.rename(s,"paragraph"),e.removeAttribute("language",s)}}}function fD(n,e,t){return n.language?n.language:n.usePreviousLanguageChoice&&e?e:t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mD extends F{constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(i=>{const s=rm(t);for(const o of s){const r=i.createText(this._indentSequence);t.insertContent(r,o)}})}_checkEnabled(){return this._indentSequence?d2(this.editor.model.document.selection):!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gD extends F{constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const t=this.editor.model;t.change(()=>{const i=rm(t);for(const s of i){const o=Q0(t,s,this._indentSequence);o&&t.deleteContent(t.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;const e=this.editor.model;return d2(e.document.selection)?rm(e).some(t=>Q0(e,t,this._indentSequence)):!1}}function Q0(n,e,t){const i=pD(e);if(!i)return null;const s=up(i),o=s.lastIndexOf(t);if(o+t.length!==s.length||o===-1)return null;const{parent:r,startOffset:a}=i;return n.createRange(n.createPositionAt(r,a+o),n.createPositionAt(r,a+o+t.length))}function pD(n){let e=n.parent.getChild(n.index);return(!e||e.is("element","softBreak"))&&(e=n.nodeBefore),!e||e.is("element","softBreak")?null:e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J0(n,e,t=!1){const i=om(e,"language","class"),s=om(e,"language","label");return(o,r,a)=>{const{writer:l,mapper:c,consumable:u}=a;if(!u.consume(r.item,"insert"))return;const d=r.item.getAttribute("language"),h=c.toViewPosition(n.createPositionBefore(r.item)),f={};t&&(f["data-language"]=s[d],f.spellcheck="false");const p=i[d]?{class:i[d]}:void 0,b=l.createContainerElement("code",p),x=l.createContainerElement("pre",f,b);l.insert(h,x),c.bindElements(r.item,b)}}function wD(n){return(e,t,i)=>{if(t.item.parent.name!=="codeBlock")return;const{writer:s,mapper:o,consumable:r}=i;if(!r.consume(t.item,"insert"))return;const a=o.toViewPosition(n.createPositionBefore(t.item));s.insert(a,s.createText(`
`))}}function bD(n,e){const t=om(e,"class","language"),i=e[0].language;return(s,o,r)=>{const a=o.viewItem,l=a.parent;if(!l||!l.is("element","pre")||o.modelCursor.findAncestor("codeBlock"))return;const{consumable:c,writer:u}=r;if(!c.test(a,{name:!0}))return;const d=u.createElement("codeBlock"),h=[...a.getClassNames()];h.length||h.push("");for(const f of h){const p=t[f];if(p){u.setAttribute("language",p,d);break}}d.hasAttribute("language")||u.setAttribute("language",i,d),r.convertChildren(a,d),r.safeInsert(d,o.modelCursor)&&(c.consume(a,{name:!0}),r.updateConversionResult(d,o))}}function vD(){return(n,e,{consumable:t,writer:i})=>{let s=e.modelCursor;if(!t.test(e.viewItem)||!s.findAncestor("codeBlock"))return;t.consume(e.viewItem);const r=e.viewItem.data.split(`
`).map(l=>i.createText(l)),a=r[r.length-1];for(const l of r)if(i.insert(l,s),s=s.getShiftedBy(l.offsetSize),l!==a){const c=i.createElement("softBreak");i.insert(c,s),s=i.createPositionAfter(c)}e.modelRange=i.createRange(e.modelCursor,s),e.modelCursor=s}}function _D(){return(n,e,{consumable:t})=>{const i=e.viewItem;if(i.findAncestor("pre"))return;const s=Array.from(i.getChildren()),o=s.find(r=>r.is("element","code"));if(o)for(const r of s)r===o||!r.is("$text")||t.consume(r,{name:!0})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const h2="paragraph";class yD extends k{static get pluginName(){return"CodeBlockEditing"}static get requires(){return[Yx]}constructor(e){super(e),e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const e=this.editor,t=e.model.schema,i=e.model,s=e.editing.view,o=e.plugins.has("DocumentListEditing"),r=cp(e);e.commands.add("codeBlock",new hD(e)),e.commands.add("indentCodeBlock",new mD(e)),e.commands.add("outdentCodeBlock",new gD(e)),this.listenTo(s.document,"tab",(a,l)=>{const c=l.shiftKey?"outdentCodeBlock":"indentCodeBlock";e.commands.get(c).isEnabled&&(e.execute(c),l.stopPropagation(),l.preventDefault(),a.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",isBlock:!0,allowAttributes:["language"]}),t.addAttributeCheck((a,l)=>{const c=a.endsWith("codeBlock")&&l.startsWith("list")&&l!=="list";if(o&&c)return!0;if(a.endsWith("codeBlock $text"))return!1}),e.model.schema.addChildCheck((a,l)=>{if(a.endsWith("codeBlock")&&l.isObject)return!1}),e.editing.downcastDispatcher.on("insert:codeBlock",J0(i,r,!0)),e.data.downcastDispatcher.on("insert:codeBlock",J0(i,r)),e.data.downcastDispatcher.on("insert:softBreak",wD(i),{priority:"high"}),e.data.upcastDispatcher.on("element:code",bD(s,r)),e.data.upcastDispatcher.on("text",vD()),e.data.upcastDispatcher.on("element:pre",_D(),{priority:"high"}),this.listenTo(e.editing.view.document,"clipboardInput",(a,l)=>{let c=i.createRange(i.document.selection.anchor);if(l.targetRanges&&(c=e.editing.mapper.toModelRange(l.targetRanges[0])),!c.start.parent.is("element","codeBlock"))return;const u=l.dataTransfer.getData("text/plain"),d=new $s(e.editing.view.document);l.content=dD(d,u)}),this.listenTo(i,"getSelectedContent",(a,[l])=>{const c=l.anchor;l.isCollapsed||!c.parent.is("element","codeBlock")||!c.hasSameParentAs(l.focus)||i.change(u=>{const d=a.return;if(c.parent.is("element")&&(d.childCount>1||l.containsEntireContent(c.parent))){const f=u.createElement("codeBlock",c.parent.getAttributes());u.append(d,f);const p=u.createDocumentFragment();u.append(f,p),a.return=p;return}const h=d.getChild(0);t.checkAttribute(h,"code")&&u.setAttribute("code",!0,h)})})}afterInit(){const e=this.editor,t=e.commands,i=t.get("indent"),s=t.get("outdent");i&&i.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),s&&s.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(e.editing.view.document,"enter",(o,r)=>{e.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!kD(e,r.isSoft)&&!xD(e,r.isSoft)&&CD(e),r.preventDefault(),o.stop())},{context:"pre"})}}function CD(n){const t=n.model.document,i=t.selection.getLastPosition(),s=i.nodeBefore||i.textNode;let o;s&&s.is("$text")&&(o=up(s)),n.model.change(r=>{n.execute("shiftEnter"),o&&r.insertText(o,t.selection.anchor)})}function kD(n,e){const i=n.model.document,s=n.editing.view,o=i.selection.getLastPosition(),r=o.nodeAfter;return e||!i.selection.isCollapsed||!o.isAtStart||!fs(r)?!1:(n.model.change(a=>{n.execute("enter");const l=i.selection.anchor.parent.previousSibling;a.rename(l,h2),a.setSelection(l,"in"),n.model.schema.removeDisallowedAttributes([l],a),a.remove(r)}),s.scrollToTheSelection(),!0)}function xD(n,e){const t=n.model,i=t.document,s=n.editing.view,o=i.selection.getLastPosition(),r=o.nodeBefore;let a;if(e||!i.selection.isCollapsed||!o.isAtEnd||!r||!r.previousSibling)return!1;if(fs(r)&&fs(r.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling),t.createPositionAfter(r));else if(dh(r)&&fs(r.previousSibling)&&fs(r.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling.previousSibling),t.createPositionAfter(r));else if(dh(r)&&fs(r.previousSibling)&&dh(r.previousSibling.previousSibling)&&r.previousSibling.previousSibling&&fs(r.previousSibling.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(r.previousSibling.previousSibling.previousSibling),t.createPositionAfter(r));else return!1;return n.model.change(l=>{l.remove(a),n.execute("enter");const c=i.selection.anchor.parent;l.rename(c,h2),n.model.schema.removeDisallowedAttributes([c],l)}),s.scrollToTheSelection(),!0}function dh(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function fs(n){return n&&n.is("element","softBreak")}const TD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ED extends k{static get pluginName(){return"CodeBlockUI"}init(){const e=this.editor,t=e.t,i=e.ui.componentFactory,s=cp(e);i.add("codeBlock",o=>{const r=e.commands.get("codeBlock"),a=Se(o,qs),l=a.buttonView;return l.set({label:t("Insert code block"),tooltip:!0,icon:TD,isToggleable:!0}),l.bind("isOn").to(r,"value",c=>!!c),l.on("execute",()=>{e.execute("codeBlock",{usePreviousLanguageChoice:!0}),e.editing.view.focus()}),a.on("execute",c=>{e.execute("codeBlock",{language:c.source._codeBlockLanguage,forceValue:!0}),e.editing.view.focus()}),a.class="ck-code-block-dropdown",a.bind("isEnabled").to(r),Tn(a,()=>this._getLanguageListItemDefinitions(s)),a})}_getLanguageListItemDefinitions(e){const i=this.editor.commands.get("codeBlock"),s=new xe;for(const o of e){const r={type:"button",model:new un({_codeBlockLanguage:o.language,label:o.label,withText:!0})};r.model.bind("isOn").to(i,"value",a=>a===r.model._codeBlockLanguage),s.add(r)}return s}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SD extends k{static get requires(){return[yD,ED]}static get pluginName(){return"CodeBlock"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AD extends F{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Y0(e.schema,i))do if(i=i.parent,!i)return;while(!Y0(e.schema,i));e.change(s=>{s.setSelection(i,"in")})}}function Y0(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ID=Su("Ctrl+A");class PD extends k{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,i=e.editing.view.document;e.commands.add("selectAll",new AD(e)),this.listenTo(i,"keydown",(s,o)=>{Ms(o)===ID&&(e.execute("selectAll"),o.preventDefault())})}}const RD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VD extends k{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",t=>{const i=e.commands.get("selectAll"),s=new z(t),o=t.t;return s.set({label:o("Select all"),icon:RD,keystroke:"Ctrl+A",tooltip:!0}),s.bind("isEnabled").to(i,"isEnabled"),this.listenTo(s,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),s})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LD extends k{static get requires(){return[PD,VD]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OD extends k{static get requires(){return[op,zu,LD,Yx,jx,rp]}static get pluginName(){return"Essentials"}}const f2=["text","hasAttribute","cssText","indexOf","join","then","ownerNode","trim","The editor stylesheet could not be found in the document. Check your webpack config  style-loader should use data-cke=true attribute for the editor stylesheet.","EDITOR_STYLES","warn","styleSheets","fetch","all",".ck-content",":root","push"];(function(n,e){(function(i){for(;--i;)n.push(n.shift())})(++e)})(f2,283);const Te=function(n,e){return n=n-0,f2[n]};function MD(n){if(!n)return new Promise(t=>t(""));const e=[];for(const t of n)Te("0xf")!==t?e[Te("0x5")](window[Te("0x1")](t)[Te("0xb")](i=>i[Te("0x6")]())):e[Te("0x5")](ND());return Promise[Te("0x2")](e)[Te("0xb")](t=>t[Te("0xa")](" ").trim())}function ND(){const n=[],e=[];for(const t of document[Te("0x0")])if(t[Te("0xc")][Te("0x7")]("data-cke"))for(const i of t.cssRules)i.cssText[Te("0x9")](Te("0x3"))!==-1?n[Te("0x5")](i[Te("0x8")]):i.cssText[Te("0x9")](Te("0x4"))!==-1&&e[Te("0x5")](i[Te("0x8")]);return n.length||console[Te("0x10")](Te("0xe")),[...e,...n][Te("0xa")](" ")[Te("0xd")]()}class BD extends F{constructor(e){super(e),this.set("isBusy",!1),this.affectsData=!1}refresh(){this.isEnabled=!this.isBusy,this.value=this.isBusy?"pending":void 0}execute(e={}){const t=this.editor,i=t.t,s=e.converterUrl||"https://pdf-converter.cke-cs.com/v1/convert/",o=e.dataCallback||(l=>l.getData()),r=t.plugins.get("ExportPdf"),a=e.token||r._token;return this.isBusy=!0,this.refresh(),MD(e.stylesheets||["EDITOR_STYLES"]).then(async l=>{const c={html:`<html>
						<head>
							<meta charset="utf-8">
						</head>
						<body>
							<div class="ck-content" dir="`+t.locale.contentLanguageDirection+`">
								`+await o(t)+`
							</div>
						<body>
					</html>`,css:l,options:e.converterOptions},u={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/pdf",...a?{Authorization:a.value}:null,"x-cs-app-id":e.appID||"cke5"},body:JSON.stringify(c)};return window.fetch(s,u).then(d=>{if(d.status!==200)throw d;return d.blob()}).then(d=>{const h=typeof e.fileName=="function"?e.fileName():e.fileName;this.o(d,h||"document.pdf")})}).catch(l=>{throw t.plugins.get("Notification").showWarning(i("An error occurred while generating the PDF.")),l}).finally(()=>{this.isBusy=!1,this.refresh()})}o(e,t){const i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=t,i.click(),i.remove()}}const FD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path clip-rule="evenodd" d="M19 4.5 14 0H3v6.5h1.5v-5h8v5h5V11H19V4.5ZM14 2l3.3 3H14V2Z"/><path d="m12.452 18.5 1.25 1.5H3v-3h1.5v1.5h7.952Z"/><path clip-rule="evenodd" d="M19.826 16.843a.75.75 0 1 0-1.152-.96L17.5 17.29V13H16v4.29l-1.174-1.408a.75.75 0 1 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Z"/><path d="M1.63 14.24V12.3h.88c.66 0 1.14-.15 1.46-.45.32-.3.48-.71.48-1.24 0-.52-.15-.91-.44-1.2C3.7 9.15 3.28 9 2.69 9H0v5.24h1.63Zm.4-3h-.4v-1.17h.46c.3 0 .5.05.62.17.1.11.16.25.16.42 0 .16-.06.3-.19.41-.13.11-.34.16-.66.16l.01.01Zm5.7 3c.28 0 .6-.05.96-.14.26-.07.5-.21.73-.42.22-.2.4-.47.53-.77.12-.31.19-.75.19-1.3 0-.37-.04-.7-.13-1.02a2.3 2.3 0 0 0-.42-.84c-.19-.24-.43-.43-.72-.56C8.57 9.06 8.2 9 7.72 9h-2.4v5.24H7.73Zm-.4-1.19h-.4v-2.86h.4c.43 0 .73.1.91.3.18.2.27.59.27 1.14 0 .42-.04.73-.12.91a.76.76 0 0 1-.34.4c-.14.07-.38.11-.72.11Zm5.3 1.2V12.1h2.02v-1.06h-2.03v-.91H15V9h-4v5.24h1.62l.01.01Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>';let DD=class extends k{static get pluginName(){return"ExportPdf"}static get requires(){return["CloudServices",Gc]}init(){const e=this.editor,t=e.t,i=e.config.get("exportPdf")||{};e.commands.add("exportPdf",new BD(e)),e.ui.componentFactory.add("exportPdf",o=>{const r=e.commands.get("exportPdf"),a=new z(o);a.set({label:t("Export to PDF"),icon:FD,tooltip:!0}),a.bind("isOn","isEnabled").to(r,"isBusy","isEnabled"),a.extendTemplate({attributes:{class:[a.bindTemplate.if("isOn","ck-exportpdf_status-pending")]}});const l=new B;return l.setTemplate({tag:"span",attributes:{class:["ck","ck-exportpdf__spinner-container"]},children:[{tag:"span",attributes:{class:["ck","ck-exportpdf__spinner"]}}]}),a.children.add(l),this.listenTo(a,"execute",()=>{e.execute("exportPdf",i),e.editing.view.focus()}),a});const s=e.plugins.get("CloudServices");if(i.tokenUrl===!1)this._token=null;else{if(i.tokenUrl)return s.registerTokenUrl(i.tokenUrl).then(o=>{this._token=o});this._token=s.token}}};const m2=["map","data-cke","content","name","cssRules","push","suggestions","warn","resolvedOptions","createdAt","DateTimeFormat","hasAttribute","CommentsRepository","timezone","all","length","join","comments","author","timeZone","styleSheets","authorId","then","get","EDITOR_STYLES",".ck-content","has","getSuggestions","indexOf","getCommentThreads","cssText","plugins","Users"];(function(n,e){(function(i){for(;--i;)n.push(n.shift())})(++e)})(m2,120);const U=function(n,e){return n=n-0,m2[n]};function zD(n){if(!n)return new Promise(t=>t(""));const e=[];for(const t of n)U("0x3")!==t?e[U("0x11")](window.fetch(t)[U("0x1")](i=>i.text())):e[U("0x11")](HD());return Promise[U("0x1a")](e)[U("0x1")](t=>t[U("0x1c")](" ").trim())}function HD(){const n=[],e=[];for(const t of document[U("0x20")])if(t.ownerNode[U("0x17")](U("0xd")))for(const i of t[U("0x10")])i.cssText.indexOf(U("0x4"))!==-1?n[U("0x11")](i.cssText):i[U("0x9")][U("0x7")](":root")!==-1&&e[U("0x11")](i.cssText);return n[U("0x1b")]||console[U("0x13")]("The editor stylesheet could not be found in the document. Check your webpack config  style-loader should use data-cke=true attribute for the editor stylesheet."),[...e,...n][U("0x1c")](" ").trim()}function UD(n){const e=n.plugins[U("0x5")](U("0xb")),t=n[U("0xa")].has(U("0x18")),i=n[U("0xa")][U("0x5")]("TrackChanges"),s={};if(e&&t){const o=$D(n[U("0xa")][U("0x2")](U("0x18"))[U("0x8")]({skipNotAttached:!0,skipEmpty:!0}));Object.keys(o).length&&(s[U("0x1d")]=o)}if(e&&i){const o=n[U("0xa")][U("0x2")]("TrackChanges"),r=n.plugins[U("0x2")]("Users"),a=WD(o[U("0x6")]({toJSON:!0}),r.users);Object.keys(a)[U("0x1b")]&&(s.suggestions=a)}return(s[U("0x12")]||s.comments)&&(s[U("0x19")]=new Intl[U("0x16")]()[U("0x14")]()[U("0x1f")]),s}function $D(n){const e={};if(!n[U("0x1b")])return e;for(const t of n)t[U("0x1d")][U("0xc")](i=>{e[t.id]===void 0&&(e[t.id]=[]),e[t.id][U("0x11")]({author:i[U("0x1e")][U("0xf")],content:i[U("0xe")],created:i[U("0x15")]})});return e}function WD(n,e){const t={};if(!n[U("0x1b")]||!e[U("0x1b")])return t;for(const i of n)t[i.id]={author:e[U("0x2")](i[U("0x0")]).name,created:i.createdAt};return t}class jD extends F{constructor(e){super(e),this.set("isBusy",!1),this.affectsData=!1}refresh(){this.isEnabled=!this.isBusy,this.value=this.isBusy?"pending":void 0}execute(e={}){const t=this.editor,i=t.t,s=e.converterUrl||"https://docx-converter.cke-cs.com/v1/convert",o=e.converterOptions||{},r=t.plugins.get("ExportWord"),a=e.token||r._token,l=o.auto_pagination!==!1,c=e.dataCallback||(u=>u.getData({pagination:l}));return this.isBusy=!0,this.refresh(),zD(e.stylesheets||["EDITOR_STYLES"]).then(async u=>{const d=await c(t),h={html:'<div class="ck-content" dir="'+t.locale.contentLanguageDirection+'">'+d+"</div>",css:u,options:{...o,...UD(t)}},f={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/docx",...a?{Authorization:a.value}:null},body:JSON.stringify(h)};return window.fetch(s,f).then(p=>{if(p.status!==200)throw p;return p.blob()}).then(p=>{const b=typeof e.fileName=="function"?e.fileName():e.fileName;this.o(p,b||"document.docx")})}).catch(u=>{throw t.plugins.get("Notification").showWarning(i("An error occurred while generating the Word file.")),u}).finally(()=>{this.isBusy=!1,this.refresh()})}o(e,t){const i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=t,i.click(),i.remove()}}const qD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path clip-rule="evenodd" d="M17.826 16.843a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Z"/><path clip-rule="evenodd" d="m14 0 5 4.5v9.741a2.737 2.737 0 0 0-1.5-.617V6.5h-5v-5h-8v3H3V0h11Zm0 2v3h3.3L14 2Z"/><path d="M3 17.5h6.746c.1.22.23.429.391.623l.731.877H3v-1.5Z"/><path clip-rule="evenodd" d="M8.5 6a1.5 1.5 0 0 1 1.493 1.356L10 7.5v7a1.5 1.5 0 0 1-1.356 1.493L8.5 16h-7a1.5 1.5 0 0 1-1.493-1.356L0 14.5v-7a1.5 1.5 0 0 1 1.356-1.493L1.5 6h7ZM7.483 8.795l-.042.088-.986 2.534-.947-2.528-.043-.092a.601.601 0 0 0-1.042.008l-.042.093-.883 2.465-.937-2.475-.042-.089a.6.6 0 0 0-1.107.42l.027.093 1.514 4 .044.092a.6.6 0 0 0 1.041-.01l.041-.092.88-2.458.925 2.467.046.096a.6.6 0 0 0 1.032 0l.043-.09 1.554-4 .028-.093a.6.6 0 0 0-1.104-.43v.001Z"/></g><defs><clipPath id="a"><path d="M0 0h20v20H0z"/></clipPath></defs></svg>';class GD extends k{static get pluginName(){return"ExportWord"}static get requires(){return["CloudServices",Gc]}init(){const e=this.editor,t=e.t,i=e.config.get("exportWord")||{};e.commands.add("exportWord",new jD(e)),e.ui.componentFactory.add("exportWord",o=>{const r=e.commands.get("exportWord"),a=new z(o);a.set({label:t("Export to Word"),icon:qD,tooltip:!0}),a.bind("isOn","isEnabled").to(r,"isBusy","isEnabled"),a.extendTemplate({attributes:{class:[a.bindTemplate.if("isOn","ck-exportword_status-pending")]}});const l=new B;return l.setTemplate({tag:"span",attributes:{class:["ck","ck-exportword__spinner-container"]},children:[{tag:"span",attributes:{class:["ck","ck-exportword__spinner"]}}]}),a.children.add(l),this.listenTo(a,"execute",()=>{e.execute("exportWord",i),e.editing.view.focus()}),a});const s=e.plugins.get("CloudServices");if(i.tokenUrl===!1)this._token=null;else{if(i.tokenUrl)return s.registerTokenUrl(i.tokenUrl).then(o=>{this._token=o});this._token=s.token}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KD extends B{constructor(e){super(e);const t=e.t;this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(i,s)=>i>0&&!s),this._findInputView=this._createInputField(t("Find in text")),this._replaceInputView=this._createInputField(t("Replace with")),this._findButtonView=this._createButton({label:t("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._findPrevButtonView=this._createButton({label:t("Previous result"),class:"ck-button-prev",icon:em,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:t("Next result"),class:"ck-button-next",icon:em,keystroke:"F3",tooltip:!0}),this._optionsDropdown=this._createOptionsDropdown(),this._replaceButtonView=this._createButton({label:t("Replace"),class:"ck-button-replace",withText:!0}),this._replaceAllButtonView=this._createButton({label:t("Replace all"),class:"ck-button-replaceall",withText:!0}),this._findFieldsetView=this._createFindFieldset(),this._replaceFieldsetView=this._createReplaceFieldset(),this._focusTracker=new Le,this._keystrokes=new Ue,this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:[new Du(e,{label:t("Find and replace")}),this._findFieldsetView,this._replaceFieldsetView]}),Nu(this)}render(){super.render(),Ws({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createFindFieldset(){const e=this.locale,t=new B(e);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:i})=>i),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:i})=>i),this._injectFindResultsCounter(),t.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__find"]},children:[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView]}),t}_onFindButtonExecute(){if(!this._textToFind){const e=this.t;this._findInputView.errorText=e("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const e=this.locale,t=e.t,i=this.bindTemplate,s=new B(e);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(r,a)=>t("%0 of %1",[r,a])),s.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",i.if("isDirty","ck-hidden")]},children:[{text:i.to("_resultsCounterText")}]});const o=()=>{const r=this._findInputView.fieldView.element;if(!r||!$i(r))return;const a=new te(s.element).width,l=e.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";a?r.style[l]=`calc( 2 * var(--ck-spacing-standard) + ${a}px )`:r.style[l]=null};this.on("change:_resultsCounterText",o,{priority:"low"}),this.on("change:isDirty",o,{priority:"low"}),this._findInputView.template.children[0].children.push(s)}_createReplaceFieldset(){const e=this.locale,t=e.t,i=new B(e);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},o)=>s&&o),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:s},o)=>s&&o),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},o)=>s&&o),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(s,o)=>s||!o?"":t("Tip: Find some text first in order to replace it.")),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),i.setTemplate({tag:"fieldset",attributes:{class:["ck","ck-find-and-replace-form__replace"]},children:[this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView]}),i}_createOptionsDropdown(){const e=this.locale,t=e.t,i=Se(e);i.class="ck-options-dropdown",i.buttonView.set({withText:!1,label:t("Show options"),icon:H.cog,tooltip:!0});const s=new un({withText:!0,label:t("Match case"),_isMatchCaseSwitch:!0}),o=new un({withText:!0,label:t("Whole words only")});return s.bind("isOn").to(this,"_matchCase"),o.bind("isOn").to(this,"_wholeWordsOnly"),i.on("execute",r=>{r.source._isMatchCaseSwitch?this._matchCase=!this._matchCase:this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),Tn(i,new xe([{type:"switchbutton",model:s},{type:"switchbutton",model:o}])),i}_initFocusCycling(){[this._findInputView,this._findButtonView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._optionsDropdown,this._replaceButtonView,this._replaceAllButtonView].forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}_initKeystrokeHandling(){const e=i=>i.stopPropagation(),t=i=>{i.stopPropagation(),i.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",i=>{t(i),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",i=>{t(i),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",i=>{const s=i.target;s===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),t(i)):s===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),t(i))}),this._keystrokes.set("shift+enter",i=>{i.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),t(i))}),this._keystrokes.set("arrowright",e),this._keystrokes.set("arrowleft",e),this._keystrokes.set("arrowup",e),this._keystrokes.set("arrowdown",e),this.listenTo(this._findInputView.element,"selectstart",(i,s)=>{s.stopPropagation()},{priority:"high"}),this.listenTo(this._replaceInputView.element,"selectstart",(i,s)=>{s.stopPropagation()},{priority:"high"})}_createButton(e){const t=new z(this.locale);return t.set(e),t}_createInputField(e){const t=new Ge(this.locale,Xt);return t.label=e,t}}const QD='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JD extends k{static get pluginName(){return"FindAndReplaceUI"}constructor(e){super(e),this.formView=null}init(){const e=this.editor;e.ui.componentFactory.add("findAndReplace",t=>{const i=Se(t);return i.bind("isEnabled").to(e.commands.get("find")),i.once("change:isOpen",()=>{this.formView=new KD(e.locale),i.panelView.children.add(this.formView),this._setupFormView(this.formView)}),i.on("change:isOpen",(s,o,r)=>{r?(this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()):this.fire("searchReseted")},{priority:"low"}),this._setupDropdownButton(i),i})}_setupDropdownButton(e){const t=this.editor,i=t.locale.t;e.buttonView.set({icon:QD,label:i("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),t.keystrokes.set("Ctrl+F",(s,o)=>{e.isEnabled&&(e.isOpen=!0,o())})}_setupFormView(e){const i=this.editor.commands,o=this.editor.plugins.get("FindAndReplaceEditing").state,r={before:-1,same:0,after:1};e.bind("highlightOffset").to(o,"highlightedResult",a=>a?Array.from(o.results).sort((l,c)=>r[l.marker.getStart().compareWith(c.marker.getStart())]).indexOf(a)+1:0),e.listenTo(o.results,"change",()=>{e.matchCount=o.results.length}),e.bind("_areCommandsEnabled").to(i.get("findNext"),"isEnabled",i.get("findPrevious"),"isEnabled",i.get("replace"),"isEnabled",i.get("replaceAll"),"isEnabled",(a,l,c,u)=>({findNext:a,findPrevious:l,replace:c,replaceAll:u})),e.delegate("findNext","findPrevious","replace","replaceAll").to(this),e.on("change:isDirty",(a,l,c)=>{c&&this.fire("searchReseted")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YD extends F{constructor(e,t){super(e),this.isEnabled=!0,this.affectsData=!1,this._state=t}execute(e,{matchCase:t,wholeWords:i}={}){const{editor:s}=this,{model:o}=s,r=s.plugins.get("FindAndReplaceUtils");let a;typeof e=="string"?(a=r.findByTextCallback(e,{matchCase:t,wholeWords:i}),this._state.searchText=e):a=e;const l=o.document.getRootNames().reduce((c,u)=>r.updateFindResultFromRange(o.createRangeIn(o.document.getRoot(u)),o,a,c),null);return this._state.clear(o),this._state.results.addMany(Array.from(l)),this._state.highlightedResult=l.get(0),typeof e=="string"&&(this._state.searchText=e),this._state.matchCase=!!t,this._state.matchWholeWords=!!i,{results:l,findCallback:a}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g2 extends F{constructor(e,t){super(e),this.isEnabled=!0,this._state=t}execute(e,t){const{model:i}=this.editor;i.change(s=>{const o=t.marker.getRange();if(o.root.rootName==="$graveyard"){this._state.results.remove(t);return}let r={};for(const a of o.getItems())if(a.is("$text")||a.is("$textProxy")){r=a.getAttributes();break}i.insertContent(s.createText(e,r),o),this._state.results.has(t)&&this._state.results.remove(t)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XD extends g2{execute(e,t){const{editor:i}=this,{model:s}=i,o=i.plugins.get("FindAndReplaceUtils"),r=t instanceof xe?t:s.document.getRootNames().reduce((a,l)=>o.updateFindResultFromRange(s.createRangeIn(s.document.getRoot(l)),s,o.findByTextCallback(t,this._state),a),null);r.length&&s.change(()=>{[...r].forEach(a=>{super.execute(e,a)})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p2 extends F{constructor(e,t){super(e),this.affectsData=!1,this._state=t,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const e=this._state.results,t=e.getIndex(this._state.highlightedResult),i=t+1>=e.length?0:t+1;this._state.highlightedResult=this._state.results.get(i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZD extends p2{execute(){const t=this._state.results.getIndex(this._state.highlightedResult),i=t-1<0?this._state.results.length-1:t-1;this._state.highlightedResult=this._state.results.get(i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w2{constructor(e){this.set("results",new xe),this.set("highlightedResult",null),this.set("searchText",""),this.set("replaceText",""),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(t,{removed:i,index:s})=>{if(i=Array.from(i),i.length){let o=!1;if(e.change(r=>{for(const a of i)this.highlightedResult===a&&(o=!0),e.markers.has(a.marker.name)&&r.removeMarker(a.marker)}),o){const r=s>=this.results.length?0:s;this.highlightedResult=this.results.get(r)}}})}clear(e){this.searchText="",e.change(t=>{if(this.highlightedResult){const i=this.highlightedResult.marker.name.split(":")[1],s=e.markers.get(`findResultHighlighted:${i}`);s&&t.removeMarker(s)}[...this.results].forEach(({marker:i})=>{t.removeMarker(i)})}),this.results.clear()}}Ua(w2,se);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e9 extends k{static get pluginName(){return"FindAndReplaceUtils"}updateFindResultFromRange(e,t,i,s){const o=s||new xe;return t.change(r=>{[...e].forEach(({type:a,item:l})=>{if(a==="elementStart"&&t.schema.checkChild(l,"$text")){const c=i({item:l,text:this.rangeToText(t.createRangeIn(l))});if(!c)return;c.forEach(u=>{const d=`findResult:${sn()}`,h=r.addMarker(d,{usingOperation:!1,affectsData:!1,range:r.createRange(r.createPositionAt(l,u.start),r.createPositionAt(l,u.end))}),f=t9(o,h);o.add({id:d,label:u.label,marker:h},f)})}})}),o}rangeToText(e){return Array.from(e.getItems()).reduce((t,i)=>i.is("text")||i.is("textProxy")?t+i.data:`${t}
`,"")}findByTextCallback(e,t){let i="gu";t.matchCase||(i+="i");let s=`(${lk(e)})`;if(t.wholeWords){const a="[^a-zA-Z--]";new RegExp("^"+a).test(e)||(s=`(^|${a}|_)${s}`),new RegExp(a+"$").test(e)||(s=`${s}(?=_|${a}|$)`)}const o=new RegExp(s,i);function r({text:a}){return[...a.matchAll(o)].map(n9)}return r}}function t9(n,e){const t=n.find(({marker:i})=>e.getStart().isBefore(i.getStart()));return t?n.getIndex(t):n.length}function n9(n){const e=n.length-1;let t=n.index;return n.length===3&&(t+=n[1].length),{label:n[e],start:t,end:t+n[e].length}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const i9="ck-find-result_selected";function s9(n,e,t){const i=new Set,s=new Set,o=e.model;o.document.differ.getChanges().forEach(a=>{a.name==="$text"||o.schema.isInline(a.position.nodeAfter)?(i.add(a.position.parent),[...o.markers.getMarkersAtPosition(a.position)].forEach(l=>{s.add(l.name)})):a.type==="insert"&&i.add(a.position.nodeAfter)}),o.document.differ.getChangedMarkers().forEach(({name:a,data:{newRange:l}})=>{l&&l.start.root.rootName==="$graveyard"&&s.add(a)}),i.forEach(a=>{[...o.markers.getMarkersIntersectingRange(o.createRangeIn(a))].forEach(c=>s.add(c.name))}),o.change(a=>{s.forEach(l=>{n.has(l)&&n.remove(l),a.removeMarker(l)})}),i.forEach(a=>{e.plugins.get("FindAndReplaceUtils").updateFindResultFromRange(o.createRangeOn(a),o,t,n)})}class o9 extends k{static get requires(){return[e9]}static get pluginName(){return"FindAndReplaceEditing"}init(){this._activeResults=null,this.state=new w2(this.editor.model),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(i,s,o,r)=>{const{model:a}=this.editor;a.change(l=>{if(r){const c=r.marker.name.split(":")[1],u=a.markers.get(`findResultHighlighted:${c}`);u&&l.removeMarker(u)}if(o){const c=o.marker.name.split(":")[1];l.addMarker(`findResultHighlighted:${c}`,{usingOperation:!1,affectsData:!1,range:o.marker.getRange()})}})});const e=di(t.bind(this),32);this.listenTo(this.state,"change:highlightedResult",e,{priority:"low"}),this.listenTo(this.editor,"destroy",e.cancel);function t(i,s,o){if(o){const r=this.editor.editing.view.domConverter,a=this.editor.editing.mapper.toViewRange(o.marker.getRange());kk({target:r.viewRangeToDom(a),viewportOffset:40})}}}find(e){const{editor:t}=this,{model:i}=t,{findCallback:s,results:o}=t.execute("find",e);return this._activeResults=o,this.listenTo(i.document,"change:data",()=>s9(this._activeResults,t,s)),this._activeResults}stop(){this._activeResults&&(this.stopListening(this.editor.model.document),this.state.clear(this.editor.model),this._activeResults=null)}_defineCommands(){this.editor.commands.add("find",new YD(this.editor,this.state)),this.editor.commands.add("findNext",new p2(this.editor,this.state)),this.editor.commands.add("findPrevious",new ZD(this.editor,this.state)),this.editor.commands.add("replace",new g2(this.editor,this.state)),this.editor.commands.add("replaceAll",new XD(this.editor,this.state))}_defineConverters(){const{editor:e}=this;e.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:t})=>{const[,i]=t.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":i}}}}),e.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:t})=>{const[,i]=t.split(":");return{name:"span",classes:[i9],attributes:{"data-find-result":i}}}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class r9 extends k{static get requires(){return[o9,JD]}static get pluginName(){return"FindAndReplace"}init(){const e=this.editor.plugins.get("FindAndReplaceUI"),t=this.editor.plugins.get("FindAndReplaceEditing"),i=t.state;e.on("findNext",(s,o)=>{o?(i.searchText=o.searchText,this.editor.execute("find",o.searchText,o)):this.editor.execute("findNext")}),e.on("findPrevious",(s,o)=>{o&&i.searchText!==o.searchText?this.editor.execute("find",o.searchText):this.editor.execute("findPrevious")}),e.on("replace",(s,o)=>{i.searchText!==o.searchText&&this.editor.execute("find",o.searchText);const r=i.highlightedResult;r&&this.editor.execute("replace",o.replaceText,r)}),e.on("replaceAll",(s,o)=>{i.searchText!==o.searchText&&this.editor.execute("find",o.searchText),this.editor.execute("replaceAll",o.replaceText,i.results)}),e.on("searchReseted",()=>{i.clear(this.editor.model),t.stop()})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uu extends F{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.value;t.change(r=>{if(s.isCollapsed)o?r.setSelectionAttribute(this.attributeKey,o):r.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const l of a)o?r.setAttribute(this.attributeKey,o,l):r.removeAttribute(this.attributeKey,l)}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b2 extends xe{constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){this.find(i=>i.color===e.color)||super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}Ua(b2,se);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a9 extends B{constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:o,documentColorsCount:r}){super(e),this.items=this.createCollection(),this.colorDefinitions=t,this.focusTracker=new Le,this.keystrokes=new Ue,this.set("selectedColor"),this.removeButtonLabel=s,this.columns=i,this.documentColors=new b2,this.documentColorsCount=r,this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._documentColorsLabel=o,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._createRemoveColorButton())}updateDocumentColors(e,t){const i=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const o of i.getRootNames()){const r=i.getRoot(o),a=e.createRangeIn(r);for(const l of a.getItems())if(l.is("$textProxy")&&l.hasAttribute(t)&&(this._addColorToDocumentColors(l.getAttribute(t)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid),this.documentColorsCount)){const e=bt.bind(this.documentColors,this.documentColors),t=new wn(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid),this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_createRemoveColorButton(){const e=new z;return e.set({withText:!0,icon:H.eraser,label:this.removeButtonLabel}),e.class="ck-color-table__remove-color",e.on("execute",()=>{this.fire("execute",{value:null})}),e.render(),this.focusTracker.add(e.element),this._focusables.add(e),e}_createStaticColorsGrid(){const e=new Xf(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.delegate("execute").to(this),e}_createDocumentColorsGrid(){const e=bt.bind(this.documentColors,this.documentColors),t=new Xf(this.locale,{columns:this.columns});return t.delegate("execute").to(this),t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(i=>{const s=new Lx;return s.set({color:i.color,hasBorder:i.options&&i.options.hasBorder}),i.label&&s.set({label:i.label,tooltip:!0}),s.on("execute",()=>{this.fire("execute",{value:i.color})}),s}),this.documentColors.on("change:isEmpty",(i,s,o)=>{o&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(i=>i.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mt="fontSize",Nt="fontFamily",Vn="fontColor",ti="fontBackgroundColor";function v2(n,e){const t={model:{key:n,values:[]},view:{},upcastAlso:{}};for(const i of e)t.model.values.push(i.model),t.view[i.model]=i.view,i.upcastAlso&&(t.upcastAlso[i.model]=i.upcastAlso);return t}function _2(n){return e=>c9(e.getStyle(n))}function y2(n){return(e,{writer:t})=>t.createAttributeElement("span",{style:`${n}:${e}`},{priority:7})}function l9({dropdownView:n,colors:e,columns:t,removeButtonLabel:i,documentColorsLabel:s,documentColorsCount:o}){const r=n.locale,a=new a9(r,{colors:e,columns:t,removeButtonLabel:i,documentColorsLabel:s,documentColorsCount:o});return n.colorTableView=a,n.panelView.children.add(a),a.delegate("execute").to(n,"execute"),a}function c9(n){return n.replace(/\s/g,"")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u9 extends Uu{constructor(e){super(e,Nt)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function C2(n){return n.map(d9).filter(e=>!!e)}function d9(n){if(typeof n=="object")return n;if(n==="default")return{title:"Default",model:void 0};if(typeof n=="string")return h9(n)}function h9(n){const e=n.replace(/"|'/g,"").split(","),t=e[0],i=e.map(f9).join(", ");return{title:t,model:i,view:{name:"span",styles:{"font-family":i},priority:7}}}function f9(n){return n=n.trim(),n.indexOf(" ")>0&&(n=`'${n}'`),n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m9 extends k{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(Nt,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Nt}),e.model.schema.setAttributeProperties(Nt,{isFormatting:!0,copyOnEnter:!0});const t=C2(e.config.get("fontFamily.options")).filter(s=>s.model),i=v2(Nt,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(Nt,new u9(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Nt,view:(t,{writer:i})=>i.createAttributeElement("span",{style:"font-family:"+t},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Nt,value:t=>t.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Nt,value:t=>t.getAttribute("face")}})}}const g9='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p9 extends k{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(Nt);e.ui.componentFactory.add(Nt,o=>{const r=Se(o);return Tn(r,()=>w9(i,s)),r.buttonView.set({label:t("Font Family"),icon:g9,tooltip:!0}),r.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),r.bind("isEnabled").to(s),this.listenTo(r,"execute",a=>{e.execute(a.source.commandName,{value:a.source.commandParam}),e.editing.view.focus()}),r})}_getLocalizedOptions(){const e=this.editor,t=e.t;return C2(e.config.get(Nt).options).map(s=>(s.title==="Default"&&(s.title=t("Default")),s))}}function w9(n,e){const t=new xe;for(const i of n){const s={type:"button",model:new un({commandName:Nt,commandParam:i.model,label:i.title,withText:!0})};s.model.bind("isOn").to(e,"value",o=>o===i.model?!0:!o||!i.model?!1:o.split(",")[0].replace(/'/g,"").toLowerCase()===i.model.toLowerCase()),i.view&&i.view.styles&&s.model.set("labelStyle",`font-family: ${i.view.styles["font-family"]}`),t.add(s)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b9 extends k{static get requires(){return[m9,p9]}static get pluginName(){return"FontFamily"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class v9 extends Uu{constructor(e){super(e,Mt)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function dp(n){return n.map(e=>_9(e)).filter(e=>!!e)}const X0={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function _9(n){if(k9(n))return am(n);const e=C9(n);if(e)return am(e);if(n==="default")return{model:void 0,title:"Default"};if(!x9(n))return y9(n)}function y9(n){return(typeof n=="number"||typeof n=="string")&&(n={title:String(n),model:`${parseFloat(n)}px`}),n.view={name:"span",styles:{"font-size":n.model}},am(n)}function am(n){return n.view.priority||(n.view.priority=7),n}function C9(n){return X0[n]||X0[n.model]}function k9(n){return typeof n=="object"&&n.title&&n.model&&n.view}function x9(n){let e;if(typeof n=="object")if(n.model)e=parseFloat(n.model);else throw new y("font-size-invalid-definition",null,n);else e=parseFloat(n);return isNaN(e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Z0=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class T9 extends k{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(Mt,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Mt}),e.model.schema.setAttributeProperties(Mt,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),i=dp(this.editor.config.get("fontSize.options")).filter(o=>o.model),s=v2(Mt,i);t?(this._prepareAnyValueConverters(s),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(s),e.commands.add(Mt,new v9(e))}_prepareAnyValueConverters(e){const t=this.editor,i=e.model.values.filter(s=>!Mu(String(s))&&!yx(String(s)));if(i.length)throw new y("font-size-invalid-use-of-named-presets",null,{presets:i});t.conversion.for("downcast").attributeToElement({model:Mt,view:(s,{writer:o})=>{if(s)return o.createAttributeElement("span",{style:"font-size:"+s},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Mt,value:s=>s.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Mt,value:t=>{const i=t.getAttribute("size"),s=i[0]==="-"||i[0]==="+";let o=parseInt(i,10);s&&(o=3+o);const r=Z0.length-1,a=Math.min(Math.max(o,0),r);return Z0[a]}}})}}const E9='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S9 extends k{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,i=this._getLocalizedOptions(),s=e.commands.get(Mt);e.ui.componentFactory.add(Mt,o=>{const r=Se(o);return Tn(r,()=>A9(i,s)),r.buttonView.set({label:t("Font Size"),icon:E9,tooltip:!0}),r.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),r.bind("isEnabled").to(s),this.listenTo(r,"execute",a=>{e.execute(a.source.commandName,{value:a.source.commandParam}),e.editing.view.focus()}),r})}_getLocalizedOptions(){const e=this.editor,t=e.t,i={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return dp(e.config.get(Mt).options).map(o=>{const r=i[o.title];return r&&r!=o.title&&(o=Object.assign({},o,{title:r})),o})}}function A9(n,e){const t=new xe;for(const i of n){const s={type:"button",model:new un({commandName:Mt,commandParam:i.model,label:i.title,class:"ck-fontsize-option",withText:!0})};i.view&&i.view.styles&&s.model.set("labelStyle",`font-size:${i.view.styles["font-size"]}`),i.view&&i.view.classes&&s.model.set("class",`${s.model.class} ${i.view.classes}`),s.model.bind("isOn").to(e,"value",o=>o===i.model),t.add(s)}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I9 extends k{static get requires(){return[T9,S9]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return dp(e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P9 extends Uu{constructor(e){super(e,Vn)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R9 extends k{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(Vn,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Vn,value:_2("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Vn,value:t=>t.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:Vn,view:y2("color")}),e.commands.add(Vn,new P9(e)),e.model.schema.extend("$text",{allowAttributes:Vn}),e.model.schema.setAttributeProperties(Vn,{isFormatting:!0,copyOnEnter:!0})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k2 extends k{constructor(e,{commandName:t,icon:i,componentName:s,dropdownLabel:o}){super(e),this.commandName=t,this.componentName=s,this.icon=i,this.dropdownLabel=o,this.columns=e.config.get(`${this.componentName}.columns`),this.colorTableView=void 0}init(){const e=this.editor,t=e.locale,i=t.t,s=e.commands.get(this.commandName),o=Ma(e.config.get(this.componentName).colors),r=Oa(t,o),a=e.config.get(`${this.componentName}.documentColors`);e.ui.componentFactory.add(this.componentName,l=>{const c=Se(l);return this.colorTableView=l9({dropdownView:c,colors:r.map(u=>({label:u.label,color:u.model,options:{hasBorder:u.hasBorder}})),columns:this.columns,removeButtonLabel:i("Remove color"),documentColorsLabel:a!==0?i("Document colors"):void 0,documentColorsCount:a===void 0?this.columns:a}),this.colorTableView.bind("selectedColor").to(s,"value"),c.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),c.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),c.bind("isEnabled").to(s),c.on("execute",(u,d)=>{e.execute(this.commandName,d),e.editing.view.focus()}),c.on("change:isOpen",(u,d,h)=>{c.colorTableView.appendGrids(),h&&(a!==0&&this.colorTableView.updateDocumentColors(e.model,this.componentName),this.colorTableView.updateSelectedColors())}),Fu(c,()=>c.colorTableView.staticColorsGrid.items.find(u=>u.isOn)),c})}}const V9='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L9 extends k2{constructor(e){const t=e.locale.t;super(e,{commandName:Vn,componentName:Vn,icon:V9,dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O9 extends k{static get requires(){return[R9,L9]}static get pluginName(){return"FontColor"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M9 extends Uu{constructor(e){super(e,ti)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N9 extends k{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(ti,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Kg),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:ti,value:_2("background-color")}}),e.conversion.for("downcast").attributeToElement({model:ti,view:y2("background-color")}),e.commands.add(ti,new M9(e)),e.model.schema.extend("$text",{allowAttributes:ti}),e.model.schema.setAttributeProperties(ti,{isFormatting:!0,copyOnEnter:!0})}}const B9='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F9 extends k2{constructor(e){const t=e.locale.t;super(e,{commandName:ti,componentName:ti,icon:B9,dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D9 extends k{static get requires(){return[N9,F9]}static get pluginName(){return"FontBackgroundColor"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z9 extends k{static get requires(){return[b9,I9,O9,D9]}static get pluginName(){return"Font"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H9 extends F{refresh(){const e=this.editor.model,t=e.document,i=de(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&ev(i,e.schema)}execute(e={}){const t=this.editor.model,i=t.document;t.change(s=>{const o=(e.selection||i.selection).getSelectedBlocks();for(const r of o)!r.is("element","paragraph")&&ev(r,t.schema)&&s.rename(r,"paragraph")})}}function ev(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class U9 extends F{execute(e){const t=this.editor.model,i=e.attributes;let s=e.position;t.change(o=>{const r=o.createElement("paragraph");if(i&&t.schema.setAllowedAttributes(r,i,o),!t.schema.checkChild(s.parent,r)){const a=t.schema.findAllowedParent(s,r);if(!a)return;s=o.split(s,a).position}t.insertContent(r,s),o.setSelection(r,"in")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ka extends k{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new H9(e)),e.commands.add("insertParagraph",new U9(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:s})=>!Ka.paragraphLikeElements.has(i.name)||i.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}Ka.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $9 extends F{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=de(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>tv(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,i=t.document,s=e.value;t.change(o=>{const r=Array.from(i.selection.getSelectedBlocks()).filter(a=>tv(a,s,t.schema));for(const a of r)a.is("element",s)||o.rename(a,s)})}}function tv(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nv="paragraph";class W9 extends k{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Ka]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const s of t)s.model!=="paragraph"&&(e.model.schema.register(s.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(s),i.push(s.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new $9(e,i))}afterInit(){const e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(s,o)=>{const r=e.model.document.selection.getFirstPosition().parent;i.some(l=>r.is("element",l.model))&&!r.is("element",nv)&&r.childCount===0&&o.writer.rename(r,nv)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Di.get("low")+1})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function j9(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{const s=t[i.title];return s&&s!=i.title&&(i.title=s),i})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q9 extends k{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,i=j9(e),s=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",r=>{const a={},l=new xe,c=e.commands.get("heading"),u=e.commands.get("paragraph"),d=[c];for(const f of i){const p={type:"button",model:new un({label:f.title,class:f.class,withText:!0})};f.model==="paragraph"?(p.model.bind("isOn").to(u,"value"),p.model.set("commandName","paragraph"),d.push(u)):(p.model.bind("isOn").to(c,"value",b=>b===f.model),p.model.set({commandName:"heading",commandValue:f.model})),l.add(p),a[f.model]=f.title}const h=Se(r);return Tn(h,l),h.buttonView.set({isOn:!1,withText:!0,tooltip:o}),h.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),h.bind("isEnabled").toMany(d,"isEnabled",(...f)=>f.some(p=>p)),h.buttonView.bind("label").to(c,"value",u,"value",(f,p)=>{const b=f||p&&"paragraph";return typeof b=="boolean"||!a[b]?s:a[b]}),this.listenTo(h,"execute",f=>{const{commandName:p,commandValue:b}=f.source;e.execute(p,b?{value:b}:void 0),e.editing.view.focus()}),h})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G9 extends k{static get requires(){return[W9,q9]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K9 extends F{refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}execute(e={}){const t=this.editor.model,s=t.document.selection,o=e.value;t.change(r=>{if(s.isCollapsed){const a=s.getFirstPosition();if(s.hasAttribute("highlight")){const l=h=>h.item.hasAttribute("highlight")&&h.item.getAttribute("highlight")===this.value,c=a.getLastMatchingPosition(l,{direction:"backward"}),u=a.getLastMatchingPosition(l),d=r.createRange(c,u);!o||this.value===o?(a.isEqual(u)||r.removeAttribute("highlight",d),r.removeSelectionAttribute("highlight")):(a.isEqual(u)||r.setAttribute("highlight",o,d),r.setSelectionAttribute("highlight",o))}else o&&r.setSelectionAttribute("highlight",o)}else{const a=t.schema.getValidRanges(s.getRanges(),"highlight");for(const l of a)o?r.setAttribute("highlight",o,l):r.removeAttribute("highlight",l)}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q9 extends k{static get pluginName(){return"HighlightEditing"}constructor(e){super(e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});const t=e.config.get("highlight.options");e.conversion.attributeToElement(J9(t)),e.commands.add("highlight",new K9(e))}}function J9(n){const e={model:{key:"highlight",values:[]},view:{}};for(const t of n)e.model.values.push(t.model),e.view[t.model]={name:"mark",classes:t.class};return e}const Y9='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',X9='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z9 extends k{get localizedOptionTitles(){const e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}static get pluginName(){return"HighlightUI"}init(){const e=this.editor.config.get("highlight.options");for(const t of e)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(e)}_addRemoveHighlightButton(){const e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),H.eraser,null,i=>{i.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(e){const t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,iv(e.type),e.model,i);function i(s){s.bind("isEnabled").to(t,"isEnabled"),s.bind("isOn").to(t,"value",o=>o===e.model),s.iconView.fillColor=e.color,s.isToggleable=!0}}_addButton(e,t,i,s,o){const r=this.editor;r.ui.componentFactory.add(e,a=>{const l=new z(a),c=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return l.set({label:c,icon:i,tooltip:!0}),l.on("execute",()=>{r.execute("highlight",{value:s}),r.editing.view.focus()}),o(l),l})}_addDropdown(e){const t=this.editor,i=t.t,s=t.ui.componentFactory,o=e[0],r=e.reduce((a,l)=>(a[l.model]=l,a),{});s.add("highlight",a=>{const l=t.commands.get("highlight"),c=Se(a,qs),u=c.buttonView;u.set({label:i("Highlight"),tooltip:!0,lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),u.bind("icon").to(l,"value",f=>iv(h(f,"type"))),u.bind("color").to(l,"value",f=>h(f,"color")),u.bind("commandValue").to(l,"value",f=>h(f,"model")),u.bind("isOn").to(l,"value",f=>!!f),u.delegate("execute").to(c);const d=()=>{const f=e.map(p=>{const b=s.create("highlight:"+p.model);return this.listenTo(b,"execute",()=>{c.buttonView.set({lastExecuted:p.model})}),b});return f.push(new ep),f.push(s.create("removeHighlight")),f};c.bind("isEnabled").to(l,"isEnabled"),qa(c,d,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:i("Text highlight toolbar")}),ez(c),u.on("execute",()=>{t.execute("highlight",{value:u.commandValue})}),this.listenTo(c,"execute",()=>{t.editing.view.focus()});function h(f,p){const b=!f||f===u.lastExecuted?u.lastExecuted:f;return r[b][p]}return c})}}function ez(n){n.buttonView.actionView.iconView.bind("fillColor").to(n.buttonView,"color")}function iv(n){return n==="marker"?Y9:X9}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tz extends k{static get requires(){return[Q9,Z9]}static get pluginName(){return"Highlight"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nz extends F{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=iz(i,t,e)}execute(){const e=this.editor.model;e.change(t=>{const i=t.createElement("horizontalLine");e.insertObject(i,null,null,{setSelection:"after"})})}}function iz(n,e,t){const i=sz(n,t);return e.checkChild(i,"horizontalLine")}function sz(n,e){const i=Ga(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oz extends k{static get pluginName(){return"HorizontalLineEditing"}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion;t.register("horizontalLine",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToElement({model:"horizontalLine",view:(o,{writer:r})=>r.createEmptyElement("hr")}),s.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(o,{writer:r})=>{const a=i("Horizontal line"),l=r.createContainerElement("div",null,r.createEmptyElement("hr"));return r.addClass("ck-horizontal-line",l),r.setCustomProperty("hr",!0,l),rz(l,r,a)}}),s.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),e.commands.add("horizontalLine",new nz(e))}}function rz(n,e,t){return e.setCustomProperty("horizontalLine",!0,n),cr(n,e,{label:t})}const az='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lz extends k{static get pluginName(){return"HorizontalLineUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("horizontalLine",i=>{const s=e.commands.get("horizontalLine"),o=new z(i);return o.set({label:t("Horizontal line"),icon:az,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("horizontalLine"),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cz extends k{static get requires(){return[oz,lz,Yi]}static get pluginName(){return"HorizontalLine"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uz extends F{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection,s=sv(i);this.isEnabled=dz(i,t,e),this.value=s?s.getAttribute("value")||"":null}execute(e){const t=this.editor.model,i=t.document.selection;t.change(s=>{let o;this.value!==null?o=sv(i):(o=s.createElement("rawHtml"),t.insertObject(o,null,null,{setSelection:"on"})),s.setAttribute("value",e,o)})}}function dz(n,e,t){const i=hz(n,t);return e.checkChild(i,"rawHtml")}function hz(n,e){const i=Ga(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function sv(n){const e=n.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fz extends k{static get pluginName(){return"HtmlEmbedEditing"}constructor(e){super(e),e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(Ce("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})}),this._widgetButtonViewReferences=new Set}init(){const e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new uz(e)),this._setupConversion()}_setupConversion(){const e=this.editor,t=e.t,i=e.editing.view,s=this._widgetButtonViewReferences,o=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const u of s){if(u.element.isConnected)return;u.destroy(),s.delete(u)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(u,{writer:d})=>d.createElement("rawHtml",{value:u.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(u,{writer:d})=>d.createRawElement("div",{class:"raw-html-embed"},function(h){h.innerHTML=u.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(u,{writer:d})=>{let h,f,p;const b=d.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(w){h=w,r({domElement:w,editor:e,state:f,props:p}),h.addEventListener("mousedown",()=>{if(f.isEditable){const C=e.model;C.document.selection.getSelectedElement()!==u&&C.change(V=>V.setSelection(u,"on"))}},!0)}),x={makeEditable(){f=Object.assign({},f,{isEditable:!0}),r({domElement:h,editor:e,state:f,props:p}),i.change(w=>{w.setAttribute("data-cke-ignore-events","true",b)}),h.querySelector("textarea").focus()},save(w){w!==f.getRawHtmlValue()?(e.execute("htmlEmbed",w),e.editing.view.focus()):this.cancel()},cancel(){f=Object.assign({},f,{isEditable:!1}),r({domElement:h,editor:e,state:f,props:p}),e.editing.view.focus(),i.change(w=>{w.removeAttribute("data-cke-ignore-events",b)})}};f={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>u.getAttribute("value")||""},p={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){x.makeEditable()},onSaveClick(w){x.save(w)},onCancelClick(){x.cancel()}};const v=d.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},b);return d.setCustomProperty("rawHtmlApi",x,v),d.setCustomProperty("rawHtml",!0,v),cr(v,d,{widgetLabel:t("HTML snippet"),hasSelectionHandle:!0})}});function r({domElement:u,editor:d,state:h,props:f}){u.textContent="";const p=u.ownerDocument;let b;if(h.isEditable){const v={isDisabled:!1,placeholder:f.textareaPlaceholder};b=l({domDocument:p,state:h,props:v}),u.append(b)}else if(h.showPreviews){const v={sanitizeHtml:f.sanitizeHtml};u.append(c({domDocument:p,state:h,props:v,editor:d}))}else{const v={isDisabled:!0,placeholder:f.textareaPlaceholder};u.append(l({domDocument:p,state:h,props:v}))}const x={onEditClick:f.onEditClick,onSaveClick:()=>{f.onSaveClick(b.value)},onCancelClick:f.onCancelClick};u.prepend(a({editor:d,domDocument:p,state:h,props:x}))}function a({editor:u,domDocument:d,state:h,props:f}){const p=On(d,"div",{class:"raw-html-embed__buttons-wrapper"});if(h.isEditable){const b=hh(u,"save",f.onSaveClick),x=hh(u,"cancel",f.onCancelClick);p.append(b.element,x.element),s.add(b).add(x)}else{const b=hh(u,"edit",f.onEditClick);p.append(b.element),s.add(b)}return p}function l({domDocument:u,state:d,props:h}){const f=On(u,"textarea",{placeholder:h.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return f.disabled=h.isDisabled,f.value=d.getRawHtmlValue(),f}function c({domDocument:u,state:d,props:h,editor:f}){const p=h.sanitizeHtml(d.getRawHtmlValue()),b=d.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),x=On(u,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},b),v=On(u,"div",{class:"raw-html-embed__preview-content",dir:f.locale.contentLanguageDirection}),C=u.createRange().createContextualFragment(p.html);return v.appendChild(C),On(u,"div",{class:"raw-html-embed__preview"},[x,v])}}}function hh(n,e,t){const i=n.locale.t,s=new z(n.locale),o=n.commands.get("htmlEmbed");return s.set({class:`raw-html-embed__${e}-button`,icon:H.pencil,tooltip:!0,tooltipPosition:n.locale.uiLanguageDirection==="rtl"?"e":"w"}),s.render(),e==="edit"?(s.set({icon:H.pencil,label:i("Edit source")}),s.bind("isEnabled").to(o)):e==="save"?(s.set({icon:H.check,label:i("Save changes")}),s.bind("isEnabled").to(o)):s.set({icon:H.cancel,label:i("Cancel")}),s.on("execute",t),s}const mz='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gz extends k{static get pluginName(){return"HtmlEmbedUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("htmlEmbed",i=>{const s=e.commands.get("htmlEmbed"),o=new z(i);return o.set({label:t("Insert HTML"),icon:mz,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("htmlEmbed"),e.editing.view.focus(),e.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pz extends k{static get requires(){return[fz,gz,Yi]}static get pluginName(){return"HtmlEmbed"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wz extends F{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=t.model,o=i.getClosestSelectedImageElement(s.document.selection);s.change(r=>{r.setAttribute("alt",e.newValue,o)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bz extends k{static get requires(){return[jt]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new wz(this.editor))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vz extends B{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Le,this.keystrokes=new Ue,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),H.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),H.cancel,"ck-button-cancel","cancel"),this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),Nu(this)}render(){super.render(),this.keystrokes.listenTo(this.element),Ws({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,s){const o=new z(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createLabeledInputView(){const e=this.locale.t,t=new Ge(this.locale,Xt);return t.label=e("Text alternative"),t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _z(n){const e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const t=x2(n);e.updatePosition(t)}}function x2(n){const e=n.editing.view,t=ft.defaultPositions,i=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yz extends k{static get requires(){return[Un]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",i=>{const s=e.commands.get("imageTextAlternative"),o=new z(i);return o.set({label:t("Change image text alternative"),icon:H.lowVision,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>!!r),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new vz(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,r)=>{this._hideForm(!0),r()}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(i.selection)?this._isVisible&&_z(e):this._hideForm(!0)}),lr({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:x2(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class T2 extends k{static get requires(){return[bz,yz]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cz(n){return t=>{t.on("element:figure",e)};function e(t,i,s){if(!s.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const o=n.findViewImgElement(i.viewItem);if(!o||!s.consumable.test(o,{name:!0}))return;s.consumable.consume(i.viewItem,{name:!0,classes:"image"});const r=s.convertItem(o,i.modelCursor),a=de(r.modelRange.getItems());if(!a){s.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i)}}function kz(n){const e=["srcset","media","type","sizes"];return i=>{i.on("element:picture",t)};function t(i,s,o){const r=s.viewItem;if(!o.consumable.test(r,{name:!0}))return;const a=new Map;for(const u of r.getChildren())if(u.is("element","source")){const d={};for(const h of e)u.hasAttribute(h)&&o.consumable.test(u,{attributes:h})&&(d[h]=u.getAttribute(h));Object.keys(d).length&&a.set(u,d)}const l=n.findViewImgElement(r);if(!l)return;let c=s.modelCursor.parent;if(!c.is("element","imageBlock")){const u=o.convertItem(l,s.modelCursor);s.modelRange=u.modelRange,s.modelCursor=u.modelCursor,c=de(u.modelRange.getItems())}o.consumable.consume(r,{name:!0});for(const[u,d]of a)o.consumable.consume(u,{attributes:Object.keys(d)});a.size&&o.writer.setAttribute("sources",Array.from(a.values()),c),o.convertChildren(r,c)}}function E2(n,e){return i=>{i.on(`attribute:srcset:${e}`,t)};function t(i,s,o){if(!o.consumable.consume(s.item,i.name))return;const r=o.writer,a=o.mapper.toViewElement(s.item),l=n.findViewImgElement(a);if(s.attributeNewValue===null){const c=s.attributeOldValue;c.data&&(r.removeAttribute("srcset",l),r.removeAttribute("sizes",l),c.width&&r.removeAttribute("width",l))}else{const c=s.attributeNewValue;c.data&&(r.setAttribute("srcset",c.data,l),r.setAttribute("sizes","100vw",l),c.width&&r.setAttribute("width",c.width,l))}}}function xz(n){return t=>{t.on("attribute:sources:imageBlock",e),t.on("attribute:sources:imageInline",e)};function e(t,i,s){if(!s.consumable.consume(i.item,t.name))return;const o=s.writer,r=s.mapper.toViewElement(i.item),a=n.findViewImgElement(r);if(i.attributeNewValue&&i.attributeNewValue.length){const l=o.createContainerElement("picture",null,i.attributeNewValue.map(d=>o.createEmptyElement("source",d))),c=[];let u=a.parent;for(;u&&u.is("attributeElement");){const d=u.parent;o.unwrap(o.createRangeOn(a),u),c.unshift(u),u=d}o.insert(o.createPositionBefore(a),l),o.move(o.createRangeOn(a),o.createPositionAt(l,"end"));for(const d of c)o.wrap(o.createRangeOn(l),d)}else if(a.parent.is("element","picture")){const l=a.parent;o.move(o.createRangeOn(a),o.createPositionBefore(l)),o.remove(l)}}}function Yc(n,e,t){return s=>{s.on(`attribute:${t}:${e}`,i)};function i(s,o,r){if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,l=r.mapper.toViewElement(o.item),c=n.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",c)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class S2 extends Wn{observe(e){this.listenTo(e,"load",(t,i)=>{const s=i.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tz extends F{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&Ce("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&Ce("image-inline-plugin-required")}refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}execute(e){const t=Ze(e.source),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((r,a)=>{const l=i.getSelectedElement();if(typeof r=="string"&&(r={src:r}),a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);s.insertImage({...r,...o},c)}else s.insertImage({...r,...o})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ez extends F{refresh(){const t=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement();this.editor.model.change(i=>{i.setAttribute("src",e.source,t),i.removeAttribute("srcset",t),i.removeAttribute("sizes",t)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hp extends k{static get requires(){return[jt]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(S2),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:o=>{const r={data:o.getAttribute("srcset")};return o.hasAttribute("width")&&(r.width=o.getAttribute("width")),r}}});const i=new Tz(e),s=new Ez(e);e.commands.add("insertImage",i),e.commands.add("replaceImageSource",s),e.commands.add("imageInsert",i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A2 extends F{constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(i):this.isEnabled=t.isBlockImage(i)}execute(){const e=this.editor,t=this.editor.model,i=e.plugins.get("ImageUtils"),s=i.getClosestSelectedImageElement(t.document.selection),o=Object.fromEntries(s.getAttributes());return!o.src&&!o.uploadId?null:t.change(r=>{const a=Array.from(t.markers).filter(u=>u.getRange().containsItem(s)),l=i.insertImage(o,t.createSelection(s,"on"),this._modelElementName);if(!l)return null;const c=r.createRangeOn(l);for(const u of a){const d=u.getRange(),h=d.root.rootName!="$graveyard"?d.getJoined(c,!0):c;r.updateMarker(u,{range:h})}return{oldElement:s,newElement:l}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I2 extends k{static get requires(){return[hp,jt,$n]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new A2(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>B0(r)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:r})=>s.toImageWidget(B0(r),r,t("image widget"))}),i.for("downcast").add(Yc(s,"imageBlock","src")).add(Yc(s,"imageBlock","alt")).add(E2(s,"imageBlock")),i.for("upcast").elementToElement({view:n2(e,"imageBlock"),model:(o,{writer:r})=>r.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:null)}).add(Cz(s))}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(o,r)=>{const a=Array.from(r.content.getChildren());let l;if(!a.every(s.isInlineImageView))return;r.targetRanges?l=e.editing.mapper.toModelRange(r.targetRanges[0]):l=t.document.selection.getFirstRange();const c=t.createSelection(l);if(ap(t.schema,c)==="imageBlock"){const u=new $s(i.document),d=a.map(h=>u.createElement("figure",{class:"image"},h));r.content=u.createDocumentFragment(d)}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sz extends k{static get requires(){return[I2,Yi,T2]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Az extends k{static get requires(){return[hp,jt,$n]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((i,s)=>{if(i.endsWith("caption")&&s.name==="imageInline")return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new A2(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:r})=>r.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:r})=>s.toImageWidget(eF(r),r,t("image widget"))}),i.for("downcast").add(Yc(s,"imageInline","src")).add(Yc(s,"imageInline","alt")).add(E2(s,"imageInline")),i.for("upcast").elementToElement({view:n2(e,"imageInline"),model:(o,{writer:r})=>r.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:null)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils");this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(o,r)=>{const a=Array.from(r.content.getChildren());let l;if(!a.every(s.isBlockImageView))return;r.targetRanges?l=e.editing.mapper.toModelRange(r.targetRanges[0]):l=t.document.selection.getFirstRange();const c=t.createSelection(l);if(ap(t.schema,c)==="imageInline"){const u=new $s(i.document),d=a.map(h=>h.childCount===1?(Array.from(h.getAttributes()).forEach(f=>u.setAttribute(...f,s.findViewImgElement(h))),h.getChild(0)):h);r.content=u.createDocumentFragment(d)}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iz extends k{static get requires(){return[Az,Yi,T2]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Pz=class extends k{static get requires(){return[Sz,Iz]}static get pluginName(){return"Image"}};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rz extends F{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils");if(!e.plugins.has(I2)){this.isEnabled=!1,this.value=!1;return}const i=e.model.document.selection,s=i.getSelectedElement();if(!s){const o=t.getCaptionFromModelSelection(i);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(s),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(s):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,t)})}_showImageCaption(e,t){const s=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing");let r=s.getSelectedElement();const a=o._getSavedCaption(r);this.editor.plugins.get("ImageUtils").isInlineImage(r)&&(this.editor.execute("imageTypeBlock"),r=s.getSelectedElement());const l=a||e.createElement("caption");e.append(l,r),t&&e.setSelection(l,"in")}_hideImageCaption(e){const t=this.editor,i=t.model.document.selection,s=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils");let r=i.getSelectedElement(),a;r?a=o.getCaptionFromImageModelElement(r):(a=o.getCaptionFromModelSelection(i),r=a.parent),s._saveCaption(r,a),e.setSelection(r,"on"),e.remove(a)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P2 extends k{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[jt]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),i=e.getFirstPosition().findAncestor("caption");return i&&t.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vz extends k{static get requires(){return[jt,P2]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new Rz(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:r=>s.matchImageCaptionViewElement(r),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>i.isBlockImage(r.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(r,{writer:a})=>{if(!i.isBlockImage(r.parent))return null;const l=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,l),Fg({view:t,element:l,text:o("Enter image caption"),keepOnFocus:!0});const c=r.parent.getAttribute("alt"),u=c?o("Caption for image: %0",[c]):o("Caption for the image");return sp(l,a,{label:u})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),s=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),r=a=>{if(!a.return)return;const{oldElement:l,newElement:c}=a.return;if(!l)return;if(t.isBlockImage(l)){const d=i.getCaptionFromImageModelElement(l);if(d){this._saveCaption(c,d);return}}const u=this._getSavedCaption(l);u&&this._saveCaption(c,u)};s&&this.listenTo(s,"execute",r,{priority:"low"}),o&&this.listenTo(o,"execute",r,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?re.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const o=t.document.differ.getChanges();for(const r of o){if(r.attributeKey!=="alt")continue;const a=r.range.start.nodeAfter;if(i.isBlockImage(a)){const l=s.getCaptionFromImageModelElement(a);if(!l)return;e.editing.reconvertItem(l)}}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lz extends k{static get requires(){return[P2]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageCaptionUtils"),s=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{const r=e.commands.get("toggleImageCaption"),a=new z(o);return a.set({icon:H.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(r,"value","isEnabled"),a.bind("label").to(r,"value",l=>s(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=i.getCaptionFromModelSelection(e.model.document.selection);if(l){const c=e.editing.mapper.toViewElement(l);t.scrollToTheSelection(),t.change(u=>{u.addClass("image__caption_highlighted",c)})}e.editing.view.focus()}),a})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oz extends k{static get requires(){return[Vz,Lz]}static get pluginName(){return"ImageCaption"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function R2(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function Mz(n){return new Promise((e,t)=>{const i=n.getAttribute("src");fetch(i).then(s=>s.blob()).then(s=>{const o=V2(s,i),a=`image.${o.replace("image/","")}`,l=new File([s],a,{type:o});e(l)}).catch(s=>s&&s.name==="TypeError"?Bz(i).then(e).catch(t):t(s))})}function Nz(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||e.getAttribute("src").match(/^blob:/g)}function V2(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function Bz(n){return Fz(n).then(e=>{const t=V2(e,n),s=`image.${t.replace("image/","")}`;return new File([e],s,{type:t})})}function Fz(n){return new Promise((e,t)=>{const i=W.document.createElement("img");i.addEventListener("load",()=>{const s=W.document.createElement("canvas");s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s.toBlob(r=>r?e(r):t())}),i.addEventListener("error",()=>t()),i.src=n})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dz extends k{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,i=s=>{const o=new HF(s),r=e.commands.get("uploadImage"),a=e.config.get("image.upload.types"),l=R2(a);return o.set({acceptedType:a.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0}),o.buttonView.set({label:t("Insert image"),icon:H.image,tooltip:!0}),o.buttonView.bind("isEnabled").to(r),o.on("done",(c,u)=>{const d=Array.from(u).filter(h=>l.test(h.type));d.length&&(e.execute("uploadImage",{file:d}),e.editing.view.focus())}),o};e.ui.componentFactory.add("uploadImage",i),e.ui.componentFactory.add("imageUpload",i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zz extends k{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",(...t)=>this.uploadStatusChange(...t)),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",(...t)=>this.uploadStatusChange(...t))}uploadStatusChange(e,t,i){const s=this.editor,o=t.item,r=o.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;const a=s.plugins.get("ImageUtils"),l=s.plugins.get(xs),c=r?t.attributeNewValue:null,u=this.placeholder,d=s.editing.mapper.toViewElement(o),h=i.writer;if(c=="reading"){ov(d,h),rv(a,u,d,h);return}if(c=="uploading"){const f=l.loaders.get(r);ov(d,h),f?(av(d,h),Uz(d,h,f,s.editing.view),Gz(a,d,h,f)):rv(a,u,d,h);return}c=="complete"&&l.loaders.get(r)&&Wz(d,h,s.editing.view),$z(d,h),av(d,h),Hz(d,h)}}function ov(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function Hz(n,e){e.removeClass("ck-appear",n)}function rv(n,e,t,i){t.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",t);const s=n.findViewImgElement(t);s.getAttribute("src")!==e&&i.setAttribute("src",e,s),L2(t,"placeholder")||i.insert(i.createPositionAfter(s),qz(i))}function av(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),O2(n,e,"placeholder")}function Uz(n,e,t,i){const s=jz(e);e.insert(e.createPositionAt(n,"end"),s),t.on("change:uploadedPercent",(o,r,a)=>{i.change(l=>{l.setStyle("width",a+"%",s)})})}function $z(n,e){O2(n,e,"progressBar")}function Wz(n,e,t){const i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),i),setTimeout(()=>{t.change(s=>s.remove(s.createRangeOn(i)))},3e3)}function jz(n){const e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function qz(n){const e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function L2(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function O2(n,e,t){const i=L2(n,t);i&&e.remove(e.createRangeOn(i))}function Gz(n,e,t,i){if(i.data){const s=n.findViewImgElement(e);t.setAttribute("src",i.data,s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kz extends F{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=Ze(e.file),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((r,a)=>{const l=i.getSelectedElement();if(a&&l&&s.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(r,o,c)}else this._uploadImage(r,o)})}_uploadImage(e,t,i){const s=this.editor,r=s.plugins.get(xs).createLoader(e),a=s.plugins.get("ImageUtils");r&&a.insertImage({...t,uploadId:r.id},i)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qz extends k{static get requires(){return[xs,Gc,$n,jt]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,i=e.conversion,s=e.plugins.get(xs),o=e.plugins.get("ImageUtils"),r=R2(e.config.get("image.upload.types")),a=new Kz(e);e.commands.add("uploadImage",a),e.commands.add("imageUpload",a),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(l,c)=>{if(Jz(c.dataTransfer))return;const u=Array.from(c.dataTransfer.files).filter(d=>d?r.test(d.type):!1);u.length&&(l.stop(),e.model.change(d=>{c.targetRanges&&d.setSelection(c.targetRanges.map(h=>e.editing.mapper.toModelRange(h))),e.model.enqueueChange(()=>{e.execute("uploadImage",{file:u})})}))}),this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",(l,c)=>{const u=Array.from(e.editing.view.createRangeIn(c.content)).filter(h=>Nz(o,h.item)&&!h.item.getAttribute("uploadProcessed")).map(h=>({promise:Mz(h.item),imageElement:h.item}));if(!u.length)return;const d=new $s(e.editing.view.document);for(const h of u){d.setAttribute("uploadProcessed",!0,h.imageElement);const f=s.createLoader(h.promise);f&&(d.setAttribute("src","",h.imageElement),d.setAttribute("uploadId",f.id,h.imageElement))}}),e.editing.view.document.on("dragover",(l,c)=>{c.preventDefault()}),t.on("change",()=>{const l=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),c=new Set;for(const u of l)if(u.type=="insert"&&u.name!="$text"){const d=u.position.nodeAfter,h=u.position.root.rootName=="$graveyard";for(const f of Yz(e,d)){const p=f.getAttribute("uploadId");if(!p)continue;const b=s.loaders.get(p);b&&(h?c.has(p)||b.abort():(c.add(p),this._uploadImageElements.set(p,f),b.status=="idle"&&this._readAndUpload(b)))}}}),this.on("uploadComplete",(l,{imageElement:c,data:u})=>{const d=u.urls?u.urls:u;this.editor.model.change(h=>{h.setAttribute("src",d.default,c),this._parseAndSetSrcsetAttributeOnImage(d,c,h)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const t=this.editor,i=t.model,s=t.locale.t,o=t.plugins.get(xs),r=t.plugins.get(Gc),a=t.plugins.get("ImageUtils"),l=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","reading",l.get(e.id))}),e.read().then(()=>{const u=e.upload(),d=l.get(e.id);if(Z.isSafari){const h=t.editing.mapper.toViewElement(d),f=a.findViewImgElement(h);t.editing.view.once("render",()=>{if(!f.parent)return;const p=t.editing.view.domConverter.mapViewToDom(f.parent);if(!p)return;const b=p.style.display;p.style.display="none",p._ckHack=p.offsetHeight,p.style.display=b})}return i.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","uploading",d)}),u}).then(u=>{i.enqueueChange({isUndoable:!1},d=>{const h=l.get(e.id);d.setAttribute("uploadStatus","complete",h),this.fire("uploadComplete",{data:u,imageElement:h})}),c()}).catch(u=>{if(e.status!=="error"&&e.status!=="aborted")throw u;e.status=="error"&&u&&r.showWarning(u,{title:s("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},d=>{d.remove(l.get(e.id))}),c()});function c(){i.enqueueChange({isUndoable:!1},u=>{const d=l.get(e.id);u.removeAttribute("uploadId",d),u.removeAttribute("uploadStatus",d),l.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let s=0;const o=Object.keys(e).filter(r=>{const a=parseInt(r,10);if(!isNaN(a))return s=Math.max(s,a),!0}).map(r=>`${e[r]} ${r}w`).join(", ");o!=""&&i.setAttribute("srcset",{data:o,width:s},t)}}function Jz(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function Yz(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(i=>t.isImage(i.item)).map(i=>i.item)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M2 extends k{static get pluginName(){return"ImageUpload"}static get requires(){return[Qz,Dz,zz]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xz extends B{constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("class",t.class||null),this.children=this.createCollection(),t.children&&t.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",i.to("class")],role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zz extends B{constructor(e,t){super(e);const{insertButtonView:i,cancelButtonView:s}=this._createActionButtons(e);if(this.insertButtonView=i,this.cancelButtonView=s,this.set("imageURLInputValue",""),this.focusTracker=new Le,this.keystrokes=new Ue,this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.set("_integrations",new xe),t)for(const[o,r]of Object.entries(t))o==="insertImageViaUrl"&&(r.fieldView.bind("value").to(this,"imageURLInputValue",a=>a||""),r.fieldView.on("input",()=>{this.imageURLInputValue=r.fieldView.element.value.trim()})),r.name=o,this._integrations.add(r);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:"-1"},children:[...this._integrations,new Xz(e,{children:[this.insertButtonView,this.cancelButtonView],class:"ck-image-insert-form__action-row"})]})}render(){super.render(),Ws({view:this});const e=[...this._integrations,this.insertButtonView,this.cancelButtonView];e.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element);const t=i=>i.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(e[0].element,"selectstart",(i,s)=>{s.stopPropagation()},{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}getIntegration(e){return this._integrations.find(t=>t.name===e)}_createActionButtons(e){const t=e.t,i=new z(e),s=new z(e);return i.set({label:t("Insert"),icon:H.check,class:"ck-button-save",type:"submit",withText:!0,isEnabled:this.imageURLInputValue}),s.set({label:t("Cancel"),icon:H.cancel,class:"ck-button-cancel",withText:!0}),i.bind("isEnabled").to(this,"imageURLInputValue",o=>!!o),i.delegate("execute").to(this,"submit"),s.delegate("execute").to(this,"cancel"),{insertButtonView:i,cancelButtonView:s}}focus(){this._focusCycler.focusFirst()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function eH(n){const e=n.config.get("image.insert.integrations"),t=n.plugins.get("ImageInsertUI"),i={insertImageViaUrl:tH(n.locale)};if(!e)return i;if(e.find(s=>s==="openCKFinder")&&n.ui.componentFactory.has("ckfinder")){const s=n.ui.componentFactory.create("ckfinder");s.set({withText:!0,class:"ck-image-insert__ck-finder-button"}),s.delegate("execute").to(t,"cancel"),i.openCKFinder=s}return e.reduce((s,o)=>(i[o]?s[o]=i[o]:n.ui.componentFactory.has(o)&&(s[o]=n.ui.componentFactory.create(o)),s),{})}function tH(n){const e=n.t,t=new Ge(n,Xt);return t.set({label:e("Insert image via URL")}),t.fieldView.placeholder="https://example.com/image.png",t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N2 extends k{static get pluginName(){return"ImageInsertUI"}init(){const e=this.editor,t=i=>this._createDropdownView(i);e.ui.componentFactory.add("insertImage",t),e.ui.componentFactory.add("imageInsert",t)}_createDropdownView(e){const t=this.editor,i=e.t,s=t.commands.get("uploadImage"),o=t.commands.get("insertImage");this.dropdownView=Se(e,s?qs:void 0);const r=this.dropdownView.buttonView,a=this.dropdownView.panelView;if(r.set({label:i("Insert image"),icon:H.image,tooltip:!0}),a.extendTemplate({attributes:{class:"ck-image-insert__panel"}}),s){const l=this.dropdownView.buttonView;l.actionView=t.ui.componentFactory.create("uploadImage"),l.actionView.extendTemplate({attributes:{class:"ck ck-button ck-splitbutton__action"}})}return this._setUpDropdown(s||o)}_setUpDropdown(e){const t=this.editor,i=t.t,s=this.dropdownView,o=s.panelView,r=this.editor.plugins.get("ImageUtils"),a=t.commands.get("replaceImageSource");let l;s.bind("isEnabled").to(e),s.once("change:isOpen",()=>{l=new Zz(t.locale,eH(t)),l.delegate("submit","cancel").to(s),o.children.add(l)}),s.on("change:isOpen",()=>{const d=t.model.document.selection.getSelectedElement(),h=l.insertButtonView,f=l.getIntegration("insertImageViaUrl");s.isOpen&&(r.isImage(d)?(l.imageURLInputValue=a.value,h.label=i("Update"),f.label=i("Update image URL")):(l.imageURLInputValue="",h.label=i("Insert"),f.label=i("Insert image via URL")))},{priority:"low"}),this.delegate("cancel").to(s),s.on("submit",()=>{u(),c()}),s.on("cancel",()=>{u()});function c(){const d=t.model.document.selection.getSelectedElement();r.isImage(d)?t.execute("replaceImageSource",{source:l.imageURLInputValue}):t.execute("insertImage",{source:l.imageURLInputValue})}function u(){t.editing.view.focus(),s.isOpen=!1}return s}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nH extends k{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[N2]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iH extends k{static get pluginName(){return"ImageInsert"}static get requires(){return[M2,nH,N2]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sH extends F{refresh(){const e=this.editor,i=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("width")?this.value=null:this.value={width:i.getAttribute("width"),height:null}}execute(e){const t=this.editor,i=t.model,o=t.plugins.get("ImageUtils").getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},o&&i.change(r=>{r.setAttribute("width",e.width,o)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B2 extends k{static get requires(){return[jt]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new sH(e);this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:"width"}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:"width"})}_registerConverters(e){const t=this.editor;t.conversion.for("downcast").add(i=>i.on(`attribute:width:${e}`,(s,o,r)=>{if(!r.consumable.consume(o.item,s.name))return;const a=r.writer,l=r.mapper.toViewElement(o.item);o.attributeNewValue!==null?(a.setStyle("width",o.attributeNewValue,l),a.addClass("image_resized",l)):(a.removeStyle("width",l),a.removeClass("image_resized",l))})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"width",value:i=>i.getStyle("width")}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fh={small:H.objectSizeSmall,medium:H.objectSizeMedium,large:H.objectSizeLarge,original:H.objectSizeFull};class oH extends k{static get requires(){return[B2]}static get pluginName(){return"ImageResizeButtons"}constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(const s of t)this._registerImageResizeButton(s);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:i,value:s,icon:o}=e,r=s?s+this._resizeUnit:null;t.ui.componentFactory.add(i,a=>{const l=new z(a),c=t.commands.get("resizeImage"),u=this._getOptionLabelValue(e,!0);if(!fh[o])throw new y("imageresizebuttons-missing-icon",t,e);return l.set({label:u,icon:fh[o],tooltip:u,isToggleable:!0}),l.bind("isEnabled").to(this),l.bind("isOn").to(c,"value",lv(r)),this.listenTo(l,"execute",()=>{t.execute("resizeImage",{width:r})}),l})}_registerImageResizeDropdown(e){const t=this.editor,i=t.t,s=e.find(r=>!r.value),o=r=>{const a=t.commands.get("resizeImage"),l=Se(r,Ox),c=l.buttonView;return c.set({tooltip:i("Resize image"),commandValue:s.value,icon:fh.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button"}),c.bind("label").to(a,"value",u=>u&&u.width?u.width:this._getOptionLabelValue(s)),l.bind("isOn").to(a),l.bind("isEnabled").to(this),Tn(l,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:i("Image resize list")}),this.listenTo(l,"execute",u=>{t.execute(u.source.commandName,{width:u.source.commandValue}),t.editing.view.focus()}),l};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t){const i=this.editor.t;return e.label?e.label:t?e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){const i=new xe;return e.map(s=>{const o=s.value?s.value+this._resizeUnit:null,r={type:"button",model:new un({commandName:"resizeImage",commandValue:o,label:this._getOptionLabelValue(s),withText:!0,icon:null})};r.model.bind("isOn").to(t,"value",lv(o)),i.add(r)}),i}}function lv(n){return e=>n===null&&e===n?!0:e&&e.width===n}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rH="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",aH=/(image|image-inline)/,mh="image_resized";class lH extends k{static get requires(){return[ah]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view;t.addObserver(S2),this.listenTo(t.document,"imageLoaded",(i,s)=>{if(!s.target.matches(rH))return;const o=e.editing.view.domConverter,a=o.domToView(s.target).findAncestor({classes:aH});let l=this.editor.plugins.get(ah).getResizerByViewElement(a);if(l){l.redraw();return}const c=e.editing.mapper,u=c.toModelElement(a);l=e.plugins.get(ah).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:u,viewElement:a,editor:e,getHandleHost(d){return d.querySelector("img")},getResizeHost(){return o.mapViewToDom(c.toViewElement(u.parent))},isCentered(){const d=u.getAttribute("imageStyle");return!d||d=="block"||d=="alignCenter"},onCommit(d){t.change(h=>{h.removeClass(mh,a)}),e.execute("resizeImage",{width:d})}}),l.on("updateSize",()=>{a.hasClass(mh)||t.change(d=>{d.addClass(mh,a)})}),l.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cH extends k{static get requires(){return[B2,lH,oH]}static get pluginName(){return"ImageResize"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uH extends F{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(i=>{if(i.isDefault)for(const s of i.modelElements)this._defaultStyles[s]=i.name;return[i.name,i]}))}refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled?i.hasAttribute("imageStyle")?this.value=i.getAttribute("imageStyle"):this.value=this._defaultStyles[i.name]:this.value=!1}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils");i.change(o=>{const r=e.value;let a=s.getClosestSelectedImageElement(i.document.selection);r&&this.shouldConvertImageType(r,a)&&(this.editor.execute(s.isBlockImage(a)?"imageTypeInline":"imageTypeBlock"),a=s.getClosestSelectedImageElement(i.document.selection)),!r||this._styles.get(r).isDefault?o.removeAttribute("imageStyle",a):o.setAttribute("imageStyle",r,a)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{objectFullWidth:dH,objectInline:F2,objectLeft:D2,objectRight:lm,objectCenter:cm,objectBlockLeft:z2,objectBlockRight:H2}=H,ac={get inline(){return{name:"inline",title:"In line",icon:F2,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:D2,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:z2,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:cm,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:lm,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:H2,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:cm,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:lm,modelElements:["imageBlock"],className:"image-style-side"}}},U2={full:dH,left:z2,right:H2,center:cm,inlineLeft:D2,inlineRight:lm,inline:F2},$2=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function hH(n){return(n.configuredStyles.options||[]).map(i=>gH(i)).filter(i=>pH(i,n))}function fH(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function mH(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...$2]:[]}function gH(n){return typeof n=="string"?ac[n]?n={...ac[n]}:n={name:n}:n=wH(ac[n.name],n),typeof n.icon=="string"&&(n.icon=U2[n.icon]||n.icon),n}function pH(n,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:i,name:s}=n;if(!i||!i.length||!s)return W2({style:n}),!1;{const o=[e?"imageBlock":null,t?"imageInline":null];if(!i.some(r=>o.includes(r)))return Ce("image-style-missing-dependency",{style:n,missingPlugins:i.map(r=>r==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function wH(n,e){const t={...e};for(const i in n)Object.prototype.hasOwnProperty.call(e,i)||(t[i]=n[i]);return t}function W2(n){Ce("image-style-configuration-definition-invalid",n)}const um={normalizeStyles:hH,getDefaultStylesConfiguration:fH,getDefaultDropdownDefinitions:mH,warnInvalidStyle:W2,DEFAULT_OPTIONS:ac,DEFAULT_ICONS:U2,DEFAULT_DROPDOWN_DEFINITIONS:$2};/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bH(n){return(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const s=cv(t.attributeNewValue,n),o=cv(t.attributeOldValue,n),r=i.mapper.toViewElement(t.item),a=i.writer;o&&a.removeClass(o.className,r),s&&a.addClass(s.className,r)}}function vH(n){const e={imageInline:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,i,s)=>{if(!i.modelRange)return;const o=i.viewItem,r=de(i.modelRange.getItems());if(r&&s.schema.checkAttribute(r,"imageStyle"))for(const a of e[r.name])s.consumable.consume(o,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,r)}}function cv(n,e){for(const t of e)if(t.name===n)return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j2 extends k{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[jt]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=um,i=this.editor,s=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(s,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:s,isInlinePluginLoaded:o}),this._setupConversion(s,o),this._setupPostFixer(),i.commands.add("imageStyle",new uH(i,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,s=i.model.schema,o=bH(this.normalizedStyles),r=vH(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,i=e.plugins.get(jt),s=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let r=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let l=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(l&&l.is("element","paragraph")&&l.childCount>0&&(l=l.getChild(0)),!i.isImage(l))continue;const c=l.getAttribute("imageStyle");if(!c)continue;const u=s.get(c);(!u||!u.modelElements.includes(l.name))&&(o.removeAttribute("imageStyle",l),r=!0)}return r})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _H extends k{static get requires(){return[j2]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=uv(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const o of i)this._createButton(o);const s=uv([...t.filter(ke),...um.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const o of s)this._createDropdown(o,i)}_createDropdown(e,t){const i=this.editor.ui.componentFactory;i.add(e.name,s=>{let o;const{defaultItem:r,items:a,title:l}=e,c=a.filter(f=>t.find(({name:p})=>dv(p)===f)).map(f=>{const p=i.create(f);return f===r&&(o=p),p});a.length!==c.length&&um.warnInvalidStyle({dropdown:e});const u=Se(s,qs),d=u.buttonView,h=d.arrowView;return qa(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),d.set({label:hv(l,o.label),class:null,tooltip:!0}),h.unbind("label"),h.set({label:l}),d.bind("icon").toMany(c,"isOn",(...f)=>{const p=f.findIndex(ms);return p<0?o.icon:c[p].icon}),d.bind("label").toMany(c,"isOn",(...f)=>{const p=f.findIndex(ms);return hv(l,p<0?o.label:c[p].label)}),d.bind("isOn").toMany(c,"isOn",(...f)=>f.some(ms)),d.bind("class").toMany(c,"isOn",(...f)=>f.some(ms)?"ck-splitbutton_flatten":null),d.on("execute",()=>{c.some(({isOn:f})=>f)?u.isOpen=!u.isOpen:o.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...f)=>f.some(ms)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(dv(t),i=>{const s=this.editor.commands.get("imageStyle"),o=new z(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(s,"isEnabled"),o.bind("isOn").to(s,"value",r=>r===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function uv(n,e){for(const t of n)e[t.title]&&(t.title=e[t.title]);return n}function dv(n){return`imageStyle:${n}`}function hv(n,e){return(n?n+": ":"")+e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yH extends k{static get requires(){return[j2,_H]}static get pluginName(){return"ImageStyle"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class CH extends k{static get requires(){return[Jc,jt]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Jc),s=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:kH(e.config.get("image.toolbar")||[]),getRelatedElement:o=>s.getClosestSelectedImageWidget(o)})}}function kH(n){return n.map(e=>ke(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xH extends k{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new vb(e)),e.commands.add("outdent",new vb(e))}}const fv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',mv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TH extends k{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?fv:mv,o=t.uiLanguageDirection=="ltr"?mv:fv;this._defineButton("indent",i("Increase indent"),s),this._defineButton("outdent",i("Decrease indent"),o)}_defineButton(e,t,i){const s=this.editor;s.ui.componentFactory.add(e,o=>{const r=s.commands.get(e),a=new z(o);return a.set({label:t,icon:i,tooltip:!0}),a.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(a,"execute",()=>{s.execute(e),s.editing.view.focus()}),a})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EH extends k{static get pluginName(){return"Indent"}static get requires(){return[xH,TH]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bl extends F{constructor(e,t){super(e),this._indentBehavior=t}refresh(){const t=this.editor.model,i=de(t.document.selection.getSelectedBlocks());if(!i||!t.schema.checkAttribute(i,"blockIndent")){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(i.getAttribute("blockIndent"))}execute(){const e=this.editor.model,t=SH(e);e.change(i=>{for(const s of t){const o=s.getAttribute("blockIndent"),r=this._indentBehavior.getNextIndent(o);r?i.setAttribute("blockIndent",r,s):i.removeAttribute("blockIndent",s)}})}}function SH(n){const e=n.document.selection,t=n.schema;return Array.from(e.getSelectedBlocks()).filter(s=>t.checkAttribute(s,"blockIndent"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gv{constructor(e){this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){const t=parseFloat(e||0);return this.isForward||t>0}getNextIndent(e){const t=parseFloat(e||0);if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,o=t+s;return o>0?o+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pv{constructor(e){this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){const t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){const t=this.classes.indexOf(e),i=this.isForward?1:-1;return this.classes[t+i]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const AH=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class IH extends k{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}init(){const e=this.editor,t=e.config.get("indentBlock"),i=!t.classes||!t.classes.length,s=Object.assign({direction:"forward"},t),o=Object.assign({direction:"backward"},t);i?(e.data.addStyleProcessorRules(GM),this._setupConversionUsingOffset(e.conversion),e.commands.add("indentBlock",new Bl(e,new gv(s))),e.commands.add("outdentBlock",new Bl(e,new gv(o)))):(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new Bl(e,new pv(s))),e.commands.add("outdentBlock",new Bl(e,new pv(o))))}afterInit(){const e=this.editor,t=e.model.schema,i=e.commands.get("indent"),s=e.commands.get("outdent"),o=e.config.get("heading.options");(o&&o.map(l=>l.model)||AH).forEach(l=>{t.isRegistered(l)&&t.extend(l,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(e.commands.get("indentBlock")),s.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const e=this.editor.conversion,i=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>s.getStyle(i)}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[i]:s}})})}_setupConversionUsingClasses(e){const t={model:{key:"blockIndent",values:[]},view:{}};for(const i of e)t.model.values.push(i),t.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ho="italic";class PH extends k{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ho}),e.model.schema.setAttributeProperties(ho,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ho,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(ho,new Gs(e,ho)),e.keystrokes.set("CTRL+I",ho)}}const RH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const gh="italic";class VH extends k{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(gh,i=>{const s=e.commands.get(gh),o=new z(i);return o.set({label:t("Italic"),icon:RH,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(gh),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LH extends k{static get requires(){return[PH,VH]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OH{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,s)=>{if(!s.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||s.schema.isInline(i.item)))return;const o=s.writer,r=o.document.selection;for(const a of this._definitions){const l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(const c in a.styles)o.setStyle(c,a.styles[c],l);o.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?o.wrap(r.getFirstRange(),l):o.wrap(s.mapper.toViewRange(i.range),l):o.unwrap(s.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:s,mapper:o})=>{const r=o.toViewElement(i.item),a=Array.from(r.getChildren()).find(l=>l.name==="a");for(const l of this._definitions){const c=rn(l.attributes);if(l.callback(i.attributeNewValue)){for(const[u,d]of c)u==="class"?s.addClass(d,a):s.setAttribute(u,d,a);l.classes&&s.addClass(l.classes,a);for(const u in l.styles)s.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?s.removeClass(d,a):s.removeAttribute(u,a);l.classes&&s.removeClass(l.classes,a);for(const u in l.styles)s.removeStyle(u,a)}}})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MH extends F{constructor(e){super(e),this.manualDecorators=new xe,this.automaticDecorators=new OH}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||de(t.getSelectedBlocks());nm(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={}){const i=this.editor.model,s=i.document.selection,o=[],r=[];for(const a in t)t[a]?o.push(a):r.push(a);i.change(a=>{if(s.isCollapsed){const l=s.getFirstPosition();if(s.hasAttribute("linkHref")){const c=Yo(l,"linkHref",s.getAttribute("linkHref"),i);a.setAttribute("linkHref",e,c),o.forEach(u=>{a.setAttribute(u,!0,c)}),r.forEach(u=>{a.removeAttribute(u,c)}),a.setSelection(a.createPositionAfter(c.end.nodeBefore))}else if(e!==""){const c=rn(s.getAttributes());c.set("linkHref",e),o.forEach(d=>{c.set(d,!0)});const{end:u}=i.insertContent(a.createText(e,c),l);a.setSelection(u)}["linkHref",...o,...r].forEach(c=>{a.removeSelectionAttribute(c)})}else{const l=i.schema.getValidRanges(s.getRanges(),"linkHref"),c=[];for(const d of s.getSelectedBlocks())i.schema.checkAttribute(d,"linkHref")&&c.push(a.createRangeOn(d));const u=c.slice();for(const d of l)this._isRangeToUpdate(d,c)&&u.push(d);for(const d of u)a.setAttribute("linkHref",e,d),o.forEach(h=>{a.setAttribute(h,!0,d)}),r.forEach(h=>{a.removeAttribute(h,d)})}})}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,s=i.getSelectedElement();return nm(s,t.schema)?s.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class NH extends F{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();nm(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,i=t.document.selection,s=e.commands.get("link");t.change(o=>{const r=i.isCollapsed?[Yo(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of r)if(o.removeAttribute("linkHref",a),s)for(const l of s.manualDecorators)o.removeAttribute(l.id,a)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q2{constructor({id:e,label:t,attributes:i,classes:s,styles:o,defaultValue:r}){this.id=e,this.set("value"),this.defaultValue=r,this.label=t,this.attributes=i,this.classes=s,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}Ua(q2,se);/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const BH="ck-link_selected",wv="automatic",FH="manual",DH=/^(https?:)?\/\//;class fp extends k{static get pluginName(){return"LinkEditing"}static get requires(){return[Kc,$x,$n]}constructor(e){super(e),e.config.define("link",{addTargetToExternalLinks:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:F0}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(s,o)=>F0(s2(s),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:s=>s.getAttribute("href")}}),e.commands.add("link",new MH(e)),e.commands.add("unlink",new NH(e));const t=hF(e.t,fF(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(s=>s.mode===wv)),this._enableManualDecorators(t.filter(s=>s.mode===FH)),e.plugins.get(Kc).registerAttribute("linkHref"),Gx(e,"linkHref","a",BH),this._enableLinkOpen(),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,s=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:wv,callback:o=>DH.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(e),s.length&&t.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,s=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id}),o=new q2(o),s.add(o),t.conversion.for("downcast").attributeToElement({model:o.id,view:(r,{writer:a,schema:l},{item:c})=>{if((c.is("selection")||l.isInline(c))&&r){const u=a.createAttributeElement("a",o.attributes,{priority:5});o.classes&&a.addClass(o.classes,u);for(const d in o.styles)a.setStyle(d,o.styles[d],u);return a.setCustomProperty("link",!0,u),u}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",(s,o)=>{if(!(Z.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let a=o.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const l=a.getAttribute("href");l&&(s.stop(),o.preventDefault(),D0(l))},{context:"$capture"}),this.listenTo(i,"keydown",(s,o)=>{const r=e.commands.get("link").value;r&&o.keyCode===Q.enter&&o.altKey&&(s.stop(),D0(r))})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection;this.listenTo(t,"insertContent",()=>{const s=i.anchor.nodeBefore,o=i.anchor.nodeAfter;i.hasAttribute("linkHref")&&s&&s.hasAttribute("linkHref")&&(o&&o.hasAttribute("linkHref")||t.change(r=>{ph(r,wh(t.schema))}))},{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,t=e.model;e.editing.view.addObserver(Ou);let i=!1;this.listenTo(e.editing.view.document,"mousedown",()=>{i=!0}),this.listenTo(e.editing.view.document,"selectionChange",()=>{if(!i)return;i=!1;const s=t.document.selection;if(!s.isCollapsed||!s.hasAttribute("linkHref"))return;const o=s.getFirstPosition(),r=Yo(o,"linkHref",s.getAttribute("linkHref"),t);(o.isTouching(r.start)||o.isTouching(r.end))&&t.change(a=>{ph(a,wh(t.schema))})})}_enableTypingOverLink(){const e=this.editor,t=e.editing.view;let i,s;this.listenTo(t.document,"delete",()=>{s=!0},{priority:"high"}),this.listenTo(e.model,"deleteContent",()=>{const o=e.model.document.selection;if(!o.isCollapsed){if(s){s=!1;return}bv(e)&&zH(e.model)&&(i=o.getAttributes())}},{priority:"high"}),this.listenTo(e.model,"insertContent",(o,[r])=>{s=!1,bv(e)&&i&&(e.model.change(a=>{for(const[l,c]of i)a.setAttribute(l,c,r)}),i=null)},{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view;let o=!1,r=!1;this.listenTo(s.document,"delete",(a,l)=>{r=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o=!1;const a=i.getFirstPosition(),l=i.getAttribute("linkHref");if(!l)return;const c=Yo(a,"linkHref",l,t);o=c.containsPosition(a)||c.end.isEqual(a)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{r&&(r=!1,!o&&e.model.enqueueChange(a=>{ph(a,wh(t.schema))}))},{priority:"low"})}_enableClipboardIntegration(){const e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(s,o)=>{t.change(r=>{const a=r.createRangeIn(o.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=lp(l.getAttribute("linkHref"),i);r.setAttribute("linkHref",c,l)}})})}}function ph(n,e){n.removeSelectionAttribute("linkHref");for(const t of e)n.removeSelectionAttribute(t)}function zH(n){const e=n.document.selection,t=e.getFirstPosition(),i=e.getLastPosition(),s=t.nodeAfter;if(!s||!s.is("$text")||!s.hasAttribute("linkHref"))return!1;const o=i.textNode||i.nodeBefore;return s===o?!0:Yo(t,"linkHref",s.getAttribute("linkHref"),n).containsRange(n.createRange(t,i),!0)}function bv(n){return n.model.change(t=>t.batch).isTyping}function wh(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HH extends B{constructor(e,t){super(e);const i=e.t;this.focusTracker=new Le,this.keystrokes=new Ue,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),H.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),H.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const s=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&s.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:s,tabindex:"-1"},children:this.children}),Nu(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),Ws({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new Ge(this.locale,Xt);return t.label=e("Link URL"),t}_createButton(e,t,i,s){const o=new z(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const i of e.manualDecorators){const s=new ja(this.locale);s.set({name:i.id,label:i.label,withText:!0}),s.bind("isOn").toMany([i,e],"value",(o,r)=>r===void 0&&o===void 0?i.defaultValue:o),s.on("execute",()=>{i.set("value",!s.isOn)}),t.add(s)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const i=new B;i.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(s=>({tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(i)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}const UH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $H extends B{constructor(e){super(e);const t=e.t;this.focusTracker=new Le,this.keystrokes=new Ue,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(t("Unlink"),UH,"unlink"),this.editButtonView=this._createButton(t("Edit link"),H.pencil,"edit"),this.set("href"),this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){const s=new z(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.delegate("execute").to(this,i),s}_createPreviewButton(){const e=new z(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",s=>s&&s2(s)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",s=>s||i("This link has no URL")),e.bind("isEnabled").to(this,"href",s=>!!s),e.template.tag="a",e.template.eventListeners={},e}}const G2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const In="link-ui";class K2 extends k{static get requires(){return[Un]}static get pluginName(){return"LinkUI"}init(){const e=this.editor;e.editing.view.addObserver(yM),this.actionsView=null,this.formView=null,this._balloon=e.plugins.get(Un),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:In,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:In,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new $H(e.locale),i=e.commands.get("link"),s=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,r)=>{this._hideUI(),r()}),t.keystrokes.set(oc,(o,r)=>{this._addFormView(),r()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),s=new HH(e.locale,t);return s.urlInputView.fieldView.bind("value").to(t,"value"),s.urlInputView.bind("isReadOnly").to(t,"isEnabled",o=>!o),s.saveButtonView.bind("isEnabled").to(t),this.listenTo(s,"submit",()=>{const{value:o}=s.urlInputView.fieldView.element,r=lp(o,i);e.execute("link",r,s.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(s,"cancel",()=>{this._closeFormView()}),s.keystrokes.set("Esc",(o,r)=>{this._closeFormView(),r()}),s}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link"),i=e.t;e.ui.componentFactory.add("link",s=>{const o=new z(s);return o.isEnabled=!0,o.label=i("Link"),o.icon=G2,o.keystroke=oc,o.tooltip=!0,o.isToggleable=!0,o.bind("isEnabled").to(t,"isEnabled"),o.bind("isOn").to(t,"value",r=>!!r),this.listenTo(o,"execute",()=>this._showUI(!0)),o})}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(oc,(i,s)=>{s(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),lr({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=t.value||""}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),s=r();const o=()=>{const a=this._getSelectedLinkElement(),l=r();i&&!a||!i&&l!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,s=l};function r(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,i=e.document;let s=null;if(t.markers.has(In)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(In)),r=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));s=e.domConverter.viewRangeToDom(r)}else s=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Pe(i))return bh(t.getFirstPosition());{const s=t.getFirstRange().getTrimmed(),o=bh(s.start),r=bh(s.end);return!o||o!=r?null:e.createRangeIn(o).getTrimmed().isEqual(s)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(In))t.updateMarker(In,{range:i});else if(i.start.isAtEnd){const s=i.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:i});t.addMarker(In,{usingOperation:!1,affectsData:!1,range:t.createRange(s,i.end)})}else t.addMarker(In,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(In)&&e.change(t=>{t.removeMarker(In)})}}function bh(n){return n.getAncestors().find(e=>uF(e))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WH extends k{static get requires(){return[fp,K2,r2]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jH extends k{static get requires(){return["ImageEditing","ImageUtils",fp]}static get pluginName(){return"LinkImageEditing"}init(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(qH(e)),e.conversion.for("downcast").add(GH(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,i=e.commands.get("link").automaticDecorators;i.length&&e.conversion.for("downcast").add(i.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const i of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:i.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:i.id}),e.conversion.for("downcast").add(KH(i)),e.conversion.for("upcast").add(QH(e,i))}}function qH(n){const e=n.plugins.has("ImageInlineEditing"),t=n.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,o,r)=>{const a=o.viewItem,l=t.findViewImgElement(a);if(!l)return;const c=l.findAncestor(f=>t.isBlockImageView(f));if(e&&!c)return;const u={attributes:["href"]};if(!r.consumable.consume(a,u))return;const d=a.getAttribute("href");if(!d)return;let h=o.modelCursor.parent;if(!h.is("element","imageBlock")){const f=r.convertItem(l,o.modelCursor);o.modelRange=f.modelRange,o.modelCursor=f.modelCursor,h=o.modelCursor.nodeBefore}h&&h.is("element","imageBlock")&&r.writer.setAttribute("linkHref",d,h)},{priority:"high"})}}function GH(n){const e=n.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const r=o.mapper.toViewElement(s.item),a=o.writer,l=Array.from(r.getChildren()).find(d=>d.name==="a"),c=e.findViewImgElement(r),u=c.parent.is("element","picture")?c.parent:c;if(l)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,l):(a.move(a.createRangeOn(u),a.createPositionAt(r,0)),a.remove(l));else{const d=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(r,0),d),a.move(a.createRangeOn(u),a.createPositionAt(d,0))}},{priority:"high"})}}function KH(n){return e=>{e.on(`attribute:${n.id}:imageBlock`,(t,i,s)=>{const o=s.mapper.toViewElement(i.item),r=Array.from(o.getChildren()).find(a=>a.name==="a");if(r){for(const[a,l]of rn(n.attributes))s.writer.setAttribute(a,l,r);n.classes&&s.writer.addClass(n.classes,r);for(const a in n.styles)s.writer.setStyle(a,n.styles[a],r)}})}}function QH(n,e){const t=n.plugins.has("ImageInlineEditing"),i=n.plugins.get("ImageUtils");return s=>{s.on("element:a",(o,r,a)=>{const l=r.viewItem,c=i.findViewImgElement(l);if(!c)return;const u=c.findAncestor(p=>i.isBlockImageView(p));if(t&&!u)return;const h=new kn(e._createPattern()).match(l);if(!h||!a.consumable.consume(l,h.match))return;const f=r.modelCursor.nodeBefore||r.modelCursor.parent;a.writer.setAttribute(e.id,!0,f)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JH extends k{static get requires(){return[fp,K2,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(i,s)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(s.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",i=>{const s=new z(i),o=e.plugins.get("LinkUI"),r=e.commands.get("link");return s.set({isEnabled:!0,label:t("Link image"),icon:G2,keystroke:oc,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(r,"isEnabled"),s.bind("isOn").to(r,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?o._addActionsView():o._showUI(!0)}),s})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class YH extends k{static get requires(){return[jH,JH]}static get pluginName(){return"LinkImage"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dm extends F{constructor(e,t){super(e),this.type=t}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,s=Array.from(i.selection.getSelectedBlocks()).filter(r=>_v(r,t.schema)),o=e.forceValue!==void 0?!e.forceValue:this.value;t.change(r=>{if(o){let a=s[s.length-1].nextSibling,l=Number.POSITIVE_INFINITY,c=[];for(;a&&a.name=="listItem"&&a.getAttribute("listIndent")!==0;){const u=a.getAttribute("listIndent");u<l&&(l=u);const d=u-l;c.push({element:a,listIndent:d}),a=a.nextSibling}c=c.reverse();for(const u of c)r.setAttribute("listIndent",u.listIndent,u.element)}if(!o){let a=Number.POSITIVE_INFINITY;for(const l of s)l.is("element","listItem")&&l.getAttribute("listIndent")<a&&(a=l.getAttribute("listIndent"));a=a===0?1:a,vv(s,!0,a),vv(s,!1,a)}for(const a of s.reverse())o&&a.name=="listItem"?r.rename(a,"paragraph"):!o&&a.name!="listItem"?(r.setAttributes({listType:this.type,listIndent:0},a),r.rename(a,"listItem")):!o&&a.name=="listItem"&&a.getAttribute("listType")!=this.type&&r.setAttribute("listType",this.type,a);this.fire("_executeCleanup",s)})}_getValue(){const e=de(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=de(e.getSelectedBlocks());return i?_v(i,t):!1}}function vv(n,e,t){const i=e?n[0]:n[n.length-1];if(i.is("element","listItem")){let s=i[e?"previousSibling":"nextSibling"],o=i.getAttribute("listIndent");for(;s&&s.is("element","listItem")&&s.getAttribute("listIndent")>=t;)o>s.getAttribute("listIndent")&&(o=s.getAttribute("listIndent")),s.getAttribute("listIndent")==o&&n[e?"unshift":"push"](s),s=s[e?"previousSibling":"nextSibling"]}}function _v(n,e){return e.checkChild(n.parent,"listItem")&&!e.isObject(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yv extends F{constructor(e,t){super(e),this._indentBy=t=="forward"?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document;let i=Array.from(t.selection.getSelectedBlocks());e.change(s=>{const o=i[i.length-1];let r=o.nextSibling;for(;r&&r.name=="listItem"&&r.getAttribute("listIndent")>o.getAttribute("listIndent");)i.push(r),r=r.nextSibling;this._indentBy<0&&(i=i.reverse());for(const a of i){const l=a.getAttribute("listIndent")+this._indentBy;l<0?s.rename(a,"paragraph"):s.setAttribute("listIndent",l,a)}this.fire("_executeCleanup",i)})}_checkEnabled(){const e=de(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("element","listItem"))return!1;if(this._indentBy>0){const t=e.getAttribute("listIndent"),i=e.getAttribute("listType");let s=e.previousSibling;for(;s&&s.is("element","listItem")&&s.getAttribute("listIndent")>=t;){if(s.getAttribute("listIndent")==t)return s.getAttribute("listType")==i;s=s.previousSibling}return!1}return!0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function XH(n){const e=n.createContainerElement("li");return e.getFillerOffset=tU,e}function mp(n,e){const t=e.mapper,i=e.writer,s=n.getAttribute("listType")=="numbered"?"ol":"ul",o=XH(i),r=i.createContainerElement(s,null);return i.insert(i.createPositionAt(r,0),o),t.bindElements(n,o),o}function $u(n,e,t,i){const s=e.parent,o=t.mapper,r=t.writer;let a=o.toViewPosition(i.createPositionBefore(n));const l=Xo(n.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:n.getAttribute("listIndent")}),c=n.previousSibling;if(l&&l.getAttribute("listIndent")==n.getAttribute("listIndent")){const u=o.toViewElement(l);a=r.breakContainer(r.createPositionAfter(u))}else if(c&&c.name=="listItem"){a=o.toViewPosition(i.createPositionAt(c,"end"));const u=o.findMappedViewAncestor(a),d=Q2(u);d?a=r.createPositionBefore(d):a=r.createPositionAt(u,"end")}else a=o.toViewPosition(i.createPositionBefore(n));if(a=gp(a),r.insert(a,s),c&&c.name=="listItem"){const u=o.toViewElement(c),h=r.createRange(r.createPositionAt(u,0),a).getWalker({ignoreElementEnd:!0});for(const f of h)if(f.item.is("element","li")){const p=r.breakContainer(r.createPositionBefore(f.item)),b=f.item.parent,x=r.createPositionAt(e,"end");en(r,x.nodeBefore,x.nodeAfter),r.move(r.createRangeOn(b),x),h.position=p}}else{const u=s.nextSibling;if(u&&(u.is("element","ul")||u.is("element","ol"))){let d=null;for(const h of u.getChildren()){const f=o.toModelElement(h);if(f&&f.getAttribute("listIndent")>n.getAttribute("listIndent"))d=h;else break}d&&(r.breakContainer(r.createPositionAfter(d)),r.move(r.createRangeOn(d.parent),r.createPositionAt(e,"end")))}}en(r,s,s.nextSibling),en(r,s.previousSibling,s)}function en(n,e,t){return!e||!t||e.name!="ul"&&e.name!="ol"||e.name!=t.name||e.getAttribute("class")!==t.getAttribute("class")?null:n.mergeContainers(n.createPositionAfter(e))}function gp(n){return n.getLastMatchingPosition(e=>e.item.is("uiElement"))}function Xo(n,e){const t=!!e.sameIndent,i=!!e.smallerIndent,s=e.listIndent;let o=n;for(;o&&o.name=="listItem";){const r=o.getAttribute("listIndent");if(t&&s==r||i&&s>r)return o;e.direction==="forward"?o=o.nextSibling:o=o.previousSibling}return null}function hm(n,e,t,i){n.ui.componentFactory.add(e,s=>{const o=n.commands.get(e),r=new z(s);return r.set({label:t,icon:i,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.on("execute",()=>{n.execute(e),n.editing.view.focus()}),r})}function Q2(n){for(const e of n.getChildren())if(e.name=="ul"||e.name=="ol")return e;return null}function Xc(n,e){const t=[],i=n.parent,s={ignoreElementEnd:!1,startPosition:n,shallow:!0,direction:e},o=i.getAttribute("listIndent"),r=[...new Nn(s)].filter(a=>a.item.is("element")).map(a=>a.item);for(const a of r){if(!a.is("element","listItem")||a.getAttribute("listIndent")<o)break;if(!(a.getAttribute("listIndent")>o)){if(a.getAttribute("listType")!==i.getAttribute("listType")||a.getAttribute("listStyle")!==i.getAttribute("listStyle")||a.getAttribute("listReversed")!==i.getAttribute("listReversed")||a.getAttribute("listStart")!==i.getAttribute("listStart"))break;e==="backward"?t.unshift(a):t.push(a)}}return t}function Wu(n){let t=[...n.document.selection.getSelectedBlocks()].filter(i=>i.is("element","listItem")).map(i=>{const s=n.change(o=>o.createPositionAt(i,0));return[...Xc(s,"backward"),...Xc(s,"forward")]}).flat();return t=[...new Set(t)],t}const ZH=["disc","circle","square"],eU=["decimal","decimal-leading-zero","lower-roman","upper-roman","lower-latin","upper-latin"];function J2(n){return ZH.includes(n)?"bulleted":eU.includes(n)?"numbered":null}function tU(){const n=!this.isEmpty&&(this.getChild(0).name=="ul"||this.getChild(0).name=="ol");return this.isEmpty||n?0:Vk.call(this)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nU extends k{static get pluginName(){return"ListUtils"}getListTypeFromListStyleType(e){return J2(e)}getSelectedListItems(e){return Wu(e)}getSiblingNodes(e,t){return Xc(e,t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cv(n){return(e,t,i)=>{const s=i.consumable;if(!s.test(t.item,"insert")||!s.test(t.item,"attribute:listType")||!s.test(t.item,"attribute:listIndent"))return;s.consume(t.item,"insert"),s.consume(t.item,"attribute:listType"),s.consume(t.item,"attribute:listIndent");const o=t.item,r=mp(o,i);$u(o,r,i,n)}}function iU(n){return(e,t,i)=>{const r=i.mapper.toViewPosition(t.position).getLastMatchingPosition(f=>!f.item.is("element","li")).nodeAfter,a=i.writer;a.breakContainer(a.createPositionBefore(r)),a.breakContainer(a.createPositionAfter(r));const l=r.parent,c=l.previousSibling,u=a.createRangeOn(l),d=a.remove(u);c&&c.nextSibling&&en(a,c,c.nextSibling);const h=i.mapper.toModelElement(r);Y2(h.getAttribute("listIndent")+1,t.position,u.start,r,i,n);for(const f of a.createRangeIn(d).getItems())i.mapper.unbindViewElement(f);e.stop()}}const sU=(n,e,t)=>{if(!t.consumable.test(e.item,n.name))return;const i=t.mapper.toViewElement(e.item),s=t.writer;s.breakContainer(s.createPositionBefore(i)),s.breakContainer(s.createPositionAfter(i));const o=i.parent,r=e.attributeNewValue=="numbered"?"ol":"ul";s.rename(r,o)},oU=(n,e,t)=>{t.consumable.consume(e.item,n.name);const s=t.mapper.toViewElement(e.item).parent,o=t.writer;en(o,s,s.nextSibling),en(o,s.previousSibling,s)};function rU(n){return(e,t,i)=>{if(!i.consumable.consume(t.item,"attribute:listIndent"))return;const s=i.mapper.toViewElement(t.item),o=i.writer;o.breakContainer(o.createPositionBefore(s)),o.breakContainer(o.createPositionAfter(s));const r=s.parent,a=r.previousSibling,l=o.createRangeOn(r);o.remove(l),a&&a.nextSibling&&en(o,a,a.nextSibling),Y2(t.attributeOldValue+1,t.range.start,l.start,s,i,n),$u(t.item,s,i,n);for(const c of t.item.getChildren())i.consumable.consume(c,"insert")}}const kv=(n,e,t)=>{if(t.consumable.test(e.item,n.name)&&e.item.name!="listItem"){let i=t.mapper.toViewPosition(e.range.start);const s=t.writer,o=[];for(;(i.parent.name=="ul"||i.parent.name=="ol")&&(i=s.breakContainer(i),i.parent.name=="li");){const r=i,a=s.createPositionAt(i.parent,"end");if(!r.isEqual(a)){const l=s.remove(s.createRange(r,a));o.push(l)}i=s.createPositionAfter(i.parent)}if(o.length>0){for(let r=0;r<o.length;r++){const a=i.nodeBefore;if(i=s.insert(i,o[r]).end,r>0){const c=en(s,a,a.nextSibling);c&&c.parent==a&&i.offset--}}en(s,i.nodeBefore,i.nodeAfter)}}},aU=(n,e,t)=>{const i=t.mapper.toViewPosition(e.position),s=i.nodeBefore,o=i.nodeAfter;en(t.writer,s,o)},lU=(n,e,t)=>{if(t.consumable.consume(e.viewItem,{name:!0})){const i=t.writer,s=i.createElement("listItem"),o=gU(e.viewItem);i.setAttribute("listIndent",o,s);const r=e.viewItem.parent&&e.viewItem.parent.name=="ol"?"numbered":"bulleted";if(i.setAttribute("listType",r,s),!t.safeInsert(s,e.modelCursor))return;const a=fU(s,e.viewItem.getChildren(),t);e.modelRange=i.createRange(e.modelCursor,a),t.updateConversionResult(s,e)}},xv=(n,e,t)=>{if(t.consumable.test(e.viewItem,{name:!0})){const i=Array.from(e.viewItem.getChildren());for(const s of i)!(s.is("element","li")||Zo(s))&&s._remove()}},cU=(n,e,t)=>{if(t.consumable.test(e.viewItem,{name:!0})){if(e.viewItem.childCount===0)return;const i=[...e.viewItem.getChildren()];let s=!1;for(const o of i)s&&!Zo(o)&&o._remove(),Zo(o)&&(s=!0)}};function Tv(n){return(e,t)=>{if(t.isPhantom)return;const i=t.modelPosition.nodeBefore;if(i&&i.is("element","listItem")){const s=t.mapper.toViewElement(i),o=s.getAncestors().find(Zo),r=n.createPositionAt(s,0).getWalker();for(const a of r)if(a.type=="elementStart"&&a.item.is("element","li")){t.viewPosition=a.previousPosition;break}else if(a.type=="elementEnd"&&a.item==o){t.viewPosition=a.nextPosition;break}}}}function uU(n){return(e,t)=>{const i=t.viewPosition,s=i.parent,o=t.mapper;if(s.name=="ul"||s.name=="ol"){if(i.isAtEnd){const r=o.toModelElement(i.nodeBefore),a=o.getModelLength(i.nodeBefore);t.modelPosition=n.createPositionBefore(r).getShiftedBy(a)}else{const r=o.toModelElement(i.nodeAfter);t.modelPosition=n.createPositionBefore(r)}e.stop()}else if(s.name=="li"&&i.nodeBefore&&(i.nodeBefore.name=="ul"||i.nodeBefore.name=="ol")){const r=o.toModelElement(s);let a=1,l=i.nodeBefore;for(;l&&Zo(l);)a+=o.getModelLength(l),l=l.previousSibling;t.modelPosition=n.createPositionBefore(r).getShiftedBy(a),e.stop()}}}function dU(n,e){const t=n.document.differ.getChanges(),i=new Map;let s=!1;for(const l of t)if(l.type=="insert"&&l.name=="listItem")o(l.position);else if(l.type=="insert"&&l.name!="listItem"){if(l.name!="$text"){const u=l.position.nodeAfter;u.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",u),s=!0),u.hasAttribute("listType")&&(e.removeAttribute("listType",u),s=!0),u.hasAttribute("listStyle")&&(e.removeAttribute("listStyle",u),s=!0),u.hasAttribute("listReversed")&&(e.removeAttribute("listReversed",u),s=!0),u.hasAttribute("listStart")&&(e.removeAttribute("listStart",u),s=!0);for(const d of Array.from(n.createRangeIn(u)).filter(h=>h.item.is("element","listItem")))o(d.previousPosition)}const c=l.position.getShiftedBy(l.length);o(c)}else l.type=="remove"&&l.name=="listItem"?o(l.position):(l.type=="attribute"&&l.attributeKey=="listIndent"||l.type=="attribute"&&l.attributeKey=="listType")&&o(l.range.start);for(const l of i.values())r(l),a(l);return s;function o(l){const c=l.nodeBefore;if(!c||!c.is("element","listItem")){const u=l.nodeAfter;u&&u.is("element","listItem")&&i.set(u,u)}else{let u=c;if(i.has(u))return;for(let d=u.previousSibling;d&&d.is("element","listItem");d=u.previousSibling)if(u=d,i.has(u))return;i.set(c,u)}}function r(l){let c=0,u=null;for(;l&&l.is("element","listItem");){const d=l.getAttribute("listIndent");if(d>c){let h;u===null?(u=d-c,h=c):(u>d&&(u=d),h=d-u),e.setAttribute("listIndent",h,l),s=!0}else u=null,c=l.getAttribute("listIndent")+1;l=l.nextSibling}}function a(l){let c=[],u=null;for(;l&&l.is("element","listItem");){const d=l.getAttribute("listIndent");if(u&&u.getAttribute("listIndent")>d&&(c=c.slice(0,d+1)),d!=0)if(c[d]){const h=c[d];l.getAttribute("listType")!=h&&(e.setAttribute("listType",h,l),s=!0)}else c[d]=l.getAttribute("listType");u=l,l=l.nextSibling}}}const hU=function(n,[e,t,i]){const s=this;let o=e.is("documentFragment")?e.getChild(0):e,r;if(t?r=s.createSelection(t,i):r=s.document.selection,o&&o.is("element","listItem")){const a=r.getFirstPosition();let l=null;if(a.parent.is("element","listItem")?l=a.parent:a.nodeBefore&&a.nodeBefore.is("element","listItem")&&(l=a.nodeBefore),l){const c=l.getAttribute("listIndent");if(c>0)for(;o&&o.is("element","listItem");)o._setAttribute("listIndent",o.getAttribute("listIndent")+c),o=o.nextSibling}}};function fU(n,e,t){const{writer:i,schema:s}=t;let o=i.createPositionAfter(n);for(const r of e)if(r.name=="ul"||r.name=="ol")o=t.convertItem(r,o).modelCursor;else{const a=t.convertItem(r,i.createPositionAt(n,"end")),l=a.modelRange.start.nodeAfter;l&&l.is("element")&&!s.checkChild(n,l.name)&&(a.modelCursor.parent.is("element","listItem")?n=a.modelCursor.parent:n=mU(a.modelCursor),o=i.createPositionAfter(n))}return o}function mU(n){const e=new Nn({startPosition:n});let t;do t=e.next();while(!t.value.item.is("element","listItem"));return t.value.item}function Y2(n,e,t,i,s,o){const r=Xo(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:n}),a=s.mapper,l=s.writer,c=r?r.getAttribute("listIndent"):null;let u;if(!r)u=t;else if(c==n){const d=a.toViewElement(r).parent;u=l.createPositionAfter(d)}else{const d=o.createPositionAt(r,"end");u=a.toViewPosition(d)}u=gp(u);for(const d of[...i.getChildren()])Zo(d)&&(u=l.move(l.createRangeOn(d),u).end,en(l,d,d.nextSibling),en(l,d.previousSibling,d))}function Zo(n){return n.is("element","ol")||n.is("element","ul")}function gU(n){let e=0,t=n.parent;for(;t;){if(t.is("element","li"))e++;else{const i=t.previousSibling;i&&i.is("element","li")&&e++}t=t.parent}return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pp extends k{static get pluginName(){return"ListEditing"}static get requires(){return[zu,pi,nU]}init(){const e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const t=e.data,i=e.editing;e.model.document.registerPostFixer(o=>dU(e.model,o)),i.mapper.registerViewToModelLength("li",fm),t.mapper.registerViewToModelLength("li",fm),i.mapper.on("modelToViewPosition",Tv(i.view)),i.mapper.on("viewToModelPosition",uU(e.model)),t.mapper.on("modelToViewPosition",Tv(i.view)),e.conversion.for("editingDowncast").add(o=>{o.on("insert",kv,{priority:"high"}),o.on("insert:listItem",Cv(e.model)),o.on("attribute:listType:listItem",sU,{priority:"high"}),o.on("attribute:listType:listItem",oU,{priority:"low"}),o.on("attribute:listIndent:listItem",rU(e.model)),o.on("remove:listItem",iU(e.model)),o.on("remove",aU,{priority:"low"})}),e.conversion.for("dataDowncast").add(o=>{o.on("insert",kv,{priority:"high"}),o.on("insert:listItem",Cv(e.model))}),e.conversion.for("upcast").add(o=>{o.on("element:ul",xv,{priority:"high"}),o.on("element:ol",xv,{priority:"high"}),o.on("element:li",cU,{priority:"high"}),o.on("element:li",lU)}),e.model.on("insertContent",hU,{priority:"high"}),e.commands.add("numberedList",new dm(e,"numbered")),e.commands.add("bulletedList",new dm(e,"bulleted")),e.commands.add("indentList",new yv(e,"forward")),e.commands.add("outdentList",new yv(e,"backward"));const s=i.view.document;this.listenTo(s,"enter",(o,r)=>{const a=this.editor.model.document,l=a.selection.getLastPosition().parent;a.selection.isCollapsed&&l.name=="listItem"&&l.isEmpty&&(this.editor.execute("outdentList"),r.preventDefault(),o.stop())},{context:"li"}),this.listenTo(s,"delete",(o,r)=>{if(r.direction!=="backward")return;const a=this.editor.model.document.selection;if(!a.isCollapsed)return;const l=a.getFirstPosition();if(!l.isAtStart)return;const c=l.parent;c.name!=="listItem"||c.previousSibling&&c.previousSibling.name==="listItem"||(this.editor.execute("outdentList"),r.preventDefault(),o.stop())},{context:"li"}),this.listenTo(e.editing.view.document,"tab",(o,r)=>{const a=r.shiftKey?"outdentList":"indentList";this.editor.commands.get(a).isEnabled&&(e.execute(a),r.stopPropagation(),r.preventDefault(),o.stop())},{context:"li"})}afterInit(){const e=this.editor.commands,t=e.get("indent"),i=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),i&&i.registerChildCommand(e.get("outdentList"))}}function fm(n){let e=1;for(const t of n.getChildren())if(t.name=="ul"||t.name=="ol")for(const i of t.getChildren())e+=fm(i);return e}const X2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Z2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pU extends k{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;hm(this.editor,"numberedList",e("Numbered List"),X2),hm(this.editor,"bulletedList",e("Bulleted List"),Z2)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wU extends k{static get requires(){return[pp,pU]}static get pluginName(){return"List"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bU extends F{constructor(e,t){super(e),this.defaultType=t}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){this._tryToConvertItemsToList(e);const t=this.editor.model,i=Wu(t);i.length&&t.change(s=>{for(const o of i)s.setAttribute("listStyle",e.type||this.defaultType,o)})}_getValue(){const e=this.editor.model.document.selection.getFirstPosition().parent;return e&&e.is("element","listItem")?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,t=e.commands.get("numberedList"),i=e.commands.get("bulletedList");return t.isEnabled||i.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const t=J2(e.type);if(!t)return;const i=this.editor,s=`${t}List`;i.commands.get(s).value||i.execute(s)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vU extends F{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute(e={}){const t=this.editor.model,i=Wu(t).filter(s=>s.getAttribute("listType")=="numbered");t.change(s=>{for(const o of i)s.setAttribute("listReversed",!!e.reversed,o)})}_getValue(){const e=this.editor.model.document.selection.getFirstPosition().parent;return e&&e.is("element","listItem")&&e.getAttribute("listType")=="numbered"?e.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _U extends F{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute({startIndex:e=1}={}){const t=this.editor.model,i=Wu(t).filter(s=>s.getAttribute("listType")=="numbered");t.change(s=>{for(const o of i)s.setAttribute("listStart",e>=0?e:1,o)})}_getValue(){const e=this.editor.model.document.selection.getFirstPosition().parent;return e&&e.is("element","listItem")&&e.getAttribute("listType")=="numbered"?e.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Fl="default";class yU extends k{static get requires(){return[pp]}static get pluginName(){return"ListPropertiesEditing"}constructor(e){super(e),e.config.define("list",{properties:{styles:!0,startIndex:!1,reversed:!1}})}init(){const e=this.editor,t=e.model,i=e.config.get("list.properties"),s=CU(i);t.schema.extend("listItem",{allowAttributes:s.map(o=>o.attributeName)});for(const o of s)o.addCommand(e);this.listenTo(e.commands.get("indentList"),"_executeCleanup",TU(e,s)),this.listenTo(e.commands.get("outdentList"),"_executeCleanup",EU(e,s)),this.listenTo(e.commands.get("bulletedList"),"_executeCleanup",Ev(e)),this.listenTo(e.commands.get("numberedList"),"_executeCleanup",Ev(e)),t.document.registerPostFixer(SU(e,s)),e.conversion.for("upcast").add(kU(s)),e.conversion.for("downcast").add(xU(s)),this._mergeListAttributesWhileMergingLists(s)}afterInit(){const e=this.editor;e.commands.get("todoList")&&e.model.document.registerPostFixer(PU(e))}_mergeListAttributesWhileMergingLists(e){const i=this.editor.model;let s;this.listenTo(i,"deleteContent",(o,[r])=>{const a=r.getFirstPosition(),l=r.getLastPosition();if(a.parent===l.parent||!a.parent.is("element","listItem"))return;const c=l.parent.nextSibling;if(!c||!c.is("element","listItem"))return;const u=Xo(a.parent,{sameIndent:!0,listIndent:c.getAttribute("listIndent")});u&&u.getAttribute("listType")===c.getAttribute("listType")&&(s=u)},{priority:"high"}),this.listenTo(i,"deleteContent",()=>{s&&(i.change(o=>{const r=Xo(s.nextSibling,{sameIndent:!0,listIndent:s.getAttribute("listIndent"),direction:"forward"});if(!r){s=null;return}const a=[r,...Xc(o.createPositionAt(r,0),"forward")];for(const l of a)for(const c of e)if(c.appliesToListItem(l)){const u=c.attributeName,d=s.getAttribute(u);o.setAttribute(u,d,l)}}),s=null)},{priority:"low"})}}function CU(n){const e=[];return n.styles&&e.push({attributeName:"listStyle",defaultValue:Fl,addCommand(t){t.commands.add("listStyle",new bU(t,Fl))},appliesToListItem(){return!0},setAttributeOnDowncast(t,i,s){i&&i!==Fl?t.setStyle("list-style-type",i,s):t.removeStyle("list-style-type",s)},getAttributeOnUpcast(t){return t.getStyle("list-style-type")||Fl}}),n.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,addCommand(t){t.commands.add("listReversed",new vU(t))},appliesToListItem(t){return t.getAttribute("listType")=="numbered"},setAttributeOnDowncast(t,i,s){i?t.setAttribute("reversed","reversed",s):t.removeAttribute("reversed",s)},getAttributeOnUpcast(t){return t.hasAttribute("reversed")}}),n.startIndex&&e.push({attributeName:"listStart",defaultValue:1,addCommand(t){t.commands.add("listStart",new _U(t))},appliesToListItem(t){return t.getAttribute("listType")=="numbered"},setAttributeOnDowncast(t,i,s){i==0||i>1?t.setAttribute("start",i,s):t.removeAttribute("start",s)},getAttributeOnUpcast(t){const i=t.getAttribute("start");return i>=0?i:1}}),e}function kU(n){return e=>{e.on("element:li",(t,i,s)=>{const o=i.viewItem.parent,r=i.modelRange.start.nodeAfter||i.modelRange.end.nodeBefore;for(const a of n)if(a.appliesToListItem(r)){const l=a.getAttributeOnUpcast(o);s.writer.setAttribute(a.attributeName,l,r)}},{priority:"low"})}}function xU(n){return t=>{for(const i of n)t.on(`attribute:${i.attributeName}:listItem`,(s,o,r)=>{const a=r.writer,l=o.item,c=Xo(l.previousSibling,{sameIndent:!0,listIndent:l.getAttribute("listIndent"),direction:"backward"}),u=r.mapper.toViewElement(l);e(l,c)||a.breakContainer(a.createPositionBefore(u)),i.setAttributeOnDowncast(a,o.attributeNewValue,u.parent)},{priority:"low"})};function e(t,i){return i&&t.getAttribute("listType")===i.getAttribute("listType")&&t.getAttribute("listIndent")===i.getAttribute("listIndent")&&t.getAttribute("listStyle")===i.getAttribute("listStyle")&&t.getAttribute("listReversed")===i.getAttribute("listReversed")&&t.getAttribute("listStart")===i.getAttribute("listStart")}}function TU(n,e){return(t,i)=>{const s=i[0],o=s.getAttribute("listIndent"),r=i.filter(l=>l.getAttribute("listIndent")===o);let a=null;s.previousSibling.getAttribute("listIndent")+1!==o&&(a=Xo(s.previousSibling,{sameIndent:!0,direction:"backward",listIndent:o})),n.model.change(l=>{for(const c of r)for(const u of e)if(u.appliesToListItem(c)){const d=a==null?u.defaultValue:a.getAttribute(u.attributeName);l.setAttribute(u.attributeName,d,c)}})}}function EU(n,e){return(t,i)=>{if(i=i.reverse().filter(a=>a.is("element","listItem")),!i.length)return;const s=i[0].getAttribute("listIndent"),o=i[0].getAttribute("listType");let r=i[0].previousSibling;if(r.is("element","listItem"))for(;r.getAttribute("listIndent")!==s;)r=r.previousSibling;else r=null;r||(r=i[i.length-1].nextSibling),!(!r||!r.is("element","listItem"))&&r.getAttribute("listType")===o&&n.model.change(a=>{const l=i.filter(c=>c.getAttribute("listIndent")===s);for(const c of l)for(const u of e)if(u.appliesToListItem(c)){const d=u.attributeName,h=r.getAttribute(d);a.setAttribute(d,h,c)}})}}function SU(n,e){return t=>{let i=!1;const s=eT(n.model.document.differ.getChanges()).filter(r=>r.getAttribute("listType")!=="todo");if(!s.length)return i;let o=s[s.length-1].nextSibling;if((!o||!o.is("element","listItem"))&&(o=s[0].previousSibling,o)){const r=s[0].getAttribute("listIndent");for(;o.is("element","listItem")&&o.getAttribute("listIndent")!==r&&(o=o.previousSibling,!!o););}for(const r of e){const a=r.attributeName;for(const l of s){if(!r.appliesToListItem(l)){t.removeAttribute(a,l);continue}if(!l.hasAttribute(a))AU(o,l,r)?t.setAttribute(a,o.getAttribute(a),l):t.setAttribute(a,r.defaultValue,l),i=!0;else{const c=l.previousSibling;IU(c,l,r.attributeName)&&(t.setAttribute(a,c.getAttribute(a),l),i=!0)}}}return i}}function AU(n,e,t){if(!n)return!1;const i=n.getAttribute(t.attributeName);return!(!i||i==t.defaultValue||n.getAttribute("listType")!==e.getAttribute("listType"))}function IU(n,e,t){if(!n||!n.is("element","listItem")||e.getAttribute("listType")!==n.getAttribute("listType"))return!1;const i=n.getAttribute("listIndent");if(i<1||i!==e.getAttribute("listIndent"))return!1;const s=n.getAttribute(t);return!(!s||s===e.getAttribute(t))}function PU(n){return e=>{const t=eT(n.model.document.differ.getChanges()).filter(i=>i.getAttribute("listType")==="todo"&&(i.hasAttribute("listStyle")||i.hasAttribute("listReversed")||i.hasAttribute("listStart")));if(!t.length)return!1;for(const i of t)e.removeAttribute("listStyle",i),e.removeAttribute("listReversed",i),e.removeAttribute("listStart",i);return!0}}function Ev(n){return(e,t)=>{t=t.filter(i=>i.is("element","listItem")),n.model.change(i=>{for(const s of t)i.removeAttribute("listStyle",s)})}}function eT(n){const e=[];for(const t of n){const i=RU(t);i&&i.is("element","listItem")&&e.push(i)}return e}function RU(n){return n.type==="attribute"?n.range.start.nodeAfter:n.type==="insert"?n.position.nodeAfter:null}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class VU extends B{constructor(e,t){super(e);const i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}_createButtonView(){const e=new z(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:Zg}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",i=>!i),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LU extends B{constructor(e,{enabledProperties:t,styleButtonViews:i,styleGridAriaLabel:s}){super(e),this.stylesView=null,this.additionalPropertiesCollapsibleView=null,this.startIndexFieldView=null,this.reversedSwitchButtonView=null,this.focusTracker=new Le,this.keystrokes=new Ue,this.focusables=new yt;const o=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Rt({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),t.styles?(this.stylesView=this._createStylesView(i,s),this.children.add(this.stylesView)):o.push("ck-list-properties_without-styles"),(t.startIndex||t.reversed)&&(this._addNumberedListPropertyViews(t),o.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:o},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);Bu({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>W.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element),this.listenTo(this.startIndexFieldView.element,"selectstart",(t,i)=>{i.stopPropagation()},{priority:"high"});const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,t){const i=new B(this.locale);return i.children=i.createCollection(),i.children.addMany(e),i.setTemplate({tag:"div",attributes:{"aria-label":t,class:["ck","ck-list-styles-list"]},children:i.children}),i.children.delegate("execute").to(this),i.focus=function(){this.children.first.focus()},i.focusTracker=new Le,i.keystrokes=new Ue,i.render(),i.keystrokes.listenTo(i.element),i}_addNumberedListPropertyViews(e){const t=this.locale.t,i=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),i.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),i.push(this.reversedSwitchButtonView)),e.styles?(this.additionalPropertiesCollapsibleView=new VU(this.locale,i),this.additionalPropertiesCollapsibleView.set({label:t("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(i,"isEnabled",(...s)=>s.some(o=>o)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(s,o,r)=>{r||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(i)}_createStartIndexField(){const e=this.locale.t,t=new Ge(this.locale,EB);return t.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const i=t.fieldView.element,s=i.valueAsNumber;Number.isNaN(s)||(i.checkValidity()?this.fire("listStart",{startIndex:s}):t.errorText=e("Start index must be greater than 0."))}),t}_createReversedSwitchButton(){const e=this.locale.t,t=new ja(this.locale);return t.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),t.delegate("execute").to(this,"listReversed"),t}}const OU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',MU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',NU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',BU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',FU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',DU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',zU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',HU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',UU='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $U extends k{static get pluginName(){return"ListPropertiesUI"}init(){const e=this.editor,t=e.locale.t,i=e.config.get("list.properties");i.styles&&e.ui.componentFactory.add("bulletedList",Sv({editor:e,parentCommandName:"bulletedList",buttonLabel:t("Bulleted List"),buttonIcon:Z2,styleGridAriaLabel:t("Bulleted list styles toolbar"),styleDefinitions:[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:OU},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:MU},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:NU}]})),(i.styles||i.startIndex||i.reversed)&&e.ui.componentFactory.add("numberedList",Sv({editor:e,parentCommandName:"numberedList",buttonLabel:t("Numbered List"),buttonIcon:X2,styleGridAriaLabel:t("Numbered list styles toolbar"),styleDefinitions:[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:BU},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:FU},{label:t("Toggle the lowerroman list style"),tooltip:t("Lowerroman"),type:"lower-roman",icon:DU},{label:t("Toggle the upperroman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:zU},{label:t("Toggle the lowerlatin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:HU},{label:t("Toggle the upperlatin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:UU}]}))}}function Sv({editor:n,parentCommandName:e,buttonLabel:t,buttonIcon:i,styleGridAriaLabel:s,styleDefinitions:o}){const r=n.commands.get(e);return a=>{const l=Se(a,qs),c=l.buttonView;return l.bind("isEnabled").to(r),l.class="ck-list-styles-dropdown",c.on("execute",()=>{n.execute(e),n.editing.view.focus()}),c.set({label:t,icon:i,tooltip:!0,isToggleable:!0}),c.bind("isOn").to(r,"value",u=>!!u),l.once("change:isOpen",()=>{const u=jU({editor:n,dropdownView:l,parentCommandName:e,styleGridAriaLabel:s,styleDefinitions:o});l.panelView.children.add(u)}),l.on("execute",()=>{n.editing.view.focus()}),l}}function WU({editor:n,listStyleCommand:e,parentCommandName:t}){const i=n.locale,s=n.commands.get(t);return({label:o,type:r,icon:a,tooltip:l})=>{const c=new z(i);return c.set({label:o,icon:a,tooltip:l}),e.on("change:value",()=>{c.isOn=e.value===r}),c.on("execute",()=>{s.value?e.value!==r?n.execute("listStyle",{type:r}):n.execute("listStyle",{type:e.defaultType}):n.model.change(()=>{n.execute("listStyle",{type:r})})}),c}}function jU({editor:n,dropdownView:e,parentCommandName:t,styleDefinitions:i,styleGridAriaLabel:s}){const o=n.locale,r=n.config.get("list.properties");let a=null;if(t!="numberedList"&&(r.startIndex=!1,r.reversed=!1),r.styles){const c=n.commands.get("listStyle"),u=WU({editor:n,parentCommandName:t,listStyleCommand:c}),d=typeof c.isStyleTypeSupported=="function"?h=>c.isStyleTypeSupported(h.type):()=>!0;a=i.filter(d).map(u)}const l=new LU(o,{styleGridAriaLabel:s,enabledProperties:r,styleButtonViews:a});if(r.styles&&Fu(e,()=>l.stylesView.children.find(c=>c.isOn)),r.startIndex){const c=n.commands.get("listStart");l.startIndexFieldView.bind("isEnabled").to(c),l.startIndexFieldView.fieldView.bind("value").to(c),l.on("listStart",(u,d)=>n.execute("listStart",d))}if(r.reversed){const c=n.commands.get("listReversed");l.reversedSwitchButtonView.bind("isEnabled").to(c),l.reversedSwitchButtonView.bind("isOn").to(c,"value",u=>!!u),l.on("listReversed",()=>{const u=c.value;n.execute("listReversed",{reversed:!u})})}return l.delegate("execute").to(e),l}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qU extends k{static get requires(){return[yU,$U]}static get pluginName(){return"ListProperties"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Av(n,e){return i=>{i.on("attribute:url:media",t)};function t(i,s,o){if(!o.consumable.consume(s.item,i.name))return;const r=s.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(s.item),c=[...l.getChildren()].find(d=>d.getCustomProperty("media-content"));a.remove(c);const u=n.getMediaViewElement(a,r,e);a.insert(a.createPositionAt(l,0),u)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function GU(n,e,t){return e.setCustomProperty("media",!0,n),cr(n,e,{label:t})}function Iv(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function Pv(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function tT(n,e,t,i){n.change(s=>{const o=s.createElement("media",{url:e});n.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:i})})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KU extends F{refresh(){const e=this.editor.model,t=e.document.selection,i=Pv(t);this.value=i?i.getAttribute("url"):null,this.isEnabled=JU(t)||QU(t,e)}execute(e){const t=this.editor.model,i=t.document.selection,s=Pv(i);s?t.change(o=>{o.setAttribute("url",e,s)}):tT(t,e,i,!0)}}function QU(n,e){let i=Ga(n,e).start.parent;return i.isEmpty&&!e.schema.isLimit(i)&&(i=i.parent),e.schema.checkChild(i,"media")}function JU(n){const e=n.getSelectedElement();return!!e&&e.name==="media"}const YU='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const XU="0 0 64 42";class ZU{constructor(e,t){const i=t.providers,s=t.extraProviders||[],o=new Set(t.removeProviders),r=i.concat(s).filter(a=>{const l=a.name;return l?!o.has(l):(Ce("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=r}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new Rv(this.locale);e=e.trim();for(const t of this.providerDefinitions){const i=t.html,s=Ze(t.url);for(const o of s){const r=this._getUrlMatches(e,o);if(r)return new Rv(this.locale,e,r,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let s=e.replace(/^https?:\/\//,"");return i=s.match(t),i||(s=s.replace(/^www\./,""),i=s.match(t),i)?i:null}}class Rv{constructor(e,t,i,s){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=s}getViewElement(e,t){const i={};let s;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const o=this._getPreviewHtml(t);s=e.createRawElement("div",i,(r,a)=>{a.setContentOf(r,o)})}else this.url&&(i.url=this.url),s=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new js,t=this._locale.t;return e.content=YU,e.viewBox=XU,new bt({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zc extends k{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const i=t[1],s=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new ZU(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new KU(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url");return Iv(c,a,u,{elementName:r,renderMediaPreview:u&&o})}}),s.for("dataDowncast").add(Av(a,{elementName:r,renderMediaPreview:o})),s.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{const u=l.getAttribute("url"),d=Iv(c,a,u,{elementName:r,renderForEditingView:!0});return GU(d,c,i("media widget"))}}),s.for("editingDowncast").add(Av(a,{elementName:r,renderForEditingView:!0})),s.for("upcast").elementToElement({view:l=>["oembed",r].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{const u=l.getAttribute("url");if(a.hasMedia(u))return c.createElement("media",{url:u})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{const u=l.getAttribute("data-oembed-url");if(a.hasMedia(u))return c.createElement("media",{url:u})}}).add(l=>{l.on("element:figure",c);function c(u,d,h){if(!h.consumable.consume(d.viewItem,{name:!0,classes:"media"}))return;const{modelRange:f,modelCursor:p}=h.convertChildren(d.viewItem,d.modelCursor);d.modelRange=f,d.modelCursor=p,de(f.getItems())||h.consumable.revert(d.viewItem,{name:!0,classes:"media"})}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const e$=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class t$ extends k{static get requires(){return[op,pi,rp]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",()=>{const i=t.selection.getFirstRange(),s=We.fromPosition(i.start);s.stickiness="toPrevious";const o=We.fromPosition(i.end);o.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(s,o),s.detach(),o.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(W.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,s=i.plugins.get(Zc).registry,o=new an(e,t),r=o.getWalker({ignoreElementEnd:!0});let a="";for(const c of r)c.item.is("$textProxy")&&(a+=c.item.data);if(a=a.trim(),!a.match(e$)){o.detach();return}if(!s.hasMedia(a)){o.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=We.fromPosition(e),this._timeoutId=W.window.setTimeout(()=>{i.model.change(c=>{this._timeoutId=null,c.remove(o),o.detach();let u;this._positionToInsert.root.rootName!=="$graveyard"&&(u=this._positionToInsert),tT(i.model,a,u,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get("Delete").requestUndoOnBackspace()},100)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class n$ extends B{constructor(e,t){super(t);const i=t.t;this.focusTracker=new Le,this.keystrokes=new Ue,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),H.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",s=>!!s),this.cancelButtonView=this._createButton(i("Cancel"),H.cancel,"ck-button-cancel","cancel"),this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]}),Nu(this)}render(){super.render(),Ws({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element)}),this.keystrokes.listenTo(this.element);const t=i=>i.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",(i,s)=>{s.stopPropagation()},{priority:"high"})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new Ge(this.locale,Xt),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}_createButton(e,t,i,s){const o=new z(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),s&&o.delegate("execute").to(this,s),o}}const i$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class s$ extends k{static get requires(){return[Zc]}static get pluginName(){return"MediaEmbedUI"}init(){const e=this.editor,t=e.commands.get("mediaEmbed");e.ui.componentFactory.add("mediaEmbed",i=>{const s=Se(i);return this._setUpDropdown(s,t),s})}_setUpDropdown(e,t){const i=this.editor,s=i.t,o=e.buttonView,r=i.plugins.get(Zc).registry;e.once("change:isOpen",()=>{const a=new n$(o$(i.t,r),i.locale);e.panelView.children.add(a),o.on("open",()=>{a.disableCssTransitions(),a.url=t.value||"",a.urlInputView.fieldView.select(),a.enableCssTransitions()},{priority:"low"}),e.on("submit",()=>{a.isValid()&&(i.execute("mediaEmbed",a.url),i.editing.view.focus())}),e.on("change:isOpen",()=>a.resetFormStatus()),e.on("cancel",()=>{i.editing.view.focus()}),a.delegate("submit","cancel").to(e),a.urlInputView.bind("value").to(t,"value"),a.urlInputView.bind("isReadOnly").to(t,"isEnabled",l=>!l)}),e.bind("isEnabled").to(t),o.set({label:s("Insert media"),icon:i$,tooltip:!0})}}function o$(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class r$ extends k{static get requires(){return[Zc,s$,t$,Yi]}static get pluginName(){return"MediaEmbed"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a$ extends F{refresh(){const e=this.editor.model,t=e.document;this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"mention")}execute(e){const t=this.editor.model,s=t.document.selection,o=typeof e.mention=="string"?{id:e.mention}:e.mention,r=o.id,a=e.range||s.getFirstRange(),l=e.text||r,c=nT({_text:l,id:r},o);if(e.marker.length!=1)throw new y("mentioncommand-incorrect-marker",this);if(r.charAt(0)!=e.marker)throw new y("mentioncommand-incorrect-id",this);t.change(u=>{const d=rn(s.getAttributes()),h=new Map(d.entries());h.set("mention",c),t.insertContent(u.createText(l,h),a),t.insertContent(u.createText(" ",d),a.start.getShiftedBy(l.length))})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l$ extends k{static get pluginName(){return"MentionEditing"}init(){const e=this.editor,t=e.model,i=t.document;t.schema.extend("$text",{allowAttributes:"mention"}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:s=>iT(s)}}),e.conversion.for("downcast").attributeToElement({model:"mention",view:u$}),e.conversion.for("downcast").add(c$),i.registerPostFixer(s=>f$(s,i,t.schema)),i.registerPostFixer(s=>m$(s,i)),i.registerPostFixer(s=>d$(s,i)),e.commands.add("mention",new a$(e))}}function nT(n,e){return Object.assign({uid:sn()},n,e||{})}function iT(n,e){const t=n.getAttribute("data-mention"),i=n.getChild(0);if(!i)return;const s={id:t,_text:i.data};return nT(s,e)}function c$(n){n.on("attribute:mention",(e,t,i)=>{const s=t.attributeNewValue;if(!t.item.is("$textProxy")||!s)return;const o=t.range.start;(o.textNode||o.nodeAfter).data!=s._text&&i.consumable.consume(t.item,e.name)},{priority:"highest"})}function u$(n,{writer:e}){if(!n)return;const t={class:"mention","data-mention":n.id},i={id:n.uid,priority:20};return e.createAttributeElement("span",t,i)}function d$(n,e){const t=e.selection,i=t.focus;return t.isCollapsed&&t.hasAttribute("mention")&&h$(i)?(n.removeSelectionAttribute("mention"),!0):!1}function h$(n){const e=n.isAtStart;return n.nodeBefore&&n.nodeBefore.is("$text")||e}function f$(n,e,t){const i=e.differ.getChanges();let s=!1;for(const o of i){if(o.type=="attribute")continue;const r=o.position;if(o.name=="$text"){const a=r.textNode&&r.textNode.nextSibling;s=ls(r.textNode,n)||s,s=ls(a,n)||s,s=ls(r.nodeBefore,n)||s,s=ls(r.nodeAfter,n)||s}if(o.name!="$text"&&o.type=="insert"){const a=r.nodeAfter;for(const l of n.createRangeIn(a).getItems())s=ls(l,n)||s}if(o.type=="insert"&&t.isInline(o.name)){const a=r.nodeAfter&&r.nodeAfter.nextSibling;s=ls(r.nodeBefore,n)||s,s=ls(a,n)||s}}return s}function m$(n,e){const t=e.differ.getChanges();let i=!1;for(const s of t)if(s.type==="attribute"&&s.attributeKey!="mention"){const o=s.range.start.nodeBefore,r=s.range.end.nodeAfter;for(const a of[o,r])sT(a)&&a.getAttribute(s.attributeKey)!=s.attributeNewValue&&(n.setAttribute(s.attributeKey,s.attributeNewValue,a),i=!0)}return i}function sT(n){if(!n||!(n.is("$text")||n.is("$textProxy"))||!n.hasAttribute("mention"))return!1;const e=n.data,i=n.getAttribute("mention")._text;return e!=i}function ls(n,e){return sT(n)?(e.removeAttribute("mention",n),!0):!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g$ extends Bx{constructor(e){super(e),this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const e=this.selected,t=this.items.getIndex(e);this.select(t+1)}selectPrevious(){const e=this.selected,t=this.items.getIndex(e);this.select(t-1)}select(e){let t=0;e>0&&e<this.items.length?t=e:e<0&&(t=this.items.length-1);const i=this.items.get(t);this.selected!==i&&(this.selected&&this.selected.removeHighlight(),i.highlight(),this.selected=i,this._isItemVisibleInScrolledArea(i)||(this.element.scrollTop=i.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(e){return new te(this.element).contains(new te(e.element))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class p$ extends B{constructor(e,t){super(e),this.template=!1,this.domElement=t,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(i,s,o)=>{o?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w$ extends tp{highlight(){const e=this.children.first;e.isOn=!0}removeHighlight(){const e=this.children.first;e.isOn=!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Dl=3,b$=[Q.arrowup,Q.arrowdown,Q.esc],v$=[Q.enter,Q.tab];class _$ extends k{static get pluginName(){return"MentionUI"}static get requires(){return[Un]}constructor(e){super(e),this._items=new xe,this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=di(this._requestFeed,100),e.config.define("mention",{feeds:[]})}init(){const e=this.editor,t=e.config.get("mention.commitKeys")||v$,i=b$.concat(t);this._balloon=e.plugins.get(Un),e.editing.view.document.on("keydown",(r,a)=>{o(a.keyCode)&&this._isUIVisible&&(a.preventDefault(),r.stop(),a.keyCode==Q.arrowdown&&this._mentionsView.selectNext(),a.keyCode==Q.arrowup&&this._mentionsView.selectPrevious(),t.includes(a.keyCode)&&this._mentionsView.executeSelected(),a.keyCode==Q.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),lr({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const s=e.config.get("mention.feeds");for(const r of s){const a=r.feed,l=r.marker;if(!S$(l))throw new y("mentionconfig-incorrect-marker",null,{marker:l});const c=typeof a=="function"?a.bind(this.editor):x$(a),u=r.itemRenderer,d={marker:l,feedCallback:c,itemRenderer:u};this._mentionsConfigurations.set(l,d)}this._setupTextWatcher(s),this.listenTo(e,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(r,a)=>this._handleFeedResponse(a)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function o(r){return i.includes(r)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const e=this.editor.locale,t=new g$(e);return t.items.bindTo(this._items).using(i=>{const{item:s,marker:o}=i,r=this.editor.config.get("mention.dropdownLimit")||10;if(t.items.length>=r)return null;const a=new w$(e),l=this._renderItem(s,o);return l.delegate("execute").to(a),a.children.add(l),a.item=s,a.marker=o,a.on("execute",()=>{t.fire("execute",{item:s,marker:o})}),a}),t.on("execute",(i,s)=>{const o=this.editor,r=o.model,a=s.item,l=s.marker,c=o.model.markers.get("mention"),u=r.createPositionAt(r.document.selection.focus),d=r.createPositionAt(c.getStart()),h=r.createRange(d,u);this._hideUIAndRemoveMarker(),o.execute("mention",{mention:a,text:a.text,marker:l,range:h}),o.editing.view.focus()}),t}_getItemRenderer(e){const{itemRenderer:t}=this._mentionsConfigurations.get(e);return t}_requestFeed(e,t){this._lastRequested=t;const{feedCallback:i}=this._mentionsConfigurations.get(e),s=i(t);if(!(s instanceof Promise)){this.fire("requestFeed:response",{feed:s,marker:e,feedText:t});return}s.then(r=>{this._lastRequested==t?this.fire("requestFeed:response",{feed:r,marker:e,feedText:t}):this.fire("requestFeed:discarded",{feed:r,marker:e,feedText:t})}).catch(r=>{this.fire("requestFeed:error",{error:r}),Ce("mention-feed-callback-error",{marker:e})})}_setupTextWatcher(e){const t=this.editor,i=e.map(r=>({...r,pattern:rT(r.marker,r.minimumCharacters||0)})),s=new np(t.model,C$(i));s.on("matched",(r,a)=>{const l=oT(i,a.text),u=t.model.document.selection.focus,d=t.model.createPositionAt(u.parent,l.position);if(T$(u)||E$(d)){this._hideUIAndRemoveMarker();return}const h=k$(l,a.text),f=l.marker.length+h.length,p=u.getShiftedBy(-f),b=u.getShiftedBy(-h.length),x=t.model.createRange(p,b);if(vh(t)){const v=t.model.markers.get("mention");t.model.change(w=>{w.updateMarker(v,{range:x})})}else t.model.change(v=>{v.addMarker("mention",{range:x,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(l.marker,h)}),s.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const o=t.commands.get("mention");return s.bind("isEnabled").to(o),s}_handleFeedResponse(e){const{feed:t,marker:i}=e;if(!vh(this.editor))return;this._items.clear();for(const o of t){const r=typeof o!="object"?{id:o,text:o}:o;this._items.add({item:r,marker:i})}const s=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(s):this._hideUIAndRemoveMarker()}_showOrUpdateUI(e){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),vh(this.editor)&&this.editor.model.change(e=>e.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(e,t){const i=this.editor;let s,o=e.id;const r=this._getItemRenderer(t);if(r){const a=r(e);typeof a!="string"?s=new p$(i.locale,a):o=a}if(!s){const a=new z(i.locale);a.label=o,a.withText=!0,s=a}return s}_getBalloonPanelPositionData(e,t){const i=this.editor,s=i.editing,o=s.view.domConverter,r=s.mapper;return{target:()=>{let a=e.getRange();a.start.root.rootName=="$graveyard"&&(a=i.model.document.selection.getFirstRange());const l=r.toViewRange(a);return te.getDomRangeRects(o.viewRangeToDom(l)).pop()},limiter:()=>{const a=this.editor.editing.view,c=a.document.selection.editableElement;return c?a.domConverter.mapViewToDom(c.root):null},positions:y$(t)}}}function y$(n){const e={caret_se:t=>({top:t.bottom+Dl,left:t.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(t,i)=>({top:t.top-i.height-Dl,left:t.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(t,i)=>({top:t.bottom+Dl,left:t.right-i.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(t,i)=>({top:t.top-i.height-Dl,left:t.right-i.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(e,n)?[e[n]]:[e.caret_se,e.caret_sw,e.caret_ne,e.caret_nw]}function oT(n,e){let t;for(const i of n){const s=e.lastIndexOf(i.marker);s>0&&!e.substring(s-1).match(i.pattern)||(!t||s>=t.position)&&(t={marker:i.marker,position:s,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}return t}function rT(n,e){const t=e==0?"*":`{${e},}`,o=`(?:^|[ ${Z.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`}])([${n}])(.${t})$`;return new RegExp(o,"u")}function C$(n){return t=>{const i=oT(n,t);if(!i)return!1;let s=0;i.position!==0&&(s=i.position-1);const o=t.substring(s);return i.pattern.test(o)}}function k$(n,e){let t=0;n.position!==0&&(t=n.position-1);const i=rT(n.marker,0);return e.substring(t).match(i)[2]}function x$(n){return e=>n.filter(i=>(typeof i=="string"?i:String(i.id)).toLowerCase().includes(e.toLowerCase()))}function T$(n){const e=n.textNode&&n.textNode.hasAttribute("mention"),t=n.nodeBefore;return e||t&&t.is("$text")&&t.hasAttribute("mention")}function E$(n){const e=n.nodeAfter;return e&&e.is("$text")&&e.hasAttribute("mention")}function S$(n){return n&&n.length==1}function vh(n){return n.model.markers.has("mention")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A$ extends k{toMentionAttribute(e,t){return iT(e,t)}static get pluginName(){return"Mention"}static get requires(){return[l$,_$]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I$ extends F{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=P$(i,t,e)}execute(){const e=this.editor.model;e.change(t=>{const i=t.createElement("pageBreak");e.insertObject(i,null,null,{setSelection:"after"})})}}function P$(n,e,t){const i=R$(n,t);return e.checkChild(i,"pageBreak")}function R$(n,e){const i=Ga(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V$ extends k{static get pluginName(){return"PageBreakEditing"}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion;t.register("pageBreak",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToStructure({model:"pageBreak",view:(o,{writer:r})=>r.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},r.createContainerElement("span",{style:"display: none"}))}),s.for("editingDowncast").elementToStructure({model:"pageBreak",view:(o,{writer:r})=>{const a=i("Page break"),l=r.createContainerElement("div"),c=r.createRawElement("span",{class:"page-break__label"},function(u){u.innerText=i("Page break")});return r.addClass("page-break",l),r.insert(r.createPositionAt(l,0),c),L$(l,r,a)}}),s.for("upcast").elementToElement({view:o=>{const r=o.getStyle("page-break-before")=="always",a=o.getStyle("page-break-after")=="always";if(!r&&!a)return null;if(o.childCount==1){const l=o.getChild(0);if(!l.is("element","span")||l.getStyle("display")!="none")return null}else if(o.childCount>1)return null;return{name:!0}},model:"pageBreak",converterPriority:"high"}),e.commands.add("pageBreak",new I$(e))}}function L$(n,e,t){return e.setCustomProperty("pageBreak",!0,n),cr(n,e,{label:t})}const O$='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M$ extends k{static get pluginName(){return"PageBreakUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("pageBreak",i=>{const s=e.commands.get("pageBreak"),o=new z(i);return o.set({label:t("Page break"),icon:O$,tooltip:!0}),o.bind("isEnabled").to(s,"isEnabled"),this.listenTo(o,"execute",()=>{e.execute("pageBreak"),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N$ extends k{static get requires(){return[V$,M$,Yi]}static get pluginName(){return"PageBreak"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function B$(n,e){for(const t of n.getChildren())if(t.is("element","b")&&t.getStyle("font-weight")==="normal"){const i=n.getChildIndex(t);e.remove(t),e.insertChild(i,t.getChildren(),n)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F$(n,e){const t=new Ru(e.document.stylesProcessor),i=new Lu(t,{renderingMode:"data"}),s=i.blockElements,o=i.inlineObjectElements,r=[];for(const a of e.createRangeIn(n)){const l=a.item;if(l.is("element","br")){const c=Vv(l,"forward",e,{blockElements:s,inlineObjectElements:o}),u=Vv(l,"backward",e,{blockElements:s,inlineObjectElements:o}),d=Lv(c,s);(Lv(u,s)||d)&&r.push(l)}}for(const a of r)a.hasClass("Apple-interchange-newline")?e.remove(a):e.replace(a,e.createElement("p"))}function Vv(n,e,t,{blockElements:i,inlineObjectElements:s}){let o=t.createPositionAt(n,e=="forward"?"after":"before");return o=o.getLastMatchingPosition(({item:r})=>r.is("element")&&!i.includes(r.name)&&!s.includes(r.name),{direction:e}),e=="forward"?o.nodeAfter:o.nodeBefore}function Lv(n,e){return!!n&&n.is("element")&&e.includes(n.name)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function D$(n,e){if(!n.childCount)return;const t=new $s(n.document),i=H$(n,t);if(!i.length)return;let s=null,o=1;i.forEach((r,a)=>{const l=Q$(i[a-1],r),c=l?null:i[a-1],u=Y$(c,r);if(l&&(s=null,o=1),!s||u!==0){const h=U$(r,e);if(!s)s=Ov(h,r.element,t);else if(r.indent>o){const f=s.getChild(s.childCount-1),p=f.getChild(f.childCount-1);s=Ov(h,p,t),o+=1}else if(r.indent<o){const f=o-r.indent;s=X$(s,f),o=r.indent}r.indent<=o&&(s.is("element",h.type)||(s=t.rename(h.type,s)))}const d=q$(r.element,t);t.appendChild(d,s)})}function z$(n,e){for(const t of e.createRangeIn(n)){const i=t.item;if(i.is("element","li")){const s=i.getChild(0);s&&s.is("element","p")&&e.unwrapElement(s)}}}function H$(n,e){const t=e.createRangeIn(n),i=new kn({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),s=[];for(const o of t)if(o.type==="elementStart"&&i.match(o.item)){const r=G$(o.item);s.push({element:o.item,id:r.id,order:r.order,indent:r.indent})}return s}function U$(n,e){const t=new RegExp(`@list l${n.id}:level${n.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,o=t.exec(e);let r="decimal",a="ol",l=null;if(o&&o[1]){const c=i.exec(o[1]);if(c&&c[1]&&(r=c[1].trim(),a=r!=="bullet"&&r!=="image"?"ol":"ul"),r==="bullet"){const u=$$(n.element);u&&(r=u)}else{const u=s.exec(o[1]);u&&u[1]&&(l=parseInt(u[1]))}}return{type:a,startIndex:l,style:j$(r)}}function $$(n){const e=W$(n);if(!e)return null;const t=e._data;return t==="o"?"circle":t===""?"disc":t===""?"square":null}function W$(n){if(n.getChild(0).is("$text"))return null;for(const e of n.getChildren()){if(!e.is("element","span"))continue;const t=e.getChild(0);return t.is("$text")?t:t.getChild(0)}return null}function j$(n){if(n.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(n){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return n;default:return null}}function Ov(n,e,t){const i=e.parent,s=t.createElement(n.type),o=i.getChildIndex(e)+1;return t.insertChild(o,s,i),n.style&&t.setStyle("list-style-type",n.style,s),n.startIndex&&n.startIndex>1&&t.setAttribute("start",n.startIndex,s),s}function q$(n,e){return K$(n,e),e.rename("li",n)}function G$(n){const e={},t=n.getStyle("mso-list");if(t){const i=t.match(/(^|\s{1,100})l(\d+)/i),s=t.match(/\s{0,100}lfo(\d+)/i),o=t.match(/\s{0,100}level(\d+)/i);i&&s&&o&&(e.id=i[2],e.order=s[1],e.indent=parseInt(o[1]))}return e}function K$(n,e){const t=new kn({name:"span",styles:{"mso-list":"Ignore"}}),i=e.createRangeIn(n);for(const s of i)s.type==="elementStart"&&t.match(s.item)&&e.remove(s.item)}function Q$(n,e){if(!n)return!0;if(n.id!==e.id)return e.indent-n.indent!==1;const t=e.element.previousSibling;return t?!J$(t):!0}function J$(n){return n.is("element","ol")||n.is("element","ul")}function Y$(n,e){return n?e.indent-n.indent:e.indent-1}function X$(n,e){const t=n.getAncestors({parentFirst:!0});let i=null,s=0;for(const o of t)if((o.is("element","ul")||o.is("element","ol"))&&s++,s===e){i=o;break}return i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Z$=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class eW{constructor(e){this.document=e}isActive(e){return Z$.test(e)}execute(e){const t=new $s(this.document),{body:i}=e._parsedData;B$(i,t),z$(i,t),F$(i,t),e.content=i}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tW(n,e){if(!n.childCount)return;const t=new $s(n.document),i=iW(n,t);sW(i,n,t),rW(i,n,t),oW(n,t);const s=aW(n,t);s.length&&cW(s,lW(e),t)}function nW(n){return btoa(n.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join(""))}function iW(n,e){const t=e.createRangeIn(n),i=new kn({name:/v:(.+)/}),s=[];for(const o of t){if(o.type!="elementStart")continue;const r=o.item,a=r.previousSibling,l=a&&a.is("element")?a.name:null;i.match(r)&&r.getAttribute("o:gfxdata")&&l!=="v:shapetype"&&s.push(o.item.getAttribute("id"))}return s}function sW(n,e,t){const i=t.createRangeIn(e),s=new kn({name:"img"}),o=[];for(const r of i)if(r.item.is("element")&&s.match(r.item)){const a=r.item,l=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];l.length&&l.every(c=>n.indexOf(c)>-1)?o.push(a):a.getAttribute("src")||o.push(a)}for(const r of o)t.remove(r)}function oW(n,e){const t=e.createRangeIn(n),i=new kn({name:/v:(.+)/}),s=[];for(const o of t)o.type=="elementStart"&&i.match(o.item)&&s.push(o.item);for(const o of s)e.remove(o)}function rW(n,e,t){const i=t.createRangeIn(e),s=[];for(const a of i)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const l=a.item.getAttribute("id");if(n.includes(l))continue;o(a.item.parent.getChildren(),l)||s.push(a.item)}for(const a of s){const l={src:r(a)};a.hasAttribute("alt")&&(l.alt=a.getAttribute("alt"));const c=t.createElement("img",l);t.insertChild(a.index+1,c,a.parent)}function o(a,l){for(const c of a)if(c.is("element")&&(c.name=="img"&&c.getAttribute("v:shapes")==l||o(c.getChildren(),l)))return!0;return!1}function r(a){for(const l of a.getChildren())if(l.is("element")&&l.getAttribute("src"))return l.getAttribute("src")}}function aW(n,e){const t=e.createRangeIn(n),i=new kn({name:"img"}),s=[];for(const o of t)o.item.is("element")&&i.match(o.item)&&o.item.getAttribute("src").startsWith("file://")&&s.push(o.item);return s}function lW(n){if(!n)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,t=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),i=n.match(t),s=[];if(i)for(const o of i){let r=!1;o.includes("\\pngblip")?r="image/png":o.includes("\\jpegblip")&&(r="image/jpeg"),r&&s.push({hex:o.replace(e,"").replace(/[^\da-fA-F]/g,""),type:r})}return s}function cW(n,e,t){if(n.length===e.length)for(let i=0;i<n.length;i++){const s=`data:${e[i].type};base64,${nW(e[i].hex)}`;t.setAttribute("src",s,n[i])}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const uW=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,dW=/xmlns:o="urn:schemas-microsoft-com/i;class hW{constructor(e){this.document=e}isActive(e){return uW.test(e)||dW.test(e)}execute(e){const{body:t,stylesString:i}=e._parsedData;D$(t,i),tW(t,e.dataTransfer.getData("text/rtf")),e.content=t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fW(n){return Mv(Mv(n)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"</").replace(/ <o:p><\/o:p>/g,"<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function mW(n){n.querySelectorAll("span[style*=spacerun]").forEach(e=>{const t=e,i=t.innerText.length||0;t.innerText=Array(i+1).join(" ").substr(0,i)})}function Mv(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length===1?" ":Array(t.length+1).join(" ").substr(0,t.length))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gW(n,e){const t=new DOMParser;n=n.replace(/<!--\[if gte vml 1]>/g,"");const i=fW(bW(n)),s=t.parseFromString(i,"text/html");mW(s);const o=s.body.innerHTML,r=pW(s,e),a=wW(s);return{body:r,bodyString:o,styles:a.styles,stylesString:a.stylesString}}function pW(n,e){const t=new Ru(e),i=new Lu(t,{renderingMode:"data"}),s=n.createDocumentFragment(),o=n.body.childNodes;for(;o.length>0;)s.appendChild(o[0]);return i.domToView(s,{skipComments:!0})}function wW(n){const e=[],t=[],i=Array.from(n.getElementsByTagName("style"));for(const s of i)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(e.push(s.sheet),t.push(s.innerHTML));return{styles:e,stylesString:t.join(" ")}}function bW(n){const e="</body>",t="</html>",i=n.indexOf(e);if(i<0)return n;const s=n.indexOf(t,i+e.length);return n.substring(0,i+e.length)+(s>=0?n.substring(s):"")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vW extends k{static get pluginName(){return"PasteFromOffice"}static get requires(){return[$n]}init(){const e=this.editor,t=e.editing.view.document,i=[];i.push(new hW(t)),i.push(new eW(t)),e.plugins.get("ClipboardPipeline").on("inputTransformation",(s,o)=>{if(o._isTransformedWithPasteFromOffice||e.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const a=o.dataTransfer.getData("text/html"),l=i.find(c=>c.isActive(a));l&&(o._parsedData=gW(a,t.stylesProcessor),l.execute(o),o._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _W extends k{static get requires(){return[hp,jt]}static get pluginName(){return"PictureEditing"}afterInit(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:["sources"]}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:["sources"]}),this._setupConversion(),this._setupImageUploadEditingIntegration()}_setupConversion(){const e=this.editor,t=e.conversion,i=e.plugins.get("ImageUtils");t.for("upcast").add(kz(i)),t.for("downcast").add(xz(i))}_setupImageUploadEditingIntegration(){const e=this.editor;e.plugins.has("ImageUploadEditing")&&this.listenTo(e.plugins.get("ImageUploadEditing"),"uploadComplete",(t,{imageElement:i,data:s})=>{const o=s.sources;o&&e.model.change(r=>{r.setAttributes({sources:o},i)})})}}const yW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _h="removeFormat";class CW extends k{static get pluginName(){return"RemoveFormatUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(_h,i=>{const s=e.commands.get(_h),o=new z(i);return o.set({label:t("Remove Format"),icon:yW,tooltip:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(_h),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kW extends F{refresh(){const e=this.editor.model;this.isEnabled=!!de(this._getFormattingItems(e.document.selection,e.schema))}execute(){const e=this.editor.model,t=e.schema;e.change(i=>{for(const s of this._getFormattingItems(e.document.selection,t))if(s.is("selection"))for(const o of this._getFormattingAttributes(s,t))i.removeSelectionAttribute(o);else{const o=i.createRangeOn(s);for(const r of this._getFormattingAttributes(s,t))i.removeAttribute(r,o)}})}*_getFormattingItems(e,t){const i=s=>!!de(this._getFormattingAttributes(s,t));for(const s of e.getRanges())for(const o of s.getItems())!t.isBlock(o)&&i(o)&&(yield o);for(const s of e.getSelectedBlocks())i(s)&&(yield s);i(e)&&(yield e)}*_getFormattingAttributes(e,t){for(const[i]of e.getAttributes()){const s=t.getAttributeProperties(i);s&&s.isFormatting&&(yield i)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xW extends k{static get pluginName(){return"RemoveFormatEditing"}init(){const e=this.editor;e.commands.add("removeFormat",new kW(e))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TW extends k{static get requires(){return[xW,CW]}static get pluginName(){return"RemoveFormat"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function EW(n){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"br",isVoid:!0},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"input",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"textarea",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(o=>o.name).join("|"),i=n.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).split(`
`);let s=0;return i.filter(o=>o.length).map(o=>SW(o,e)?yh(o,s++):AW(o,e)?yh(o,--s):yh(o,s)).join(`
`)}function SW(n,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(n)))}function AW(n,e){return e.some(t=>new RegExp(`</${t.name}>`).test(n))}function yh(n,e,t="    "){return`${t.repeat(Math.max(0,e))}${n}`}const IW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Nv="SourceEditingMode";class PW extends k{static get pluginName(){return"SourceEditing"}static get requires(){return[jc]}constructor(e){super(e),this.set("isSourceEditingMode",!1),this._elementReplacer=new hk,this._replacedRoots=new Map,this._dataFromRoots=new Map}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add("sourceEditing",i=>{const s=new z(i);return s.set({label:t("Source"),icon:IW,tooltip:!0,withText:!0,class:"ck-source-editing-button"}),s.bind("isOn").to(this,"isSourceEditingMode"),s.bind("isEnabled").to(this,"isEnabled",e,"isReadOnly",e.plugins.get(jc),"hasAny",(o,r,a)=>!(!o||r||a)),this.listenTo(s,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),s}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(i,s,o)=>{o?(this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(i,s,o)=>this._handleReadOnlyMode(!o)),this.listenTo(e,"change:isReadOnly",(i,s,o)=>this._handleReadOnlyMode(o))),e.data.on("get",()=>{this.isSourceEditingMode&&this._updateEditorData()},{priority:"high"})}afterInit(){const e=this.editor;["RealTimeCollaborativeEditing","CommentsEditing","TrackChangesEditing","RevisionHistory"].some(i=>e.plugins.has(i))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const e=this.editor,t=e.editing.view,i=e.model;i.change(s=>{s.setSelection(null),s.removeSelectionAttribute(i.document.selection.getAttributeKeys())});for(const[s,o]of t.domRoots){const r=RW(e.data.get({rootName:s})),a=On(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),l=On(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":r},[a]);a.value=r,a.setSelectionRange(0,0),a.addEventListener("input",()=>{l.dataset.value=a.value}),t.change(c=>{const u=t.document.getRoot(s);c.addClass("ck-hidden",u)}),e.ui.setEditableElement("sourceEditing:"+s,a),this._replacedRoots.set(s,l),this._elementReplacer.replace(o,l),this._dataFromRoots.set(s,r)}this._focusSourceEditing()}_hideSourceEditing(){const t=this.editor.editing.view;this._updateEditorData(),t.change(i=>{for(const[s]of this._replacedRoots)i.removeClass("ck-hidden",t.document.getRoot(s))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_updateEditorData(){const e=this.editor,t={};for(const[i,s]of this._replacedRoots){const o=this._dataFromRoots.get(i),r=s.dataset.value;o!==r&&(t[i]=r)}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0}})}_focusSourceEditing(){const e=this.editor,[t]=this._replacedRoots.values(),i=t.querySelector("textarea");e.editing.view.document.isFocused=!1,i.focus()}_disableCommands(){const e=this.editor;for(const t of e.commands.commands())t.forceDisabled(Nv)}_enableCommands(){const e=this.editor;for(const t of e.commands.commands())t.clearForceDisabled(Nv)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(const[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){const t=this.editor.ui.view.editable;return t&&!t._hasExternalElement}}function RW(n){return VW(n)?EW(n):n}function VW(n){return n.startsWith("<")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class LW extends Du{constructor(e,t){super(e);const i=e.t;this.set("class","ck-special-characters-navigation"),this.groupDropdownView=this._createGroupDropdown(t),this.groupDropdownView.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",this.label=i("Special characters"),this.children.add(this.groupDropdownView)}get currentGroupName(){return this.groupDropdownView.value}focus(){this.groupDropdownView.focus()}_createGroupDropdown(e){const t=this.locale,i=t.t,s=Se(t),o=this._getCharacterGroupListItemDefinitions(s,e);return s.set("value",o.first.model.name),s.buttonView.bind("label").to(s,"value",r=>e.get(r)),s.buttonView.set({isOn:!1,withText:!0,tooltip:i("Character categories"),class:["ck-dropdown__button_label-width_auto"]}),s.on("execute",r=>{s.value=r.source.name}),s.delegate("execute").to(this),Tn(s,o),s}_getCharacterGroupListItemDefinitions(e,t){const i=new xe;for(const[s,o]of t){const r={type:"button",model:new un({name:s,label:o,withText:!0})};r.model.bind("isOn").to(e,"value",a=>a===r.model.name),i.add(r)}return i}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OW extends B{constructor(e){super(e),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new Le,this.keystrokes=new Ue,Bu({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>W.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(e,t){const i=new z(this.locale);return i.set({label:e,withText:!0,class:"ck-character-grid__tile"}),i.extendTemplate({attributes:{title:t},on:{mouseover:i.bindTemplate.to("mouseover"),focus:i.bindTemplate.to("focus")}}),i.on("mouseover",()=>{this.fire("tileHover",{name:t,character:e})}),i.on("focus",()=>{this.fire("tileFocus",{name:t,character:e})}),i.on("execute",()=>{this.fire("execute",{name:t,character:e})}),i}render(){super.render();for(const e of this.tiles)this.focusTracker.add(e.element);this.tiles.on("change",(e,{added:t,removed:i})=>{if(t.length>0)for(const s of t)this.focusTracker.add(s.element);if(i.length>0)for(const s of i)this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.get(0).focus()}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class MW extends B{constructor(e){super(e);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",NW),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",i=>i||"")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function NW(n){return n===null?"":"U+"+("0000"+n.codePointAt(0).toString(16)).slice(-4)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BW extends B{constructor(e,t,i,s){super(e),this.items=this.createCollection(),this.focusTracker=new Le,this.keystrokes=new Ue,this._focusCycler=new Rt({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.navigationView=t,this.gridView=i,this.infoView=s,this.setTemplate({tag:"div",children:[this.navigationView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.navigationView.groupDropdownView.buttonView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.navigationView.groupDropdownView.buttonView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.navigationView.focus()}}const FW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ch="All";class DW extends k{static get requires(){return[jx]}static get pluginName(){return"SpecialCharacters"}constructor(e){super(e);const t=e.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=t("All")}init(){const e=this.editor,t=e.t,i=e.commands.get("input");e.ui.componentFactory.add("specialCharacters",s=>{const o=Se(s);let r;return o.buttonView.set({label:t("Special characters"),icon:FW,tooltip:!0}),o.bind("isEnabled").to(i),o.on("execute",(a,l)=>{e.execute("insertText",{text:l.character}),e.editing.view.focus()}),o.on("change:isOpen",()=>{if(!r){r=this._createDropdownPanelContent(s,o);const a=new BW(s,r.navigationView,r.gridView,r.infoView);o.panelView.children.add(a)}r.infoView.set({character:null,name:null})}),o})}addItems(e,t,i={label:e}){if(e===Ch)throw new y("special-character-invalid-group-name",null);const s=this._getGroup(e,i.label);for(const o of t)s.items.add(o.title),this._characters.set(o.title,o.character)}getGroups(){const e=Array.from(this._groups.keys()),t=this.editor.config.get("specialCharacters.order")||[],i=t.find(s=>!e.includes(s));if(i)throw new y("special-character-invalid-order-group-name",null,{invalidGroup:i});return new Set([...t,...e])}getCharactersForGroup(e){if(e===Ch)return new Set(this._characters.keys());const t=this._groups.get(e);if(t)return t.items}getCharacter(e){return this._characters.get(e)}_getGroup(e,t){return this._groups.has(e)||this._groups.set(e,{items:new Set,label:t}),this._groups.get(e)}_updateGrid(e,t){t.tiles.clear();const i=this.getCharactersForGroup(e);for(const s of i){const o=this.getCharacter(s);t.tiles.add(t.createTile(o,s))}}_createDropdownPanelContent(e,t){const i=new Map([[Ch,this._allSpecialCharactersGroupLabel],...Array.from(this.getGroups()).map(a=>[a,this._groups.get(a).label])]),s=new LW(e,i),o=new OW(e),r=new MW(e);return o.delegate("execute").to(t),o.on("tileHover",(a,l)=>{r.set(l)}),o.on("tileFocus",(a,l)=>{r.set(l)}),s.on("execute",()=>{this._updateGrid(s.currentGroupName,o)}),this._updateGrid(s.currentGroupName,o),{navigationView:s,gridView:o,infoView:r}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zW extends k{static get pluginName(){return"SpecialCharactersCurrency"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:t("Dollar sign")},{character:"",title:t("Euro sign")},{character:"",title:t("Yen sign")},{character:"",title:t("Pound sign")},{character:"",title:t("Cent sign")},{character:"",title:t("Euro-currency sign")},{character:"",title:t("Colon sign")},{character:"",title:t("Cruzeiro sign")},{character:"",title:t("French franc sign")},{character:"",title:t("Lira sign")},{character:"",title:t("Currency sign")},{character:"",title:t("Bitcoin sign")},{character:"",title:t("Mill sign")},{character:"",title:t("Naira sign")},{character:"",title:t("Peseta sign")},{character:"",title:t("Rupee sign")},{character:"",title:t("Won sign")},{character:"",title:t("New sheqel sign")},{character:"",title:t("Dong sign")},{character:"",title:t("Kip sign")},{character:"",title:t("Tugrik sign")},{character:"",title:t("Drachma sign")},{character:"",title:t("German penny sign")},{character:"",title:t("Peso sign")},{character:"",title:t("Guarani sign")},{character:"",title:t("Austral sign")},{character:"",title:t("Hryvnia sign")},{character:"",title:t("Cedi sign")},{character:"",title:t("Livre tournois sign")},{character:"",title:t("Spesmilo sign")},{character:"",title:t("Tenge sign")},{character:"",title:t("Indian rupee sign")},{character:"",title:t("Turkish lira sign")},{character:"",title:t("Nordic mark sign")},{character:"",title:t("Manat sign")},{character:"",title:t("Ruble sign")}],{label:t("Currency")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class HW extends k{static get pluginName(){return"SpecialCharactersMathematical"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:t("Less-than sign")},{character:">",title:t("Greater-than sign")},{character:"",title:t("Less-than or equal to")},{character:"",title:t("Greater-than or equal to")},{character:"",title:t("En dash")},{character:"",title:t("Em dash")},{character:"",title:t("Macron")},{character:"",title:t("Overline")},{character:"",title:t("Degree sign")},{character:"",title:t("Minus sign")},{character:"",title:t("Plus-minus sign")},{character:"",title:t("Division sign")},{character:"",title:t("Fraction slash")},{character:"",title:t("Multiplication sign")},{character:"",title:t("Latin small letter f with hook")},{character:"",title:t("Integral")},{character:"",title:t("N-ary summation")},{character:"",title:t("Infinity")},{character:"",title:t("Square root")},{character:"",title:t("Tilde operator")},{character:"",title:t("Approximately equal to")},{character:"",title:t("Almost equal to")},{character:"",title:t("Not equal to")},{character:"",title:t("Identical to")},{character:"",title:t("Element of")},{character:"",title:t("Not an element of")},{character:"",title:t("Contains as member")},{character:"",title:t("N-ary product")},{character:"",title:t("Logical and")},{character:"",title:t("Logical or")},{character:"",title:t("Not sign")},{character:"",title:t("Intersection")},{character:"",title:t("Union")},{character:"",title:t("Partial differential")},{character:"",title:t("For all")},{character:"",title:t("There exists")},{character:"",title:t("Empty set")},{character:"",title:t("Nabla")},{character:"",title:t("Asterisk operator")},{character:"",title:t("Proportional to")},{character:"",title:t("Angle")},{character:"",title:t("Vulgar fraction one quarter")},{character:"",title:t("Vulgar fraction one half")},{character:"",title:t("Vulgar fraction three quarters")}],{label:t("Mathematical")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UW extends k{static get pluginName(){return"SpecialCharactersArrows"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Arrows",[{title:t("leftwards simple arrow"),character:""},{title:t("rightwards simple arrow"),character:""},{title:t("upwards simple arrow"),character:""},{title:t("downwards simple arrow"),character:""},{title:t("leftwards double arrow"),character:""},{title:t("rightwards double arrow"),character:""},{title:t("upwards double arrow"),character:""},{title:t("downwards double arrow"),character:""},{title:t("leftwards dashed arrow"),character:""},{title:t("rightwards dashed arrow"),character:""},{title:t("upwards dashed arrow"),character:""},{title:t("downwards dashed arrow"),character:""},{title:t("leftwards arrow to bar"),character:""},{title:t("rightwards arrow to bar"),character:""},{title:t("upwards arrow to bar"),character:""},{title:t("downwards arrow to bar"),character:""},{title:t("up down arrow with base"),character:""},{title:t("back with leftwards arrow above"),character:""},{title:t("end with leftwards arrow above"),character:""},{title:t("on with exclamation mark with left right arrow above"),character:""},{title:t("soon with rightwards arrow above"),character:""},{title:t("top with upwards arrow above"),character:""}],{label:t("Arrows")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $W extends k{static get pluginName(){return"SpecialCharactersLatin"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Latin",[{character:"",title:t("Latin capital letter a with macron")},{character:"",title:t("Latin small letter a with macron")},{character:"",title:t("Latin capital letter a with breve")},{character:"",title:t("Latin small letter a with breve")},{character:"",title:t("Latin capital letter a with ogonek")},{character:"",title:t("Latin small letter a with ogonek")},{character:"",title:t("Latin capital letter c with acute")},{character:"",title:t("Latin small letter c with acute")},{character:"",title:t("Latin capital letter c with circumflex")},{character:"",title:t("Latin small letter c with circumflex")},{character:"",title:t("Latin capital letter c with dot above")},{character:"",title:t("Latin small letter c with dot above")},{character:"",title:t("Latin capital letter c with caron")},{character:"",title:t("Latin small letter c with caron")},{character:"",title:t("Latin capital letter d with caron")},{character:"",title:t("Latin small letter d with caron")},{character:"",title:t("Latin capital letter d with stroke")},{character:"",title:t("Latin small letter d with stroke")},{character:"",title:t("Latin capital letter e with macron")},{character:"",title:t("Latin small letter e with macron")},{character:"",title:t("Latin capital letter e with breve")},{character:"",title:t("Latin small letter e with breve")},{character:"",title:t("Latin capital letter e with dot above")},{character:"",title:t("Latin small letter e with dot above")},{character:"",title:t("Latin capital letter e with ogonek")},{character:"",title:t("Latin small letter e with ogonek")},{character:"",title:t("Latin capital letter e with caron")},{character:"",title:t("Latin small letter e with caron")},{character:"",title:t("Latin capital letter g with circumflex")},{character:"",title:t("Latin small letter g with circumflex")},{character:"",title:t("Latin capital letter g with breve")},{character:"",title:t("Latin small letter g with breve")},{character:"",title:t("Latin capital letter g with dot above")},{character:"",title:t("Latin small letter g with dot above")},{character:"",title:t("Latin capital letter g with cedilla")},{character:"",title:t("Latin small letter g with cedilla")},{character:"",title:t("Latin capital letter h with circumflex")},{character:"",title:t("Latin small letter h with circumflex")},{character:"",title:t("Latin capital letter h with stroke")},{character:"",title:t("Latin small letter h with stroke")},{character:"",title:t("Latin capital letter i with tilde")},{character:"",title:t("Latin small letter i with tilde")},{character:"",title:t("Latin capital letter i with macron")},{character:"",title:t("Latin small letter i with macron")},{character:"",title:t("Latin capital letter i with breve")},{character:"",title:t("Latin small letter i with breve")},{character:"",title:t("Latin capital letter i with ogonek")},{character:"",title:t("Latin small letter i with ogonek")},{character:"",title:t("Latin capital letter i with dot above")},{character:"",title:t("Latin small letter dotless i")},{character:"",title:t("Latin capital ligature ij")},{character:"",title:t("Latin small ligature ij")},{character:"",title:t("Latin capital letter j with circumflex")},{character:"",title:t("Latin small letter j with circumflex")},{character:"",title:t("Latin capital letter k with cedilla")},{character:"",title:t("Latin small letter k with cedilla")},{character:"",title:t("Latin small letter kra")},{character:"",title:t("Latin capital letter l with acute")},{character:"",title:t("Latin small letter l with acute")},{character:"",title:t("Latin capital letter l with cedilla")},{character:"",title:t("Latin small letter l with cedilla")},{character:"",title:t("Latin capital letter l with caron")},{character:"",title:t("Latin small letter l with caron")},{character:"",title:t("Latin capital letter l with middle dot")},{character:"",title:t("Latin small letter l with middle dot")},{character:"",title:t("Latin capital letter l with stroke")},{character:"",title:t("Latin small letter l with stroke")},{character:"",title:t("Latin capital letter n with acute")},{character:"",title:t("Latin small letter n with acute")},{character:"",title:t("Latin capital letter n with cedilla")},{character:"",title:t("Latin small letter n with cedilla")},{character:"",title:t("Latin capital letter n with caron")},{character:"",title:t("Latin small letter n with caron")},{character:"",title:t("Latin small letter n preceded by apostrophe")},{character:"",title:t("Latin capital letter eng")},{character:"",title:t("Latin small letter eng")},{character:"",title:t("Latin capital letter o with macron")},{character:"",title:t("Latin small letter o with macron")},{character:"",title:t("Latin capital letter o with breve")},{character:"",title:t("Latin small letter o with breve")},{character:"",title:t("Latin capital letter o with double acute")},{character:"",title:t("Latin small letter o with double acute")},{character:"",title:t("Latin capital ligature oe")},{character:"",title:t("Latin small ligature oe")},{character:"",title:t("Latin capital letter r with acute")},{character:"",title:t("Latin small letter r with acute")},{character:"",title:t("Latin capital letter r with cedilla")},{character:"",title:t("Latin small letter r with cedilla")},{character:"",title:t("Latin capital letter r with caron")},{character:"",title:t("Latin small letter r with caron")},{character:"",title:t("Latin capital letter s with acute")},{character:"",title:t("Latin small letter s with acute")},{character:"",title:t("Latin capital letter s with circumflex")},{character:"",title:t("Latin small letter s with circumflex")},{character:"",title:t("Latin capital letter s with cedilla")},{character:"",title:t("Latin small letter s with cedilla")},{character:"",title:t("Latin capital letter s with caron")},{character:"",title:t("Latin small letter s with caron")},{character:"",title:t("Latin capital letter t with cedilla")},{character:"",title:t("Latin small letter t with cedilla")},{character:"",title:t("Latin capital letter t with caron")},{character:"",title:t("Latin small letter t with caron")},{character:"",title:t("Latin capital letter t with stroke")},{character:"",title:t("Latin small letter t with stroke")},{character:"",title:t("Latin capital letter u with tilde")},{character:"",title:t("Latin small letter u with tilde")},{character:"",title:t("Latin capital letter u with macron")},{character:"",title:t("Latin small letter u with macron")},{character:"",title:t("Latin capital letter u with breve")},{character:"",title:t("Latin small letter u with breve")},{character:"",title:t("Latin capital letter u with ring above")},{character:"",title:t("Latin small letter u with ring above")},{character:"",title:t("Latin capital letter u with double acute")},{character:"",title:t("Latin small letter u with double acute")},{character:"",title:t("Latin capital letter u with ogonek")},{character:"",title:t("Latin small letter u with ogonek")},{character:"",title:t("Latin capital letter w with circumflex")},{character:"",title:t("Latin small letter w with circumflex")},{character:"",title:t("Latin capital letter y with circumflex")},{character:"",title:t("Latin small letter y with circumflex")},{character:"",title:t("Latin capital letter y with diaeresis")},{character:"",title:t("Latin capital letter z with acute")},{character:"",title:t("Latin small letter z with acute")},{character:"",title:t("Latin capital letter z with dot above")},{character:"",title:t("Latin small letter z with dot above")},{character:"",title:t("Latin capital letter z with caron")},{character:"",title:t("Latin small letter z with caron")},{character:"",title:t("Latin small letter long s")}],{label:t("Latin")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class WW extends k{static get pluginName(){return"SpecialCharactersText"}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Text",[{character:"",title:t("Single left-pointing angle quotation mark")},{character:"",title:t("Single right-pointing angle quotation mark")},{character:"",title:t("Left-pointing double angle quotation mark")},{character:"",title:t("Right-pointing double angle quotation mark")},{character:"",title:t("Left single quotation mark")},{character:"",title:t("Right single quotation mark")},{character:"",title:t("Left double quotation mark")},{character:"",title:t("Right double quotation mark")},{character:"",title:t("Single low-9 quotation mark")},{character:"",title:t("Double low-9 quotation mark")},{character:"",title:t("Inverted exclamation mark")},{character:"",title:t("Inverted question mark")},{character:"",title:t("Two dot leader")},{character:"",title:t("Horizontal ellipsis")},{character:"",title:t("Double dagger")},{character:"",title:t("Per mille sign")},{character:"",title:t("Per ten thousand sign")},{character:"",title:t("Double exclamation mark")},{character:"",title:t("Question exclamation mark")},{character:"",title:t("Exclamation question mark")},{character:"",title:t("Double question mark")},{character:"",title:t("Copyright sign")},{character:"",title:t("Registered sign")},{character:"",title:t("Trade mark sign")},{character:"",title:t("Section sign")},{character:"",title:t("Paragraph sign")},{character:"",title:t("Reversed paragraph sign")}],{label:t("Text")})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jW extends k{static get requires(){return[zW,WW,HW,UW,$W]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rr="strikethrough";class qW extends k{static get pluginName(){return"StrikethroughEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Rr}),e.model.schema.setAttributeProperties(Rr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Rr,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(Rr,new Gs(e,Rr)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}const GW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kh="strikethrough";class KW extends k{static get pluginName(){return"StrikethroughUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(kh,i=>{const s=e.commands.get(kh),o=new z(i);return o.set({label:t("Strikethrough"),icon:GW,keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(kh),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class QW extends k{static get requires(){return[qW,KW]}static get pluginName(){return"Strikethrough"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Vr="subscript";class JW extends k{static get pluginName(){return"SubscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Vr}),e.model.schema.setAttributeProperties(Vr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Vr,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),e.commands.add(Vr,new Gs(e,Vr))}}const YW='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xh="subscript";class XW extends k{static get pluginName(){return"SubscriptUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(xh,i=>{const s=e.commands.get(xh),o=new z(i);return o.set({label:t("Subscript"),icon:YW,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(xh),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZW extends k{static get requires(){return[JW,XW]}static get pluginName(){return"Subscript"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Lr="superscript";class ej extends k{static get pluginName(){return"SuperscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Lr}),e.model.schema.setAttributeProperties(Lr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Lr,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),e.commands.add(Lr,new Gs(e,Lr))}}const tj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Th="superscript";class nj extends k{static get pluginName(){return"SuperscriptUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Th,i=>{const s=e.commands.get(Th),o=new z(i);return o.set({label:t("Superscript"),icon:tj,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(Th),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ij extends k{static get requires(){return[ej,nj]}static get pluginName(){return"Superscript"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function wp(n,e){const{viewElement:t,defaultValue:i,modelAttribute:s,styleName:o,reduceBoxSides:r=!1,shouldUpcast:a=()=>!0}=e;n.for("upcast").attributeToAttribute({view:{name:t,styles:{[o]:/[\s\S]+/}},model:{key:s,value:l=>{if(!a(l))return;const c=l.getNormalizedStyle(o),u=r?cc(c):c;if(i!==u)return u}}})}function mm(n,e,t,i){n.for("upcast").add(s=>s.on("element:"+e,(o,r,a)=>{if(!r.modelRange)return;const l=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(f=>r.viewItem.hasStyle(f));if(!l.length)return;const c={styles:l};if(!a.consumable.test(r.viewItem,c))return;const u=[...r.modelRange.getItems({shallow:!0})].pop();a.consumable.consume(r.viewItem,c);const d={style:r.viewItem.getNormalizedStyle("border-style"),color:r.viewItem.getNormalizedStyle("border-color"),width:r.viewItem.getNormalizedStyle("border-width")},h={style:cc(d.style),color:cc(d.color),width:cc(d.width)};h.style!==i.style&&a.writer.setAttribute(t.style,h.style,u),h.color!==i.color&&a.writer.setAttribute(t.color,h.color,u),h.width!==i.width&&a.writer.setAttribute(t.width,h.width,u)}))}function oa(n,{modelElement:e,modelAttribute:t,styleName:i}){n.for("downcast").attributeToAttribute({model:{name:e,key:t},view:s=>({key:"style",value:{[i]:s}})})}function lc(n,{modelAttribute:e,styleName:t}){n.for("downcast").add(i=>i.on(`attribute:${e}:table`,(s,o,r)=>{const{item:a,attributeNewValue:l}=o,{mapper:c,writer:u}=r;if(!r.consumable.consume(o.item,s.name))return;const d=[...c.toViewElement(a).getChildren()].find(h=>h.is("element","table"));l?u.setStyle(t,l,d):u.removeStyle(t,d)}))}function cc(n){return n?["top","right","bottom","left"].map(t=>n[t]).reduce((t,i)=>t==i?t:null)||n:void 0}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Be(n,e,t,i,s=1){e>s?i.setAttribute(n,e,t):i.removeAttribute(n,t)}function Ks(n,e,t={}){const i=n.createElement("tableCell",t);return n.insertElement("paragraph",i),n.insert(i,e),i}function gm(n,e){const t=e.parent.parent,i=parseInt(t.getAttribute("headingColumns")||0),{column:s}=n.getCellLocation(e);return!!i&&s<i}function uc(n,e,t){const{modelAttribute:i}=t;n.extend("tableCell",{allowAttributes:[i]}),wp(e,{viewElement:/^(td|th)$/,...t}),oa(e,{modelElement:"tableCell",...t})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sj(){return n=>{n.on("element:figure",(e,t,i)=>{if(!i.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const s=aj(t.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;i.consumable.consume(t.viewItem,{name:!0,classes:"table"});const o=i.convertItem(s,t.modelCursor),r=de(o.modelRange.getItems());if(!r){i.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}i.convertChildren(t.viewItem,i.writer.createPositionAt(r,"end")),i.updateConversionResult(r,t)})}}function oj(){return n=>{n.on("element:table",(e,t,i)=>{const s=t.viewItem;if(!i.consumable.test(s,{name:!0}))return;const{rows:o,headingRows:r,headingColumns:a}=lj(s),l={};a&&(l.headingColumns=a),r&&(l.headingRows=r);const c=i.writer.createElement("table",l);if(i.safeInsert(c,t.modelCursor)){if(i.consumable.consume(s,{name:!0}),o.forEach(u=>i.convertItem(u,i.writer.createPositionAt(c,"end"))),i.convertChildren(s,i.writer.createPositionAt(c,"end")),c.isEmpty){const u=i.writer.createElement("tableRow");i.writer.insert(u,i.writer.createPositionAt(c,"end")),Ks(i.writer,i.writer.createPositionAt(u,"end"))}i.updateConversionResult(c,t)}})}}function rj(){return n=>{n.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function Bv(n){return e=>{e.on(`element:${n}`,(t,i,{writer:s})=>{if(!i.modelRange)return;const o=i.modelRange.start.nodeAfter,r=s.createPositionAt(o,0);if(i.viewItem.isEmpty){s.insertElement("paragraph",r);return}const a=Array.from(o.getChildren());if(a.every(l=>l.is("element","$marker"))){const l=s.createElement("paragraph");s.insert(l,s.createPositionAt(o,0));for(const c of a)s.move(s.createRangeOn(c),s.createPositionAt(l,"end"))}},{priority:"low"})}}function aj(n){for(const e of n.getChildren())if(e.is("element","table"))return e}function lj(n){const e={headingRows:0,headingColumns:0},t=[],i=[];let s;for(const o of Array.from(n.getChildren()))if(o.name==="tbody"||o.name==="thead"||o.name==="tfoot"){o.name==="thead"&&!s&&(s=o);const r=Array.from(o.getChildren()).filter(a=>a.is("element","tr"));for(const a of r)if(a.parent.name==="thead"&&a.parent===s)e.headingRows++,t.push(a);else{i.push(a);const l=cj(a);l>e.headingColumns&&(e.headingColumns=l)}}return e.rows=[...t,...i],e}function cj(n){let e=0,t=0;const i=Array.from(n.getChildren()).filter(s=>s.name==="th"||s.name==="td");for(;t<i.length&&i[t].name==="th";){const s=i[t],o=parseInt(s.getAttribute("colspan")||1);e=e+o,t++}return e}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ae{constructor(e,t={}){this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{const s=e.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const o=parseInt(s.getAttribute("colspan")||1),r=parseInt(s.getAttribute("rowspan")||1);(o>1||r>1)&&this._recordSpans(s,r,o),this._shouldSkipSlot()||(t=this._formatOutValue(s)),this._nextCellAtColumn=this._column+o}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,i=this._column){return{done:!1,value:new uj(this,e,t,i)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||i||s}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,i){const s={cell:e,row:this._row,column:this._column};for(let o=this._row;o<this._row+t;o++)for(let r=this._column;r<this._column+i;r++)(o!=this._row||r!=this._column)&&this._markSpannedCell(o,r,s)}_markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,i)}}class uj{constructor(e,t,i,s){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=s,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||1)}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||1)}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fv(n,e={}){return(t,{writer:i})=>{const s=t.getAttribute("headingRows")||0,o=[];s>0&&o.push(i.createContainerElement("thead",null,i.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<n.getRows(t)&&o.push(i.createContainerElement("tbody",null,i.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));const r=i.createContainerElement("figure",{class:"table"},[i.createContainerElement("table",null,o),i.createSlot(a=>!a.is("element","tableRow"))]);return e.asWidget?hj(r,i):r}}function dj(){return(n,{writer:e})=>n.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function Dv(n={}){return(e,{writer:t})=>{const i=e.parent,s=i.parent,o=s.getChildIndex(i),r=new ae(s,{row:o}),a=s.getAttribute("headingRows")||0,l=s.getAttribute("headingColumns")||0;for(const c of r)if(c.cell==e){const d=c.row<a||c.column<l?"th":"td";return n.asWidget?sp(t.createEditableElement(d),t):t.createContainerElement(d)}}}function zv(n={}){return(e,{writer:t})=>{if(e.parent.is("element","tableCell")&&aT(e)){if(n.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}}function aT(n){return n.parent.childCount==1&&!fj(n)}function hj(n,e){return e.setCustomProperty("table",!0,n),cr(n,e,{hasSelectionHandle:!0})}function fj(n){return!![...n.getAttributeKeys()].length}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mj extends F{refresh(){const e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=gj(t,i)}execute(e={}){const t=this.editor.model,i=this.editor.plugins.get("TableUtils"),s=this.editor.config.get("table"),o=s.defaultHeadings.rows,r=s.defaultHeadings.columns;e.headingRows===void 0&&o&&(e.headingRows=o),e.headingColumns===void 0&&r&&(e.headingColumns=r),t.change(a=>{const l=i.createTable(a,e);t.insertObject(l,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(l.getNodeByPath([0,0,0]),0))})}}function gj(n,e){const t=n.getFirstPosition().parent,i=t===t.root?t:t.parent;return e.checkChild(i,"table")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hv extends F{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,i=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=i}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s=this.order==="above",o=i.getSelectionAffectedTableCells(t),r=i.getRowIndexes(o),a=s?r.first:r.last,l=o[0].findAncestor("table");i.insertRows(l,{at:s?a:a+1,copyStructureFromAbove:!s})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uv extends F{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,i=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=i}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s=this.order==="left",o=i.getSelectionAffectedTableCells(t),r=i.getColumnIndexes(o),a=s?r.first:r.last,l=o[0].findAncestor("table");i.insertColumns(l,{columns:1,at:s?a:a+1})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $v extends F{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lT(n,e,t){const{startRow:i,startColumn:s,endRow:o,endColumn:r}=e,a=t.createElement("table"),l=o-i+1;for(let u=0;u<l;u++)t.insertElement("tableRow",a,"end");const c=[...new ae(n,{startRow:i,endRow:o,startColumn:s,endColumn:r,includeAllSlots:!0})];for(const{row:u,column:d,cell:h,isAnchor:f,cellAnchorRow:p,cellAnchorColumn:b}of c){const x=u-i,v=a.getChild(x);if(!f)(p<i||b<s)&&Ks(t,t.createPositionAt(v,"end"));else{const w=t.cloneElement(h);t.append(w,v),fT(w,u,d,o,r,t)}}return pj(a,n,i,s,t),a}function cT(n,e,t=0){const i=[],s=new ae(n,{startRow:t,endRow:e-1});for(const o of s){const{row:r,cellHeight:a}=o,l=r+a-1;r<e&&e<=l&&i.push(o)}return i}function uT(n,e,t){const i=n.parent,s=i.parent,o=i.index,r=parseInt(n.getAttribute("rowspan")),a=e-o,l={},c=r-a;c>1&&(l.rowspan=c);const u=parseInt(n.getAttribute("colspan")||1);u>1&&(l.colspan=u);const d=o,h=d+a,f=[...new ae(s,{startRow:d,endRow:h,includeAllSlots:!0})];let p=null,b;for(const x of f){const{row:v,column:w,cell:C}=x;C===n&&b===void 0&&(b=w),b!==void 0&&b===w&&v===h&&(p=Ks(t,x.getPositionBefore(),l))}return Be("rowspan",a,n,t),p}function dT(n,e){const t=[],i=new ae(n);for(const s of i){const{column:o,cellWidth:r}=s,a=o+r-1;o<e&&e<=a&&t.push(s)}return t}function hT(n,e,t,i){const s=parseInt(n.getAttribute("colspan")),o=t-e,r={},a=s-o;a>1&&(r.colspan=a);const l=parseInt(n.getAttribute("rowspan")||1);l>1&&(r.rowspan=l);const c=Ks(i,i.createPositionAfter(n),r);return Be("colspan",o,n,i),c}function fT(n,e,t,i,s,o){const r=parseInt(n.getAttribute("colspan")||1),a=parseInt(n.getAttribute("rowspan")||1);if(t+r-1>s){const u=s-t+1;Be("colspan",u,n,o,1)}if(e+a-1>i){const u=i-e+1;Be("rowspan",u,n,o,1)}}function pj(n,e,t,i,s){const o=parseInt(e.getAttribute("headingRows")||0);if(o>0){const a=o-t;Be("headingRows",a,n,s,0)}const r=parseInt(e.getAttribute("headingColumns")||0);if(r>0){const a=r-i;Be("headingColumns",a,n,s,0)}}function pm(n,e){const t=e.getColumns(n),i=new Array(t).fill(0);for(const{column:o}of new ae(n))i[o]++;const s=i.reduce((o,r,a)=>r?o:[...o,a],[]);if(s.length>0){const o=s[s.length-1];return e.removeColumns(n,{at:o}),!0}return!1}function wm(n,e){const t=[],i=e.getRows(n);for(let s=0;s<i;s++)n.getChild(s).isEmpty&&t.push(s);if(t.length>0){const s=t[t.length-1];return e.removeRows(n,{at:s}),!0}return!1}function bp(n,e){pm(n,e)||wm(n,e)}function mT(n,e){const t=Array.from(new ae(n,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:o})=>o===1))return e.lastRow;const s=t[0].cellHeight-1;return e.lastRow+s}function gT(n,e){const t=Array.from(new ae(n,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:o})=>o===1))return e.lastColumn;const s=t[0].cellWidth-1;return e.lastColumn+s}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zl extends F{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],o=this.value,r=this.direction;e.change(a=>{const l=r=="right"||r=="down",c=l?s:o,u=l?o:s,d=u.parent;vj(u,c,a);const h=this.isHorizontal?"colspan":"rowspan",f=parseInt(s.getAttribute(h)||1),p=parseInt(o.getAttribute(h)||1);a.setAttribute(h,f+p,c),a.setSelection(a.createRangeIn(c));const b=this.editor.plugins.get("TableUtils"),x=d.findAncestor("table");bp(x,b)})}_getMergeableCell(){const t=this.editor.model.document,i=this.editor.plugins.get("TableUtils"),s=i.getTableCellsContainingSelection(t.selection)[0];if(!s)return;const o=this.isHorizontal?wj(s,this.direction,i):bj(s,this.direction,i);if(!o)return;const r=this.isHorizontal?"rowspan":"colspan",a=parseInt(s.getAttribute(r)||1);if(parseInt(o.getAttribute(r)||1)===a)return o}}function wj(n,e,t){const s=n.parent.parent,o=e=="right"?n.nextSibling:n.previousSibling,r=(s.getAttribute("headingColumns")||0)>0;if(!o)return;const a=e=="right"?n:o,l=e=="right"?o:n,{column:c}=t.getCellLocation(a),{column:u}=t.getCellLocation(l),d=parseInt(a.getAttribute("colspan")||1),h=gm(t,a),f=gm(t,l);return r&&h!=f?void 0:c+d===u?o:void 0}function bj(n,e,t){const i=n.parent,s=i.parent,o=s.getChildIndex(i);if(e=="down"&&o===t.getRows(s)-1||e=="up"&&o===0)return;const r=parseInt(n.getAttribute("rowspan")||1),a=s.getAttribute("headingRows")||0,l=e=="down"&&o+r===a,c=e=="up"&&o===a;if(a&&(l||c))return;const u=parseInt(n.getAttribute("rowspan")||1),d=e=="down"?o+u:o,h=[...new ae(s,{endRow:d})],p=h.find(x=>x.cell===n).column,b=h.find(({row:x,cellHeight:v,column:w})=>w!==p?!1:e=="down"?x===d:d===x+v);return b&&b.cell}function vj(n,e,t){Wv(n)||(Wv(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function Wv(n){return n.childCount==1&&n.getChild(0).is("element","paragraph")&&n.getChild(0).isEmpty}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _j extends F{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const s=i.findAncestor("table"),r=this.editor.plugins.get("TableUtils").getRows(s)-1,a=e.getRowIndexes(t),l=a.first===0&&a.last===r;this.isEnabled=!l}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(i),o=i[0],r=o.findAncestor("table"),a=t.getCellLocation(o).column;e.change(l=>{const c=s.last-s.first+1;t.removeRows(r,{at:s.first,rows:c});const u=yj(r,s.first,a,t.getRows(r));l.setSelection(l.createPositionAt(u,0))})}}function yj(n,e,t,i){const s=n.getChild(Math.min(e,i-1));let o=s.getChild(0),r=0;for(const a of s.getChildren()){if(r>t)return o;o=a,r+=parseInt(a.getAttribute("colspan")||1)}return o}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cj extends F{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const s=i.findAncestor("table"),o=e.getColumns(s),{first:r,last:a}=e.getColumnIndexes(t);this.isEnabled=a-r<o-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,i]=xj(this.editor.model.document.selection,e),s=t.parent.parent,o=[...new ae(s)],r={first:o.find(l=>l.cell===t).column,last:o.find(l=>l.cell===i).column},a=kj(o,t,i,r);this.editor.model.change(l=>{const c=r.last-r.first+1;this.editor.plugins.get("TableUtils").removeColumns(s,{at:r.first,columns:c}),l.setSelection(l.createPositionAt(a,0))})}}function kj(n,e,t,i){return parseInt(t.getAttribute("colspan")||1)>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:i.first?n.reverse().find(({column:o})=>o<i.first).cell:n.reverse().find(({column:o})=>o>i.last).cell}function xj(n,e){const t=e.getSelectionAffectedTableCells(n),i=t[0],s=t.pop(),o=[i,s];return i.isBefore(s)?o:o.reverse()}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tj extends F{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection),s=i.length>0;this.isEnabled=s,this.value=s&&i.every(o=>this._isInHeading(o,o.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=t.getSelectionAffectedTableCells(i.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=t.getRowIndexes(s),l=this.value?r:a+1,c=o.getAttribute("headingRows")||0;i.change(u=>{if(l){const d=l>c?c:0,h=cT(o,l,d);for(const{cell:f}of h)uT(f,l,u)}Be("headingRows",l,o,u,0)})}_isInHeading(e,t){const i=parseInt(t.getAttribute("headingRows")||0);return!!i&&e.parent.index<i}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ej extends F{refresh(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=i.length>0;this.isEnabled=s,this.value=s&&i.every(o=>gm(t,o))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=t.getSelectionAffectedTableCells(i.document.selection),o=s[0].findAncestor("table"),{first:r,last:a}=t.getColumnIndexes(s),l=this.value?r:a+1;i.change(c=>{if(l){const u=dT(o,l);for(const{cell:d,column:h}of u)hT(d,h,l,c)}Be("headingColumns",l,o,c,0)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ye extends k{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,i=t.parent,s=i.getChildIndex(t),o=new ae(i,{row:s});for(const{cell:r,row:a,column:l}of o)if(r===e)return{row:a,column:l}}createTable(e,t){const i=e.createElement("table"),s=parseInt(t.rows)||2,o=parseInt(t.columns)||2;return Eh(e,i,0,s,o),t.headingRows&&Be("headingRows",Math.min(t.headingRows,s),i,e,0),t.headingColumns&&Be("headingColumns",Math.min(t.headingColumns,o),i,e,0),i}insertRows(e,t={}){const i=this.editor.model,s=t.at||0,o=t.rows||1,r=t.copyStructureFromAbove!==void 0,a=t.copyStructureFromAbove?s-1:s,l=this.getRows(e),c=this.getColumns(e);if(s>l)throw new y("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change(u=>{const d=e.getAttribute("headingRows")||0;if(d>s&&Be("headingRows",d+o,e,u,0),!r&&(s===0||s===l)){Eh(u,e,s,o,c);return}const h=r?Math.max(s,a):s,f=new ae(e,{endRow:h}),p=new Array(c).fill(1);for(const{row:b,column:x,cellHeight:v,cellWidth:w,cell:C}of f){const E=b+v-1,V=b<s&&s<=E,A=b<=a&&a<=E;V?(u.setAttribute("rowspan",v+o,C),p[x]=-w):r&&A&&(p[x]=w)}for(let b=0;b<o;b++){const x=u.createElement("tableRow");u.insert(x,e,s);for(let v=0;v<p.length;v++){const w=p[v],C=u.createPositionAt(x,"end");w>0&&Ks(u,C,w>1?{colspan:w}:null),v+=Math.abs(w)-1}}})}insertColumns(e,t={}){const i=this.editor.model,s=t.at||0,o=t.columns||1;i.change(r=>{const a=e.getAttribute("headingColumns");s<a&&r.setAttribute("headingColumns",a+o,e);const l=this.getColumns(e);if(s===0||l===s){for(const u of e.getChildren())u.is("element","tableRow")&&wo(o,r,r.createPositionAt(u,s?"end":0));return}const c=new ae(e,{column:s,includeAllSlots:!0});for(const u of c){const{row:d,cell:h,cellAnchorColumn:f,cellAnchorRow:p,cellWidth:b,cellHeight:x}=u;if(f<s){r.setAttribute("colspan",b+o,h);const v=p+x-1;for(let w=d;w<=v;w++)c.skipRow(w)}else wo(o,r,u.getPositionBefore())}})}removeRows(e,t){const i=this.editor.model,s=t.rows||1,o=this.getRows(e),r=t.at,a=r+s-1;if(a>o-1)throw new y("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change(l=>{const{cellsToMove:c,cellsToTrim:u}=Ij(e,r,a);if(c.size){const d=a+1;Pj(e,d,c,l)}for(let d=a;d>=r;d--)l.remove(e.getChild(d));for(const{rowspan:d,cell:h}of u)Be("rowspan",d,h,l);Aj(e,r,a,l),pm(e,this)||wm(e,this)})}removeColumns(e,t){const i=this.editor.model,s=t.at,o=t.columns||1,r=t.at+o-1;i.change(a=>{Sj(e,{first:s,last:r},a);for(let l=r;l>=s;l--)for(const{cell:c,column:u,cellWidth:d}of[...new ae(e)])u<=l&&d>1&&u+d>l?Be("colspan",d-1,c,a):u===l&&a.remove(c);wm(e,this)||pm(e,this)})}splitCellVertically(e,t=2){const i=this.editor.model,o=e.parent.parent,r=parseInt(e.getAttribute("rowspan")||1),a=parseInt(e.getAttribute("colspan")||1);i.change(l=>{if(a>1){const{newCellsSpan:c,updatedSpan:u}=jv(a,t);Be("colspan",u,e,l);const d={};c>1&&(d.colspan=c),r>1&&(d.rowspan=r);const h=a>t?t-1:a-1;wo(h,l,l.createPositionAfter(e),d)}if(a<t){const c=t-a,u=[...new ae(o)],{column:d}=u.find(({cell:b})=>b===e),h=u.filter(({cell:b,cellWidth:x,column:v})=>{const w=b!==e&&v===d,C=v<d&&v+x>d;return w||C});for(const{cell:b,cellWidth:x}of h)l.setAttribute("colspan",x+c,b);const f={};r>1&&(f.rowspan=r),wo(c,l,l.createPositionAfter(e),f);const p=o.getAttribute("headingColumns")||0;p>d&&Be("headingColumns",p+c,o,l)}})}splitCellHorizontally(e,t=2){const i=this.editor.model,s=e.parent,o=s.parent,r=o.getChildIndex(s),a=parseInt(e.getAttribute("rowspan")||1),l=parseInt(e.getAttribute("colspan")||1);i.change(c=>{if(a>1){const u=[...new ae(o,{startRow:r,endRow:r+a-1,includeAllSlots:!0})],{newCellsSpan:d,updatedSpan:h}=jv(a,t);Be("rowspan",h,e,c);const{column:f}=u.find(({cell:b})=>b===e),p={};d>1&&(p.rowspan=d),l>1&&(p.colspan=l);for(const b of u){const{column:x,row:v}=b,w=v>=r+h,C=x===f,E=(v+r+h)%d===0;w&&C&&E&&wo(1,c,b.getPositionBefore(),p)}}if(a<t){const u=t-a,d=[...new ae(o,{startRow:0,endRow:r})];for(const{cell:p,cellHeight:b,row:x}of d)if(p!==e&&x+b>r){const v=b+u;c.setAttribute("rowspan",v,p)}const h={};l>1&&(h.colspan=l),Eh(c,o,r+1,u,1,h);const f=o.getAttribute("headingRows")||0;f>r&&Be("headingRows",f+u,o,c)}})}getColumns(e){return[...e.getChild(0).getChildren()].reduce((i,s)=>{const o=parseInt(s.getAttribute("colspan")||1);return i+o},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,i)=>i.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new ae(e,t)}getSelectedTableCells(e){const t=[];for(const i of this.sortRanges(e.getRanges())){const s=i.getContainedElement();s&&s.is("element","tableCell")&&t.push(s)}return t}getTableCellsContainingSelection(e){const t=[];for(const i of e.getRanges()){const s=i.start.findAncestor("tableCell");s&&t.push(s)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(i=>i.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),s=[...new ae(t)].filter(o=>e.includes(o.cell)).map(o=>o.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,i=new Set;let s=0;for(const r of e){const{row:a,column:l}=this.getCellLocation(r),c=parseInt(r.getAttribute("rowspan")||1),u=parseInt(r.getAttribute("colspan")||1);t.add(a),i.add(l),c>1&&t.add(a+c-1),u>1&&i.add(l+u-1),s+=c*u}return Vj(t,i)==s}sortRanges(e){return Array.from(e).sort(Rj)}_getFirstLastIndexesObject(e){const t=e.sort((o,r)=>o-r),i=t[0],s=t[t.length-1];return{first:i,last:s}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),i=this.getRowIndexes(e),s=parseInt(t.getAttribute("headingRows")||0);if(!this._areIndexesInSameSection(i,s))return!1;const o=parseInt(t.getAttribute("headingColumns")||0),r=this.getColumnIndexes(e);return this._areIndexesInSameSection(r,o)}_areIndexesInSameSection({first:e,last:t},i){const s=e<i,o=t<i;return s===o}}function Eh(n,e,t,i,s,o={}){for(let r=0;r<i;r++){const a=n.createElement("tableRow");n.insert(a,e,t),wo(s,n,n.createPositionAt(a,"end"),o)}}function wo(n,e,t,i={}){for(let s=0;s<n;s++)Ks(e,t,i)}function jv(n,e){if(n<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(n/e),i=n-t*e+t;return{newCellsSpan:t,updatedSpan:i}}function Sj(n,e,t){const i=n.getAttribute("headingColumns")||0;if(i&&e.first<i){const s=Math.min(i-1,e.last)-e.first+1;t.setAttribute("headingColumns",i-s,n)}}function Aj(n,e,t,i){const s=n.getAttribute("headingRows")||0;if(e<s){const o=t<s?s-(t-e+1):e;Be("headingRows",o,n,i,0)}}function Ij(n,e,t){const i=new Map,s=[];for(const{row:o,column:r,cellHeight:a,cell:l}of new ae(n,{endRow:t})){const c=o+a-1;if(o>=e&&o<=t&&c>t){const h=t-o+1,f=a-h;i.set(r,{cell:l,rowspan:f})}if(o<e&&c>=e){let h;c>=t?h=t-e+1:h=c-e+1,s.push({cell:l,rowspan:a-h})}}return{cellsToMove:i,cellsToTrim:s}}function Pj(n,e,t,i){const o=[...new ae(n,{includeAllSlots:!0,row:e})],r=n.getChild(e);let a;for(const{column:l,cell:c,isAnchor:u}of o)if(t.has(l)){const{cell:d,rowspan:h}=t.get(l),f=a?i.createPositionAfter(a):i.createPositionAt(r,0);i.move(i.createRangeOn(d),f),Be("rowspan",h,d,i),a=d}else u&&(a=c)}function Rj(n,e){const t=n.start,i=e.start;return t.isBefore(i)?-1:1}function Vj(n,e){const t=Array.from(n.values()),i=Array.from(e.values()),s=Math.max(...t),o=Math.min(...t),r=Math.max(...i),a=Math.min(...i);return(s-o+1)*(r-a+1)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lj extends F{refresh(){const e=this.editor.plugins.get(Ye),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t,this.editor.plugins.get(Ye))}execute(){const e=this.editor.model,t=this.editor.plugins.get(Ye);e.change(i=>{const s=t.getSelectedTableCells(e.document.selection),o=s.shift(),{mergeWidth:r,mergeHeight:a}=Mj(o,s,t);Be("colspan",r,o,i),Be("rowspan",a,o,i);for(const c of s)Oj(c,o,i);const l=o.findAncestor("table");bp(l,t),i.setSelection(o,"in")})}}function Oj(n,e,t){qv(n)||(qv(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function qv(n){return n.childCount==1&&n.getChild(0).is("element","paragraph")&&n.getChild(0).isEmpty}function Mj(n,e,t){let i=0,s=0;for(const c of e){const{row:u,column:d}=t.getCellLocation(c);i=Gv(c,d,i,"colspan"),s=Gv(c,u,s,"rowspan")}const{row:o,column:r}=t.getCellLocation(n),a=i-r,l=s-o;return{mergeWidth:a,mergeHeight:l}}function Gv(n,e,t,i){const s=parseInt(n.getAttribute(i)||1);return Math.max(t,e+s)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nj extends F{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(i),o=i[0].findAncestor("table"),r=[];for(let a=s.first;a<=s.last;a++)for(const l of o.getChild(a).getChildren())r.push(e.createRangeOn(l));e.change(a=>{a.setSelection(r)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bj extends F{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection),s=i[0],o=i.pop(),r=s.findAncestor("table"),a=e.getCellLocation(s),l=e.getCellLocation(o),c=Math.min(a.column,l.column),u=Math.max(a.column,l.column),d=[];for(const h of new ae(r,{startColumn:c,endColumn:u}))d.push(t.createRangeOn(h.cell));t.change(h=>{h.setSelection(d)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fj(n){n.document.registerPostFixer(e=>Dj(e,n))}function Dj(n,e){const t=e.document.differ.getChanges();let i=!1;const s=new Set;for(const o of t){let r;o.name=="table"&&o.type=="insert"&&(r=o.position.nodeAfter),(o.name=="tableRow"||o.name=="tableCell")&&(r=o.position.findAncestor("table")),Wj(o)&&(r=o.range.start.findAncestor("table")),r&&!s.has(r)&&(i=zj(r,n)||i,i=Hj(r,n)||i,s.add(r))}return i}function zj(n,e){let t=!1;const i=Uj(n);if(i.length){t=!0;for(const s of i)Be("rowspan",s.rowspan,s.cell,e,1)}return t}function Hj(n,e){let t=!1;const i=$j(n),s=[];for(const[l,c]of i.entries())!c&&n.getChild(l).is("element","tableRow")&&s.push(l);if(s.length){t=!0;for(const l of s.reverse())e.remove(n.getChild(l)),i.splice(l,1)}const o=i.filter((l,c)=>n.getChild(c).is("element","tableRow")),r=o[0];if(!o.every(l=>l===r)){const l=o.reduce((c,u)=>u>c?u:c,0);for(const[c,u]of o.entries()){const d=l-u;if(d){for(let h=0;h<d;h++)Ks(e,e.createPositionAt(n.getChild(c),"end"));t=!0}}}return t}function Uj(n){const e=parseInt(n.getAttribute("headingRows")||0),t=Array.from(n.getChildren()).reduce((s,o)=>o.is("element","tableRow")?s+1:s,0),i=[];for(const{row:s,cell:o,cellHeight:r}of new ae(n)){if(r<2)continue;const l=s<e?e:t;if(s+r>l){const c=l-s;i.push({cell:o,rowspan:c})}}return i}function $j(n){const e=new Array(n.childCount).fill(0);for(const{rowIndex:t}of new ae(n,{includeAllSlots:!0}))e[t]++;return e}function Wj(n){const e=n.type==="attribute",t=n.attributeKey;return e&&(t==="headingRows"||t==="colspan"||t==="rowspan")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jj(n){n.document.registerPostFixer(e=>qj(e,n))}function qj(n,e){const t=e.document.differ.getChanges();let i=!1;for(const s of t)s.type=="insert"&&s.name=="table"&&(i=Gj(s.position.nodeAfter,n)||i),s.type=="insert"&&s.name=="tableRow"&&(i=pT(s.position.nodeAfter,n)||i),s.type=="insert"&&s.name=="tableCell"&&(i=bm(s.position.nodeAfter,n)||i),Kj(s)&&(i=bm(s.position.parent,n)||i);return i}function Gj(n,e){let t=!1;for(const i of n.getChildren())i.is("element","tableRow")&&(t=pT(i,e)||t);return t}function pT(n,e){let t=!1;for(const i of n.getChildren())t=bm(i,e)||t;return t}function bm(n,e){if(n.childCount==0)return e.insertElement("paragraph",n),!0;const t=Array.from(n.getChildren()).filter(i=>i.is("$text"));for(const i of t)e.wrap(e.createRangeOn(i),"paragraph");return!!t.length}function Kj(n){return!n.position||!n.position.parent.is("element","tableCell")?!1:n.type=="insert"&&n.name=="$text"||n.type=="remove"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qj(n,e){const t=n.document.differ;for(const i of t.getChanges()){let s,o=!1;if(i.type=="attribute"){const c=i.range.start.nodeAfter;if(!c||!c.is("element","table")||i.attributeKey!="headingRows"&&i.attributeKey!="headingColumns")continue;s=c,o=i.attributeKey=="headingRows"}else(i.name=="tableRow"||i.name=="tableCell")&&(s=i.position.findAncestor("table"),o=i.name=="tableRow");if(!s)continue;const r=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,l=new ae(s);for(const c of l){const d=c.row<r||c.column<a?"th":"td",h=e.mapper.toViewElement(c.cell);h&&h.is("element")&&h.name!=d&&e.reconvertItem(o?c.cell.parent:c.cell)}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jj(n,e){const t=n.document.differ,i=new Set;for(const s of t.getChanges()){const o=s.type=="attribute"?s.range.start.parent:s.position.parent;o.is("element","tableCell")&&i.add(o)}for(const s of i.values()){const o=Array.from(s.getChildren()).filter(r=>Yj(r,e.mapper));for(const r of o)e.reconvertItem(r)}}function Yj(n,e){if(!n.is("element","paragraph"))return!1;const t=e.toViewElement(n);return t?aT(n)!==t.is("element","span"):!1}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qa extends k{static get pluginName(){return"TableEditing"}static get requires(){return[Ye]}init(){const e=this.editor,t=e.model,i=t.schema,s=e.conversion,o=e.plugins.get(Ye);i.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(sj()),s.for("upcast").add(oj()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Fv(o,{asWidget:!0})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Fv(o)}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(rj()),s.for("downcast").elementToElement({model:"tableRow",view:dj()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(Bv("td")),s.for("upcast").add(Bv("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:Dv({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:Dv()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:zv({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:zv(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:Kv("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Kv("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new mj(e)),e.commands.add("insertTableRowAbove",new Hv(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Hv(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Uv(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Uv(e,{order:"right"})),e.commands.add("removeTableRow",new _j(e)),e.commands.add("removeTableColumn",new Cj(e)),e.commands.add("splitTableCellVertically",new $v(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new $v(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Lj(e)),e.commands.add("mergeTableCellRight",new zl(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new zl(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new zl(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new zl(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Ej(e)),e.commands.add("setTableRowHeader",new Tj(e)),e.commands.add("selectTableRow",new Nj(e)),e.commands.add("selectTableColumn",new Bj(e)),Fj(t),jj(t),this.listenTo(t.document,"change:data",()=>{Qj(t,e.editing),Jj(t,e.editing)})}}function Kv(n){return e=>{const t=parseInt(e.getAttribute(n));return Number.isNaN(t)||t<=0?null:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xj extends B{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Ue,this.focusTracker=new Le,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(i,s)=>`${s}  ${i}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(i=>{i.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(i,s)=>{const{row:o,column:r}=s.target.dataset;this.items.get((parseInt(o,10)-1)*10+(parseInt(r,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(i,s,o)=>{if(!o)return;const{row:r,column:a}=o.dataset;this.set({rows:parseInt(r),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),Bu({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((i,s)=>{const o=Math.floor(s/10),r=s%10,a=o<e&&r<t;i.set("isOn",a)})}_createGridButton(e,t,i,s){const o=new z(e);return o.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),o.extendTemplate({attributes:{"data-row":t,"data-column":i}}),o}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const i=Math.floor(t/10),s=t%10,o=`${i+1}  ${s+1}`;e.push(this._createGridButton(this.locale,i+1,s+1,o))}return this.createCollection(e)}}const Zj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',eq='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',tq='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',nq='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class iq extends k{static get pluginName(){return"TableUI"}init(){const e=this.editor,t=this.editor.t,s=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",o=>{const r=e.commands.get("insertTable"),a=Se(o);a.bind("isEnabled").to(r),a.buttonView.set({icon:Zj,label:t("Insert table"),tooltip:!0});let l;return a.on("change:isOpen",()=>{l||(l=new Xj(o),a.panelView.children.add(l),l.delegate("execute").to(a),a.on("execute",()=>{e.execute("insertTable",{rows:l.rows,columns:l.columns}),e.editing.view.focus()}))}),a}),e.ui.componentFactory.add("tableColumn",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),eq,r,o)}),e.ui.componentFactory.add("tableRow",o=>{const r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),tq,r,o)}),e.ui.componentFactory.add("mergeTableCells",o=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),nq,r,o)})}_prepareDropdown(e,t,i,s){const o=this.editor,r=Se(s),a=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(a,"isEnabled",(...l)=>l.some(c=>c)),this.listenTo(r,"execute",l=>{o.execute(l.source.commandName),l.source instanceof ja||o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(e,t,i,s){const o=this.editor,r=Se(s,qs),a="mergeTableCells",l=o.commands.get(a),c=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([l,...c],"isEnabled",(...u)=>u.some(d=>d)),this.listenTo(r.buttonView,"execute",()=>{o.execute(a),o.editing.view.focus()}),this.listenTo(r,"execute",u=>{o.execute(u.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(e,t){const i=this.editor,s=[],o=new xe;for(const r of t)sq(r,i,s,o);return Tn(e,o),s}}function sq(n,e,t,i){const s=n.model=new un(n.model),{commandName:o,bindIsOn:r}=n.model;if(n.type==="button"||n.type==="switchbutton"){const a=e.commands.get(o);t.push(a),s.set({commandName:o}),s.bind("isEnabled").to(a),r&&s.bind("isOn").to(a,"value")}s.set({withText:!0}),i.add(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ts extends k{static get pluginName(){return"TableSelection"}static get requires(){return[Ye,Ye]}init(){const e=this.editor,t=e.model,i=e.editing.view;this.listenTo(t,"deleteContent",(s,o)=>this._handleDeleteContent(s,o),{priority:"high"}),this.listenTo(i.document,"insertText",(s,o)=>this._handleInsertTextEvent(s,o),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(Ye),t=this.editor.model.document.selection,i=e.getSelectedTableCells(t);return i.length==0?null:i}getSelectionAsFragment(){const e=this.editor.plugins.get(Ye),t=this.getSelectedTableCells();return t?this.editor.model.change(i=>{const s=i.createDocumentFragment(),{first:o,last:r}=e.getColumnIndexes(t),{first:a,last:l}=e.getRowIndexes(t),c=t[0].findAncestor("table");let u=l,d=r;if(e.isSelectionRectangular(t)){const p={firstColumn:o,lastColumn:r,firstRow:a,lastRow:l};u=mT(c,p),d=gT(c,p)}const f=lT(c,{startRow:a,startColumn:o,endRow:u,endColumn:d},i);return i.insert(f,s,0),s}):null}setCellSelection(e,t){const i=this._getCellsToSelect(e,t);this.editor.model.change(s=>{s.setSelection(i.cells.map(o=>s.createRangeOn(o)),{backward:i.backward})})}getFocusCell(){const i=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return i&&i.is("element","tableCell")?i:null}getAnchorCell(){const e=this.editor.model.document.selection,i=de(e.getRanges()).getContainedElement();return i&&i.is("element","tableCell")?i:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(s=>s.on("selection",(o,r,a)=>{const l=a.writer;i(l);const c=this.getSelectedTableCells();if(!c)return;for(const d of c){const h=a.mapper.toViewElement(d);l.addClass("ck-editor__editable_selected",h),t.add(h)}const u=a.mapper.toViewElement(c[c.length-1]);l.setSelection(u,0)},{priority:"lowest"}));function i(s){for(const o of t)s.removeClass("ck-editor__editable_selected",o);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(i=>{const s=i.createPositionAt(t[0],0),o=e.model.schema.getNearestSelectionRange(s);i.setSelection(o)})}})}_handleDeleteContent(e,t){const i=this.editor.plugins.get(Ye),[s,o]=t,r=this.editor.model,a=!o||o.direction=="backward",l=i.getSelectedTableCells(s);l.length&&(e.stop(),r.change(c=>{const u=l[a?l.length-1:0];r.change(h=>{for(const f of l)r.deleteContent(h.createSelection(f,"in"))});const d=r.schema.getNearestSelectionRange(c.createPositionAt(u,0));s.is("documentSelection")?c.setSelection(d):s.setTo(d)}))}_handleInsertTextEvent(e,t){const i=this.editor,o=i.model.document.selection,r=this.getSelectedTableCells(o);if(!r)return;const a=i.editing.view,l=i.editing.mapper,c=r.map(u=>a.createRangeOn(l.toViewElement(u)));t.selection=a.createSelection(c)}_getCellsToSelect(e,t){const i=this.editor.plugins.get("TableUtils"),s=i.getCellLocation(e),o=i.getCellLocation(t),r=Math.min(s.row,o.row),a=Math.max(s.row,o.row),l=Math.min(s.column,o.column),c=Math.max(s.column,o.column),u=new Array(a-r+1).fill(null).map(()=>[]),d={startRow:r,endRow:a,startColumn:l,endColumn:c};for(const{row:p,cell:b}of new ae(e.findAncestor("table"),d))u[p-r].push(b);const h=o.row<s.row,f=o.column<s.column;return h&&u.reverse(),f&&u.forEach(p=>p.reverse()),{cells:u.flat(),backward:h||f}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oq extends k{static get pluginName(){return"TableClipboard"}static get requires(){return[Ts,Ye]}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(i,s)=>this._onCopyCut(i,s)),this.listenTo(t,"cut",(i,s)=>this._onCopyCut(i,s)),this.listenTo(e.model,"insertContent",(i,s)=>this._onInsertContent(i,...s),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const i=this.editor.plugins.get(Ts);if(!i.getSelectedTableCells()||e.name=="cut"&&this.editor.isReadOnly)return;t.preventDefault(),e.stop();const s=this.editor.data,o=this.editor.editing.view.document,r=s.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:e.name})}_onInsertContent(e,t,i){if(i&&!i.is("documentSelection"))return;const s=this.editor.model,o=this.editor.plugins.get(Ye);let r=Qv(t,s);if(!r)return;const a=o.getSelectionAffectedTableCells(s.document.selection);if(!a.length){bp(r,o);return}e.stop(),s.change(l=>{const c={width:o.getColumns(r),height:o.getRows(r)},u=rq(a,c,l,o),d=u.lastRow-u.firstRow+1,h=u.lastColumn-u.firstColumn+1,f={startRow:0,startColumn:0,endRow:Math.min(d,c.height)-1,endColumn:Math.min(h,c.width)-1};r=lT(r,f,l);const p=a[0].findAncestor("table"),b=this._replaceSelectedCellsWithPasted(r,c,p,u,l);if(this.editor.plugins.get("TableSelection").isEnabled){const x=o.sortRanges(b.map(v=>l.createRangeOn(v)));l.setSelection(x)}else l.setSelection(b[0],0)})}_replaceSelectedCellsWithPasted(e,t,i,s,o){const{width:r,height:a}=t,l=lq(e,r,a),c=[...new ae(i,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],u=[];let d;for(const x of c){const{row:v,column:w}=x;w===s.firstColumn&&(d=x.getPositionBefore());const C=v-s.firstRow,E=w-s.firstColumn,V=l[C%a][E%r],A=V?o.cloneElement(V):null,P=this._replaceTableSlotCell(x,A,d,o);P&&(fT(P,v,w,s.lastRow,s.lastColumn,o),u.push(P),d=o.createPositionAfter(P))}const h=parseInt(i.getAttribute("headingRows")||0),f=parseInt(i.getAttribute("headingColumns")||0),p=s.firstRow<h&&h<=s.lastRow,b=s.firstColumn<f&&f<=s.lastColumn;if(p){const x={first:s.firstColumn,last:s.lastColumn},v=vm(i,h,x,o,s.firstRow);u.push(...v)}if(b){const x={first:s.firstRow,last:s.lastRow},v=_m(i,f,x,o);u.push(...v)}return u}_replaceTableSlotCell(e,t,i,s){const{cell:o,isAnchor:r}=e;return r&&s.remove(o),t?(s.insert(t,i),t):null}getTableIfOnlyTableInContent(e,t){return Qv(e,t)}}function Qv(n,e){if(!n.is("documentFragment")&&!n.is("element"))return null;if(n.is("element","table"))return n;if(n.childCount==1&&n.getChild(0).is("element","table"))return n.getChild(0);const t=e.createRangeIn(n);for(const i of t.getItems())if(i.is("element","table")){const s=e.createRange(t.start,e.createPositionBefore(i));if(e.hasContent(s,{ignoreWhitespaces:!0}))return null;const o=e.createRange(e.createPositionAfter(i),t.end);return e.hasContent(o,{ignoreWhitespaces:!0})?null:i}return null}function rq(n,e,t,i){const s=n[0].findAncestor("table"),o=i.getColumnIndexes(n),r=i.getRowIndexes(n),a={firstColumn:o.first,lastColumn:o.last,firstRow:r.first,lastRow:r.last},l=n.length===1;return l&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,aq(s,a.lastRow+1,a.lastColumn+1,i)),l||!i.isSelectionRectangular(n)?cq(s,a,t):(a.lastRow=mT(s,a),a.lastColumn=gT(s,a)),a}function aq(n,e,t,i){const s=i.getColumns(n),o=i.getRows(n);t>s&&i.insertColumns(n,{at:s,columns:t-s}),e>o&&i.insertRows(n,{at:o,rows:e-o})}function lq(n,e,t){const i=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:s,row:o,cell:r}of new ae(n))i[o][s]=r;return i}function cq(n,e,t){const{firstRow:i,lastRow:s,firstColumn:o,lastColumn:r}=e,a={first:i,last:s},l={first:o,last:r};_m(n,o,a,t),_m(n,r+1,a,t),vm(n,i,l,t),vm(n,s+1,l,t,i)}function vm(n,e,t,i,s=0){return e<1?void 0:cT(n,e,s).filter(({column:a,cellWidth:l})=>wT(a,l,t)).map(({cell:a})=>uT(a,e,i))}function _m(n,e,t,i){return e<1?void 0:dT(n,e).filter(({row:r,cellHeight:a})=>wT(r,a,t)).map(({cell:r,column:a})=>hT(r,a,e,i))}function wT(n,e,t){const i=n+e-1,{first:s,last:o}=t,r=n>=s&&n<=o,a=n<s&&i>=s;return r||a}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uq extends k{static get pluginName(){return"TableKeyboard"}static get requires(){return[Ts,Ye]}init(){const t=this.editor.editing.view.document;this.listenTo(t,"arrowKey",(...i)=>this._onArrowKey(...i),{context:"table"}),this.listenTo(t,"tab",(...i)=>this._handleTabOnSelectedTable(...i),{context:"figure"}),this.listenTo(t,"tab",(...i)=>this._handleTab(...i),{context:["th","td"]})}_handleTabOnSelectedTable(e,t){const i=this.editor,o=i.model.document.selection.getSelectedElement();!o||!o.is("element","table")||(t.preventDefault(),t.stopPropagation(),e.stop(),i.model.change(r=>{r.setSelection(r.createRangeIn(o.getChild(0).getChild(0)))}))}_handleTab(e,t){const i=this.editor,s=this.editor.plugins.get(Ye),o=i.model.document.selection,r=!t.shiftKey;let a=s.getTableCellsContainingSelection(o)[0];if(a||(a=this.editor.plugins.get("TableSelection").getFocusCell()),!a)return;t.preventDefault(),t.stopPropagation(),e.stop();const l=a.parent,c=l.parent,u=c.getChildIndex(l),d=l.getChildIndex(a),h=d===0;if(!r&&h&&u===0){i.model.change(x=>{x.setSelection(x.createRangeOn(c))});return}const f=d===l.childCount-1,p=u===s.getRows(c)-1;if(r&&p&&f&&(i.execute("insertTableRowBelow"),u===s.getRows(c)-1)){i.model.change(x=>{x.setSelection(x.createRangeOn(c))});return}let b;if(r&&f)b=c.getChild(u+1).getChild(0);else if(!r&&h){const x=c.getChild(u-1);b=x.getChild(x.childCount-1)}else b=l.getChild(d+(r?1:-1));i.model.change(x=>{x.setSelection(x.createRangeIn(b))})}_onArrowKey(e,t){const i=this.editor,s=t.keyCode,o=Au(s,i.locale.contentLanguageDirection);this._handleArrowKeys(o,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const i=this.editor.plugins.get(Ye),s=this.editor.model,o=s.document.selection,r=["right","down"].includes(e),a=i.getSelectedTableCells(o);if(a.length){let c;return t?c=this.editor.plugins.get("TableSelection").getFocusCell():c=r?a[a.length-1]:a[0],this._navigateFromCellInDirection(c,e,t),!0}const l=o.focus.findAncestor("tableCell");if(!l)return!1;if(!o.isCollapsed)if(t){if(o.isBackward==r&&!o.containsEntireContent(l))return!1}else{const c=o.getSelectedElement();if(!c||!s.schema.isObject(c))return!1}return this._isSelectionAtCellEdge(o,l,r)?(this._navigateFromCellInDirection(l,e,t),!0):!1}_isSelectionAtCellEdge(e,t,i){const s=this.editor.model,o=this.editor.model.schema,r=i?e.getLastPosition():e.getFirstPosition();if(!o.getLimitElement(r).is("element","tableCell"))return s.createPositionAt(t,i?"end":0).isTouching(r);const a=s.createSelection(r);return s.modifySelection(a,{direction:i?"forward":"backward"}),r.isEqual(a.focus)}_navigateFromCellInDirection(e,t,i=!1){const s=this.editor.model,o=e.findAncestor("table"),r=[...new ae(o,{includeAllSlots:!0})],{row:a,column:l}=r[r.length-1],c=r.find(({cell:w})=>w==e);let{row:u,column:d}=c;switch(t){case"left":d--;break;case"up":u--;break;case"right":d+=c.cellWidth;break;case"down":u+=c.cellHeight;break}const h=u<0||u>a,f=d<0&&u<=0,p=d>l&&u>=a;if(h||f||p){s.change(w=>{w.setSelection(w.createRangeOn(o))});return}d<0?(d=i?0:l,u--):d>l&&(d=i?l:0,u++);const b=r.find(w=>w.row==u&&w.column==d).cell,x=["right","down"].includes(t),v=this.editor.plugins.get("TableSelection");if(i&&v.isEnabled){const w=v.getAnchorCell()||e;v.setCellSelection(w,b)}else{const w=s.createPositionAt(b,x?0:"end");s.change(C=>{C.setSelection(w)})}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bT extends Qi{constructor(e){super(e),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dq extends k{static get pluginName(){return"TableMouse"}static get requires(){return[Ts,Ye]}init(){this.editor.editing.view.addObserver(bT),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(Ye);let i=!1;const s=e.plugins.get(Ts);this.listenTo(e.editing.view.document,"mousedown",(o,r)=>{const a=e.model.document.selection;if(!this.isEnabled||!s.isEnabled||!r.domEvent.shiftKey)return;const l=s.getAnchorCell()||t.getTableCellsContainingSelection(a)[0];if(!l)return;const c=this._getModelTableCellFromDomEvent(r);c&&Jv(l,c)&&(i=!0,s.setCellSelection(l,c),r.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(e.editing.view.document,"selectionChange",o=>{i&&o.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,i,s=!1,o=!1;const r=e.plugins.get(Ts);this.listenTo(e.editing.view.document,"mousedown",(a,l)=>{!this.isEnabled||!r.isEnabled||l.domEvent.shiftKey||l.domEvent.ctrlKey||l.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(l))}),this.listenTo(e.editing.view.document,"mousemove",(a,l)=>{if(!l.domEvent.buttons||!t)return;const c=this._getModelTableCellFromDomEvent(l);c&&Jv(t,c)&&(i=c,!s&&i!=t&&(s=!0)),s&&(o=!0,r.setCellSelection(t,i),l.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{s=!1,o=!1,t=null,i=null}),this.listenTo(e.editing.view.document,"selectionChange",a=>{o&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function Jv(n,e){return n.parent.parent==e.parent.parent}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hq extends k{static get requires(){return[Qa,iq,Ts,dq,uq,oq,Yi]}static get pluginName(){return"Table"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fq(n){n.document.registerPostFixer(e=>mq(e,n))}function mq(n,e){const t=e.document.differ.getChanges();let i=!1;for(const s of t){if(s.type!="insert")continue;if(s.position.parent.is("element","table")||s.name=="table"){const r=s.name=="table"?s.position.nodeAfter:s.position.parent,a=Array.from(r.getChildren()).filter(c=>c.is("element","caption")),l=a.shift();if(!l)continue;for(const c of a)n.move(n.createRangeIn(c),l,"end"),n.remove(c);l.nextSibling&&(n.move(n.createRangeOn(l),r,"end"),i=!0),i=!!a.length||i}}return i}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yv(n){return!!n&&n.is("element","table")}function ym(n){for(const e of n.getChildren())if(e.is("element","caption"))return e;return null}function gq(n){const e=dc(n);return e?ym(e):null}function pq(n){const e=n.parent;return n.name=="figcaption"&&e&&e.name=="figure"&&e.hasClass("table")?{name:!0}:n.name=="caption"&&e&&e.name=="table"?{name:!0}:null}function dc(n){const e=n.getSelectedElement();return e&&e.is("element","table")?e:n.getFirstPosition().findAncestor("table")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wq extends F{refresh(){const e=this.editor,t=dc(e.model.document.selection);this.isEnabled=!!t,this.isEnabled?this.value=!!ym(t):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(i=>{this.value?this._hideTableCaption(i):this._showTableCaption(i,t)})}_showTableCaption(e,t){const i=this.editor.model,s=dc(i.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||e.createElement("caption");i.insertContent(a,s,"end"),t&&e.setSelection(a,"in")}_hideTableCaption(e){const t=this.editor.model,i=dc(t.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),o=ym(i);s._saveCaption(i,o),t.deleteContent(e.createSelection(o,"on"))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bq extends k{static get pluginName(){return"TableCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema,i=e.editing.view,s=e.t;t.isRegistered("caption")?t.extend("caption",{allowIn:"table"}):t.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new wq(this.editor)),e.conversion.for("upcast").elementToElement({view:pq,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:r})=>Yv(o.parent)?r.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:r})=>{if(!Yv(o.parent))return null;const a=r.createEditableElement("figcaption");return r.setCustomProperty("tableCaption",!0,a),Fg({view:i,element:a,text:s("Enter table caption"),keepOnFocus:!0}),sp(a,r)}}),fq(e.model)}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?re.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vq extends k{static get pluginName(){return"TableCaptionUI"}init(){const e=this.editor,t=e.editing.view,i=e.t;e.ui.componentFactory.add("toggleTableCaption",s=>{const o=e.commands.get("toggleTableCaption"),r=new z(s);return r.set({icon:H.caption,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(o,"value","isEnabled"),r.bind("label").to(o,"value",a=>i(a?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(e.execute("toggleTableCaption",{focusCaptionOnShow:!0}),o.value){const a=gq(e.model.document.selection),l=e.editing.mapper.toViewElement(a);if(!l)return;t.scrollToTheSelection(),t.change(c=>{c.addClass("table__caption_highlighted",l)})}e.editing.view.focus()}),r})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _q extends k{static get pluginName(){return"TableCaption"}static get requires(){return[bq,vq]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yq extends B{constructor(e,t){super(e),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=t,this.focusTracker=new Le,this._focusables=new yt,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Ue,this._stillTyping=!1,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(i,s,o)=>this._setInputValue(o))}render(){super.render(),this.keystrokes.listenTo(this.dropdownView.panelView.element)}focus(){this.inputView.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,t=e.t,i=this.bindTemplate,s=this._createColorGrid(e),o=Se(e),r=new B,a=this._createRemoveColorButton();return r.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:i.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",i.if("value","ck-hidden",l=>l!="")]}}]}),o.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),o.buttonView.children.add(r),o.buttonView.label=t("Color picker"),o.buttonView.tooltip=!0,o.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",o.panelView.children.add(a),o.panelView.children.add(s),o.bind("isEnabled").to(this,"isReadOnly",l=>!l),this._focusables.add(a),this._focusables.add(s),this.focusTracker.add(a.element),this.focusTracker.add(s.element),o}_createInputTextView(){const e=this.locale,t=new zx(e);return t.extendTemplate({on:{blur:t.bindTemplate.to("blur")}}),t.value=this.value,t.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(t),t.on("input",()=>{const i=t.element.value,s=this.options.colorDefinitions.find(o=>i===o.label);this._stillTyping=!0,this.value=s&&s.color||i}),t.on("blur",()=>{this._stillTyping=!1,this._setInputValue(t.element.value)}),t.delegate("input").to(this),t}_createRemoveColorButton(){const e=this.locale,t=e.t,i=new z(e),s=this.options.defaultColorValue||"",o=t(s?"Restore default":"Remove color");return i.class="ck-input-color__remove-color",i.withText=!0,i.icon=H.eraser,i.label=o,i.on("execute",()=>{this.value=s,this.dropdownView.isOpen=!1,this.fire("input")}),i}_createColorGrid(e){const t=new Xf(e,{colorDefinitions:this.options.colorDefinitions,columns:this.options.columns});return t.on("execute",(i,s)=>{this.value=s.value,this.dropdownView.isOpen=!1,this.fire("input")}),t.bind("selectedColor").to(this,"value"),t}_setInputValue(e){if(!this._stillTyping){const t=Xv(e),i=this.options.colorDefinitions.find(s=>t===Xv(s.color));i?this.inputView.value=i.label:this.inputView.value=e||""}}}function Xv(n){return n.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vp=n=>n==="";function _p(n){return{none:n("None"),solid:n("Solid"),dotted:n("Dotted"),dashed:n("Dashed"),double:n("Double"),groove:n("Groove"),ridge:n("Ridge"),inset:n("Inset"),outset:n("Outset")}}function vT(n){return n('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function _T(n){return n('The value is invalid. Try "10px" or "2em" or simply "2".')}function eu(n){return n=n.trim(),vp(n)||_x(n)}function ra(n){return n=n.trim(),vp(n)||kT(n)||Mu(n)||yx(n)}function yT(n){return n=n.trim(),vp(n)||kT(n)||Mu(n)}function CT(n,e){const t=new xe,i=_p(n.t);for(const s in i){const o={type:"button",model:new un({_borderStyleValue:s,label:i[s],withText:!0})};s==="none"?o.model.bind("isOn").to(n,"borderStyle",r=>e==="none"?!r:r===s):o.model.bind("isOn").to(n,"borderStyle",r=>r===s),t.add(o)}return t}function Cm(n){const{view:e,icons:t,toolbar:i,labels:s,propertyName:o,nameToValue:r,defaultValue:a}=n;for(const l in s){const c=new z(e.locale);c.set({label:s[l],icon:t[l],tooltip:s[l]});const u=r?r(l):l;c.bind("isOn").to(e,o,d=>{let h=d;return d===""&&a&&(h=a),u===h}),c.on("execute",()=>{e[o]=u}),i.items.add(c)}}const tu=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function nu(n){return(e,t,i)=>{const s=new yq(e.locale,{colorDefinitions:Cq(n.colorConfig),columns:n.columns,defaultColorValue:n.defaultColorValue});return s.inputView.set({id:t,ariaDescribedById:i}),s.bind("isReadOnly").to(e,"isEnabled",o=>!o),s.bind("hasError").to(e,"errorText",o=>!!o),s.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(s),s}}function kT(n){const e=parseFloat(n);return!Number.isNaN(e)&&n===String(e)}function Cq(n){return n.map(e=>({color:e.model,label:e.label,options:{hasBorder:e.hasBorder}}))}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bt extends B{constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("class",t.class||null),this.children=this.createCollection(),t.children&&t.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",i.to("class")],role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zv={left:H.alignLeft,center:H.alignCenter,right:H.alignRight,justify:H.alignJustify,top:H.alignTop,middle:H.alignMiddle,bottom:H.alignBottom};class kq extends B{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=t;const{borderStyleDropdown:i,borderWidthInput:s,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:l}=this._createBackgroundFields(),{widthInput:c,operatorLabel:u,heightInput:d,dimensionsLabel:h}=this._createDimensionFields(),{horizontalAlignmentToolbar:f,verticalAlignmentToolbar:p,alignmentLabel:b}=this._createAlignmentFields();this.focusTracker=new Le,this.keystrokes=new Ue,this.children=this.createCollection(),this.borderStyleDropdown=i,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=l,this.paddingInput=this._createPaddingField(),this.widthInput=c,this.heightInput=d,this.horizontalAlignmentToolbar=f,this.verticalAlignmentToolbar=p;const{saveButtonView:x,cancelButtonView:v}=this._createActionButtons();this.saveButtonView=x,this.cancelButtonView=v,this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Du(e,{label:this.t("Cell properties")})),this.children.add(new Bt(e,{labelView:r,children:[r,i,o,s],class:"ck-table-form__border-row"})),this.children.add(new Bt(e,{labelView:a,children:[a,l],class:"ck-table-form__background-row"})),this.children.add(new Bt(e,{children:[new Bt(e,{labelView:h,children:[h,c,u,d],class:"ck-table-form__dimensions-row"}),new Bt(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new Bt(e,{labelView:b,children:[b,f,p],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new Bt(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Ws({view:this}),[this.borderStyleDropdown,this.borderColorInput,this.borderColorInput.fieldView.dropdownView.buttonView,this.borderWidthInput,this.backgroundInput,this.backgroundInput.fieldView.dropdownView.buttonView,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},i=nu({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color}),s=this.locale,o=this.t,r=new wn(s);r.text=o("Border");const a=_p(o),l=new Ge(s,Hx);l.set({label:o("Style"),class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({isOn:!1,withText:!0,tooltip:o("Style")}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",d=>a[d||"none"]),l.fieldView.on("execute",d=>{this.borderStyle=d.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",d=>!d),Tn(l.fieldView,CT(this,t.style));const c=new Ge(s,Xt);c.set({label:o("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",Hl),c.fieldView.on("input",()=>{this.borderWidth=c.fieldView.element.value});const u=new Ge(s,i);return u.set({label:o("Color"),class:"ck-table-form__border-color"}),u.fieldView.bind("value").to(this,"borderColor"),u.bind("isEnabled").to(this,"borderStyle",Hl),u.fieldView.on("input",()=>{this.borderColor=u.fieldView.value}),this.on("change:borderStyle",(d,h,f,p)=>{Hl(f)||(this.borderColor="",this.borderWidth=""),Hl(p)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:r,borderStyleDropdown:l,borderColorInput:u,borderWidthInput:c}}_createBackgroundFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Background");const s=nu({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor}),o=new Ge(e,s);return o.set({label:t("Color"),class:"ck-table-cell-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:i,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Dimensions");const s=new Ge(e,Xt);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new B(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const r=new Ge(e,Xt);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:i,widthInput:s,operatorLabel:o,heightInput:r}}_createPaddingField(){const e=this.locale,t=this.t,i=new Ge(e,Xt);return i.set({label:t("Padding"),class:"ck-table-cell-properties-form__padding"}),i.fieldView.bind("value").to(this,"padding"),i.fieldView.on("input",()=>{this.padding=i.fieldView.element.value}),i}_createAlignmentFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Table cell text alignment");const s=new Jo(e),o=this.locale.contentLanguageDirection==="rtl";s.set({isCompact:!0,ariaLabel:t("Horizontal text alignment toolbar")}),Cm({view:this,icons:Zv,toolbar:s,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:a=>{if(o){if(a==="left")return"right";if(a==="right")return"left"}return a},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const r=new Jo(e);return r.set({isCompact:!0,ariaLabel:t("Vertical text alignment toolbar")}),Cm({view:this,icons:Zv,toolbar:r,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:s,verticalAlignmentToolbar:r,alignmentLabel:i}}_createActionButtons(){const e=this.locale,t=this.t,i=new z(e),s=new z(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return i.set({label:t("Save"),icon:H.check,class:"ck-button-save",type:"submit",withText:!0}),i.bind("isEnabled").toMany(o,"errorText",(...r)=>r.every(a=>!a)),s.set({label:t("Cancel"),icon:H.cancel,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:i,cancelButtonView:s}}get _horizontalAlignmentLabels(){const e=this.locale,t=this.t,i=t("Align cell text to the left"),s=t("Align cell text to the center"),o=t("Align cell text to the right"),r=t("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:i,justify:r}:{left:i,center:s,right:o,justify:r}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function Hl(n){return n!=="none"}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xq(n){const e=n.getSelectedElement();return e&&xT(e)?e:null}function ju(n){const e=n.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&xT(t))return t;t=t.parent}return null}function xT(n){return!!n.getCustomProperty("table")&&Pe(n)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cs=ft.defaultPositions,km=[cs.northArrowSouth,cs.northArrowSouthWest,cs.northArrowSouthEast,cs.southArrowNorth,cs.southArrowNorthWest,cs.southArrowNorthEast,cs.viewportStickyNorth];function TT(n,e){const t=n.plugins.get("ContextualBalloon");if(ju(n.editing.view.document.selection)){let i;e==="cell"?i=ST(n):i=ET(n),t.updatePosition(i)}}function ET(n){const t=n.model.document.selection.getFirstPosition().findAncestor("table"),i=n.editing.mapper.toViewElement(t);return{target:n.editing.view.domConverter.mapViewToDom(i),positions:km}}function ST(n){const e=n.editing.mapper,t=n.editing.view.domConverter,i=n.model.document.selection;if(i.rangeCount>1)return{target:()=>Tq(i.getRanges(),n),positions:km};const s=AT(i.getFirstPosition()),o=e.toViewElement(s);return{target:t.mapViewToDom(o),positions:km}}function AT(n){return n.nodeAfter&&n.nodeAfter.is("element","tableCell")?n.nodeAfter:n.findAncestor("tableCell")}function Tq(n,e){const t=e.editing.mapper,i=e.editing.view.domConverter,s=Array.from(n).map(o=>{const r=AT(o.start),a=t.toViewElement(r);return new te(i.mapViewToDom(a))});return te.getBoundingRect(s)}const Eq='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Qs(n){if(!n||!ke(n))return n;const{top:e,right:t,bottom:i,left:s}=n;if(e==t&&t==i&&i==s)return e}function Js(n,e){const t=parseFloat(n);return Number.isNaN(t)||String(t)!==String(n)?n:`${t}${e}`}function Ja(n,e={}){const t=Object.assign({borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:""},n);return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sq=500,e_={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class Aq extends k{static get requires(){return[Un]}static get pluginName(){return"TableCellPropertiesUI"}constructor(e){super(e),e.config.define("table.tableCellProperties",{borderColors:tu,backgroundColors:tu})}init(){const e=this.editor,t=e.t;this._defaultTableCellProperties=Ja(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(Un),this.view=null,this._undoStepBatch=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",i=>{const s=new z(i);s.set({label:t("Cell properties"),icon:Eq,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(e_).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableCellProperties"),i=Ma(t.borderColors),s=Oa(e.locale,i),o=Ma(t.backgroundColors),r=Oa(e.locale,o),a=new kq(e.locale,{borderColors:s,backgroundColors:r,defaultTableCellProperties:this._defaultTableCellProperties}),l=e.t;a.render(),this.listenTo(a,"submit",()=>{this._hideView()}),this.listenTo(a,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),a.keystrokes.set("Esc",(d,h)=>{this._hideView(),h()}),lr({emitter:a,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const c=vT(l),u=_T(l);return a.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle",this._defaultTableCellProperties.borderStyle)),a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableCellBorderColor",errorText:c,validator:eu,defaultValue:this._defaultTableCellProperties.borderColor})),a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableCellBorderWidth",errorText:u,validator:yT,defaultValue:this._defaultTableCellProperties.borderWidth})),a.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:a.paddingInput,commandName:"tableCellPadding",errorText:u,validator:ra,defaultValue:this._defaultTableCellProperties.padding})),a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableCellWidth",errorText:u,validator:ra,defaultValue:this._defaultTableCellProperties.width})),a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableCellHeight",errorText:u,validator:ra,defaultValue:this._defaultTableCellProperties.height})),a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableCellBackgroundColor",errorText:c,validator:eu,defaultValue:this._defaultTableCellProperties.backgroundColor})),a.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment",this._defaultTableCellProperties.horizontalAlignment)),a.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment",this._defaultTableCellProperties.verticalAlignment)),a}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableCellBorderStyle");Object.entries(e_).map(([i,s])=>{const o=this._defaultTableCellProperties[i]||"";return[i,e.get(s).value||o]}).forEach(([i,s])=>{(i==="borderColor"||i==="borderWidth")&&t.value==="none"||this.view.set(i,s)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:ST(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;ju(t.selection)?this._isViewVisible&&TT(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,i,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:i,validator:s,errorText:o}=e,r=di(()=>{i.errorText=o},Sq);return(a,l,c)=>{r.cancel(),this._isReady&&(s(c)?(this.editor.execute(t,{value:c,batch:this._undoStepBatch}),i.errorText=null):r())}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wi extends F{constructor(e,t,i){super(e),this.attributeName=t,this._defaultValue=i}refresh(){const e=this.editor,i=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e.model.document.selection);this.isEnabled=!!i.length,this.value=this._getSingleValue(i)}execute(e={}){const{value:t,batch:i}=e,s=this.editor.model,r=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(s.document.selection),a=this._getValueToSet(t);s.enqueueChange(i,l=>{a?r.forEach(c=>l.setAttribute(this.attributeName,a,c)):r.forEach(c=>l.removeAttribute(this.attributeName,c))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(s=>this._getAttribute(s)===t)?t:void 0}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iq extends wi{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=Js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IT extends k{static get pluginName(){return"TableCellWidthEditing"}static get requires(){return[Qa]}init(){const e=this.editor,t=Ja(e.config.get("table.tableCellProperties.defaultProperties"));uc(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new Iq(e,t.width))}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pq extends wi{constructor(e,t){super(e,"tableCellPadding",t)}_getAttribute(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){if(e=Js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rq extends wi{constructor(e,t){super(e,"tableCellHeight",t)}_getValueToSet(e){return e=Js(e,"px"),e===this._defaultValue?null:e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vq extends wi{constructor(e,t){super(e,"tableCellBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lq extends wi{constructor(e,t){super(e,"tableCellVerticalAlignment",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oq extends wi{constructor(e,t){super(e,"tableCellHorizontalAlignment",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mq extends wi{constructor(e,t){super(e,"tableCellBorderStyle",t)}_getAttribute(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nq extends wi{constructor(e,t){super(e,"tableCellBorderColor",t)}_getAttribute(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bq extends wi{constructor(e,t){super(e,"tableCellBorderWidth",t)}_getAttribute(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){if(e=Js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const t_=/^(top|middle|bottom)$/,n_=/^(left|center|right|justify)$/;class Fq extends k{static get pluginName(){return"TableCellPropertiesEditing"}static get requires(){return[Qa,IT]}init(){const e=this.editor,t=e.model.schema,i=e.conversion;e.config.define("table.tableCellProperties.defaultProperties",{});const s=Ja(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"});e.data.addStyleProcessorRules(kx),Dq(t,i,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableCellBorderStyle",new Mq(e,s.borderStyle)),e.commands.add("tableCellBorderColor",new Nq(e,s.borderColor)),e.commands.add("tableCellBorderWidth",new Bq(e,s.borderWidth)),uc(t,i,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:s.height}),e.commands.add("tableCellHeight",new Rq(e,s.height)),e.data.addStyleProcessorRules(KM),uc(t,i,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),e.commands.add("tableCellPadding",new Pq(e,s.padding)),e.data.addStyleProcessorRules(Kg),uc(t,i,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),e.commands.add("tableCellBackgroundColor",new Vq(e,s.backgroundColor)),zq(t,i,s.horizontalAlignment),e.commands.add("tableCellHorizontalAlignment",new Oq(e,s.horizontalAlignment)),Hq(t,i,s.verticalAlignment),e.commands.add("tableCellVerticalAlignment",new Lq(e,s.verticalAlignment))}}function Dq(n,e,t){const i={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};n.extend("tableCell",{allowAttributes:Object.values(i)}),mm(e,"td",i,t),mm(e,"th",i,t),oa(e,{modelElement:"tableCell",modelAttribute:i.style,styleName:"border-style"}),oa(e,{modelElement:"tableCell",modelAttribute:i.color,styleName:"border-color"}),oa(e,{modelElement:"tableCell",modelAttribute:i.width,styleName:"border-width"})}function zq(n,e,t){n.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:i=>({key:"style",value:{"text-align":i}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":n_}},model:{key:"tableCellHorizontalAlignment",value:i=>{const s=i.getStyle("text-align");return s===t?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:n_}},model:{key:"tableCellHorizontalAlignment",value:i=>{const s=i.getAttribute("align");return s===t?null:s}}})}function Hq(n,e,t){n.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:i=>({key:"style",value:{"vertical-align":i}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":t_}},model:{key:"tableCellVerticalAlignment",value:i=>{const s=i.getStyle("vertical-align");return s===t?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:t_}},model:{key:"tableCellVerticalAlignment",value:i=>{const s=i.getAttribute("valign");return s===t?null:s}}})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Uq extends k{static get pluginName(){return"TableCellProperties"}static get requires(){return[Fq,Aq]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bi extends F{constructor(e,t,i){super(e),this.attributeName=t,this._defaultValue=i}refresh(){const i=this.editor.model.document.selection.getFirstPosition().findAncestor("table");this.isEnabled=!!i,this.value=this._getValue(i)}execute(e={}){const t=this.editor.model,i=t.document.selection,{value:s,batch:o}=e,r=i.getFirstPosition().findAncestor("table"),a=this._getValueToSet(s);t.enqueueChange(o,l=>{a?l.setAttribute(this.attributeName,a,r):l.removeAttribute(this.attributeName,r)})}_getValue(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $q extends bi{constructor(e,t){super(e,"tableWidth",t)}refresh(){this.isEnabled=!0}execute(e={}){const t=this.editor.model,i=e.table||t.document.selection.getSelectedElement(),{tableWidth:s,columnWidths:o}=e;t.change(r=>{s?r.setAttribute(this.attributeName,s,i):r.removeAttribute(this.attributeName,i),o?r.setAttribute("columnWidths",o,i):r.removeAttribute("columnWidths",i)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wq extends bi{constructor(e,t){super(e,"columnWidths",t)}refresh(){this.isEnabled=!0}execute(e={}){const t=this.editor.model,i=e.table||t.document.selection.getSelectedElement(),{columnWidths:s}=e;t.change(o=>{s?o.setAttribute(this.attributeName,s,i):o.removeAttribute(this.attributeName,i)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jq=5,xm=40,qq=2;/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Gq(n){const e=new Set;for(const t of n.document.differ.getChanges()){let i=null;switch(t.type){case"insert":i=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":i=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!i)continue;const s=i.nodeAfter&&i.nodeAfter.name==="table"?i.nodeAfter:i.findAncestor("table");for(const o of n.createRangeOn(s).getItems())o.is("element")&&o.name==="table"&&o.hasAttribute("columnWidths")&&e.add(o)}return e}function Kq(n,e){return xm*100/PT(n,e)}function PT(n,e){const t=i_(n,"tbody",e)||i_(n,"thead",e),i=e.editing.view.domConverter.mapViewToDom(t);return Tm(i)}function i_(n,e,t){return[...[...t.editing.mapper.toViewElement(n).getChildren()].find(o=>o.is("element","table")).getChildren()].find(o=>o.is("element",e))}function Tm(n){const e=W.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function Qq(n,e){const t=e.getCellLocation(n).column,i=n.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+i-1}}function Ct(n){const e=Math.pow(10,qq),t=parseFloat(n);return Math.round(t*e)/e}function Jq(n,e,t){return n<=e?Ct(e):n>=t?Ct(t):Ct(n)}function Yq(n,e){return Array(n).fill(e)}function Na(n){return n.map(e=>parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function RT(n){n=Xq(n);const e=Na(n);return e===100?n:n.map(t=>Ct(t*100/e)).map((t,i,s)=>{if(!(i===s.length-1))return t;const r=Na(s);return Ct(t+100-r)})}function Xq(n){const e=n.filter(s=>s==="auto").length;if(e===0)return n.map(s=>Ct(s));const t=Na(n),i=Math.max((100-t)/e,jq);return n.map(s=>s==="auto"?i:s).map(s=>Ct(s))}function Zq(n){const e=W.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function eG(n){return e=>e.on("element:colgroup",(t,i,s)=>{const o=i.viewItem;if(!s.consumable.test(o,{name:!0}))return;s.consumable.consume(o,{name:!0});const r=i.modelCursor.findAncestor("table"),a=n.getColumns(r);let l=[...Array(a).keys()].map(c=>{const u=o.getChild(c);if(!u||!u.is("element","col"))return"auto";const d=u.getStyle("width");return!d||!d.endsWith("%")?"auto":d});l.includes("auto")&&(l=RT(l).map(c=>c+"%")),s.writer.setAttribute("columnWidths",l.join(","),r)})}function tG(){return n=>n.on("attribute:columnWidths:table",(e,t,i)=>{const s=i.writer,o=t.item,r=i.mapper.toViewElement(o),a=r.is("element","table")?r:Array.from(r.getChildren()).find(l=>l.is("element","table"));t.attributeNewValue?(nG(s,a,t.attributeNewValue),s.addClass("ck-table-resized",a)):(iG(s,a),s.removeClass("ck-table-resized",a))})}function nG(n,e,t){const i=t.split(",");let s=[...e.getChildren()].find(o=>o.is("element","colgroup"));if(!s)s=n.createContainerElement("colgroup");else for(const o of[...s.getChildren()])n.remove(o);for(const o of Array(i.length).keys()){const r=n.createEmptyElement("col");n.setStyle("width",i[o],r),n.insert(n.createPositionAt(s,"end"),r)}n.insert(n.createPositionAt(e,"start"),s)}function iG(n,e){const t=[...e.getChildren()].find(i=>i.is("element","colgroup"));n.remove(t)}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sG extends k{static get requires(){return[Qa,Ye]}static get pluginName(){return"TableColumnResizeEditing"}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=Object.create(gi),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,i,s)=>{e.editing.view.change(o=>{o[s?"removeClass":"addClass"]("ck-column-resize_disabled",e.editing.view.document.getRoot())})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerColgroupFixer(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.commands.add("resizeTableWidth",new $q(e)),e.commands.add("resizeColumnWidths",new Wq(e));const i=e.commands.get("resizeTableWidth"),s=e.commands.get("resizeColumnWidths");this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",i,"isEnabled",s,"isEnabled",(o,r,a,l)=>!o&&r&&a&&l)}destroy(){this._domEmitter.stopListening(),super.destroy()}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth","columnWidths"]})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(o=>{let r=!1;for(const a of Gq(t)){const l=RT(a.getAttribute("columnWidths").split(","));i(l,a,this);const c=l.map(u=>`${u}%`).join(",");a.getAttribute("columnWidths")!==c&&(o.setAttribute("columnWidths",c,a),r=!0)}return r});function i(o,r,a){const l=a._tableUtilsPlugin.getColumns(r);if(l-o.length===0)return;const u=s(a.editor.model.document.differ,r);for(const d of u){const h=l-o.length;if(h===0)continue;const f=h>0,p=a._tableUtilsPlugin.getCellLocation(d).column;if(f){const b=Kq(r,a.editor),x=Yq(h,b);o.splice(p,0,...x)}else{const b=o.splice(p,Math.abs(h));o[p]+=Na(b)}}}function s(o,r){const a=new Set;for(const l of o.getChanges())if(l.type=="insert"&&l.position.nodeAfter&&l.position.nodeAfter.name=="tableCell"&&l.position.nodeAfter.getAncestors().includes(r))a.add(l.position.nodeAfter);else if(l.type=="remove"){const c=l.position.nodeBefore||l.position.nodeAfter;c.name=="tableCell"&&c.getAncestors().includes(r)&&a.add(c)}return a}}_registerConverters(){const t=this.editor.conversion,i={view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:o=>o.getStyle("width")}},s={model:{name:"table",key:"tableWidth"},view:o=>({name:"figure",key:"style",value:{width:o}})};t.for("upcast").attributeToAttribute(i),t.for("upcast").add(eG(this._tableUtilsPlugin)),t.for("downcast").attributeToAttribute(s),t.for("downcast").add(tG())}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(bT),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(W.window.document,"mousemove",xu(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(W.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(e,t){const i=t.target;if(!i.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;t.preventDefault(),e.stop();const s=this.editor,o=s.editing.mapper.toModelElement(i.findAncestor("figure")),r=c(o,this._tableUtilsPlugin,s),a=i.findAncestor("table"),l=s.editing.view;[...a.getChildren()].find(h=>h.is("element","colgroup"))||l.change(h=>{u(h,r,a)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(t,r),l.change(h=>d(h,a,this._resizingData));function c(h,f,p){const b=Array(f.getColumns(h)),x=new ae(h);for(const v of x){const w=p.editing.mapper.toViewElement(v.cell),C=p.editing.view.domConverter.mapViewToDom(w),E=Zq(C);(!b[v.column]||E<b[v.column])&&(b[v.column]=Ct(E))}return b}function u(h,f,p){const b=h.createContainerElement("colgroup");for(let x=0;x<f.length;x++){const v=h.createEmptyElement("col"),w=`${Ct(f[x]/Na(f)*100)}%`;h.setStyle("width",w,v),h.insert(h.createPositionAt(b,"end"),v)}h.insert(h.createPositionAt(p,"start"),b)}function d(h,f,p){const b=p.widths.viewFigureWidth/p.widths.viewFigureParentWidth;h.addClass("ck-table-resized",f),h.addClass("ck-table-column-resizer__active",p.elements.viewResizer),h.setStyle("width",`${Ct(b*100)}%`,f.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:i,flags:{isRightEdge:s,isTableCentered:o,isLtrContent:r},elements:{viewFigure:a,viewLeftColumn:l,viewRightColumn:c},widths:{viewFigureParentWidth:u,tableWidth:d,leftColumnWidth:h,rightColumnWidth:f}}=this._resizingData,p=-h+xm,b=s?u-d:f-xm,x=(r?1:-1)*(s&&o?2:1),v=Jq((t.clientX-i)*x,Math.min(p,0),Math.max(b,0));v!==0&&this.editor.editing.view.change(w=>{const C=Ct((h+v)*100/d);if(w.setStyle("width",`${C}%`,l),s){const E=Ct((d+v)*100/u);w.setStyle("width",`${E}%`,a)}else{const E=Ct((f-v)*100/d);w.setStyle("width",`${E}%`,c)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:i,viewColgroup:s}=this._resizingData.elements,o=this.editor,r=o.editing.view,a=t.getAttribute("columnWidths"),l=[...s.getChildren()].map(f=>f.getStyle("width")).join(","),c=a!==l,u=t.getAttribute("tableWidth"),d=i.getStyle("width"),h=u!==d;(c||h)&&(this._isResizingAllowed?h?o.execute("resizeTableWidth",{table:t,tableWidth:`${Ct(d)}%`,columnWidths:l}):o.execute("resizeColumnWidths",{columnWidths:l,table:t}):r.change(f=>{if(a){const p=a.split(",");for(const b of s.getChildren())f.setStyle("width",p.shift(),b)}else f.remove(s);h&&(u?f.setStyle("width",u,i):f.removeStyle("width",i)),!a&&!u&&f.removeClass("ck-table-resized",[...i.getChildren()].find(p=>p.name==="table"))})),r.change(f=>{f.removeClass("ck-table-column-resizer__active",e)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const i=this.editor,s=e.domEvent.clientX,o=e.target,r=o.findAncestor("td")||o.findAncestor("th"),a=i.editing.mapper.toModelElement(r),l=a.findAncestor("table"),c=Qq(a,this._tableUtilsPlugin).rightEdge,u=this._tableUtilsPlugin.getColumns(l)-1,d=c===u,h=!l.hasAttribute("tableAlignment"),f=i.locale.contentLanguageDirection!=="rtl",p=r.findAncestor("table"),b=p.findAncestor("figure"),x=[...p.getChildren()].find(I=>I.is("element","colgroup")),v=x.getChild(c),w=d?void 0:x.getChild(c+1),C=Tm(i.editing.view.domConverter.mapViewToDom(b.parent)),E=Tm(i.editing.view.domConverter.mapViewToDom(b)),V=PT(l,i),A=t[c],P=d?void 0:t[c+1];return{columnPosition:s,flags:{isRightEdge:d,isTableCentered:h,isLtrContent:f},elements:{viewResizer:o,modelTable:l,viewFigure:b,viewColgroup:x,viewLeftColumn:v,viewRightColumn:w},widths:{viewFigureParentWidth:C,viewFigureWidth:E,tableWidth:V,leftColumnWidth:A,rightColumnWidth:P}}}_registerColgroupFixer(){const e=this.editor;this.listenTo(e.editing.view.document,"layoutChanged",()=>{const t=e.editing.view.document.selection.getFirstPosition().getAncestors().reverse().find(o=>o.name==="table"),i=t&&[...t.getChildren()].find(o=>o.is("element","colgroup")),s=e.model.document.selection.getFirstPosition().findAncestor("table");s&&s.hasAttribute("columnWidths")&&t&&!i&&e.editing.reconvertItem(s)},{priority:"low"})}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,i,s)=>{const o=i.item,r=s.mapper.toViewElement(o),a=s.writer;a.insert(a.createPositionAt(r,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class oG extends k{static get requires(){return[sG,IT]}static get pluginName(){return"TableColumnResize"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rG extends bi{constructor(e,t){super(e,"tableBackgroundColor",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class aG extends bi{constructor(e,t){super(e,"tableBorderColor",t)}_getValue(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lG extends bi{constructor(e,t){super(e,"tableBorderStyle",t)}_getValue(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cG extends bi{constructor(e,t){super(e,"tableBorderWidth",t)}_getValue(e){if(!e)return;const t=Qs(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){if(e=Js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uG extends bi{constructor(e,t){super(e,"tableWidth",t)}_getValueToSet(e){if(e=Js(e,"px"),e!==this._defaultValue)return e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dG extends bi{constructor(e,t){super(e,"tableHeight",t)}_getValueToSet(e){return e=Js(e,"px"),e===this._defaultValue?null:e}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hG extends bi{constructor(e,t){super(e,"tableAlignment",t)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fG=/^(left|center|right)$/,mG=/^(left|none|right)$/;class gG extends k{static get pluginName(){return"TablePropertiesEditing"}static get requires(){return[Qa]}init(){const e=this.editor,t=e.model.schema,i=e.conversion;e.config.define("table.tableProperties.defaultProperties",{});const s=Ja(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});e.data.addStyleProcessorRules(kx),pG(t,i,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableBorderColor",new aG(e,s.borderColor)),e.commands.add("tableBorderStyle",new lG(e,s.borderStyle)),e.commands.add("tableBorderWidth",new cG(e,s.borderWidth)),wG(t,i,s.alignment),e.commands.add("tableAlignment",new hG(e,s.alignment)),s_(t,i,{modelAttribute:"tableWidth",styleName:"width",defaultValue:s.width}),e.commands.add("tableWidth",new uG(e,s.width)),s_(t,i,{modelAttribute:"tableHeight",styleName:"height",defaultValue:s.height}),e.commands.add("tableHeight",new dG(e,s.height)),e.data.addStyleProcessorRules(Kg),bG(t,i,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:s.backgroundColor}),e.commands.add("tableBackgroundColor",new rG(e,s.backgroundColor))}}function pG(n,e,t){const i={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};n.extend("table",{allowAttributes:Object.values(i)}),mm(e,"table",i,t),lc(e,{modelAttribute:i.color,styleName:"border-color"}),lc(e,{modelAttribute:i.style,styleName:"border-style"}),lc(e,{modelAttribute:i.width,styleName:"border-width"})}function wG(n,e,t){n.extend("table",{allowAttributes:["tableAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:i=>({key:"style",value:{float:i==="center"?"none":i}}),converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:mG}},model:{key:"tableAlignment",value:i=>{let s=i.getStyle("float");return s==="none"&&(s="center"),s===t?null:s}}}).attributeToAttribute({view:{attributes:{align:fG}},model:{name:"table",key:"tableAlignment",value:i=>{const s=i.getAttribute("align");return s===t?null:s}}})}function bG(n,e,t){const{modelAttribute:i}=t;n.extend("table",{allowAttributes:[i]}),wp(e,{viewElement:"table",...t}),lc(e,t)}function s_(n,e,t){const{modelAttribute:i}=t;n.extend("table",{allowAttributes:[i]}),wp(e,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"),...t}),oa(e,{modelElement:"table",...t})}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vG={left:H.objectLeft,center:H.objectCenter,right:H.objectRight};class _G extends B{constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=t;const{borderStyleDropdown:i,borderWidthInput:s,borderColorInput:o,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:l}=this._createBackgroundFields(),{widthInput:c,operatorLabel:u,heightInput:d,dimensionsLabel:h}=this._createDimensionFields(),{alignmentToolbar:f,alignmentLabel:p}=this._createAlignmentFields();this.focusTracker=new Le,this.keystrokes=new Ue,this.children=this.createCollection(),this.borderStyleDropdown=i,this.borderWidthInput=s,this.borderColorInput=o,this.backgroundInput=l,this.widthInput=c,this.heightInput=d,this.alignmentToolbar=f;const{saveButtonView:b,cancelButtonView:x}=this._createActionButtons();this.saveButtonView=b,this.cancelButtonView=x,this._focusables=new yt,this._focusCycler=new Rt({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new Du(e,{label:this.t("Table properties")})),this.children.add(new Bt(e,{labelView:r,children:[r,i,o,s],class:"ck-table-form__border-row"})),this.children.add(new Bt(e,{labelView:a,children:[a,l],class:"ck-table-form__background-row"})),this.children.add(new Bt(e,{children:[new Bt(e,{labelView:h,children:[h,c,u,d],class:"ck-table-form__dimensions-row"}),new Bt(e,{labelView:p,children:[p,f],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new Bt(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),Ws({view:this}),[this.borderStyleDropdown,this.borderColorInput,this.borderColorInput.fieldView.dropdownView.buttonView,this.borderWidthInput,this.backgroundInput,this.backgroundInput.fieldView.dropdownView.buttonView,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},i=nu({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color}),s=this.locale,o=this.t,r=new wn(s);r.text=o("Border");const a=_p(this.t),l=new Ge(s,Hx);l.set({label:o("Style"),class:"ck-table-form__border-style"}),l.fieldView.buttonView.set({isOn:!1,withText:!0,tooltip:o("Style")}),l.fieldView.buttonView.bind("label").to(this,"borderStyle",d=>a[d||"none"]),l.fieldView.on("execute",d=>{this.borderStyle=d.source._borderStyleValue}),l.bind("isEmpty").to(this,"borderStyle",d=>!d),Tn(l.fieldView,CT(this,t.style));const c=new Ge(s,Xt);c.set({label:o("Width"),class:"ck-table-form__border-width"}),c.fieldView.bind("value").to(this,"borderWidth"),c.bind("isEnabled").to(this,"borderStyle",Ul),c.fieldView.on("input",()=>{this.borderWidth=c.fieldView.element.value});const u=new Ge(s,i);return u.set({label:o("Color"),class:"ck-table-form__border-color"}),u.fieldView.bind("value").to(this,"borderColor"),u.bind("isEnabled").to(this,"borderStyle",Ul),u.fieldView.on("input",()=>{this.borderColor=u.fieldView.value}),this.on("change:borderStyle",(d,h,f,p)=>{Ul(f)||(this.borderColor="",this.borderWidth=""),Ul(p)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:r,borderStyleDropdown:l,borderColorInput:u,borderWidthInput:c}}_createBackgroundFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Background");const s=nu({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor}),o=new Ge(e,s);return o.set({label:t("Color"),class:"ck-table-properties-form__background"}),o.fieldView.bind("value").to(this,"backgroundColor"),o.fieldView.on("input",()=>{this.backgroundColor=o.fieldView.value}),{backgroundRowLabel:i,backgroundInput:o}}_createDimensionFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Dimensions");const s=new Ge(e,Xt);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const o=new B(e);o.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const r=new Ge(e,Xt);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:i,widthInput:s,operatorLabel:o,heightInput:r}}_createAlignmentFields(){const e=this.locale,t=this.t,i=new wn(e);i.text=t("Alignment");const s=new Jo(e);return s.set({isCompact:!0,ariaLabel:t("Table alignment toolbar")}),Cm({view:this,icons:vG,toolbar:s,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:i,alignmentToolbar:s}}_createActionButtons(){const e=this.locale,t=this.t,i=new z(e),s=new z(e),o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return i.set({label:t("Save"),icon:H.check,class:"ck-button-save",type:"submit",withText:!0}),i.bind("isEnabled").toMany(o,"errorText",(...r)=>r.every(a=>!a)),s.set({label:t("Cancel"),icon:H.cancel,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:i,cancelButtonView:s}}get _alignmentLabels(){const e=this.locale,t=this.t,i=t("Align table to the left"),s=t("Center table"),o=t("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:o,center:s,left:i}:{left:i,center:s,right:o}}}function Ul(n){return n!=="none"}const yG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const CG=500,o_={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class kG extends k{static get requires(){return[Un]}static get pluginName(){return"TablePropertiesUI"}constructor(e){super(e),e.config.define("table.tableProperties",{borderColors:tu,backgroundColors:tu})}init(){const e=this.editor,t=e.t;this._defaultTableProperties=Ja(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=e.plugins.get(Un),this.view=null,this._undoStepBatch=null,this._isReady=!1,e.ui.componentFactory.add("tableProperties",i=>{const s=new z(i);s.set({label:t("Table properties"),icon:yG,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const o=Object.values(o_).map(r=>e.commands.get(r));return s.bind("isEnabled").toMany(o,"isEnabled",(...r)=>r.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const e=this.editor,t=e.config.get("table.tableProperties"),i=Ma(t.borderColors),s=Oa(e.locale,i),o=Ma(t.backgroundColors),r=Oa(e.locale,o),a=new _G(e.locale,{borderColors:s,backgroundColors:r,defaultTableProperties:this._defaultTableProperties}),l=e.t;a.render(),this.listenTo(a,"submit",()=>{this._hideView()}),this.listenTo(a,"cancel",()=>{this._undoStepBatch.operations.length&&e.execute("undo",this._undoStepBatch),this._hideView()}),a.keystrokes.set("Esc",(d,h)=>{this._hideView(),h()}),lr({emitter:a,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const c=vT(l),u=_T(l);return a.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle",this._defaultTableProperties.borderStyle)),a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableBorderColor",errorText:c,validator:eu,defaultValue:this._defaultTableProperties.borderColor})),a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableBorderWidth",errorText:u,validator:yT,defaultValue:this._defaultTableProperties.borderWidth})),a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableBackgroundColor",errorText:c,validator:eu,defaultValue:this._defaultTableProperties.backgroundColor})),a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableWidth",errorText:u,validator:ra,defaultValue:this._defaultTableProperties.width})),a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableHeight",errorText:u,validator:ra,defaultValue:this._defaultTableProperties.height})),a.on("change:alignment",this._getPropertyChangeCallback("tableAlignment",this._defaultTableProperties.alignment)),a}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableBorderStyle");Object.entries(o_).map(([i,s])=>{const o=this._defaultTableProperties[i]||"";return[i,e.get(s).value||o]}).forEach(([i,s])=>{(i==="borderColor"||i==="borderWidth")&&t.value==="none"||this.view.set(i,s)}),this._isReady=!0}_showView(){const e=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:ET(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;ju(t.selection)?this._isViewVisible&&TT(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,i,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:i,validator:s,errorText:o}=e,r=di(()=>{i.errorText=o},CG);return(a,l,c)=>{r.cancel(),this._isReady&&(s(c)?(this.editor.execute(t,{value:c,batch:this._undoStepBatch}),i.errorText=null):r())}}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xG extends k{static get pluginName(){return"TableProperties"}static get requires(){return[gG,kG]}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TG extends k{static get requires(){return[Jc]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Jc),s=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");s&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:s,getRelatedElement:ju}),o&&i.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:xq})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yp(n,e){return e=e||Df(n),`${n}:${e}`}function EG(n){const[e,t]=n.split(":");return{languageCode:e,textDirection:t}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SG extends F{refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"language")}execute({languageCode:e,textDirection:t}={}){const i=this.editor.model,o=i.document.selection,r=e?yp(e,t):!1;i.change(a=>{if(o.isCollapsed)r?a.setSelectionAttribute("language",r):a.removeSelectionAttribute("language");else{const l=i.schema.getValidRanges(o.getRanges(),"language");for(const c of l)r?a.setAttribute("language",r,c):a.removeAttribute("language",c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.getAttribute("language")||!1;for(const s of i.getRanges())for(const o of s.getItems())if(t.checkAttribute(o,"language"))return o.getAttribute("language")||!1;return!1}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AG extends k{static get pluginName(){return"TextPartLanguageEditing"}constructor(e){super(e),e.config.define("language",{textPartLanguage:[{title:"Arabic",languageCode:"ar"},{title:"French",languageCode:"fr"},{title:"Spanish",languageCode:"es"}]})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"language"}),e.model.schema.setAttributeProperties("language",{copyOnEnter:!0}),this._defineConverters(),e.commands.add("textPartLanguage",new SG(e))}_defineConverters(){const e=this.editor.conversion;e.for("upcast").elementToAttribute({model:{key:"language",value:t=>{const i=t.getAttribute("lang"),s=t.getAttribute("dir");return yp(i,s)}},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),e.for("downcast").attributeToElement({model:"language",view:(t,{writer:i},s)=>{if(!t||!s.item.is("$textProxy")&&!s.item.is("documentSelection"))return;const{languageCode:o,textDirection:r}=EG(t);return i.createAttributeElement("span",{lang:o,dir:r})}})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IG extends k{static get pluginName(){return"TextPartLanguageUI"}init(){const e=this.editor,t=e.t,i=e.config.get("language.textPartLanguage"),s=t("Choose language"),o=t("Remove language"),r=t("Language");e.ui.componentFactory.add("textPartLanguage",a=>{const l=new xe,c={},u=e.commands.get("textPartLanguage");l.add({type:"button",model:new un({label:o,languageCode:!1,withText:!0})}),l.add({type:"separator"});for(const h of i){const f={type:"button",model:new un({label:h.title,languageCode:h.languageCode,textDirection:h.textDirection,withText:!0})},p=yp(h.languageCode,h.textDirection);f.model.bind("isOn").to(u,"value",b=>b===p),l.add(f),c[p]=h.title}const d=Se(a);return Tn(d,l),d.buttonView.set({isOn:!1,withText:!0,tooltip:r}),d.extendTemplate({attributes:{class:["ck-text-fragment-language-dropdown"]}}),d.bind("isEnabled").to(u,"isEnabled"),d.buttonView.bind("label").to(u,"value",h=>h&&c[h]||s),this.listenTo(d,"execute",h=>{u.execute({languageCode:h.source.languageCode,textDirection:h.source.textDirection}),e.editing.view.focus()}),d})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PG extends k{static get requires(){return[AG,IG]}static get pluginName(){return"TextPartLanguage"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Or="todoListChecked";class RG extends F{constructor(e){super(e),this._selectedElements=[],this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){this._selectedElements=this._getSelectedItems(),this.value=this._selectedElements.every(e=>!!e.getAttribute(Or)),this.isEnabled=!!this._selectedElements.length}_getSelectedItems(){const e=this.editor.model,t=e.schema,i=e.document.selection.getFirstRange(),s=i.start.parent,o=[];t.checkAttribute(s,Or)&&o.push(s);for(const r of i.getItems())t.checkAttribute(r,Or)&&!o.includes(r)&&o.push(r);return o}execute(e={}){this.editor.model.change(t=>{for(const i of this._selectedElements)(e.forceValue===void 0?!this.value:e.forceValue)?t.setAttribute(Or,!0,i):t.removeAttribute(Or,i)})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function VG(n,e){return(t,i,s)=>{const o=s.consumable;if(!o.test(i.item,"insert")||!o.test(i.item,"attribute:listType")||!o.test(i.item,"attribute:listIndent")||i.item.getAttribute("listType")!="todo")return;const r=i.item;o.consume(r,"insert"),o.consume(r,"attribute:listType"),o.consume(r,"attribute:listIndent"),o.consume(r,"attribute:todoListChecked");const a=s.writer,l=mp(r,s),c=!!r.getAttribute("todoListChecked"),u=Cp(r,a,c,e),d=a.createContainerElement("span",{class:"todo-list__label__description"});a.addClass("todo-list",l.parent),a.insert(a.createPositionAt(l,0),u),a.insert(a.createPositionAfter(u),d),$u(r,l,s,n)}}function LG(n){return(e,t,i)=>{const s=i.consumable;if(!s.test(t.item,"insert")||!s.test(t.item,"attribute:listType")||!s.test(t.item,"attribute:listIndent")||t.item.getAttribute("listType")!="todo")return;const o=t.item;s.consume(o,"insert"),s.consume(o,"attribute:listType"),s.consume(o,"attribute:listIndent"),s.consume(o,"attribute:todoListChecked");const r=i.writer,a=mp(o,i);r.addClass("todo-list",a.parent);const l=r.createContainerElement("label",{class:"todo-list__label"}),c=r.createEmptyElement("input",{type:"checkbox",disabled:"disabled"}),u=r.createContainerElement("span",{class:"todo-list__label__description"});o.getAttribute("todoListChecked")&&r.setAttribute("checked","checked",c),r.insert(r.createPositionAt(a,0),l),r.insert(r.createPositionAt(l,0),c),r.insert(r.createPositionAfter(c),u),$u(o,a,i,n)}}const OG=(n,e,t)=>{const i=e.modelCursor,s=i.parent,o=e.viewItem;if(o.getAttribute("type")!="checkbox"||s.name!="listItem"||!i.isAtStart||!t.consumable.consume(o,{name:!0}))return;const r=t.writer;r.setAttribute("listType","todo",s),e.viewItem.hasAttribute("checked")&&r.setAttribute("todoListChecked",!0,s),e.modelRange=r.createRange(i)};function MG(n,e){return(t,i,s)=>{if(!s.consumable.consume(i.item,t.name))return;const o=s.mapper.toViewElement(i.item),r=s.writer,a=BG(o,e);if(i.attributeNewValue=="todo"){const l=!!i.item.getAttribute("todoListChecked"),c=Cp(i.item,r,l,n),u=r.createContainerElement("span",{class:"todo-list__label__description"}),d=r.createRangeIn(o),h=Q2(o),f=gp(d.start),p=h?r.createPositionBefore(h):d.end,b=r.createRange(f,p);r.addClass("todo-list",o.parent),r.move(b,r.createPositionAt(u,0)),r.insert(r.createPositionAt(o,0),c),r.insert(r.createPositionAfter(c),u)}else if(i.attributeOldValue=="todo"){const l=VT(o,e);r.removeClass("todo-list",o.parent),r.remove(a),r.move(r.createRangeIn(l),r.createPositionBefore(l)),r.remove(l)}}}function NG(n){return(e,t,i)=>{if(t.item.getAttribute("listType")!="todo"||!i.consumable.consume(t.item,"attribute:todoListChecked"))return;const{mapper:s,writer:o}=i,r=!!t.item.getAttribute("todoListChecked"),l=s.toViewElement(t.item).getChild(0),c=Cp(t.item,o,r,n);o.insert(o.createPositionAfter(l),c),o.remove(l)}}function r_(n){return(e,t)=>{const i=t.modelPosition,s=i.parent;if(!s.is("element","listItem")||s.getAttribute("listType")!="todo")return;const o=t.mapper.toViewElement(s),r=VT(o,n);r&&(t.viewPosition=t.mapper.findPositionIn(r,i.offset))}}function Cp(n,e,t,i){return e.createUIElement("label",{class:"todo-list__label",contenteditable:!1},function(o){const r=On(document,"input",{type:"checkbox",tabindex:"-1"});t&&r.setAttribute("checked","checked"),r.addEventListener("change",()=>i(n));const a=this.toDomElement(o);return a.appendChild(r),a})}function BG(n,e){const t=e.createRangeIn(n);for(const i of t)if(i.item.is("uiElement","label"))return i.item}function VT(n,e){const t=e.createRangeIn(n);for(const i of t)if(i.item.is("containerElement","span")&&i.item.hasClass("todo-list__label__description"))return i.item}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const FG=Su("Ctrl+Enter");class DG extends k{static get pluginName(){return"TodoListEditing"}static get requires(){return[pp]}init(){const e=this.editor,{editing:t,data:i,model:s}=e;s.schema.extend("listItem",{allowAttributes:["todoListChecked"]}),s.schema.addAttributeCheck((a,l)=>{const c=a.last;if(l=="todoListChecked"&&c.name=="listItem"&&c.getAttribute("listType")!="todo")return!1}),e.commands.add("todoList",new dm(e,"todo"));const o=new RG(e);e.commands.add("checkTodoList",o),e.commands.add("todoListCheck",o),i.downcastDispatcher.on("insert:listItem",LG(s),{priority:"high"}),i.upcastDispatcher.on("element:input",OG,{priority:"high"}),t.downcastDispatcher.on("insert:listItem",VG(s,a=>this._handleCheckmarkChange(a)),{priority:"high"}),t.downcastDispatcher.on("attribute:listType:listItem",MG(a=>this._handleCheckmarkChange(a),t.view)),t.downcastDispatcher.on("attribute:todoListChecked:listItem",NG(a=>this._handleCheckmarkChange(a))),t.mapper.on("modelToViewPosition",r_(t.view)),i.mapper.on("modelToViewPosition",r_(t.view)),this.listenTo(t.view.document,"arrowKey",zG(s,e.locale),{context:"li"}),this.listenTo(t.view.document,"keydown",(a,l)=>{Ms(l)===FG&&(e.execute("checkTodoList"),a.stop())},{priority:"high"});const r=new Set;this.listenTo(s,"applyOperation",(a,l)=>{const c=l[0];if(c.type=="rename"&&c.oldName=="listItem"){const u=c.position.nodeAfter;u.hasAttribute("todoListChecked")&&r.add(u)}else if(c.type=="changeAttribute"&&c.key=="listType"&&c.oldValue==="todo")for(const u of c.range.getItems())u.hasAttribute("todoListChecked")&&u.getAttribute("listType")!=="todo"&&r.add(u)}),s.document.registerPostFixer(a=>{let l=!1;for(const c of r)a.removeAttribute("todoListChecked",c),l=!0;return r.clear(),l})}_handleCheckmarkChange(e){const t=this.editor,i=t.model,s=Array.from(i.document.selection.getRanges());i.change(o=>{o.setSelection(e,"end"),t.execute("checkTodoList"),o.setSelection(s)})}}function zG(n,e){return(t,i)=>{if(Au(i.keyCode,e.contentLanguageDirection)!="left")return;const o=n.schema,r=n.document.selection;if(!r.isCollapsed)return;const a=r.getFirstPosition(),l=a.parent;if(l.name==="listItem"&&l.getAttribute("listType")=="todo"&&a.isAtStart){const c=o.getNearestSelectionRange(n.createPositionBefore(l),"backward");c&&n.change(u=>u.setSelection(c)),i.preventDefault(),i.stopPropagation(),t.stop()}}}const HG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UG extends k{static get pluginName(){return"TodoListUI"}init(){const e=this.editor.t;hm(this.editor,"todoList",e("To-do List"),HG)}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $G extends k{static get requires(){return[DG,UG]}static get pluginName(){return"TodoList"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mr="underline";class WG extends k{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Mr}),e.model.schema.setAttributeProperties(Mr,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Mr,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Mr,new Gs(e,Mr)),e.keystrokes.set("CTRL+U","underline")}}const jG='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Sh="underline";class qG extends k{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Sh,i=>{const s=e.commands.get(Sh),o=new z(i);return o.set({label:t("Underline"),icon:jG,keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),this.listenTo(o,"execute",()=>{e.execute(Sh),e.editing.view.focus()}),o})}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GG extends k{static get requires(){return[WG,qG]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Em(n){if(n.is("$text")||n.is("$textProxy"))return n.data;const e=n;let t="",i=null;for(const s of e.getChildren()){const o=Em(s);i&&i.is("element")&&(t+=`
`),t+=o,i=s}return t}/**
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KG extends k{constructor(e){super(e),this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters()}},words:{get(){return this.words=this._getWords()}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=e.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=Z.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9-]+\S?)+/gu}static get pluginName(){return"WordCount"}init(){this.editor.model.document.on("change:data",xu(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(t,i)=>{this._config.onUpdate(i)}),or(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const e=this.editor,t=e.t,i=e.config.get("wordCount.displayWords"),s=e.config.get("wordCount.displayCharacters"),o=bt.bind(this,this),r=[];return this._outputView||(this._outputView=new B,(i||i===void 0)&&(this.bind("_wordsLabel").to(this,"words",a=>t("Words: %0",a)),r.push({tag:"div",children:[{text:[o.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(s||s===void 0)&&(this.bind("_charactersLabel").to(this,"characters",a=>t("Characters: %0",a)),r.push({tag:"div",children:[{text:[o.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:r}),this._outputView.render()),this._outputView.element}_getCharacters(){return Em(this.editor.model.document.getRoot()).replace(/\n/g,"").length}_getWords(){return(Em(this.editor.model.document.getRoot()).match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const e=this.words=this._getWords(),t=this.characters=this._getCharacters();this.fire("update",{words:e,characters:t})}}var iu={},QG={get exports(){return iu},set exports(n){iu=n}};/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(n,e){(function(t,i){n.exports=i(Ss)})(self,t=>(()=>{var i={703:(a,l,c)=>{var u=c(414);function d(){}function h(){}h.resetWarningCache=d,a.exports=function(){function f(x,v,w,C,E,V){if(V!==u){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}function p(){return f}f.isRequired=f;var b={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:p,element:f,elementType:f,instanceOf:p,node:f,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:h,resetWarningCache:d};return b.PropTypes=b,b}},697:(a,l,c)=>{a.exports=c(703)()},414:a=>{a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:a=>{a.exports=t}},s={};function o(a){var l=s[a];if(l!==void 0)return l.exports;var c=s[a]={exports:{}};return i[a](c,c.exports,o),c.exports}o.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return o.d(l,{a:l}),l},o.d=(a,l)=>{for(var c in l)o.o(l,c)&&!o.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},o.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),o.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{CKEditor:()=>ts,CKEditorContext:()=>ud});var a=o(787),l=o.n(a),c=o(697),u=o.n(c);const d=function(m){var g=typeof m;return m!=null&&(g=="object"||g=="function")},h=typeof il=="object"&&il&&il.Object===Object&&il;var f=typeof self=="object"&&self&&self.Object===Object&&self;const p=h||f||Function("return this")(),b=function(){return p.Date.now()};var x=/\s/;const v=function(m){for(var g=m.length;g--&&x.test(m.charAt(g)););return g};var w=/^\s+/;const C=function(m){return m&&m.slice(0,v(m)+1).replace(w,"")},E=p.Symbol;var V=Object.prototype,A=V.hasOwnProperty,P=V.toString,I=E?E.toStringTag:void 0;const $=function(m){var g=A.call(m,I),_=m[I];try{m[I]=void 0;var T=!0}catch{}var D=P.call(m);return T&&(g?m[I]=_:delete m[I]),D};var j=Object.prototype.toString;const ot=function(m){return j.call(m)};var vi=E?E.toStringTag:void 0;const Vt=function(m){return m==null?m===void 0?"[object Undefined]":"[object Null]":vi&&vi in Object(m)?$(m):ot(m)},dn=function(m){return m!=null&&typeof m=="object"},Gu=function(m){return typeof m=="symbol"||dn(m)&&Vt(m)=="[object Symbol]"};var ur=/^[-+]0x[0-9a-f]+$/i,dr=/^0b[01]+$/i,M=/^0o[0-7]+$/i,G=parseInt;const J=function(m){if(typeof m=="number")return m;if(Gu(m))return NaN;if(d(m)){var g=typeof m.valueOf=="function"?m.valueOf():m;m=d(g)?g+"":g}if(typeof m!="string")return m===0?m:+m;m=C(m);var _=dr.test(m);return _||M.test(m)?G(m.slice(2),_?2:8):ur.test(m)?NaN:+m};var Ae=Math.max,$e=Math.min;const Ys=function(m,g,_){var T,D,q,K,X,De,Oe=0,el=!1,ns=!1,Sn=!0;if(typeof m!="function")throw new TypeError("Expected a function");function io(at){var Kn=T,nl=D;return T=D=void 0,Oe=at,K=m.apply(nl,Kn)}function tl(at){return Oe=at,X=setTimeout(Lt,g),el?io(at):K}function wr(at){var Kn=at-De;return De===void 0||Kn>=g||Kn<0||ns&&at-Oe>=q}function Lt(){var at=b();if(wr(at))return Gn(at);X=setTimeout(Lt,function(Kn){var nl=g-(Kn-De);return ns?$e(nl,q-(Kn-Oe)):nl}(at))}function Gn(at){return X=void 0,Sn&&T?io(at):(T=D=void 0,K)}function hd(){var at=b(),Kn=wr(at);if(T=arguments,D=this,De=at,Kn){if(X===void 0)return tl(De);if(ns)return clearTimeout(X),X=setTimeout(Lt,g),io(De)}return X===void 0&&(X=setTimeout(Lt,g)),K}return g=J(g)||0,d(_)&&(el=!!_.leading,q=(ns="maxWait"in _)?Ae(J(_.maxWait)||0,g):q,Sn="trailing"in _?!!_.trailing:Sn),hd.cancel=function(){X!==void 0&&clearTimeout(X),Oe=0,T=De=D=X=void 0},hd.flush=function(){return X===void 0?K:Gn(b())},hd},jn=function(m,g,_){var T=!0,D=!0;if(typeof m!="function")throw new TypeError("Expected a function");return d(_)&&(T="leading"in _?!!_.leading:T,D="trailing"in _?!!_.trailing:D),Ys(m,g,{leading:T,maxWait:g,trailing:D})},hr=function(){this.__data__=[],this.size=0},En=function(m,g){return m===g||m!=m&&g!=g},qn=function(m,g){for(var _=m.length;_--;)if(En(m[_][0],g))return _;return-1};var OT=Array.prototype.splice;const MT=function(m){var g=this.__data__,_=qn(g,m);return!(_<0)&&(_==g.length-1?g.pop():OT.call(g,_,1),--this.size,!0)},NT=function(m){var g=this.__data__,_=qn(g,m);return _<0?void 0:g[_][1]},BT=function(m){return qn(this.__data__,m)>-1},FT=function(m,g){var _=this.__data__,T=qn(_,m);return T<0?(++this.size,_.push([m,g])):_[T][1]=g,this};function Xs(m){var g=-1,_=m==null?0:m.length;for(this.clear();++g<_;){var T=m[g];this.set(T[0],T[1])}}Xs.prototype.clear=hr,Xs.prototype.delete=MT,Xs.prototype.get=NT,Xs.prototype.has=BT,Xs.prototype.set=FT;const Ya=Xs,DT=function(){this.__data__=new Ya,this.size=0},zT=function(m){var g=this.__data__,_=g.delete(m);return this.size=g.size,_},HT=function(m){return this.__data__.get(m)},UT=function(m){return this.__data__.has(m)},kp=function(m){if(!d(m))return!1;var g=Vt(m);return g=="[object Function]"||g=="[object GeneratorFunction]"||g=="[object AsyncFunction]"||g=="[object Proxy]"},Ku=p["__core-js_shared__"];var xp=function(){var m=/[^.]+$/.exec(Ku&&Ku.keys&&Ku.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}();const $T=function(m){return!!xp&&xp in m};var WT=Function.prototype.toString;const Xi=function(m){if(m!=null){try{return WT.call(m)}catch{}try{return m+""}catch{}}return""};var jT=/^\[object .+?Constructor\]$/,qT=Function.prototype,GT=Object.prototype,KT=qT.toString,QT=GT.hasOwnProperty,JT=RegExp("^"+KT.call(QT).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const YT=function(m){return!(!d(m)||$T(m))&&(kp(m)?JT:jT).test(Xi(m))},XT=function(m,g){return m==null?void 0:m[g]},Zi=function(m,g){var _=XT(m,g);return YT(_)?_:void 0},fr=Zi(p,"Map"),mr=Zi(Object,"create"),ZT=function(){this.__data__=mr?mr(null):{},this.size=0},eE=function(m){var g=this.has(m)&&delete this.__data__[m];return this.size-=g?1:0,g};var tE=Object.prototype.hasOwnProperty;const nE=function(m){var g=this.__data__;if(mr){var _=g[m];return _==="__lodash_hash_undefined__"?void 0:_}return tE.call(g,m)?g[m]:void 0};var iE=Object.prototype.hasOwnProperty;const sE=function(m){var g=this.__data__;return mr?g[m]!==void 0:iE.call(g,m)},oE=function(m,g){var _=this.__data__;return this.size+=this.has(m)?0:1,_[m]=mr&&g===void 0?"__lodash_hash_undefined__":g,this};function Zs(m){var g=-1,_=m==null?0:m.length;for(this.clear();++g<_;){var T=m[g];this.set(T[0],T[1])}}Zs.prototype.clear=ZT,Zs.prototype.delete=eE,Zs.prototype.get=nE,Zs.prototype.has=sE,Zs.prototype.set=oE;const Tp=Zs,rE=function(){this.size=0,this.__data__={hash:new Tp,map:new(fr||Ya),string:new Tp}},aE=function(m){var g=typeof m;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?m!=="__proto__":m===null},Xa=function(m,g){var _=m.__data__;return aE(g)?_[typeof g=="string"?"string":"hash"]:_.map},lE=function(m){var g=Xa(this,m).delete(m);return this.size-=g?1:0,g},cE=function(m){return Xa(this,m).get(m)},uE=function(m){return Xa(this,m).has(m)},dE=function(m,g){var _=Xa(this,m),T=_.size;return _.set(m,g),this.size+=_.size==T?0:1,this};function eo(m){var g=-1,_=m==null?0:m.length;for(this.clear();++g<_;){var T=m[g];this.set(T[0],T[1])}}eo.prototype.clear=rE,eo.prototype.delete=lE,eo.prototype.get=cE,eo.prototype.has=uE,eo.prototype.set=dE;const hE=eo,fE=function(m,g){var _=this.__data__;if(_ instanceof Ya){var T=_.__data__;if(!fr||T.length<199)return T.push([m,g]),this.size=++_.size,this;_=this.__data__=new hE(T)}return _.set(m,g),this.size=_.size,this};function to(m){var g=this.__data__=new Ya(m);this.size=g.size}to.prototype.clear=DT,to.prototype.delete=zT,to.prototype.get=HT,to.prototype.has=UT,to.prototype.set=fE;const mE=to,gE=function(m,g){for(var _=-1,T=m==null?0:m.length;++_<T&&g(m[_],_,m)!==!1;);return m},Ep=function(){try{var m=Zi(Object,"defineProperty");return m({},"",{}),m}catch{}}(),Sp=function(m,g,_){g=="__proto__"&&Ep?Ep(m,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):m[g]=_};var pE=Object.prototype.hasOwnProperty;const Ap=function(m,g,_){var T=m[g];pE.call(m,g)&&En(T,_)&&(_!==void 0||g in m)||Sp(m,g,_)},Za=function(m,g,_,T){var D=!_;_||(_={});for(var q=-1,K=g.length;++q<K;){var X=g[q],De=T?T(_[X],m[X],X,_,m):void 0;De===void 0&&(De=m[X]),D?Sp(_,X,De):Ap(_,X,De)}return _},wE=function(m,g){for(var _=-1,T=Array(m);++_<m;)T[_]=g(_);return T},Ip=function(m){return dn(m)&&Vt(m)=="[object Arguments]"};var Pp=Object.prototype,bE=Pp.hasOwnProperty,vE=Pp.propertyIsEnumerable;const _E=Ip(function(){return arguments}())?Ip:function(m){return dn(m)&&bE.call(m,"callee")&&!vE.call(m,"callee")},Qu=Array.isArray,yE=function(){return!1};var Rp=e&&!e.nodeType&&e,Vp=Rp&&!0&&n&&!n.nodeType&&n,Lp=Vp&&Vp.exports===Rp?p.Buffer:void 0;const Op=(Lp?Lp.isBuffer:void 0)||yE;var CE=/^(?:0|[1-9]\d*)$/;const kE=function(m,g){var _=typeof m;return!!(g=g??9007199254740991)&&(_=="number"||_!="symbol"&&CE.test(m))&&m>-1&&m%1==0&&m<g},Mp=function(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=9007199254740991};var ge={};ge["[object Float32Array]"]=ge["[object Float64Array]"]=ge["[object Int8Array]"]=ge["[object Int16Array]"]=ge["[object Int32Array]"]=ge["[object Uint8Array]"]=ge["[object Uint8ClampedArray]"]=ge["[object Uint16Array]"]=ge["[object Uint32Array]"]=!0,ge["[object Arguments]"]=ge["[object Array]"]=ge["[object ArrayBuffer]"]=ge["[object Boolean]"]=ge["[object DataView]"]=ge["[object Date]"]=ge["[object Error]"]=ge["[object Function]"]=ge["[object Map]"]=ge["[object Number]"]=ge["[object Object]"]=ge["[object RegExp]"]=ge["[object Set]"]=ge["[object String]"]=ge["[object WeakMap]"]=!1;const xE=function(m){return dn(m)&&Mp(m.length)&&!!ge[Vt(m)]},Ju=function(m){return function(g){return m(g)}};var Np=e&&!e.nodeType&&e,gr=Np&&!0&&n&&!n.nodeType&&n,Yu=gr&&gr.exports===Np&&h.process;const no=function(){try{var m=gr&&gr.require&&gr.require("util").types;return m||Yu&&Yu.binding&&Yu.binding("util")}catch{}}();var Bp=no&&no.isTypedArray;const TE=Bp?Ju(Bp):xE;var EE=Object.prototype.hasOwnProperty;const Fp=function(m,g){var _=Qu(m),T=!_&&_E(m),D=!_&&!T&&Op(m),q=!_&&!T&&!D&&TE(m),K=_||T||D||q,X=K?wE(m.length,String):[],De=X.length;for(var Oe in m)!g&&!EE.call(m,Oe)||K&&(Oe=="length"||D&&(Oe=="offset"||Oe=="parent")||q&&(Oe=="buffer"||Oe=="byteLength"||Oe=="byteOffset")||kE(Oe,De))||X.push(Oe);return X};var SE=Object.prototype;const Xu=function(m){var g=m&&m.constructor;return m===(typeof g=="function"&&g.prototype||SE)},Dp=function(m,g){return function(_){return m(g(_))}},AE=Dp(Object.keys,Object);var IE=Object.prototype.hasOwnProperty;const PE=function(m){if(!Xu(m))return AE(m);var g=[];for(var _ in Object(m))IE.call(m,_)&&_!="constructor"&&g.push(_);return g},zp=function(m){return m!=null&&Mp(m.length)&&!kp(m)},Zu=function(m){return zp(m)?Fp(m):PE(m)},RE=function(m,g){return m&&Za(g,Zu(g),m)},VE=function(m){var g=[];if(m!=null)for(var _ in Object(m))g.push(_);return g};var LE=Object.prototype.hasOwnProperty;const OE=function(m){if(!d(m))return VE(m);var g=Xu(m),_=[];for(var T in m)(T!="constructor"||!g&&LE.call(m,T))&&_.push(T);return _},ed=function(m){return zp(m)?Fp(m,!0):OE(m)},ME=function(m,g){return m&&Za(g,ed(g),m)};var Hp=e&&!e.nodeType&&e,Up=Hp&&!0&&n&&!n.nodeType&&n,$p=Up&&Up.exports===Hp?p.Buffer:void 0,Wp=$p?$p.allocUnsafe:void 0;const NE=function(m,g){if(g)return m.slice();var _=m.length,T=Wp?Wp(_):new m.constructor(_);return m.copy(T),T},BE=function(m,g){var _=-1,T=m.length;for(g||(g=Array(T));++_<T;)g[_]=m[_];return g},FE=function(m,g){for(var _=-1,T=m==null?0:m.length,D=0,q=[];++_<T;){var K=m[_];g(K,_,m)&&(q[D++]=K)}return q},jp=function(){return[]};var DE=Object.prototype.propertyIsEnumerable,qp=Object.getOwnPropertySymbols;const td=qp?function(m){return m==null?[]:(m=Object(m),FE(qp(m),function(g){return DE.call(m,g)}))}:jp,zE=function(m,g){return Za(m,td(m),g)},Gp=function(m,g){for(var _=-1,T=g.length,D=m.length;++_<T;)m[D+_]=g[_];return m},nd=Dp(Object.getPrototypeOf,Object),Kp=Object.getOwnPropertySymbols?function(m){for(var g=[];m;)Gp(g,td(m)),m=nd(m);return g}:jp,HE=function(m,g){return Za(m,Kp(m),g)},Qp=function(m,g,_){var T=g(m);return Qu(m)?T:Gp(T,_(m))},UE=function(m){return Qp(m,Zu,td)},$E=function(m){return Qp(m,ed,Kp)},id=Zi(p,"DataView"),sd=Zi(p,"Promise"),od=Zi(p,"Set"),rd=Zi(p,"WeakMap");var Jp="[object Map]",Yp="[object Promise]",Xp="[object Set]",Zp="[object WeakMap]",ew="[object DataView]",WE=Xi(id),jE=Xi(fr),qE=Xi(sd),GE=Xi(od),KE=Xi(rd),es=Vt;(id&&es(new id(new ArrayBuffer(1)))!=ew||fr&&es(new fr)!=Jp||sd&&es(sd.resolve())!=Yp||od&&es(new od)!=Xp||rd&&es(new rd)!=Zp)&&(es=function(m){var g=Vt(m),_=g=="[object Object]"?m.constructor:void 0,T=_?Xi(_):"";if(T)switch(T){case WE:return ew;case jE:return Jp;case qE:return Yp;case GE:return Xp;case KE:return Zp}return g});const ad=es;var QE=Object.prototype.hasOwnProperty;const JE=function(m){var g=m.length,_=new m.constructor(g);return g&&typeof m[0]=="string"&&QE.call(m,"index")&&(_.index=m.index,_.input=m.input),_},tw=p.Uint8Array,ld=function(m){var g=new m.constructor(m.byteLength);return new tw(g).set(new tw(m)),g},YE=function(m,g){var _=g?ld(m.buffer):m.buffer;return new m.constructor(_,m.byteOffset,m.byteLength)};var XE=/\w*$/;const ZE=function(m){var g=new m.constructor(m.source,XE.exec(m));return g.lastIndex=m.lastIndex,g};var nw=E?E.prototype:void 0,iw=nw?nw.valueOf:void 0;const eS=function(m){return iw?Object(iw.call(m)):{}},tS=function(m,g){var _=g?ld(m.buffer):m.buffer;return new m.constructor(_,m.byteOffset,m.length)},nS=function(m,g,_){var T=m.constructor;switch(g){case"[object ArrayBuffer]":return ld(m);case"[object Boolean]":case"[object Date]":return new T(+m);case"[object DataView]":return YE(m,_);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return tS(m,_);case"[object Map]":case"[object Set]":return new T;case"[object Number]":case"[object String]":return new T(m);case"[object RegExp]":return ZE(m);case"[object Symbol]":return eS(m)}};var sw=Object.create;const iS=function(){function m(){}return function(g){if(!d(g))return{};if(sw)return sw(g);m.prototype=g;var _=new m;return m.prototype=void 0,_}}(),sS=function(m){return typeof m.constructor!="function"||Xu(m)?{}:iS(nd(m))},oS=function(m){return dn(m)&&ad(m)=="[object Map]"};var ow=no&&no.isMap;const rS=ow?Ju(ow):oS,aS=function(m){return dn(m)&&ad(m)=="[object Set]"};var rw=no&&no.isSet;const lS=rw?Ju(rw):aS;var aw="[object Arguments]",lw="[object Function]",cw="[object Object]",he={};he[aw]=he["[object Array]"]=he["[object ArrayBuffer]"]=he["[object DataView]"]=he["[object Boolean]"]=he["[object Date]"]=he["[object Float32Array]"]=he["[object Float64Array]"]=he["[object Int8Array]"]=he["[object Int16Array]"]=he["[object Int32Array]"]=he["[object Map]"]=he["[object Number]"]=he[cw]=he["[object RegExp]"]=he["[object Set]"]=he["[object String]"]=he["[object Symbol]"]=he["[object Uint8Array]"]=he["[object Uint8ClampedArray]"]=he["[object Uint16Array]"]=he["[object Uint32Array]"]=!0,he["[object Error]"]=he[lw]=he["[object WeakMap]"]=!1;const cS=function m(g,_,T,D,q,K){var X,De=1&_,Oe=2&_,el=4&_;if(T&&(X=q?T(g,D,q,K):T(g)),X!==void 0)return X;if(!d(g))return g;var ns=Qu(g);if(ns){if(X=JE(g),!De)return BE(g,X)}else{var Sn=ad(g),io=Sn==lw||Sn=="[object GeneratorFunction]";if(Op(g))return NE(g,De);if(Sn==cw||Sn==aw||io&&!q){if(X=Oe||io?{}:sS(g),!De)return Oe?HE(g,ME(X,g)):zE(g,RE(X,g))}else{if(!he[Sn])return q?g:{};X=nS(g,Sn,De)}}K||(K=new mE);var tl=K.get(g);if(tl)return tl;K.set(g,X),lS(g)?g.forEach(function(Lt){X.add(m(Lt,_,T,Lt,g,K))}):rS(g)&&g.forEach(function(Lt,Gn){X.set(Gn,m(Lt,_,T,Gn,g,K))});var wr=ns?void 0:(el?Oe?$E:UE:Oe?ed:Zu)(g);return gE(wr||g,function(Lt,Gn){wr&&(Lt=g[Gn=Lt]),Ap(X,Gn,m(Lt,_,T,Gn,g,K))}),X},uS=function(m,g){return cS(m,5,g=typeof g=="function"?g:void 0)};var dS=Function.prototype,hS=Object.prototype,uw=dS.toString,fS=hS.hasOwnProperty,mS=uw.call(Object);const gS=function(m){if(!dn(m)||Vt(m)!="[object Object]")return!1;var g=nd(m);if(g===null)return!0;var _=fS.call(g,"constructor")&&g.constructor;return typeof _=="function"&&_ instanceof _&&uw.call(_)==mS},pS=function(m){return dn(m)&&m.nodeType===1&&!gS(m)};function cd(m,g=new Set){const _=[m],T=new Set;let D=0;for(;_.length>D;){const q=_[D++];if(!(T.has(q)||wS(q)||g.has(q)))if(T.add(q),q[Symbol.iterator])try{for(const K of q)_.push(K)}catch{}else for(const K in q)K!=="defaultValue"&&_.push(q[K])}return T}function wS(m){const g=Object.prototype.toString.call(m),_=typeof m;return _==="number"||_==="boolean"||_==="string"||_==="symbol"||_==="function"||g==="[object Date]"||g==="[object RegExp]"||g==="[object Module]"||m==null||m._watchdogExcluded===!0||m instanceof EventTarget||m instanceof Event}function dw(m,g,_=new Set){if(m===g&&typeof(T=m)=="object"&&T!==null)return!0;var T;const D=cd(m,_),q=cd(g,_);for(const K of D)if(q.has(K))return!0;return!1}class hw{constructor(g){if(this.crashes=[],this.state="initializing",this._crashNumberLimit=typeof g.crashNumberLimit=="number"?g.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod=typeof g.minimumNonErrorTimePeriod=="number"?g.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=_=>{const T=_.error||_.reason;T instanceof Error&&this._handleError(T,_)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(g){this._creator=g}setDestructor(g){this._destructor=g}destroy(){this._stopErrorHandling(),this._listeners={}}on(g,_){this._listeners[g]||(this._listeners[g]=[]),this._listeners[g].push(_)}off(g,_){this._listeners[g]=this._listeners[g].filter(T=>T!==_)}_fire(g,..._){const T=this._listeners[g]||[];for(const D of T)D.apply(this,[null,..._])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(g,_){if(this._shouldReactToError(g)){this.crashes.push({message:g.message,stack:g.stack,filename:_.filename,lineno:_.lineno,colno:_.colno,date:this._now()});const T=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:g,causesRestart:T}),T?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(g){return g.is&&g.is("CKEditorError")&&g.context!==void 0&&g.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(g)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}class fw extends hw{constructor(g,_={}){super(_),this._editor=null,this._throttledSave=jn(this._save.bind(this),typeof _.saveInterval=="number"?_.saveInterval:5e3),this._creator=(T,D)=>g.create(T,D),this._destructor=T=>T.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(g=>{console.error("An error happened during the editor destroying.",g)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const g=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,g,g.context)}}).then(()=>{this._fire("restart")})}create(g=this._elementOrData,_=this._config,T){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=g,this._config=this._cloneEditorConfiguration(_)||{},this._config.context=T,this._creator(g,this._config))).then(D=>{this._editor=D,D.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=D.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const g=this._editor;return this._editor=null,g.model.document.off("change:data",this._throttledSave),this._destructor(g)})}_save(){const g=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=g}catch(_){console.error(_,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(g){this._excludedProps=g}_getData(){const g={};for(const _ of this._editor.model.document.getRootNames())g[_]=this._editor.data.get({rootName:_});return g}_isErrorComingFromThisItem(g){return dw(this._editor,g.context,this._excludedProps)}_cloneEditorConfiguration(g){return uS(g,(_,T)=>pS(_)||T==="context"?_:void 0)}}const rt=new Array(256).fill("").map((m,g)=>("0"+g.toString(16)).slice(-2)),pr=Symbol("MainQueueId");class mw extends hw{constructor(g,_={}){super(_),this._watchdogs=new Map,this._watchdogConfig=_,this._context=null,this._contextProps=new Set,this._actionQueues=new bS,this._creator=T=>g.create(T),this._destructor=T=>T.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}get context(){return this._context}create(g={}){return this._actionQueues.enqueue(pr,()=>(this._contextConfig=g,this._create()))}getItem(g){return this._getWatchdog(g)._item}getItemState(g){return this._getWatchdog(g).state}add(g){const _=gw(g);return Promise.all(_.map(T=>this._actionQueues.enqueue(T.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let D;if(this._watchdogs.has(T.id))throw new Error(`Item with the given id is already added: '${T.id}'.`);if(T.type==="editor")return D=new fw(this._watchdogConfig),D.setCreator(T.creator),D._setExcludedProperties(this._contextProps),T.destructor&&D.setDestructor(T.destructor),this._watchdogs.set(T.id,D),D.on("error",(q,{error:K,causesRestart:X})=>{this._fire("itemError",{itemId:T.id,error:K}),X&&this._actionQueues.enqueue(T.id,()=>new Promise(De=>{D.on("restart",function Oe(){D.off("restart",Oe),this._fire("itemRestart",{itemId:T.id}),De()}.bind(this))}))}),D.create(T.sourceElementOrData,T.config,this._context);throw new Error(`Not supported item type: '${T.type}'.`)})))}remove(g){const _=gw(g);return Promise.all(_.map(T=>this._actionQueues.enqueue(T,()=>{const D=this._getWatchdog(T);return this._watchdogs.delete(T),D.destroy()})))}destroy(){return this._actionQueues.enqueue(pr,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(pr,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(g=>{console.error("An error happened during destroying the context or items.",g)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(g=>(this._context=g,this._contextProps=cd(this._context),Promise.all(Array.from(this._watchdogs.values()).map(_=>(_._setExcludedProperties(this._contextProps),_.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const g=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(_=>_.destroy())).then(()=>this._destructor(g))})}_getWatchdog(g){const _=this._watchdogs.get(g);if(!_)throw new Error(`Item with the given id was not registered: ${g}.`);return _}_isErrorComingFromThisItem(g){for(const _ of this._watchdogs.values())if(_._isErrorComingFromThisItem(g))return!1;return dw(this._context,g.context)}}class bS{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._actions=new WeakMap,this._lastActionId=0,this._activeActions=0}onEmpty(g){this._onEmptyCallbacks.push(g)}enqueue(g,_){const T=g===pr;this._activeActions++,this._queues.get(g)||this._queues.set(g,Promise.resolve());const D=(T?Promise.all(this._queues.values()):Promise.all([this._queues.get(pr),this._queues.get(g)])).then(_),q=D.catch(()=>{});return this._queues.set(g,q),D.finally(()=>{this._activeActions--,this._queues.get(g)===q&&this._activeActions===0&&this._onEmptyCallbacks.forEach(K=>K())})}}function gw(m){return Array.isArray(m)?m:[m]}const pw=l().createContext("contextWatchdog");class ud extends l().Component{constructor(g,_){super(g,_),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}async shouldComponentUpdate(g){return g.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(g.config)),g.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(g.config),!0):this.props.children!==g.children}render(){return l().createElement(pw.Provider,{value:this.contextWatchdog},this.props.children)}async componentWillUnmount(){await this._destroyContext()}async _initializeContextWatchdog(g){this.contextWatchdog=new mw(this.props.context),this.contextWatchdog.on("error",(_,T)=>{this.props.onError(T.error,{phase:"runtime",willContextRestart:T.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(g).catch(_=>{this.props.onError(_,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}ud.defaultProps={isLayoutReady:!0,onError:(m,g)=>console.error(m,g)},ud.propTypes={id:u().string,isLayoutReady:u().bool,context:u().func,config:u().object,onReady:u().func,onError:u().func};const dd="Lock from React integration (@ckeditor/ckeditor5-react)";class ts extends l().Component{constructor(g){super(g),this.editorDestructionInProgress=null,this.domContainer=l().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:_}=window;if(_){const[T]=_.split(".").map(Number);T<34&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 34 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(g){return!!this.editor&&(g.id!==this.props.id||(this._shouldUpdateEditor(g)&&this.editor.setData(g.data),"disabled"in g&&(g.disabled?this.editor.enableReadOnlyMode(dd):this.editor.disableReadOnlyMode(dd)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return l().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.watchdog||(this.context instanceof mw?this.watchdog=new vS(this.context):this.watchdog=new ts._EditorWatchdog(this.props.editor),this.watchdog.setCreator((g,_)=>this._createEditor(g,_)),this.watchdog.on("error",(g,{error:_,causesRestart:T})=>{this.props.onError(_,{phase:"runtime",willEditorRestart:T})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(g=>this.props.onError(g,{phase:"initialization",willEditorRestart:!1})))}_createEditor(g,_){return this.props.editor.create(g,_).then(T=>{"disabled"in this.props&&this.props.disabled&&T.enableReadOnlyMode(dd);const D=T.model.document,q=T.editing.view.document;return D.on("change:data",K=>{this.props.onChange&&this.props.onChange(K,T)}),q.on("focus",K=>{this.props.onFocus&&this.props.onFocus(K,T)}),q.on("blur",K=>{this.props.onBlur&&this.props.onBlur(K,T)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(T)}),T})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(g=>{setTimeout(()=>{this.watchdog?this.watchdog.destroy().then(()=>{this.watchdog=null,g()}):g()})})}_shouldUpdateEditor(g){return this.props.data!==g.data&&this.editor.getData()!==g.data}_getConfig(){return this.props.data&&this.props.config.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),{...this.props.config,initialData:this.props.config.initialData||this.props.data||""}}}class vS{constructor(g){this._contextWatchdog=g,this._id=function(){const _=4294967296*Math.random()>>>0,T=4294967296*Math.random()>>>0,D=4294967296*Math.random()>>>0,q=4294967296*Math.random()>>>0;return"e"+rt[_>>0&255]+rt[_>>8&255]+rt[_>>16&255]+rt[_>>24&255]+rt[T>>0&255]+rt[T>>8&255]+rt[T>>16&255]+rt[T>>24&255]+rt[D>>0&255]+rt[D>>8&255]+rt[D>>16&255]+rt[D>>24&255]+rt[q>>0&255]+rt[q>>8&255]+rt[q>>16&255]+rt[q>>24&255]}()}setCreator(g){this._creator=g}create(g,_){return this._contextWatchdog.add({sourceElementOrData:g,config:_,creator:this._creator,id:this._id,type:"editor"})}on(g,_){this._contextWatchdog.on("itemError",(T,{itemId:D,causesRestart:q,error:K})=>{D===this._id&&_(null,{error:K,causesRestart:q})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}ts.contextType=pw,ts.propTypes={editor:u().func.isRequired,data:u().string,config:u().object,onChange:u().func,onReady:u().func,onFocus:u().func,onBlur:u().func,onError:u().func,disabled:u().bool,onInit:(m,g)=>{if(m[g])return new Error('The "onInit" property is not supported anymore by the CKEditor component. Use the "onReady" property instead.')}},ts.defaultProps={config:{},onError:(m,g)=>console.error(m,g)},ts._EditorWatchdog=fw})(),r})())})(QG,iu);var su={},JG={get exports(){return su},set exports(n){su=n}},qu={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YG=Ss,XG=Symbol.for("react.element"),ZG=Symbol.for("react.fragment"),eK=Object.prototype.hasOwnProperty,tK=YG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nK={key:!0,ref:!0,__self:!0,__source:!0};function LT(n,e,t){var i,s={},o=null,r=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(r=e.ref);for(i in e)eK.call(e,i)&&!nK.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:XG,type:n,key:o,ref:r,props:s,_owner:tK.current}}qu.Fragment=ZG;qu.jsx=LT;qu.jsxs=LT;(function(n){n.exports=qu})(JG);const Es=su.jsx,iK=su.jsxs,sK={plugins:[KB,xF,SF,G9,Pz,Oz,yH,CH,EH,LH,WH,wU,r$,Ka,hq,TG,VB,oF,r2,QF,tD,uD,SD,OD,DD,GD,r9,z9,tz,cz,pz,iH,cH,M2,IH,YH,qU,A$,N$,vW,_W,TW,PW,DW,jW,QW,ZW,ij,_q,Uq,oG,xG,PG,HB,$G,GG,KG],toolbar:{items:["undo","redo","|","exportPdf","exportWord","importWord","|","wproofreader","findAndReplace","selectAll","|","heading","|","removeFormat","bold","italic","strikethrough","underline","code","subscript","superscript","|","specialCharacters","horizontalLine","pageBreak","|","-","highlight","fontSize","fontFamily","fontColor","fontBackgroundColor","|","link","blockQuote","insertTable","uploadImage","ckbox","mediaEmbed","codeBlock","htmlEmbed","|","bulletedList","numberedList","todoList","|","outdent","indent","alignment","|","textPartLanguage","|","sourceEditing"],shouldNotGroupWhenFull:!0},fontFamily:{supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22],supportAllValues:!0},htmlEmbed:{showPreviews:!0},image:{styles:["alignCenter","alignLeft","alignRight"],resizeOptions:[{name:"resizeImage:original",label:"Original",value:null},{name:"resizeImage:50",label:"50%",value:"50"},{name:"resizeImage:75",label:"75%",value:"75"}],toolbar:["imageTextAlternative","toggleImageCaption","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","imageStyle:side","|","resizeImage"],insert:{integrations:["insertImageViaUrl"]}},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties","toggleTableCaption"]}},oK=()=>{const[n,e]=Ss.useState("");return iK("div",{className:"container",children:[Es(iu.CKEditor,{editor:sD,config:sK,data:"",onReady:t=>{console.log("Editor is ready to use!",t)},onChange:(t,i)=>{const s=i.getData();console.log({event:t,editor:i,data:s}),e(s)},onBlur:(t,i)=>{console.log("Blur.",i)},onFocus:(t,i)=>{console.log("Focus.",i)}}),Es("div",{className:"html-preview-container",children:Es("div",{className:"html-preview",dangerouslySetInnerHTML:{__html:n}})})]})};function rK(){return Es("div",{className:"App",children:Es(oK,{})})}Ah.createRoot(document.getElementById("root")).render(Es(FS.StrictMode,{children:Es(rK,{})}))});export default aK();
